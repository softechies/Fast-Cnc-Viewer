var FF=Object.defineProperty;var $b=t=>{throw TypeError(t)};var UF=(t,e,n)=>e in t?FF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>UF(t,typeof e!="symbol"?e+"":e,n),Jg=(t,e,n)=>e.has(t)||$b("Cannot "+n);var G=(t,e,n)=>(Jg(t,e,"read from private field"),n?n.call(t):e.get(t)),Je=(t,e,n)=>e.has(t)?$b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ze=(t,e,n,r)=>(Jg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),mt=(t,e,n)=>(Jg(t,e,"access private method"),n);var Jf=(t,e,n,r)=>({set _(i){ze(t,e,i,n)},get _(){return G(t,e,r)}});function BF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function WN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $N={exports:{}},Ym={},qN={exports:{}},bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf=Symbol.for("react.element"),VF=Symbol.for("react.portal"),HF=Symbol.for("react.fragment"),GF=Symbol.for("react.strict_mode"),WF=Symbol.for("react.profiler"),$F=Symbol.for("react.provider"),qF=Symbol.for("react.context"),XF=Symbol.for("react.forward_ref"),ZF=Symbol.for("react.suspense"),KF=Symbol.for("react.memo"),YF=Symbol.for("react.lazy"),qb=Symbol.iterator;function QF(t){return t===null||typeof t!="object"?null:(t=qb&&t[qb]||t["@@iterator"],typeof t=="function"?t:null)}var XN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZN=Object.assign,KN={};function _u(t,e,n){this.props=t,this.context=e,this.refs=KN,this.updater=n||XN}_u.prototype.isReactComponent={};_u.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_u.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YN(){}YN.prototype=_u.prototype;function f0(t,e,n){this.props=t,this.context=e,this.refs=KN,this.updater=n||XN}var h0=f0.prototype=new YN;h0.constructor=f0;ZN(h0,_u.prototype);h0.isPureReactComponent=!0;var Xb=Array.isArray,QN=Object.prototype.hasOwnProperty,p0={current:null},JN={key:!0,ref:!0,__self:!0,__source:!0};function eP(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)QN.call(e,r)&&!JN.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Mf,type:t,key:s,ref:a,props:i,_owner:p0.current}}function JF(t,e){return{$$typeof:Mf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function m0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mf}function e3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zb=/\/+/g;function ev(t,e){return typeof t=="object"&&t!==null&&t.key!=null?e3(""+t.key):e.toString(36)}function cp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Mf:case VF:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+ev(a,0):r,Xb(i)?(n="",t!=null&&(n=t.replace(Zb,"$&/")+"/"),cp(i,e,n,"",function(u){return u})):i!=null&&(m0(i)&&(i=JF(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Zb,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Xb(t))for(var o=0;o<t.length;o++){s=t[o];var c=r+ev(s,o);a+=cp(s,e,n,c,i)}else if(c=QF(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=r+ev(s,o++),a+=cp(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function eh(t,e,n){if(t==null)return t;var r=[],i=0;return cp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function t3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _r={current:null},up={transition:null},n3={ReactCurrentDispatcher:_r,ReactCurrentBatchConfig:up,ReactCurrentOwner:p0};function tP(){throw Error("act(...) is not supported in production builds of React.")}bt.Children={map:eh,forEach:function(t,e,n){eh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return eh(t,function(){e++}),e},toArray:function(t){return eh(t,function(e){return e})||[]},only:function(t){if(!m0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};bt.Component=_u;bt.Fragment=HF;bt.Profiler=WF;bt.PureComponent=f0;bt.StrictMode=GF;bt.Suspense=ZF;bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n3;bt.act=tP;bt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ZN({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=p0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)QN.call(e,c)&&!JN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Mf,type:t.type,key:i,ref:s,props:r,_owner:a}};bt.createContext=function(t){return t={$$typeof:qF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$F,_context:t},t.Consumer=t};bt.createElement=eP;bt.createFactory=function(t){var e=eP.bind(null,t);return e.type=t,e};bt.createRef=function(){return{current:null}};bt.forwardRef=function(t){return{$$typeof:XF,render:t}};bt.isValidElement=m0;bt.lazy=function(t){return{$$typeof:YF,_payload:{_status:-1,_result:t},_init:t3}};bt.memo=function(t,e){return{$$typeof:KF,type:t,compare:e===void 0?null:e}};bt.startTransition=function(t){var e=up.transition;up.transition={};try{t()}finally{up.transition=e}};bt.unstable_act=tP;bt.useCallback=function(t,e){return _r.current.useCallback(t,e)};bt.useContext=function(t){return _r.current.useContext(t)};bt.useDebugValue=function(){};bt.useDeferredValue=function(t){return _r.current.useDeferredValue(t)};bt.useEffect=function(t,e){return _r.current.useEffect(t,e)};bt.useId=function(){return _r.current.useId()};bt.useImperativeHandle=function(t,e,n){return _r.current.useImperativeHandle(t,e,n)};bt.useInsertionEffect=function(t,e){return _r.current.useInsertionEffect(t,e)};bt.useLayoutEffect=function(t,e){return _r.current.useLayoutEffect(t,e)};bt.useMemo=function(t,e){return _r.current.useMemo(t,e)};bt.useReducer=function(t,e,n){return _r.current.useReducer(t,e,n)};bt.useRef=function(t){return _r.current.useRef(t)};bt.useState=function(t){return _r.current.useState(t)};bt.useSyncExternalStore=function(t,e,n){return _r.current.useSyncExternalStore(t,e,n)};bt.useTransition=function(){return _r.current.useTransition()};bt.version="18.3.1";qN.exports=bt;var x=qN.exports;const tn=WN(x),nP=BF({__proto__:null,default:tn},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3=x,i3=Symbol.for("react.element"),s3=Symbol.for("react.fragment"),a3=Object.prototype.hasOwnProperty,o3=r3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l3={key:!0,ref:!0,__self:!0,__source:!0};function rP(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)a3.call(e,r)&&!l3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:i3,type:t,key:s,ref:a,props:i,_owner:o3.current}}Ym.Fragment=s3;Ym.jsx=rP;Ym.jsxs=rP;$N.exports=Ym;var l=$N.exports,iP={exports:{}},Jr={},sP={exports:{}},aP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,V){var ee=z.length;z.push(V);e:for(;0<ee;){var de=ee-1>>>1,Ee=z[de];if(0<i(Ee,V))z[de]=V,z[ee]=Ee,ee=de;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],ee=z.pop();if(ee!==V){z[0]=ee;e:for(var de=0,Ee=z.length,Ne=Ee>>>1;de<Ne;){var ne=2*(de+1)-1,fe=z[ne],xe=ne+1,ie=z[xe];if(0>i(fe,ee))xe<Ee&&0>i(ie,fe)?(z[de]=ie,z[xe]=ee,de=xe):(z[de]=fe,z[ne]=ee,de=ne);else if(xe<Ee&&0>i(ie,ee))z[de]=ie,z[xe]=ee,de=xe;else break e}}return V}function i(z,V){var ee=z.sortIndex-V.sortIndex;return ee!==0?ee:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,f=null,h=3,m=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=z)r(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(u)}}function b(z){if(v=!1,w(z),!y)if(n(c)!==null)y=!0,U(S);else{var V=n(u);V!==null&&X(b,V.startTime-z)}}function S(z,V){y=!1,v&&(v=!1,p(P),P=-1),m=!0;var ee=h;try{for(w(V),f=n(c);f!==null&&(!(f.expirationTime>V)||z&&!L());){var de=f.callback;if(typeof de=="function"){f.callback=null,h=f.priorityLevel;var Ee=de(f.expirationTime<=V);V=t.unstable_now(),typeof Ee=="function"?f.callback=Ee:f===n(c)&&r(c),w(V)}else r(c);f=n(c)}if(f!==null)var Ne=!0;else{var ne=n(u);ne!==null&&X(b,ne.startTime-V),Ne=!1}return Ne}finally{f=null,h=ee,m=!1}}var M=!1,C=null,P=-1,A=5,E=-1;function L(){return!(t.unstable_now()-E<A)}function O(){if(C!==null){var z=t.unstable_now();E=z;var V=!0;try{V=C(!0,z)}finally{V?k():(M=!1,C=null)}}else M=!1}var k;if(typeof _=="function")k=function(){_(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,$=j.port2;j.port1.onmessage=O,k=function(){$.postMessage(null)}}else k=function(){g(O,0)};function U(z){C=z,M||(M=!0,k())}function X(z,V){P=g(function(){z(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,U(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var ee=h;h=V;try{return z()}finally{h=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ee=h;h=z;try{return V()}finally{h=ee}},t.unstable_scheduleCallback=function(z,V,ee){var de=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?de+ee:de):ee=de,z){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ee+Ee,z={id:d++,callback:V,priorityLevel:z,startTime:ee,expirationTime:Ee,sortIndex:-1},ee>de?(z.sortIndex=ee,e(u,z),n(c)===null&&z===n(u)&&(v?(p(P),P=-1):v=!0,X(b,ee-de))):(z.sortIndex=Ee,e(c,z),y||m||(y=!0,U(S))),z},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(z){var V=h;return function(){var ee=h;h=V;try{return z.apply(this,arguments)}finally{h=ee}}}})(aP);sP.exports=aP;var c3=sP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3=x,Qr=c3;function _e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oP=new Set,Pd={};function _l(t,e){Jc(t,e),Jc(t+"Capture",e)}function Jc(t,e){for(Pd[t]=e,t=0;t<e.length;t++)oP.add(e[t])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ly=Object.prototype.hasOwnProperty,d3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kb={},Yb={};function f3(t){return Ly.call(Yb,t)?!0:Ly.call(Kb,t)?!1:d3.test(t)?Yb[t]=!0:(Kb[t]=!0,!1)}function h3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function p3(t,e,n,r){if(e===null||typeof e>"u"||h3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qn[t]=new wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qn[e]=new wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qn[t]=new wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qn[t]=new wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qn[t]=new wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qn[t]=new wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qn[t]=new wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qn[t]=new wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qn[t]=new wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var g0=/[\-:]([a-z])/g;function v0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(g0,v0);qn[e]=new wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(g0,v0);qn[e]=new wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(g0,v0);qn[e]=new wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qn[t]=new wr(t,1,!1,t.toLowerCase(),null,!1,!1)});qn.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qn[t]=new wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function y0(t,e,n,r){var i=qn.hasOwnProperty(e)?qn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(p3(e,n,i,r)&&(n=null),r||i===null?f3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ia=u3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,th=Symbol.for("react.element"),ac=Symbol.for("react.portal"),oc=Symbol.for("react.fragment"),x0=Symbol.for("react.strict_mode"),Iy=Symbol.for("react.profiler"),lP=Symbol.for("react.provider"),cP=Symbol.for("react.context"),_0=Symbol.for("react.forward_ref"),jy=Symbol.for("react.suspense"),zy=Symbol.for("react.suspense_list"),w0=Symbol.for("react.memo"),xa=Symbol.for("react.lazy"),uP=Symbol.for("react.offscreen"),Qb=Symbol.iterator;function ku(t){return t===null||typeof t!="object"?null:(t=Qb&&t[Qb]||t["@@iterator"],typeof t=="function"?t:null)}var an=Object.assign,tv;function nd(t){if(tv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tv=e&&e[1]||""}return`
`+tv+t}var nv=!1;function rv(t,e){if(!t||nv)return"";nv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{nv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nd(t):""}function m3(t){switch(t.tag){case 5:return nd(t.type);case 16:return nd("Lazy");case 13:return nd("Suspense");case 19:return nd("SuspenseList");case 0:case 2:case 15:return t=rv(t.type,!1),t;case 11:return t=rv(t.type.render,!1),t;case 1:return t=rv(t.type,!0),t;default:return""}}function Oy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oc:return"Fragment";case ac:return"Portal";case Iy:return"Profiler";case x0:return"StrictMode";case jy:return"Suspense";case zy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cP:return(t.displayName||"Context")+".Consumer";case lP:return(t._context.displayName||"Context")+".Provider";case _0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w0:return e=t.displayName||null,e!==null?e:Oy(t.type)||"Memo";case xa:e=t._payload,t=t._init;try{return Oy(t(e))}catch{}}return null}function g3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oy(e);case 8:return e===x0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function eo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function v3(t){var e=dP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nh(t){t._valueTracker||(t._valueTracker=v3(t))}function fP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fy(t,e){var n=e.checked;return an({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=eo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hP(t,e){e=e.checked,e!=null&&y0(t,"checked",e,!1)}function Uy(t,e){hP(t,e);var n=eo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?By(t,e.type,n):e.hasOwnProperty("defaultValue")&&By(t,e.type,eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function By(t,e,n){(e!=="number"||zp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rd=Array.isArray;function wc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+eo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_e(91));return an({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_e(92));if(rd(n)){if(1<n.length)throw Error(_e(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:eo(n)}}function pP(t,e){var n=eo(e.value),r=eo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rh,gP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rh=rh||document.createElement("div"),rh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var md={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y3=["Webkit","ms","Moz","O"];Object.keys(md).forEach(function(t){y3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),md[e]=md[t]})});function vP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||md.hasOwnProperty(t)&&md[t]?(""+e).trim():e+"px"}function yP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var x3=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gy(t,e){if(e){if(x3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_e(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_e(62))}}function Wy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $y=null;function b0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qy=null,bc=null,Sc=null;function rS(t){if(t=Af(t)){if(typeof qy!="function")throw Error(_e(280));var e=t.stateNode;e&&(e=ng(e),qy(t.stateNode,t.type,e))}}function xP(t){bc?Sc?Sc.push(t):Sc=[t]:bc=t}function _P(){if(bc){var t=bc,e=Sc;if(Sc=bc=null,rS(t),e)for(t=0;t<e.length;t++)rS(e[t])}}function wP(t,e){return t(e)}function bP(){}var iv=!1;function SP(t,e,n){if(iv)return t(e,n);iv=!0;try{return wP(t,e,n)}finally{iv=!1,(bc!==null||Sc!==null)&&(bP(),_P())}}function Dd(t,e){var n=t.stateNode;if(n===null)return null;var r=ng(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_e(231,e,typeof n));return n}var Xy=!1;if(Zs)try{var Lu={};Object.defineProperty(Lu,"passive",{get:function(){Xy=!0}}),window.addEventListener("test",Lu,Lu),window.removeEventListener("test",Lu,Lu)}catch{Xy=!1}function _3(t,e,n,r,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var gd=!1,Op=null,Fp=!1,Zy=null,w3={onError:function(t){gd=!0,Op=t}};function b3(t,e,n,r,i,s,a,o,c){gd=!1,Op=null,_3.apply(w3,arguments)}function S3(t,e,n,r,i,s,a,o,c){if(b3.apply(this,arguments),gd){if(gd){var u=Op;gd=!1,Op=null}else throw Error(_e(198));Fp||(Fp=!0,Zy=u)}}function wl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function EP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iS(t){if(wl(t)!==t)throw Error(_e(188))}function E3(t){var e=t.alternate;if(!e){if(e=wl(t),e===null)throw Error(_e(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return iS(i),t;if(s===r)return iS(i),e;s=s.sibling}throw Error(_e(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?t:e}function MP(t){return t=E3(t),t!==null?TP(t):null}function TP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=TP(t);if(e!==null)return e;t=t.sibling}return null}var CP=Qr.unstable_scheduleCallback,sS=Qr.unstable_cancelCallback,M3=Qr.unstable_shouldYield,T3=Qr.unstable_requestPaint,xn=Qr.unstable_now,C3=Qr.unstable_getCurrentPriorityLevel,S0=Qr.unstable_ImmediatePriority,AP=Qr.unstable_UserBlockingPriority,Up=Qr.unstable_NormalPriority,A3=Qr.unstable_LowPriority,NP=Qr.unstable_IdlePriority,Qm=null,cs=null;function N3(t){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Qm,t,void 0,(t.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:D3,P3=Math.log,R3=Math.LN2;function D3(t){return t>>>=0,t===0?32:31-(P3(t)/R3|0)|0}var ih=64,sh=4194304;function id(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=id(o):(s&=a,s!==0&&(r=id(s)))}else a=n&~i,a!==0?r=id(a):s!==0&&(r=id(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ii(e),i=1<<n,r|=t[n],e&=~i;return r}function k3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ii(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=k3(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function Ky(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function PP(){var t=ih;return ih<<=1,!(ih&4194240)&&(ih=64),t}function sv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ii(e),t[e]=n}function I3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ii(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function E0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ii(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Vt=0;function RP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DP,M0,kP,LP,IP,Yy=!1,ah=[],Ua=null,Ba=null,Va=null,kd=new Map,Ld=new Map,ba=[],j3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aS(t,e){switch(t){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":kd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ld.delete(e.pointerId)}}function Iu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Af(e),e!==null&&M0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function z3(t,e,n,r,i){switch(e){case"focusin":return Ua=Iu(Ua,t,e,n,r,i),!0;case"dragenter":return Ba=Iu(Ba,t,e,n,r,i),!0;case"mouseover":return Va=Iu(Va,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return kd.set(s,Iu(kd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ld.set(s,Iu(Ld.get(s)||null,t,e,n,r,i)),!0}return!1}function jP(t){var e=Oo(t.target);if(e!==null){var n=wl(e);if(n!==null){if(e=n.tag,e===13){if(e=EP(n),e!==null){t.blockedOn=e,IP(t.priority,function(){kP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$y=r,n.target.dispatchEvent(r),$y=null}else return e=Af(n),e!==null&&M0(e),t.blockedOn=n,!1;e.shift()}return!0}function oS(t,e,n){dp(t)&&n.delete(e)}function O3(){Yy=!1,Ua!==null&&dp(Ua)&&(Ua=null),Ba!==null&&dp(Ba)&&(Ba=null),Va!==null&&dp(Va)&&(Va=null),kd.forEach(oS),Ld.forEach(oS)}function ju(t,e){t.blockedOn===e&&(t.blockedOn=null,Yy||(Yy=!0,Qr.unstable_scheduleCallback(Qr.unstable_NormalPriority,O3)))}function Id(t){function e(i){return ju(i,t)}if(0<ah.length){ju(ah[0],t);for(var n=1;n<ah.length;n++){var r=ah[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ua!==null&&ju(Ua,t),Ba!==null&&ju(Ba,t),Va!==null&&ju(Va,t),kd.forEach(e),Ld.forEach(e),n=0;n<ba.length;n++)r=ba[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ba.length&&(n=ba[0],n.blockedOn===null);)jP(n),n.blockedOn===null&&ba.shift()}var Ec=ia.ReactCurrentBatchConfig,Vp=!0;function F3(t,e,n,r){var i=Vt,s=Ec.transition;Ec.transition=null;try{Vt=1,T0(t,e,n,r)}finally{Vt=i,Ec.transition=s}}function U3(t,e,n,r){var i=Vt,s=Ec.transition;Ec.transition=null;try{Vt=4,T0(t,e,n,r)}finally{Vt=i,Ec.transition=s}}function T0(t,e,n,r){if(Vp){var i=Qy(t,e,n,r);if(i===null)mv(t,e,r,Hp,n),aS(t,r);else if(z3(i,t,e,n,r))r.stopPropagation();else if(aS(t,r),e&4&&-1<j3.indexOf(t)){for(;i!==null;){var s=Af(i);if(s!==null&&DP(s),s=Qy(t,e,n,r),s===null&&mv(t,e,r,Hp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else mv(t,e,r,null,n)}}var Hp=null;function Qy(t,e,n,r){if(Hp=null,t=b0(r),t=Oo(t),t!==null)if(e=wl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=EP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hp=t,null}function zP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C3()){case S0:return 1;case AP:return 4;case Up:case A3:return 16;case NP:return 536870912;default:return 16}default:return 16}}var za=null,C0=null,fp=null;function OP(){if(fp)return fp;var t,e=C0,n=e.length,r,i="value"in za?za.value:za.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return fp=i.slice(t,1<r?1-r:void 0)}function hp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function oh(){return!0}function lS(){return!1}function ei(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?oh:lS,this.isPropagationStopped=lS,this}return an(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=oh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=oh)},persist:function(){},isPersistent:oh}),e}var wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A0=ei(wu),Cf=an({},wu,{view:0,detail:0}),B3=ei(Cf),av,ov,zu,Jm=an({},Cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zu&&(zu&&t.type==="mousemove"?(av=t.screenX-zu.screenX,ov=t.screenY-zu.screenY):ov=av=0,zu=t),av)},movementY:function(t){return"movementY"in t?t.movementY:ov}}),cS=ei(Jm),V3=an({},Jm,{dataTransfer:0}),H3=ei(V3),G3=an({},Cf,{relatedTarget:0}),lv=ei(G3),W3=an({},wu,{animationName:0,elapsedTime:0,pseudoElement:0}),$3=ei(W3),q3=an({},wu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X3=ei(q3),Z3=an({},wu,{data:0}),uS=ei(Z3),K3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q3[t])?!!e[t]:!1}function N0(){return J3}var eU=an({},Cf,{key:function(t){if(t.key){var e=K3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N0,charCode:function(t){return t.type==="keypress"?hp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tU=ei(eU),nU=an({},Jm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dS=ei(nU),rU=an({},Cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N0}),iU=ei(rU),sU=an({},wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),aU=ei(sU),oU=an({},Jm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lU=ei(oU),cU=[9,13,27,32],P0=Zs&&"CompositionEvent"in window,vd=null;Zs&&"documentMode"in document&&(vd=document.documentMode);var uU=Zs&&"TextEvent"in window&&!vd,FP=Zs&&(!P0||vd&&8<vd&&11>=vd),fS=" ",hS=!1;function UP(t,e){switch(t){case"keyup":return cU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lc=!1;function dU(t,e){switch(t){case"compositionend":return BP(e);case"keypress":return e.which!==32?null:(hS=!0,fS);case"textInput":return t=e.data,t===fS&&hS?null:t;default:return null}}function fU(t,e){if(lc)return t==="compositionend"||!P0&&UP(t,e)?(t=OP(),fp=C0=za=null,lc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FP&&e.locale!=="ko"?null:e.data;default:return null}}var hU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hU[t.type]:e==="textarea"}function VP(t,e,n,r){xP(r),e=Gp(e,"onChange"),0<e.length&&(n=new A0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yd=null,jd=null;function pU(t){JP(t,0)}function eg(t){var e=dc(t);if(fP(e))return t}function mU(t,e){if(t==="change")return e}var HP=!1;if(Zs){var cv;if(Zs){var uv="oninput"in document;if(!uv){var mS=document.createElement("div");mS.setAttribute("oninput","return;"),uv=typeof mS.oninput=="function"}cv=uv}else cv=!1;HP=cv&&(!document.documentMode||9<document.documentMode)}function gS(){yd&&(yd.detachEvent("onpropertychange",GP),jd=yd=null)}function GP(t){if(t.propertyName==="value"&&eg(jd)){var e=[];VP(e,jd,t,b0(t)),SP(pU,e)}}function gU(t,e,n){t==="focusin"?(gS(),yd=e,jd=n,yd.attachEvent("onpropertychange",GP)):t==="focusout"&&gS()}function vU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eg(jd)}function yU(t,e){if(t==="click")return eg(e)}function xU(t,e){if(t==="input"||t==="change")return eg(e)}function _U(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hi=typeof Object.is=="function"?Object.is:_U;function zd(t,e){if(Hi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ly.call(e,i)||!Hi(t[i],e[i]))return!1}return!0}function vS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yS(t,e){var n=vS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vS(n)}}function WP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $P(){for(var t=window,e=zp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zp(t.document)}return e}function R0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wU(t){var e=$P(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WP(n.ownerDocument.documentElement,n)){if(r!==null&&R0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=yS(n,s);var a=yS(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bU=Zs&&"documentMode"in document&&11>=document.documentMode,cc=null,Jy=null,xd=null,ex=!1;function xS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ex||cc==null||cc!==zp(r)||(r=cc,"selectionStart"in r&&R0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xd&&zd(xd,r)||(xd=r,r=Gp(Jy,"onSelect"),0<r.length&&(e=new A0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=cc)))}function lh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var uc={animationend:lh("Animation","AnimationEnd"),animationiteration:lh("Animation","AnimationIteration"),animationstart:lh("Animation","AnimationStart"),transitionend:lh("Transition","TransitionEnd")},dv={},qP={};Zs&&(qP=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function tg(t){if(dv[t])return dv[t];if(!uc[t])return t;var e=uc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qP)return dv[t]=e[n];return t}var XP=tg("animationend"),ZP=tg("animationiteration"),KP=tg("animationstart"),YP=tg("transitionend"),QP=new Map,_S="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function po(t,e){QP.set(t,e),_l(e,[t])}for(var fv=0;fv<_S.length;fv++){var hv=_S[fv],SU=hv.toLowerCase(),EU=hv[0].toUpperCase()+hv.slice(1);po(SU,"on"+EU)}po(XP,"onAnimationEnd");po(ZP,"onAnimationIteration");po(KP,"onAnimationStart");po("dblclick","onDoubleClick");po("focusin","onFocus");po("focusout","onBlur");po(YP,"onTransitionEnd");Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);_l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_l("onBeforeInput",["compositionend","keypress","textInput","paste"]);_l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MU=new Set("cancel close invalid load scroll toggle".split(" ").concat(sd));function wS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,S3(r,e,void 0,t),t.currentTarget=null}function JP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;wS(i,o,u),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;wS(i,o,u),s=c}}}if(Fp)throw t=Zy,Fp=!1,Zy=null,t}function Zt(t,e){var n=e[sx];n===void 0&&(n=e[sx]=new Set);var r=t+"__bubble";n.has(r)||(eR(e,t,2,!1),n.add(r))}function pv(t,e,n){var r=0;e&&(r|=4),eR(n,t,r,e)}var ch="_reactListening"+Math.random().toString(36).slice(2);function Od(t){if(!t[ch]){t[ch]=!0,oP.forEach(function(n){n!=="selectionchange"&&(MU.has(n)||pv(n,!1,t),pv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ch]||(e[ch]=!0,pv("selectionchange",!1,e))}}function eR(t,e,n,r){switch(zP(e)){case 1:var i=F3;break;case 4:i=U3;break;default:i=T0}n=i.bind(null,e,n,t),i=void 0,!Xy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function mv(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Oo(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}SP(function(){var u=s,d=b0(n),f=[];e:{var h=QP.get(t);if(h!==void 0){var m=A0,y=t;switch(t){case"keypress":if(hp(n)===0)break e;case"keydown":case"keyup":m=tU;break;case"focusin":y="focus",m=lv;break;case"focusout":y="blur",m=lv;break;case"beforeblur":case"afterblur":m=lv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=H3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=iU;break;case XP:case ZP:case KP:m=$3;break;case YP:m=aU;break;case"scroll":m=B3;break;case"wheel":m=lU;break;case"copy":case"cut":case"paste":m=X3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=dS}var v=(e&4)!==0,g=!v&&t==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var _=u,w;_!==null;){w=_;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,p!==null&&(b=Dd(_,p),b!=null&&v.push(Fd(_,b,w)))),g)break;_=_.return}0<v.length&&(h=new m(h,y,null,n,d),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==$y&&(y=n.relatedTarget||n.fromElement)&&(Oo(y)||y[Ks]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Oo(y):null,y!==null&&(g=wl(y),y!==g||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(v=cS,b="onMouseLeave",p="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=dS,b="onPointerLeave",p="onPointerEnter",_="pointer"),g=m==null?h:dc(m),w=y==null?h:dc(y),h=new v(b,_+"leave",m,n,d),h.target=g,h.relatedTarget=w,b=null,Oo(d)===u&&(v=new v(p,_+"enter",y,n,d),v.target=w,v.relatedTarget=g,b=v),g=b,m&&y)t:{for(v=m,p=y,_=0,w=v;w;w=Il(w))_++;for(w=0,b=p;b;b=Il(b))w++;for(;0<_-w;)v=Il(v),_--;for(;0<w-_;)p=Il(p),w--;for(;_--;){if(v===p||p!==null&&v===p.alternate)break t;v=Il(v),p=Il(p)}v=null}else v=null;m!==null&&bS(f,h,m,v,!1),y!==null&&g!==null&&bS(f,g,y,v,!0)}}e:{if(h=u?dc(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var S=mU;else if(pS(h))if(HP)S=xU;else{S=vU;var M=gU}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=yU);if(S&&(S=S(t,u))){VP(f,S,n,d);break e}M&&M(t,h,u),t==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&By(h,"number",h.value)}switch(M=u?dc(u):window,t){case"focusin":(pS(M)||M.contentEditable==="true")&&(cc=M,Jy=u,xd=null);break;case"focusout":xd=Jy=cc=null;break;case"mousedown":ex=!0;break;case"contextmenu":case"mouseup":case"dragend":ex=!1,xS(f,n,d);break;case"selectionchange":if(bU)break;case"keydown":case"keyup":xS(f,n,d)}var C;if(P0)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else lc?UP(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(FP&&n.locale!=="ko"&&(lc||P!=="onCompositionStart"?P==="onCompositionEnd"&&lc&&(C=OP()):(za=d,C0="value"in za?za.value:za.textContent,lc=!0)),M=Gp(u,P),0<M.length&&(P=new uS(P,t,null,n,d),f.push({event:P,listeners:M}),C?P.data=C:(C=BP(n),C!==null&&(P.data=C)))),(C=uU?dU(t,n):fU(t,n))&&(u=Gp(u,"onBeforeInput"),0<u.length&&(d=new uS("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=C))}JP(f,e)})}function Fd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Dd(t,n),s!=null&&r.unshift(Fd(t,s,i)),s=Dd(t,e),s!=null&&r.push(Fd(t,s,i))),t=t.return}return r}function Il(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bS(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,i?(c=Dd(n,s),c!=null&&a.unshift(Fd(n,c,o))):i||(c=Dd(n,s),c!=null&&a.push(Fd(n,c,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var TU=/\r\n?/g,CU=/\u0000|\uFFFD/g;function SS(t){return(typeof t=="string"?t:""+t).replace(TU,`
`).replace(CU,"")}function uh(t,e,n){if(e=SS(e),SS(t)!==e&&n)throw Error(_e(425))}function Wp(){}var tx=null,nx=null;function rx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ix=typeof setTimeout=="function"?setTimeout:void 0,AU=typeof clearTimeout=="function"?clearTimeout:void 0,ES=typeof Promise=="function"?Promise:void 0,NU=typeof queueMicrotask=="function"?queueMicrotask:typeof ES<"u"?function(t){return ES.resolve(null).then(t).catch(PU)}:ix;function PU(t){setTimeout(function(){throw t})}function gv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Id(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Id(e)}function Ha(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function MS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bu=Math.random().toString(36).slice(2),is="__reactFiber$"+bu,Ud="__reactProps$"+bu,Ks="__reactContainer$"+bu,sx="__reactEvents$"+bu,RU="__reactListeners$"+bu,DU="__reactHandles$"+bu;function Oo(t){var e=t[is];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ks]||n[is]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=MS(t);t!==null;){if(n=t[is])return n;t=MS(t)}return e}t=n,n=t.parentNode}return null}function Af(t){return t=t[is]||t[Ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_e(33))}function ng(t){return t[Ud]||null}var ax=[],fc=-1;function mo(t){return{current:t}}function Kt(t){0>fc||(t.current=ax[fc],ax[fc]=null,fc--)}function qt(t,e){fc++,ax[fc]=t.current,t.current=e}var to={},nr=mo(to),Pr=mo(!1),rl=to;function eu(t,e){var n=t.type.contextTypes;if(!n)return to;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rr(t){return t=t.childContextTypes,t!=null}function $p(){Kt(Pr),Kt(nr)}function TS(t,e,n){if(nr.current!==to)throw Error(_e(168));qt(nr,e),qt(Pr,n)}function tR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(_e(108,g3(t)||"Unknown",i));return an({},n,r)}function qp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||to,rl=nr.current,qt(nr,t),qt(Pr,Pr.current),!0}function CS(t,e,n){var r=t.stateNode;if(!r)throw Error(_e(169));n?(t=tR(t,e,rl),r.__reactInternalMemoizedMergedChildContext=t,Kt(Pr),Kt(nr),qt(nr,t)):Kt(Pr),qt(Pr,n)}var Is=null,rg=!1,vv=!1;function nR(t){Is===null?Is=[t]:Is.push(t)}function kU(t){rg=!0,nR(t)}function go(){if(!vv&&Is!==null){vv=!0;var t=0,e=Vt;try{var n=Is;for(Vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Is=null,rg=!1}catch(i){throw Is!==null&&(Is=Is.slice(t+1)),CP(S0,go),i}finally{Vt=e,vv=!1}}return null}var hc=[],pc=0,Xp=null,Zp=0,ci=[],ui=0,il=null,zs=1,Os="";function Ro(t,e){hc[pc++]=Zp,hc[pc++]=Xp,Xp=t,Zp=e}function rR(t,e,n){ci[ui++]=zs,ci[ui++]=Os,ci[ui++]=il,il=t;var r=zs;t=Os;var i=32-Ii(r)-1;r&=~(1<<i),n+=1;var s=32-Ii(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,zs=1<<32-Ii(e)+i|n<<i|r,Os=s+t}else zs=1<<s|n<<i|r,Os=t}function D0(t){t.return!==null&&(Ro(t,1),rR(t,1,0))}function k0(t){for(;t===Xp;)Xp=hc[--pc],hc[pc]=null,Zp=hc[--pc],hc[pc]=null;for(;t===il;)il=ci[--ui],ci[ui]=null,Os=ci[--ui],ci[ui]=null,zs=ci[--ui],ci[ui]=null}var Zr=null,Xr=null,Jt=!1,Ai=null;function iR(t,e){var n=di(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function AS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zr=t,Xr=Ha(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zr=t,Xr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=il!==null?{id:zs,overflow:Os}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=di(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zr=t,Xr=null,!0):!1;default:return!1}}function ox(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lx(t){if(Jt){var e=Xr;if(e){var n=e;if(!AS(t,e)){if(ox(t))throw Error(_e(418));e=Ha(n.nextSibling);var r=Zr;e&&AS(t,e)?iR(r,n):(t.flags=t.flags&-4097|2,Jt=!1,Zr=t)}}else{if(ox(t))throw Error(_e(418));t.flags=t.flags&-4097|2,Jt=!1,Zr=t}}}function NS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zr=t}function dh(t){if(t!==Zr)return!1;if(!Jt)return NS(t),Jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rx(t.type,t.memoizedProps)),e&&(e=Xr)){if(ox(t))throw sR(),Error(_e(418));for(;e;)iR(t,e),e=Ha(e.nextSibling)}if(NS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xr=Ha(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xr=null}}else Xr=Zr?Ha(t.stateNode.nextSibling):null;return!0}function sR(){for(var t=Xr;t;)t=Ha(t.nextSibling)}function tu(){Xr=Zr=null,Jt=!1}function L0(t){Ai===null?Ai=[t]:Ai.push(t)}var LU=ia.ReactCurrentBatchConfig;function Ou(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,t))}return t}function fh(t,e){throw t=Object.prototype.toString.call(e),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PS(t){var e=t._init;return e(t._payload)}function aR(t){function e(p,_){if(t){var w=p.deletions;w===null?(p.deletions=[_],p.flags|=16):w.push(_)}}function n(p,_){if(!t)return null;for(;_!==null;)e(p,_),_=_.sibling;return null}function r(p,_){for(p=new Map;_!==null;)_.key!==null?p.set(_.key,_):p.set(_.index,_),_=_.sibling;return p}function i(p,_){return p=qa(p,_),p.index=0,p.sibling=null,p}function s(p,_,w){return p.index=w,t?(w=p.alternate,w!==null?(w=w.index,w<_?(p.flags|=2,_):w):(p.flags|=2,_)):(p.flags|=1048576,_)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,_,w,b){return _===null||_.tag!==6?(_=Ev(w,p.mode,b),_.return=p,_):(_=i(_,w),_.return=p,_)}function c(p,_,w,b){var S=w.type;return S===oc?d(p,_,w.props.children,b,w.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xa&&PS(S)===_.type)?(b=i(_,w.props),b.ref=Ou(p,_,w),b.return=p,b):(b=_p(w.type,w.key,w.props,null,p.mode,b),b.ref=Ou(p,_,w),b.return=p,b)}function u(p,_,w,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Mv(w,p.mode,b),_.return=p,_):(_=i(_,w.children||[]),_.return=p,_)}function d(p,_,w,b,S){return _===null||_.tag!==7?(_=Qo(w,p.mode,b,S),_.return=p,_):(_=i(_,w),_.return=p,_)}function f(p,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ev(""+_,p.mode,w),_.return=p,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case th:return w=_p(_.type,_.key,_.props,null,p.mode,w),w.ref=Ou(p,null,_),w.return=p,w;case ac:return _=Mv(_,p.mode,w),_.return=p,_;case xa:var b=_._init;return f(p,b(_._payload),w)}if(rd(_)||ku(_))return _=Qo(_,p.mode,w,null),_.return=p,_;fh(p,_)}return null}function h(p,_,w,b){var S=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:o(p,_,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case th:return w.key===S?c(p,_,w,b):null;case ac:return w.key===S?u(p,_,w,b):null;case xa:return S=w._init,h(p,_,S(w._payload),b)}if(rd(w)||ku(w))return S!==null?null:d(p,_,w,b,null);fh(p,w)}return null}function m(p,_,w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(w)||null,o(_,p,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case th:return p=p.get(b.key===null?w:b.key)||null,c(_,p,b,S);case ac:return p=p.get(b.key===null?w:b.key)||null,u(_,p,b,S);case xa:var M=b._init;return m(p,_,w,M(b._payload),S)}if(rd(b)||ku(b))return p=p.get(w)||null,d(_,p,b,S,null);fh(_,b)}return null}function y(p,_,w,b){for(var S=null,M=null,C=_,P=_=0,A=null;C!==null&&P<w.length;P++){C.index>P?(A=C,C=null):A=C.sibling;var E=h(p,C,w[P],b);if(E===null){C===null&&(C=A);break}t&&C&&E.alternate===null&&e(p,C),_=s(E,_,P),M===null?S=E:M.sibling=E,M=E,C=A}if(P===w.length)return n(p,C),Jt&&Ro(p,P),S;if(C===null){for(;P<w.length;P++)C=f(p,w[P],b),C!==null&&(_=s(C,_,P),M===null?S=C:M.sibling=C,M=C);return Jt&&Ro(p,P),S}for(C=r(p,C);P<w.length;P++)A=m(C,p,P,w[P],b),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?P:A.key),_=s(A,_,P),M===null?S=A:M.sibling=A,M=A);return t&&C.forEach(function(L){return e(p,L)}),Jt&&Ro(p,P),S}function v(p,_,w,b){var S=ku(w);if(typeof S!="function")throw Error(_e(150));if(w=S.call(w),w==null)throw Error(_e(151));for(var M=S=null,C=_,P=_=0,A=null,E=w.next();C!==null&&!E.done;P++,E=w.next()){C.index>P?(A=C,C=null):A=C.sibling;var L=h(p,C,E.value,b);if(L===null){C===null&&(C=A);break}t&&C&&L.alternate===null&&e(p,C),_=s(L,_,P),M===null?S=L:M.sibling=L,M=L,C=A}if(E.done)return n(p,C),Jt&&Ro(p,P),S;if(C===null){for(;!E.done;P++,E=w.next())E=f(p,E.value,b),E!==null&&(_=s(E,_,P),M===null?S=E:M.sibling=E,M=E);return Jt&&Ro(p,P),S}for(C=r(p,C);!E.done;P++,E=w.next())E=m(C,p,P,E.value,b),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?P:E.key),_=s(E,_,P),M===null?S=E:M.sibling=E,M=E);return t&&C.forEach(function(O){return e(p,O)}),Jt&&Ro(p,P),S}function g(p,_,w,b){if(typeof w=="object"&&w!==null&&w.type===oc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case th:e:{for(var S=w.key,M=_;M!==null;){if(M.key===S){if(S=w.type,S===oc){if(M.tag===7){n(p,M.sibling),_=i(M,w.props.children),_.return=p,p=_;break e}}else if(M.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xa&&PS(S)===M.type){n(p,M.sibling),_=i(M,w.props),_.ref=Ou(p,M,w),_.return=p,p=_;break e}n(p,M);break}else e(p,M);M=M.sibling}w.type===oc?(_=Qo(w.props.children,p.mode,b,w.key),_.return=p,p=_):(b=_p(w.type,w.key,w.props,null,p.mode,b),b.ref=Ou(p,_,w),b.return=p,p=b)}return a(p);case ac:e:{for(M=w.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(p,_.sibling),_=i(_,w.children||[]),_.return=p,p=_;break e}else{n(p,_);break}else e(p,_);_=_.sibling}_=Mv(w,p.mode,b),_.return=p,p=_}return a(p);case xa:return M=w._init,g(p,_,M(w._payload),b)}if(rd(w))return y(p,_,w,b);if(ku(w))return v(p,_,w,b);fh(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(p,_.sibling),_=i(_,w),_.return=p,p=_):(n(p,_),_=Ev(w,p.mode,b),_.return=p,p=_),a(p)):n(p,_)}return g}var nu=aR(!0),oR=aR(!1),Kp=mo(null),Yp=null,mc=null,I0=null;function j0(){I0=mc=Yp=null}function z0(t){var e=Kp.current;Kt(Kp),t._currentValue=e}function cx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mc(t,e){Yp=t,I0=mc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nr=!0),t.firstContext=null)}function mi(t){var e=t._currentValue;if(I0!==t)if(t={context:t,memoizedValue:e,next:null},mc===null){if(Yp===null)throw Error(_e(308));mc=t,Yp.dependencies={lanes:0,firstContext:t}}else mc=mc.next=t;return e}var Fo=null;function O0(t){Fo===null?Fo=[t]:Fo.push(t)}function lR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,O0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ys(t,r)}function Ys(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _a=!1;function F0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ga(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Rt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ys(t,n)}return i=r.interleaved,i===null?(e.next=e,O0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ys(t,n)}function pp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E0(t,n)}}function RS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qp(t,e,n,r){var i=t.updateQueue;_a=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,o=s;do{var h=o.lane,m=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,v=o;switch(h=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=an({},f,h);break e;case 2:_a=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);al|=a,t.lanes=a,t.memoizedState=f}}function DS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(_e(191,i));i.call(r)}}}var Nf={},us=mo(Nf),Bd=mo(Nf),Vd=mo(Nf);function Uo(t){if(t===Nf)throw Error(_e(174));return t}function U0(t,e){switch(qt(Vd,e),qt(Bd,t),qt(us,Nf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hy(e,t)}Kt(us),qt(us,e)}function ru(){Kt(us),Kt(Bd),Kt(Vd)}function uR(t){Uo(Vd.current);var e=Uo(us.current),n=Hy(e,t.type);e!==n&&(qt(Bd,t),qt(us,n))}function B0(t){Bd.current===t&&(Kt(us),Kt(Bd))}var rn=mo(0);function Jp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yv=[];function V0(){for(var t=0;t<yv.length;t++)yv[t]._workInProgressVersionPrimary=null;yv.length=0}var mp=ia.ReactCurrentDispatcher,xv=ia.ReactCurrentBatchConfig,sl=0,sn=null,Cn=null,zn=null,em=!1,_d=!1,Hd=0,IU=0;function Zn(){throw Error(_e(321))}function H0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hi(t[n],e[n]))return!1;return!0}function G0(t,e,n,r,i,s){if(sl=s,sn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mp.current=t===null||t.memoizedState===null?FU:UU,t=n(r,i),_d){s=0;do{if(_d=!1,Hd=0,25<=s)throw Error(_e(301));s+=1,zn=Cn=null,e.updateQueue=null,mp.current=BU,t=n(r,i)}while(_d)}if(mp.current=tm,e=Cn!==null&&Cn.next!==null,sl=0,zn=Cn=sn=null,em=!1,e)throw Error(_e(300));return t}function W0(){var t=Hd!==0;return Hd=0,t}function Yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?sn.memoizedState=zn=t:zn=zn.next=t,zn}function gi(){if(Cn===null){var t=sn.alternate;t=t!==null?t.memoizedState:null}else t=Cn.next;var e=zn===null?sn.memoizedState:zn.next;if(e!==null)zn=e,Cn=t;else{if(t===null)throw Error(_e(310));Cn=t,t={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},zn===null?sn.memoizedState=zn=t:zn=zn.next=t}return zn}function Gd(t,e){return typeof e=="function"?e(t):e}function _v(t){var e=gi(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=Cn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((sl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,a=r):c=c.next=f,sn.lanes|=d,al|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=o,Hi(r,e.memoizedState)||(Nr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,sn.lanes|=s,al|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wv(t){var e=gi(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Hi(s,e.memoizedState)||(Nr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dR(){}function fR(t,e){var n=sn,r=gi(),i=e(),s=!Hi(r.memoizedState,i);if(s&&(r.memoizedState=i,Nr=!0),r=r.queue,$0(mR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||zn!==null&&zn.memoizedState.tag&1){if(n.flags|=2048,Wd(9,pR.bind(null,n,r,i,e),void 0,null),Fn===null)throw Error(_e(349));sl&30||hR(n,e,i)}return i}function hR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pR(t,e,n,r){e.value=n,e.getSnapshot=r,gR(e)&&vR(t)}function mR(t,e,n){return n(function(){gR(e)&&vR(t)})}function gR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hi(t,n)}catch{return!0}}function vR(t){var e=Ys(t,1);e!==null&&ji(e,t,1,-1)}function kS(t){var e=Yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gd,lastRenderedState:t},e.queue=t,t=t.dispatch=OU.bind(null,sn,t),[e.memoizedState,t]}function Wd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yR(){return gi().memoizedState}function gp(t,e,n,r){var i=Yi();sn.flags|=t,i.memoizedState=Wd(1|e,n,void 0,r===void 0?null:r)}function ig(t,e,n,r){var i=gi();r=r===void 0?null:r;var s=void 0;if(Cn!==null){var a=Cn.memoizedState;if(s=a.destroy,r!==null&&H0(r,a.deps)){i.memoizedState=Wd(e,n,s,r);return}}sn.flags|=t,i.memoizedState=Wd(1|e,n,s,r)}function LS(t,e){return gp(8390656,8,t,e)}function $0(t,e){return ig(2048,8,t,e)}function xR(t,e){return ig(4,2,t,e)}function _R(t,e){return ig(4,4,t,e)}function wR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bR(t,e,n){return n=n!=null?n.concat([t]):null,ig(4,4,wR.bind(null,e,t),n)}function q0(){}function SR(t,e){var n=gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ER(t,e){var n=gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MR(t,e,n){return sl&21?(Hi(n,e)||(n=PP(),sn.lanes|=n,al|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nr=!0),t.memoizedState=n)}function jU(t,e){var n=Vt;Vt=n!==0&&4>n?n:4,t(!0);var r=xv.transition;xv.transition={};try{t(!1),e()}finally{Vt=n,xv.transition=r}}function TR(){return gi().memoizedState}function zU(t,e,n){var r=$a(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CR(t))AR(e,n);else if(n=lR(t,e,n,r),n!==null){var i=gr();ji(n,t,r,i),NR(n,e,r)}}function OU(t,e,n){var r=$a(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CR(t))AR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Hi(o,a)){var c=e.interleaved;c===null?(i.next=i,O0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=lR(t,e,i,r),n!==null&&(i=gr(),ji(n,t,r,i),NR(n,e,r))}}function CR(t){var e=t.alternate;return t===sn||e!==null&&e===sn}function AR(t,e){_d=em=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function NR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E0(t,n)}}var tm={readContext:mi,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},FU={readContext:mi,useCallback:function(t,e){return Yi().memoizedState=[t,e===void 0?null:e],t},useContext:mi,useEffect:LS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gp(4194308,4,wR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gp(4194308,4,t,e)},useInsertionEffect:function(t,e){return gp(4,2,t,e)},useMemo:function(t,e){var n=Yi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zU.bind(null,sn,t),[r.memoizedState,t]},useRef:function(t){var e=Yi();return t={current:t},e.memoizedState=t},useState:kS,useDebugValue:q0,useDeferredValue:function(t){return Yi().memoizedState=t},useTransition:function(){var t=kS(!1),e=t[0];return t=jU.bind(null,t[1]),Yi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=sn,i=Yi();if(Jt){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=e(),Fn===null)throw Error(_e(349));sl&30||hR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,LS(mR.bind(null,r,s,t),[t]),r.flags|=2048,Wd(9,pR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Yi(),e=Fn.identifierPrefix;if(Jt){var n=Os,r=zs;n=(r&~(1<<32-Ii(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UU={readContext:mi,useCallback:SR,useContext:mi,useEffect:$0,useImperativeHandle:bR,useInsertionEffect:xR,useLayoutEffect:_R,useMemo:ER,useReducer:_v,useRef:yR,useState:function(){return _v(Gd)},useDebugValue:q0,useDeferredValue:function(t){var e=gi();return MR(e,Cn.memoizedState,t)},useTransition:function(){var t=_v(Gd)[0],e=gi().memoizedState;return[t,e]},useMutableSource:dR,useSyncExternalStore:fR,useId:TR,unstable_isNewReconciler:!1},BU={readContext:mi,useCallback:SR,useContext:mi,useEffect:$0,useImperativeHandle:bR,useInsertionEffect:xR,useLayoutEffect:_R,useMemo:ER,useReducer:wv,useRef:yR,useState:function(){return wv(Gd)},useDebugValue:q0,useDeferredValue:function(t){var e=gi();return Cn===null?e.memoizedState=t:MR(e,Cn.memoizedState,t)},useTransition:function(){var t=wv(Gd)[0],e=gi().memoizedState;return[t,e]},useMutableSource:dR,useSyncExternalStore:fR,useId:TR,unstable_isNewReconciler:!1};function Mi(t,e){if(t&&t.defaultProps){e=an({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ux(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:an({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sg={isMounted:function(t){return(t=t._reactInternals)?wl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gr(),i=$a(t),s=Vs(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ga(t,s,i),e!==null&&(ji(e,t,i,r),pp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gr(),i=$a(t),s=Vs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ga(t,s,i),e!==null&&(ji(e,t,i,r),pp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gr(),r=$a(t),i=Vs(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ga(t,i,r),e!==null&&(ji(e,t,r,n),pp(e,t,r))}};function IS(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!zd(n,r)||!zd(i,s):!0}function PR(t,e,n){var r=!1,i=to,s=e.contextType;return typeof s=="object"&&s!==null?s=mi(s):(i=Rr(e)?rl:nr.current,r=e.contextTypes,s=(r=r!=null)?eu(t,i):to),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sg.enqueueReplaceState(e,e.state,null)}function dx(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},F0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mi(s):(s=Rr(e)?rl:nr.current,i.context=eu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ux(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sg.enqueueReplaceState(i,i.state,null),Qp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function iu(t,e){try{var n="",r=e;do n+=m3(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VU=typeof WeakMap=="function"?WeakMap:Map;function RR(t,e,n){n=Vs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rm||(rm=!0,bx=r),fx(t,e)},n}function DR(t,e,n){n=Vs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fx(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fx(t,e),typeof r!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function zS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=n4.bind(null,t,e,n),e.then(t,t))}function OS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function FS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vs(-1,1),e.tag=2,Ga(n,e,1))),n.lanes|=1),t)}var HU=ia.ReactCurrentOwner,Nr=!1;function dr(t,e,n,r){e.child=t===null?oR(e,null,n,r):nu(e,t.child,n,r)}function US(t,e,n,r,i){n=n.render;var s=e.ref;return Mc(e,i),r=G0(t,e,n,r,s,i),n=W0(),t!==null&&!Nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qs(t,e,i)):(Jt&&n&&D0(e),e.flags|=1,dr(t,e,r,i),e.child)}function BS(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!tw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kR(t,e,s,r,i)):(t=_p(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:zd,n(a,r)&&t.ref===e.ref)return Qs(t,e,i)}return e.flags|=1,t=qa(s,r),t.ref=e.ref,t.return=e,e.child=t}function kR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zd(s,r)&&t.ref===e.ref)if(Nr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Nr=!0);else return e.lanes=t.lanes,Qs(t,e,i)}return hx(t,e,n,r,i)}function LR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qt(vc,Vr),Vr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qt(vc,Vr),Vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,qt(vc,Vr),Vr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,qt(vc,Vr),Vr|=r;return dr(t,e,i,n),e.child}function IR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hx(t,e,n,r,i){var s=Rr(n)?rl:nr.current;return s=eu(e,s),Mc(e,i),n=G0(t,e,n,r,s,i),r=W0(),t!==null&&!Nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qs(t,e,i)):(Jt&&r&&D0(e),e.flags|=1,dr(t,e,n,i),e.child)}function VS(t,e,n,r,i){if(Rr(n)){var s=!0;qp(e)}else s=!1;if(Mc(e,i),e.stateNode===null)vp(t,e),PR(e,n,r),dx(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=mi(u):(u=Rr(n)?rl:nr.current,u=eu(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&jS(e,a,r,u),_a=!1;var h=e.memoizedState;a.state=h,Qp(e,r,a,i),c=e.memoizedState,o!==r||h!==c||Pr.current||_a?(typeof d=="function"&&(ux(e,n,d,r),c=e.memoizedState),(o=_a||IS(e,n,o,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,cR(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Mi(e.type,o),a.props=u,f=e.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=mi(c):(c=Rr(n)?rl:nr.current,c=eu(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==c)&&jS(e,a,r,c),_a=!1,h=e.memoizedState,a.state=h,Qp(e,r,a,i);var y=e.memoizedState;o!==f||h!==y||Pr.current||_a?(typeof m=="function"&&(ux(e,n,m,r),y=e.memoizedState),(u=_a||IS(e,n,u,r,h,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return px(t,e,n,r,s,i)}function px(t,e,n,r,i,s){IR(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&CS(e,n,!1),Qs(t,e,s);r=e.stateNode,HU.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=nu(e,t.child,null,s),e.child=nu(e,null,o,s)):dr(t,e,o,s),e.memoizedState=r.state,i&&CS(e,n,!0),e.child}function jR(t){var e=t.stateNode;e.pendingContext?TS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&TS(t,e.context,!1),U0(t,e.containerInfo)}function HS(t,e,n,r,i){return tu(),L0(i),e.flags|=256,dr(t,e,n,r),e.child}var mx={dehydrated:null,treeContext:null,retryLane:0};function gx(t){return{baseLanes:t,cachePool:null,transitions:null}}function zR(t,e,n){var r=e.pendingProps,i=rn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),qt(rn,i&1),t===null)return lx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=lg(a,r,0,null),t=Qo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gx(n),e.memoizedState=mx,t):X0(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return GU(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=qa(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=qa(o,s):(s=Qo(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?gx(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=mx,r}return s=t.child,t=s.sibling,r=qa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function X0(t,e){return e=lg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hh(t,e,n,r){return r!==null&&L0(r),nu(e,t.child,null,n),t=X0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GU(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=bv(Error(_e(422))),hh(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=lg({mode:"visible",children:r.children},i,0,null),s=Qo(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&nu(e,t.child,null,a),e.child.memoizedState=gx(a),e.memoizedState=mx,s);if(!(e.mode&1))return hh(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(_e(419)),r=bv(s,r,void 0),hh(t,e,a,r)}if(o=(a&t.childLanes)!==0,Nr||o){if(r=Fn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ys(t,i),ji(r,t,i,-1))}return ew(),r=bv(Error(_e(421))),hh(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=r4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xr=Ha(i.nextSibling),Zr=e,Jt=!0,Ai=null,t!==null&&(ci[ui++]=zs,ci[ui++]=Os,ci[ui++]=il,zs=t.id,Os=t.overflow,il=e),e=X0(e,r.children),e.flags|=4096,e)}function GS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cx(t.return,e,n)}function Sv(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function OR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dr(t,e,r.children,n),r=rn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GS(t,n,e);else if(t.tag===19)GS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qt(rn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sv(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sv(e,!0,n,null,s);break;case"together":Sv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),al|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_e(153));if(e.child!==null){for(t=e.child,n=qa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WU(t,e,n){switch(e.tag){case 3:jR(e),tu();break;case 5:uR(e);break;case 1:Rr(e.type)&&qp(e);break;case 4:U0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;qt(Kp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qt(rn,rn.current&1),e.flags|=128,null):n&e.child.childLanes?zR(t,e,n):(qt(rn,rn.current&1),t=Qs(t,e,n),t!==null?t.sibling:null);qt(rn,rn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qt(rn,rn.current),r)break;return null;case 22:case 23:return e.lanes=0,LR(t,e,n)}return Qs(t,e,n)}var FR,vx,UR,BR;FR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vx=function(){};UR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Uo(us.current);var s=null;switch(n){case"input":i=Fy(t,i),r=Fy(t,r),s=[];break;case"select":i=an({},i,{value:void 0}),r=an({},r,{value:void 0}),s=[];break;case"textarea":i=Vy(t,i),r=Vy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wp)}Gy(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Zt("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};BR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fu(t,e){if(!Jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $U(t,e,n){var r=e.pendingProps;switch(k0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(e),null;case 1:return Rr(e.type)&&$p(),Kn(e),null;case 3:return r=e.stateNode,ru(),Kt(Pr),Kt(nr),V0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ai!==null&&(Mx(Ai),Ai=null))),vx(t,e),Kn(e),null;case 5:B0(e);var i=Uo(Vd.current);if(n=e.type,t!==null&&e.stateNode!=null)UR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_e(166));return Kn(e),null}if(t=Uo(us.current),dh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[is]=e,r[Ud]=s,t=(e.mode&1)!==0,n){case"dialog":Zt("cancel",r),Zt("close",r);break;case"iframe":case"object":case"embed":Zt("load",r);break;case"video":case"audio":for(i=0;i<sd.length;i++)Zt(sd[i],r);break;case"source":Zt("error",r);break;case"img":case"image":case"link":Zt("error",r),Zt("load",r);break;case"details":Zt("toggle",r);break;case"input":Jb(r,s),Zt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Zt("invalid",r);break;case"textarea":tS(r,s),Zt("invalid",r)}Gy(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&uh(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&uh(r.textContent,o,t),i=["children",""+o]):Pd.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Zt("scroll",r)}switch(n){case"input":nh(r),eS(r,s,!0);break;case"textarea":nh(r),nS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Wp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[is]=e,t[Ud]=r,FR(t,e,!1,!1),e.stateNode=t;e:{switch(a=Wy(n,r),n){case"dialog":Zt("cancel",t),Zt("close",t),i=r;break;case"iframe":case"object":case"embed":Zt("load",t),i=r;break;case"video":case"audio":for(i=0;i<sd.length;i++)Zt(sd[i],t);i=r;break;case"source":Zt("error",t),i=r;break;case"img":case"image":case"link":Zt("error",t),Zt("load",t),i=r;break;case"details":Zt("toggle",t),i=r;break;case"input":Jb(t,r),i=Fy(t,r),Zt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=an({},r,{value:void 0}),Zt("invalid",t);break;case"textarea":tS(t,r),i=Vy(t,r),Zt("invalid",t);break;default:i=r}Gy(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?yP(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gP(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rd(t,c):typeof c=="number"&&Rd(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pd.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Zt("scroll",t):c!=null&&y0(t,s,c,a))}switch(n){case"input":nh(t),eS(t,r,!1);break;case"textarea":nh(t),nS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+eo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wc(t,!!r.multiple,s,!1):r.defaultValue!=null&&wc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Wp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kn(e),null;case 6:if(t&&e.stateNode!=null)BR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_e(166));if(n=Uo(Vd.current),Uo(us.current),dh(e)){if(r=e.stateNode,n=e.memoizedProps,r[is]=e,(s=r.nodeValue!==n)&&(t=Zr,t!==null))switch(t.tag){case 3:uh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[is]=e,e.stateNode=r}return Kn(e),null;case 13:if(Kt(rn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&Xr!==null&&e.mode&1&&!(e.flags&128))sR(),tu(),e.flags|=98560,s=!1;else if(s=dh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(_e(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_e(317));s[is]=e}else tu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kn(e),s=!1}else Ai!==null&&(Mx(Ai),Ai=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rn.current&1?Nn===0&&(Nn=3):ew())),e.updateQueue!==null&&(e.flags|=4),Kn(e),null);case 4:return ru(),vx(t,e),t===null&&Od(e.stateNode.containerInfo),Kn(e),null;case 10:return z0(e.type._context),Kn(e),null;case 17:return Rr(e.type)&&$p(),Kn(e),null;case 19:if(Kt(rn),s=e.memoizedState,s===null)return Kn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Fu(s,!1);else{if(Nn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Jp(t),a!==null){for(e.flags|=128,Fu(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qt(rn,rn.current&1|2),e.child}t=t.sibling}s.tail!==null&&xn()>su&&(e.flags|=128,r=!0,Fu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jp(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Jt)return Kn(e),null}else 2*xn()-s.renderingStartTime>su&&n!==1073741824&&(e.flags|=128,r=!0,Fu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xn(),e.sibling=null,n=rn.current,qt(rn,r?n&1|2:n&1),e):(Kn(e),null);case 22:case 23:return J0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vr&1073741824&&(Kn(e),e.subtreeFlags&6&&(e.flags|=8192)):Kn(e),null;case 24:return null;case 25:return null}throw Error(_e(156,e.tag))}function qU(t,e){switch(k0(e),e.tag){case 1:return Rr(e.type)&&$p(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ru(),Kt(Pr),Kt(nr),V0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return B0(e),null;case 13:if(Kt(rn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_e(340));tu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(rn),null;case 4:return ru(),null;case 10:return z0(e.type._context),null;case 22:case 23:return J0(),null;case 24:return null;default:return null}}var ph=!1,er=!1,XU=typeof WeakSet=="function"?WeakSet:Set,He=null;function gc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dn(t,e,r)}else n.current=null}function yx(t,e,n){try{n()}catch(r){dn(t,e,r)}}var WS=!1;function ZU(t,e){if(tx=Vp,t=$P(),R0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===n&&++u===i&&(o=a),h===s&&++d===r&&(c=a),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nx={focusedElem:t,selectionRange:n},Vp=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,g=y.memoizedState,p=e.stateNode,_=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Mi(e.type,v),g);p.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(b){dn(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return y=WS,WS=!1,y}function wd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yx(e,n,s)}i=i.next}while(i!==r)}}function ag(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VR(t){var e=t.alternate;e!==null&&(t.alternate=null,VR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[is],delete e[Ud],delete e[sx],delete e[RU],delete e[DU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HR(t){return t.tag===5||t.tag===3||t.tag===4}function $S(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _x(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wp));else if(r!==4&&(t=t.child,t!==null))for(_x(t,e,n),t=t.sibling;t!==null;)_x(t,e,n),t=t.sibling}function wx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wx(t,e,n),t=t.sibling;t!==null;)wx(t,e,n),t=t.sibling}var Gn=null,Ci=!1;function oa(t,e,n){for(n=n.child;n!==null;)GR(t,e,n),n=n.sibling}function GR(t,e,n){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Qm,n)}catch{}switch(n.tag){case 5:er||gc(n,e);case 6:var r=Gn,i=Ci;Gn=null,oa(t,e,n),Gn=r,Ci=i,Gn!==null&&(Ci?(t=Gn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gn.removeChild(n.stateNode));break;case 18:Gn!==null&&(Ci?(t=Gn,n=n.stateNode,t.nodeType===8?gv(t.parentNode,n):t.nodeType===1&&gv(t,n),Id(t)):gv(Gn,n.stateNode));break;case 4:r=Gn,i=Ci,Gn=n.stateNode.containerInfo,Ci=!0,oa(t,e,n),Gn=r,Ci=i;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&yx(n,e,a),i=i.next}while(i!==r)}oa(t,e,n);break;case 1:if(!er&&(gc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){dn(n,e,o)}oa(t,e,n);break;case 21:oa(t,e,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,oa(t,e,n),er=r):oa(t,e,n);break;default:oa(t,e,n)}}function qS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XU),e.forEach(function(r){var i=i4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _i(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Gn=o.stateNode,Ci=!1;break e;case 3:Gn=o.stateNode.containerInfo,Ci=!0;break e;case 4:Gn=o.stateNode.containerInfo,Ci=!0;break e}o=o.return}if(Gn===null)throw Error(_e(160));GR(s,a,i),Gn=null,Ci=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){dn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WR(e,t),e=e.sibling}function WR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_i(e,t),Ki(t),r&4){try{wd(3,t,t.return),ag(3,t)}catch(v){dn(t,t.return,v)}try{wd(5,t,t.return)}catch(v){dn(t,t.return,v)}}break;case 1:_i(e,t),Ki(t),r&512&&n!==null&&gc(n,n.return);break;case 5:if(_i(e,t),Ki(t),r&512&&n!==null&&gc(n,n.return),t.flags&32){var i=t.stateNode;try{Rd(i,"")}catch(v){dn(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&hP(i,s),Wy(o,a);var u=Wy(o,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?yP(i,f):d==="dangerouslySetInnerHTML"?gP(i,f):d==="children"?Rd(i,f):y0(i,d,f,u)}switch(o){case"input":Uy(i,s);break;case"textarea":pP(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?wc(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?wc(i,!!s.multiple,s.defaultValue,!0):wc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ud]=s}catch(v){dn(t,t.return,v)}}break;case 6:if(_i(e,t),Ki(t),r&4){if(t.stateNode===null)throw Error(_e(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){dn(t,t.return,v)}}break;case 3:if(_i(e,t),Ki(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Id(e.containerInfo)}catch(v){dn(t,t.return,v)}break;case 4:_i(e,t),Ki(t);break;case 13:_i(e,t),Ki(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Y0=xn())),r&4&&qS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(er=(u=er)||d,_i(e,t),er=u):_i(e,t),Ki(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(He=t,d=t.child;d!==null;){for(f=He=d;He!==null;){switch(h=He,m=h.child,h.tag){case 0:case 11:case 14:case 15:wd(4,h,h.return);break;case 1:gc(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){dn(r,n,v)}}break;case 5:gc(h,h.return);break;case 22:if(h.memoizedState!==null){ZS(f);continue}}m!==null?(m.return=h,He=m):ZS(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=vP("display",a))}catch(v){dn(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){dn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_i(e,t),Ki(t),r&4&&qS(t);break;case 21:break;default:_i(e,t),Ki(t)}}function Ki(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HR(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rd(i,""),r.flags&=-33);var s=$S(t);wx(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=$S(t);_x(t,o,a);break;default:throw Error(_e(161))}}catch(c){dn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KU(t,e,n){He=t,$R(t)}function $R(t,e,n){for(var r=(t.mode&1)!==0;He!==null;){var i=He,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ph;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||er;o=ph;var u=er;if(ph=a,(er=c)&&!u)for(He=i;He!==null;)a=He,c=a.child,a.tag===22&&a.memoizedState!==null?KS(i):c!==null?(c.return=a,He=c):KS(i);for(;s!==null;)He=s,$R(s),s=s.sibling;He=i,ph=o,er=u}XS(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,He=s):XS(t)}}function XS(t){for(;He!==null;){var e=He;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:er||ag(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!er)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&DS(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}DS(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Id(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}er||e.flags&512&&xx(e)}catch(h){dn(e,e.return,h)}}if(e===t){He=null;break}if(n=e.sibling,n!==null){n.return=e.return,He=n;break}He=e.return}}function ZS(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var n=e.sibling;if(n!==null){n.return=e.return,He=n;break}He=e.return}}function KS(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ag(4,e)}catch(c){dn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){dn(e,i,c)}}var s=e.return;try{xx(e)}catch(c){dn(e,s,c)}break;case 5:var a=e.return;try{xx(e)}catch(c){dn(e,a,c)}}}catch(c){dn(e,e.return,c)}if(e===t){He=null;break}var o=e.sibling;if(o!==null){o.return=e.return,He=o;break}He=e.return}}var YU=Math.ceil,nm=ia.ReactCurrentDispatcher,Z0=ia.ReactCurrentOwner,fi=ia.ReactCurrentBatchConfig,Rt=0,Fn=null,Sn=null,$n=0,Vr=0,vc=mo(0),Nn=0,$d=null,al=0,og=0,K0=0,bd=null,Ar=null,Y0=0,su=1/0,Ls=null,rm=!1,bx=null,Wa=null,mh=!1,Oa=null,im=0,Sd=0,Sx=null,yp=-1,xp=0;function gr(){return Rt&6?xn():yp!==-1?yp:yp=xn()}function $a(t){return t.mode&1?Rt&2&&$n!==0?$n&-$n:LU.transition!==null?(xp===0&&(xp=PP()),xp):(t=Vt,t!==0||(t=window.event,t=t===void 0?16:zP(t.type)),t):1}function ji(t,e,n,r){if(50<Sd)throw Sd=0,Sx=null,Error(_e(185));Tf(t,n,r),(!(Rt&2)||t!==Fn)&&(t===Fn&&(!(Rt&2)&&(og|=n),Nn===4&&Sa(t,$n)),Dr(t,r),n===1&&Rt===0&&!(e.mode&1)&&(su=xn()+500,rg&&go()))}function Dr(t,e){var n=t.callbackNode;L3(t,e);var r=Bp(t,t===Fn?$n:0);if(r===0)n!==null&&sS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sS(n),e===1)t.tag===0?kU(YS.bind(null,t)):nR(YS.bind(null,t)),NU(function(){!(Rt&6)&&go()}),n=null;else{switch(RP(r)){case 1:n=S0;break;case 4:n=AP;break;case 16:n=Up;break;case 536870912:n=NP;break;default:n=Up}n=eD(n,qR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qR(t,e){if(yp=-1,xp=0,Rt&6)throw Error(_e(327));var n=t.callbackNode;if(Tc()&&t.callbackNode!==n)return null;var r=Bp(t,t===Fn?$n:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sm(t,r);else{e=r;var i=Rt;Rt|=2;var s=ZR();(Fn!==t||$n!==e)&&(Ls=null,su=xn()+500,Yo(t,e));do try{e4();break}catch(o){XR(t,o)}while(!0);j0(),nm.current=s,Rt=i,Sn!==null?e=0:(Fn=null,$n=0,e=Nn)}if(e!==0){if(e===2&&(i=Ky(t),i!==0&&(r=i,e=Ex(t,i))),e===1)throw n=$d,Yo(t,0),Sa(t,r),Dr(t,xn()),n;if(e===6)Sa(t,r);else{if(i=t.current.alternate,!(r&30)&&!QU(i)&&(e=sm(t,r),e===2&&(s=Ky(t),s!==0&&(r=s,e=Ex(t,s))),e===1))throw n=$d,Yo(t,0),Sa(t,r),Dr(t,xn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(_e(345));case 2:Do(t,Ar,Ls);break;case 3:if(Sa(t,r),(r&130023424)===r&&(e=Y0+500-xn(),10<e)){if(Bp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ix(Do.bind(null,t,Ar,Ls),e);break}Do(t,Ar,Ls);break;case 4:if(Sa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ii(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=xn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YU(r/1960))-r,10<r){t.timeoutHandle=ix(Do.bind(null,t,Ar,Ls),r);break}Do(t,Ar,Ls);break;case 5:Do(t,Ar,Ls);break;default:throw Error(_e(329))}}}return Dr(t,xn()),t.callbackNode===n?qR.bind(null,t):null}function Ex(t,e){var n=bd;return t.current.memoizedState.isDehydrated&&(Yo(t,e).flags|=256),t=sm(t,e),t!==2&&(e=Ar,Ar=n,e!==null&&Mx(e)),t}function Mx(t){Ar===null?Ar=t:Ar.push.apply(Ar,t)}function QU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sa(t,e){for(e&=~K0,e&=~og,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ii(e),r=1<<n;t[n]=-1,e&=~r}}function YS(t){if(Rt&6)throw Error(_e(327));Tc();var e=Bp(t,0);if(!(e&1))return Dr(t,xn()),null;var n=sm(t,e);if(t.tag!==0&&n===2){var r=Ky(t);r!==0&&(e=r,n=Ex(t,r))}if(n===1)throw n=$d,Yo(t,0),Sa(t,e),Dr(t,xn()),n;if(n===6)throw Error(_e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Do(t,Ar,Ls),Dr(t,xn()),null}function Q0(t,e){var n=Rt;Rt|=1;try{return t(e)}finally{Rt=n,Rt===0&&(su=xn()+500,rg&&go())}}function ol(t){Oa!==null&&Oa.tag===0&&!(Rt&6)&&Tc();var e=Rt;Rt|=1;var n=fi.transition,r=Vt;try{if(fi.transition=null,Vt=1,t)return t()}finally{Vt=r,fi.transition=n,Rt=e,!(Rt&6)&&go()}}function J0(){Vr=vc.current,Kt(vc)}function Yo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AU(n)),Sn!==null)for(n=Sn.return;n!==null;){var r=n;switch(k0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$p();break;case 3:ru(),Kt(Pr),Kt(nr),V0();break;case 5:B0(r);break;case 4:ru();break;case 13:Kt(rn);break;case 19:Kt(rn);break;case 10:z0(r.type._context);break;case 22:case 23:J0()}n=n.return}if(Fn=t,Sn=t=qa(t.current,null),$n=Vr=e,Nn=0,$d=null,K0=og=al=0,Ar=bd=null,Fo!==null){for(e=0;e<Fo.length;e++)if(n=Fo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Fo=null}return t}function XR(t,e){do{var n=Sn;try{if(j0(),mp.current=tm,em){for(var r=sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}em=!1}if(sl=0,zn=Cn=sn=null,_d=!1,Hd=0,Z0.current=null,n===null||n.return===null){Nn=1,$d=e,Sn=null;break}e:{var s=t,a=n.return,o=n,c=e;if(e=$n,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=OS(a);if(m!==null){m.flags&=-257,FS(m,a,o,s,e),m.mode&1&&zS(s,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(c),e.updateQueue=v}else y.add(c);break e}else{if(!(e&1)){zS(s,u,e),ew();break e}c=Error(_e(426))}}else if(Jt&&o.mode&1){var g=OS(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),FS(g,a,o,s,e),L0(iu(c,o));break e}}s=c=iu(c,o),Nn!==4&&(Nn=2),bd===null?bd=[s]:bd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=RR(s,c,e);RS(s,p);break e;case 1:o=c;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wa===null||!Wa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=DR(s,o,e);RS(s,b);break e}}s=s.return}while(s!==null)}YR(n)}catch(S){e=S,Sn===n&&n!==null&&(Sn=n=n.return);continue}break}while(!0)}function ZR(){var t=nm.current;return nm.current=tm,t===null?tm:t}function ew(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Fn===null||!(al&268435455)&&!(og&268435455)||Sa(Fn,$n)}function sm(t,e){var n=Rt;Rt|=2;var r=ZR();(Fn!==t||$n!==e)&&(Ls=null,Yo(t,e));do try{JU();break}catch(i){XR(t,i)}while(!0);if(j0(),Rt=n,nm.current=r,Sn!==null)throw Error(_e(261));return Fn=null,$n=0,Nn}function JU(){for(;Sn!==null;)KR(Sn)}function e4(){for(;Sn!==null&&!M3();)KR(Sn)}function KR(t){var e=JR(t.alternate,t,Vr);t.memoizedProps=t.pendingProps,e===null?YR(t):Sn=e,Z0.current=null}function YR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qU(n,e),n!==null){n.flags&=32767,Sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nn=6,Sn=null;return}}else if(n=$U(n,e,Vr),n!==null){Sn=n;return}if(e=e.sibling,e!==null){Sn=e;return}Sn=e=t}while(e!==null);Nn===0&&(Nn=5)}function Do(t,e,n){var r=Vt,i=fi.transition;try{fi.transition=null,Vt=1,t4(t,e,n,r)}finally{fi.transition=i,Vt=r}return null}function t4(t,e,n,r){do Tc();while(Oa!==null);if(Rt&6)throw Error(_e(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_e(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(I3(t,s),t===Fn&&(Sn=Fn=null,$n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mh||(mh=!0,eD(Up,function(){return Tc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fi.transition,fi.transition=null;var a=Vt;Vt=1;var o=Rt;Rt|=4,Z0.current=null,ZU(t,n),WR(n,t),wU(nx),Vp=!!tx,nx=tx=null,t.current=n,KU(n),T3(),Rt=o,Vt=a,fi.transition=s}else t.current=n;if(mh&&(mh=!1,Oa=t,im=i),s=t.pendingLanes,s===0&&(Wa=null),N3(n.stateNode),Dr(t,xn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rm)throw rm=!1,t=bx,bx=null,t;return im&1&&t.tag!==0&&Tc(),s=t.pendingLanes,s&1?t===Sx?Sd++:(Sd=0,Sx=t):Sd=0,go(),null}function Tc(){if(Oa!==null){var t=RP(im),e=fi.transition,n=Vt;try{if(fi.transition=null,Vt=16>t?16:t,Oa===null)var r=!1;else{if(t=Oa,Oa=null,im=0,Rt&6)throw Error(_e(331));var i=Rt;for(Rt|=4,He=t.current;He!==null;){var s=He,a=s.child;if(He.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(He=u;He!==null;){var d=He;switch(d.tag){case 0:case 11:case 15:wd(8,d,s)}var f=d.child;if(f!==null)f.return=d,He=f;else for(;He!==null;){d=He;var h=d.sibling,m=d.return;if(VR(d),d===u){He=null;break}if(h!==null){h.return=m,He=h;break}He=m}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}He=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,He=a;else e:for(;He!==null;){if(s=He,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wd(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,He=p;break e}He=s.return}}var _=t.current;for(He=_;He!==null;){a=He;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,He=w;else e:for(a=_;He!==null;){if(o=He,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ag(9,o)}}catch(S){dn(o,o.return,S)}if(o===a){He=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,He=b;break e}He=o.return}}if(Rt=i,go(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Qm,t)}catch{}r=!0}return r}finally{Vt=n,fi.transition=e}}return!1}function QS(t,e,n){e=iu(n,e),e=RR(t,e,1),t=Ga(t,e,1),e=gr(),t!==null&&(Tf(t,1,e),Dr(t,e))}function dn(t,e,n){if(t.tag===3)QS(t,t,n);else for(;e!==null;){if(e.tag===3){QS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wa===null||!Wa.has(r))){t=iu(n,t),t=DR(e,t,1),e=Ga(e,t,1),t=gr(),e!==null&&(Tf(e,1,t),Dr(e,t));break}}e=e.return}}function n4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gr(),t.pingedLanes|=t.suspendedLanes&n,Fn===t&&($n&n)===n&&(Nn===4||Nn===3&&($n&130023424)===$n&&500>xn()-Y0?Yo(t,0):K0|=n),Dr(t,e)}function QR(t,e){e===0&&(t.mode&1?(e=sh,sh<<=1,!(sh&130023424)&&(sh=4194304)):e=1);var n=gr();t=Ys(t,e),t!==null&&(Tf(t,e,n),Dr(t,n))}function r4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),QR(t,n)}function i4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(e),QR(t,n)}var JR;JR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pr.current)Nr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nr=!1,WU(t,e,n);Nr=!!(t.flags&131072)}else Nr=!1,Jt&&e.flags&1048576&&rR(e,Zp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vp(t,e),t=e.pendingProps;var i=eu(e,nr.current);Mc(e,n),i=G0(null,e,r,t,i,n);var s=W0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rr(r)?(s=!0,qp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,F0(e),i.updater=sg,e.stateNode=i,i._reactInternals=e,dx(e,r,t,n),e=px(null,e,r,!0,s,n)):(e.tag=0,Jt&&s&&D0(e),dr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=a4(r),t=Mi(r,t),i){case 0:e=hx(null,e,r,t,n);break e;case 1:e=VS(null,e,r,t,n);break e;case 11:e=US(null,e,r,t,n);break e;case 14:e=BS(null,e,r,Mi(r.type,t),n);break e}throw Error(_e(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mi(r,i),hx(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mi(r,i),VS(t,e,r,i,n);case 3:e:{if(jR(e),t===null)throw Error(_e(387));r=e.pendingProps,s=e.memoizedState,i=s.element,cR(t,e),Qp(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=iu(Error(_e(423)),e),e=HS(t,e,r,n,i);break e}else if(r!==i){i=iu(Error(_e(424)),e),e=HS(t,e,r,n,i);break e}else for(Xr=Ha(e.stateNode.containerInfo.firstChild),Zr=e,Jt=!0,Ai=null,n=oR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tu(),r===i){e=Qs(t,e,n);break e}dr(t,e,r,n)}e=e.child}return e;case 5:return uR(e),t===null&&lx(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,rx(r,i)?a=null:s!==null&&rx(r,s)&&(e.flags|=32),IR(t,e),dr(t,e,a,n),e.child;case 6:return t===null&&lx(e),null;case 13:return zR(t,e,n);case 4:return U0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nu(e,null,r,n):dr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mi(r,i),US(t,e,r,i,n);case 7:return dr(t,e,e.pendingProps,n),e.child;case 8:return dr(t,e,e.pendingProps.children,n),e.child;case 12:return dr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,qt(Kp,r._currentValue),r._currentValue=a,s!==null)if(Hi(s.value,a)){if(s.children===i.children&&!Pr.current){e=Qs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Vs(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),cx(s.return,n,e),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(_e(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),cx(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}dr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Mc(e,n),i=mi(i),r=r(i),e.flags|=1,dr(t,e,r,n),e.child;case 14:return r=e.type,i=Mi(r,e.pendingProps),i=Mi(r.type,i),BS(t,e,r,i,n);case 15:return kR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mi(r,i),vp(t,e),e.tag=1,Rr(r)?(t=!0,qp(e)):t=!1,Mc(e,n),PR(e,r,i),dx(e,r,i,n),px(null,e,r,!0,t,n);case 19:return OR(t,e,n);case 22:return LR(t,e,n)}throw Error(_e(156,e.tag))};function eD(t,e){return CP(t,e)}function s4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(t,e,n,r){return new s4(t,e,n,r)}function tw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function a4(t){if(typeof t=="function")return tw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_0)return 11;if(t===w0)return 14}return 2}function qa(t,e){var n=t.alternate;return n===null?(n=di(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _p(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")tw(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case oc:return Qo(n.children,i,s,e);case x0:a=8,i|=8;break;case Iy:return t=di(12,n,e,i|2),t.elementType=Iy,t.lanes=s,t;case jy:return t=di(13,n,e,i),t.elementType=jy,t.lanes=s,t;case zy:return t=di(19,n,e,i),t.elementType=zy,t.lanes=s,t;case uP:return lg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lP:a=10;break e;case cP:a=9;break e;case _0:a=11;break e;case w0:a=14;break e;case xa:a=16,r=null;break e}throw Error(_e(130,t==null?t:typeof t,""))}return e=di(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qo(t,e,n,r){return t=di(7,t,r,e),t.lanes=n,t}function lg(t,e,n,r){return t=di(22,t,r,e),t.elementType=uP,t.lanes=n,t.stateNode={isHidden:!1},t}function Ev(t,e,n){return t=di(6,t,null,e),t.lanes=n,t}function Mv(t,e,n){return e=di(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function o4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sv(0),this.expirationTimes=sv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nw(t,e,n,r,i,s,a,o,c){return t=new o4(t,e,n,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=di(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},F0(s),t}function l4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ac,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tD(t){if(!t)return to;t=t._reactInternals;e:{if(wl(t)!==t||t.tag!==1)throw Error(_e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_e(171))}if(t.tag===1){var n=t.type;if(Rr(n))return tR(t,n,e)}return e}function nD(t,e,n,r,i,s,a,o,c){return t=nw(n,r,!0,t,i,s,a,o,c),t.context=tD(null),n=t.current,r=gr(),i=$a(n),s=Vs(r,i),s.callback=e??null,Ga(n,s,i),t.current.lanes=i,Tf(t,i,r),Dr(t,r),t}function cg(t,e,n,r){var i=e.current,s=gr(),a=$a(i);return n=tD(n),e.context===null?e.context=n:e.pendingContext=n,e=Vs(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ga(i,e,a),t!==null&&(ji(t,i,a,s),pp(t,i,a)),a}function am(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function JS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rw(t,e){JS(t,e),(t=t.alternate)&&JS(t,e)}function c4(){return null}var rD=typeof reportError=="function"?reportError:function(t){console.error(t)};function iw(t){this._internalRoot=t}ug.prototype.render=iw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_e(409));cg(t,e,null,null)};ug.prototype.unmount=iw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ol(function(){cg(null,t,null,null)}),e[Ks]=null}};function ug(t){this._internalRoot=t}ug.prototype.unstable_scheduleHydration=function(t){if(t){var e=LP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ba.length&&e!==0&&e<ba[n].priority;n++);ba.splice(n,0,t),n===0&&jP(t)}};function sw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eE(){}function u4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=am(a);s.call(u)}}var a=nD(e,r,t,0,null,!1,!1,"",eE);return t._reactRootContainer=a,t[Ks]=a.current,Od(t.nodeType===8?t.parentNode:t),ol(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=am(c);o.call(u)}}var c=nw(t,0,!1,null,null,!1,!1,"",eE);return t._reactRootContainer=c,t[Ks]=c.current,Od(t.nodeType===8?t.parentNode:t),ol(function(){cg(e,c,n,r)}),c}function fg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=am(a);o.call(c)}}cg(e,a,t,i)}else a=u4(n,e,t,i,r);return am(a)}DP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=id(e.pendingLanes);n!==0&&(E0(e,n|1),Dr(e,xn()),!(Rt&6)&&(su=xn()+500,go()))}break;case 13:ol(function(){var r=Ys(t,1);if(r!==null){var i=gr();ji(r,t,1,i)}}),rw(t,1)}};M0=function(t){if(t.tag===13){var e=Ys(t,134217728);if(e!==null){var n=gr();ji(e,t,134217728,n)}rw(t,134217728)}};kP=function(t){if(t.tag===13){var e=$a(t),n=Ys(t,e);if(n!==null){var r=gr();ji(n,t,e,r)}rw(t,e)}};LP=function(){return Vt};IP=function(t,e){var n=Vt;try{return Vt=t,e()}finally{Vt=n}};qy=function(t,e,n){switch(e){case"input":if(Uy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ng(r);if(!i)throw Error(_e(90));fP(r),Uy(r,i)}}}break;case"textarea":pP(t,n);break;case"select":e=n.value,e!=null&&wc(t,!!n.multiple,e,!1)}};wP=Q0;bP=ol;var d4={usingClientEntryPoint:!1,Events:[Af,dc,ng,xP,_P,Q0]},Uu={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f4={bundleType:Uu.bundleType,version:Uu.version,rendererPackageName:Uu.rendererPackageName,rendererConfig:Uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MP(t),t===null?null:t.stateNode},findFiberByHostInstance:Uu.findFiberByHostInstance||c4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{Qm=gh.inject(f4),cs=gh}catch{}}Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d4;Jr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sw(e))throw Error(_e(200));return l4(t,e,null,n)};Jr.createRoot=function(t,e){if(!sw(t))throw Error(_e(299));var n=!1,r="",i=rD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nw(t,1,!1,null,null,n,!1,r,i),t[Ks]=e.current,Od(t.nodeType===8?t.parentNode:t),new iw(e)};Jr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_e(188)):(t=Object.keys(t).join(","),Error(_e(268,t)));return t=MP(e),t=t===null?null:t.stateNode,t};Jr.flushSync=function(t){return ol(t)};Jr.hydrate=function(t,e,n){if(!dg(e))throw Error(_e(200));return fg(null,t,e,!0,n)};Jr.hydrateRoot=function(t,e,n){if(!sw(t))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=rD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=nD(e,null,t,1,n??null,i,!1,s,a),t[Ks]=e.current,Od(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ug(e)};Jr.render=function(t,e,n){if(!dg(e))throw Error(_e(200));return fg(null,t,e,!1,n)};Jr.unmountComponentAtNode=function(t){if(!dg(t))throw Error(_e(40));return t._reactRootContainer?(ol(function(){fg(null,null,t,!1,function(){t._reactRootContainer=null,t[Ks]=null})}),!0):!1};Jr.unstable_batchedUpdates=Q0;Jr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dg(n))throw Error(_e(200));if(t==null||t._reactInternals===void 0)throw Error(_e(38));return fg(t,e,n,!1,r)};Jr.version="18.3.1-next-f1338f8080-20240426";function iD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iD)}catch(t){console.error(t)}}iD(),iP.exports=Jr;var bl=iP.exports;const h4=WN(bl);var sD,tE=bl;sD=tE.createRoot,tE.hydrateRoot;function p4(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,s,a=[],o="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(a.push(n),o+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),a.push(i.substring(1,~r?r:~s?s:i.length)),o+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(o+=(~r?"?":"")+"\\"+i.substring(s))):o+="/"+i;return{keys:a,pattern:new RegExp("^"+o+(e?"(?=$|/)":"/?$"),"i")}}var aD={exports:{}},oD={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=x;function m4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var g4=typeof Object.is=="function"?Object.is:m4,v4=au.useState,y4=au.useEffect,x4=au.useLayoutEffect,_4=au.useDebugValue;function w4(t,e){var n=e(),r=v4({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return x4(function(){i.value=n,i.getSnapshot=e,Tv(i)&&s({inst:i})},[t,n,e]),y4(function(){return Tv(i)&&s({inst:i}),t(function(){Tv(i)&&s({inst:i})})},[t]),_4(n),n}function Tv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!g4(t,n)}catch{return!0}}function b4(t,e){return e()}var S4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?b4:w4;oD.useSyncExternalStore=au.useSyncExternalStore!==void 0?au.useSyncExternalStore:S4;aD.exports=oD;var E4=aD.exports;const M4=nP.useInsertionEffect,T4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lD=T4?x.useLayoutEffect:x.useEffect,C4=M4||lD,aw=t=>{const e=x.useRef([t,(...n)=>e[0](...n)]).current;return C4(()=>{e[0]=t}),e[1]},A4="popstate",ow="pushState",lw="replaceState",N4="hashchange",nE=[A4,ow,lw,N4],P4=t=>{for(const e of nE)addEventListener(e,t);return()=>{for(const e of nE)removeEventListener(e,t)}},cD=(t,e)=>E4.useSyncExternalStore(P4,t,e),R4=()=>location.search,D4=({ssrSearch:t=""}={})=>cD(R4,()=>t),rE=()=>location.pathname,k4=({ssrPath:t}={})=>cD(rE,t?()=>t:rE),L4=(t,{replace:e=!1,state:n=null}={})=>history[e?lw:ow](n,"",t),I4=(t={})=>[k4(t),L4],iE=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[iE]>"u"){for(const t of[ow,lw]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,iE,{value:!0})}const j4=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",uD=(t="")=>t==="/"?"":t,z4=(t,e)=>t[0]==="~"?t.slice(1):uD(e)+t,O4=(t="",e)=>j4(sE(uD(t)),sE(e)),sE=t=>{try{return decodeURI(t)}catch{return t}},dD={hook:I4,searchHook:D4,parser:p4,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},fD=x.createContext(dD),Su=()=>x.useContext(fD),hD={},pD=x.createContext(hD),F4=()=>x.useContext(pD),hg=t=>{const[e,n]=t.hook(t);return[O4(t.base,e),aw((r,i)=>n(z4(r,t.base),i))]},kn=()=>hg(Su()),cw=(t,e,n,r)=>{const{pattern:i,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=i.exec(n)||[],[o,...c]=a;return o!==void 0?[!0,(()=>{const u=s!==!1?Object.fromEntries(s.map((f,h)=>[f,c[h]])):a.groups;let d={...c};return u&&Object.assign(d,u),d})(),...r?[o]:[]]:[!1,null]},Cc=t=>cw(Su().parser,t,kn()[0]),U4=({children:t,...e})=>{var d,f;const n=Su(),r=e.hook?dD:n;let i=r;const[s,a]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=s),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let o=x.useRef({}),c=o.current,u=c;for(let h in r){const m=h==="base"?r[h]+(e[h]||""):e[h]||r[h];c===u&&m!==u[h]&&(o.current=u={...u}),u[h]=m,m!==r[h]&&(i=u)}return x.createElement(fD.Provider,{value:i,children:t})},aE=({children:t,component:e},n)=>e?x.createElement(e,{params:n}):typeof t=="function"?t(n):t,B4=t=>{let e=x.useRef(hD),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Ft=({path:t,nest:e,match:n,...r})=>{const i=Su(),[s]=hg(i),[a,o,c]=n??cw(i.parser,t,s,e),u=B4({...F4(),...o});if(!a)return null;const d=c?x.createElement(U4,{base:c},aE(r,u)):aE(r,u);return x.createElement(pD.Provider,{value:u,children:d})},ai=x.forwardRef((t,e)=>{const n=Su(),[r,i]=hg(n),{to:s="",href:a=s,onClick:o,asChild:c,children:u,className:d,replace:f,state:h,...m}=t,y=aw(g=>{g.ctrlKey||g.metaKey||g.altKey||g.shiftKey||g.button!==0||(o==null||o(g),g.defaultPrevented||(g.preventDefault(),i(a,t)))}),v=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&x.isValidElement(u)?x.cloneElement(u,{onClick:y,href:v}):x.createElement("a",{...m,onClick:y,href:v,className:d!=null&&d.call?d(r===a):d,children:u,ref:e})}),mD=t=>Array.isArray(t)?t.flatMap(e=>mD(e&&e.type===x.Fragment?e.props.children:e)):[t],V4=({children:t,location:e})=>{const n=Su(),[r]=hg(n);for(const i of mD(t)){let s=0;if(x.isValidElement(i)&&(s=cw(n.parser,i.props.path,e||r,i.props.nest))[0])return x.cloneElement(i,{match:s})}return null},om=t=>{const{to:e,href:n=e}=t,[,r]=kn(),i=aw(()=>r(e||n,t));return lD(()=>{i()},[]),null};var Eu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ll=typeof window>"u"||"Deno"in globalThis;function oi(){}function H4(t,e){return typeof t=="function"?t(e):t}function Tx(t){return typeof t=="number"&&t>=0&&t!==1/0}function gD(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ac(t,e){return typeof t=="function"?t(e):t}function Ni(t,e){return typeof t=="function"?t(e):t}function oE(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(r){if(e.queryHash!==uw(a,e.options))return!1}else if(!qd(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function lE(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(cl(e.options.mutationKey)!==cl(s))return!1}else if(!qd(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function uw(t,e){return((e==null?void 0:e.queryKeyHashFn)||cl)(t)}function cl(t){return JSON.stringify(t,(e,n)=>Cx(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function qd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!qd(t[n],e[n])):!1}function vD(t,e){if(t===e)return t;const n=cE(t)&&cE(e);if(n||Cx(t)&&Cx(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),a=s.length,o=n?[]:{};let c=0;for(let u=0;u<a;u++){const d=n?u:s[u];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(o[d]=void 0,c++):(o[d]=vD(t[d],e[d]),o[d]===t[d]&&t[d]!==void 0&&c++)}return i===a&&c===i?t:o}return e}function lm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function cE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Cx(t){if(!uE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!uE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function uE(t){return Object.prototype.toString.call(t)==="[object Object]"}function G4(t){return new Promise(e=>{setTimeout(e,t)})}function Ax(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?vD(t,e):e}function W4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function $4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var dw=Symbol();function yD(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===dw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Go,Aa,Uc,JT,q4=(JT=class extends Eu{constructor(){super();Je(this,Go);Je(this,Aa);Je(this,Uc);ze(this,Uc,e=>{if(!ll&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,Aa)||this.setEventListener(G(this,Uc))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,Aa))==null||e.call(this),ze(this,Aa,void 0))}setEventListener(e){var n;ze(this,Uc,e),(n=G(this,Aa))==null||n.call(this),ze(this,Aa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){G(this,Go)!==e&&(ze(this,Go,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof G(this,Go)=="boolean"?G(this,Go):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Go=new WeakMap,Aa=new WeakMap,Uc=new WeakMap,JT),fw=new q4,Bc,Na,Vc,eC,X4=(eC=class extends Eu{constructor(){super();Je(this,Bc,!0);Je(this,Na);Je(this,Vc);ze(this,Vc,e=>{if(!ll&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Na)||this.setEventListener(G(this,Vc))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,Na))==null||e.call(this),ze(this,Na,void 0))}setEventListener(e){var n;ze(this,Vc,e),(n=G(this,Na))==null||n.call(this),ze(this,Na,e(this.setOnline.bind(this)))}setOnline(e){G(this,Bc)!==e&&(ze(this,Bc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return G(this,Bc)}},Bc=new WeakMap,Na=new WeakMap,Vc=new WeakMap,eC),cm=new X4;function Nx(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function Z4(t){return Math.min(1e3*2**t,3e4)}function xD(t){return(t??"online")==="online"?cm.isOnline():!0}var _D=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Cv(t){return t instanceof _D}function wD(t){let e=!1,n=0,r=!1,i;const s=Nx(),a=v=>{var g;r||(h(new _D(v)),(g=t.abort)==null||g.call(t))},o=()=>{e=!0},c=()=>{e=!1},u=()=>fw.isFocused()&&(t.networkMode==="always"||cm.isOnline())&&t.canRun(),d=()=>xD(t.networkMode)&&t.canRun(),f=v=>{var g;r||(r=!0,(g=t.onSuccess)==null||g.call(t,v),i==null||i(),s.resolve(v))},h=v=>{var g;r||(r=!0,(g=t.onError)==null||g.call(t,v),i==null||i(),s.reject(v))},m=()=>new Promise(v=>{var g;i=p=>{(r||u())&&v(p)},(g=t.onPause)==null||g.call(t)}).then(()=>{var v;i=void 0,r||(v=t.onContinue)==null||v.call(t)}),y=()=>{if(r)return;let v;const g=n===0?t.initialPromise:void 0;try{v=g??t.fn()}catch(p){v=Promise.reject(p)}Promise.resolve(v).then(f).catch(p=>{var M;if(r)return;const _=t.retry??(ll?0:3),w=t.retryDelay??Z4,b=typeof w=="function"?w(n,p):w,S=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,p);if(e||!S){h(p);return}n++,(M=t.onFail)==null||M.call(t,n,p),G4(b).then(()=>u()?void 0:m()).then(()=>{e?h(p):y()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),s)}}function K4(){let t=[],e=0,n=o=>{o()},r=o=>{o()},i=o=>setTimeout(o,0);const s=o=>{e?t.push(o):i(()=>{n(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||a()}return c},batchCalls:o=>(...c)=>{s(()=>{o(...c)})},schedule:s,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var An=K4(),Wo,tC,bD=(tC=class{constructor(){Je(this,Wo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tx(this.gcTime)&&ze(this,Wo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ll?1/0:5*60*1e3))}clearGcTimeout(){G(this,Wo)&&(clearTimeout(G(this,Wo)),ze(this,Wo,void 0))}},Wo=new WeakMap,tC),Hc,Gc,si,Jn,wf,$o,Ti,Rs,nC,Y4=(nC=class extends bD{constructor(e){super();Je(this,Ti);Je(this,Hc);Je(this,Gc);Je(this,si);Je(this,Jn);Je(this,wf);Je(this,$o);ze(this,$o,!1),ze(this,wf,e.defaultOptions),this.setOptions(e.options),this.observers=[],ze(this,si,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ze(this,Hc,Q4(this.options)),this.state=e.state??G(this,Hc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=G(this,Jn))==null?void 0:e.promise}setOptions(e){this.options={...G(this,wf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,si).remove(this)}setData(e,n){const r=Ax(this.state.data,e,this.options);return mt(this,Ti,Rs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){mt(this,Ti,Rs).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=G(this,Jn))==null?void 0:r.promise;return(i=G(this,Jn))==null||i.cancel(e),n?n.then(oi).catch(oi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Hc))}isActive(){return this.observers.some(e=>Ni(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!gD(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=G(this,Jn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=G(this,Jn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),G(this,si).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(G(this,Jn)&&(G(this,$o)?G(this,Jn).cancel({revert:!0}):G(this,Jn).cancelRetry()),this.scheduleGc()),G(this,si).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||mt(this,Ti,Rs).call(this,{type:"invalidate"})}fetch(e,n){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,Jn))return G(this,Jn).continueRetry(),G(this,Jn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ze(this,$o,!0),r.signal)})},s=()=>{const f=yD(this.options,n),h={queryKey:this.queryKey,meta:this.meta};return i(h),ze(this,$o,!1),this.options.persister?this.options.persister(f,h,this):f(h)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(a),(c=this.options.behavior)==null||c.onFetch(a,this),ze(this,Gc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&mt(this,Ti,Rs).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const o=f=>{var h,m,y,v;Cv(f)&&f.silent||mt(this,Ti,Rs).call(this,{type:"error",error:f}),Cv(f)||((m=(h=G(this,si).config).onError)==null||m.call(h,f,this),(v=(y=G(this,si).config).onSettled)==null||v.call(y,this.state.data,f,this)),this.scheduleGc()};return ze(this,Jn,wD({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var h,m,y,v;if(f===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(g){o(g);return}(m=(h=G(this,si).config).onSuccess)==null||m.call(h,f,this),(v=(y=G(this,si).config).onSettled)==null||v.call(y,f,this.state.error,this),this.scheduleGc()},onError:o,onFail:(f,h)=>{mt(this,Ti,Rs).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{mt(this,Ti,Rs).call(this,{type:"pause"})},onContinue:()=>{mt(this,Ti,Rs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),G(this,Jn).start()}},Hc=new WeakMap,Gc=new WeakMap,si=new WeakMap,Jn=new WeakMap,wf=new WeakMap,$o=new WeakMap,Ti=new WeakSet,Rs=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...SD(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Cv(i)&&i.revert&&G(this,Gc)?{...G(this,Gc),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),An.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,si).notify({query:this,type:"updated",action:e})})},nC);function SD(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xD(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Q4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ji,rC,J4=(rC=class extends Eu{constructor(e={}){super();Je(this,Ji);this.config=e,ze(this,Ji,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??uw(i,n);let a=this.get(s);return a||(a=new Y4({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){G(this,Ji).has(e.queryHash)||(G(this,Ji).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=G(this,Ji).get(e.queryHash);n&&(e.destroy(),n===e&&G(this,Ji).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){An.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,Ji).get(e)}getAll(){return[...G(this,Ji).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>oE(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>oE(e,r)):n}notify(e){An.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){An.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){An.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ji=new WeakMap,rC),es,cr,qo,ts,va,iC,eB=(iC=class extends bD{constructor(e){super();Je(this,ts);Je(this,es);Je(this,cr);Je(this,qo);this.mutationId=e.mutationId,ze(this,cr,e.mutationCache),ze(this,es,[]),this.state=e.state||ED(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){G(this,es).includes(e)||(G(this,es).push(e),this.clearGcTimeout(),G(this,cr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ze(this,es,G(this,es).filter(n=>n!==e)),this.scheduleGc(),G(this,cr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){G(this,es).length||(this.state.status==="pending"?this.scheduleGc():G(this,cr).remove(this))}continue(){var e;return((e=G(this,qo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,a,o,c,u,d,f,h,m,y,v,g,p,_,w,b,S,M,C;ze(this,qo,wD({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(P,A)=>{mt(this,ts,va).call(this,{type:"failed",failureCount:P,error:A})},onPause:()=>{mt(this,ts,va).call(this,{type:"pause"})},onContinue:()=>{mt(this,ts,va).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,cr).canRun(this)}));const n=this.state.status==="pending",r=!G(this,qo).canStart();try{if(!n){mt(this,ts,va).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=G(this,cr).config).onMutate)==null?void 0:s.call(i,e,this));const A=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e));A!==this.state.context&&mt(this,ts,va).call(this,{type:"pending",context:A,variables:e,isPaused:r})}const P=await G(this,qo).start();return await((u=(c=G(this,cr).config).onSuccess)==null?void 0:u.call(c,P,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,P,e,this.state.context)),await((m=(h=G(this,cr).config).onSettled)==null?void 0:m.call(h,P,null,this.state.variables,this.state.context,this)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,P,null,e,this.state.context)),mt(this,ts,va).call(this,{type:"success",data:P}),P}catch(P){try{throw await((p=(g=G(this,cr).config).onError)==null?void 0:p.call(g,P,e,this.state.context,this)),await((w=(_=this.options).onError)==null?void 0:w.call(_,P,e,this.state.context)),await((S=(b=G(this,cr).config).onSettled)==null?void 0:S.call(b,void 0,P,this.state.variables,this.state.context,this)),await((C=(M=this.options).onSettled)==null?void 0:C.call(M,void 0,P,e,this.state.context)),P}finally{mt(this,ts,va).call(this,{type:"error",error:P})}}finally{G(this,cr).runNext(this)}}},es=new WeakMap,cr=new WeakMap,qo=new WeakMap,ts=new WeakSet,va=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),An.batch(()=>{G(this,es).forEach(r=>{r.onMutationUpdate(e)}),G(this,cr).notify({mutation:this,type:"updated",action:e})})},iC);function ED(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Br,bf,sC,tB=(sC=class extends Eu{constructor(e={}){super();Je(this,Br);Je(this,bf);this.config=e,ze(this,Br,new Map),ze(this,bf,Date.now())}build(e,n,r){const i=new eB({mutationCache:this,mutationId:++Jf(this,bf)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){const n=vh(e),r=G(this,Br).get(n)??[];r.push(e),G(this,Br).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=vh(e);if(G(this,Br).has(n)){const i=(r=G(this,Br).get(n))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?G(this,Br).delete(n):G(this,Br).set(n,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=G(this,Br).get(vh(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=G(this,Br).get(vh(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){An.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...G(this,Br).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>lE(n,r))}findAll(e={}){return this.getAll().filter(n=>lE(e,n))}notify(e){An.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return An.batch(()=>Promise.all(e.map(n=>n.continue().catch(oi))))}},Br=new WeakMap,bf=new WeakMap,sC);function vh(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function dE(t){return{onFetch:(e,n)=>{var d,f,h,m,y;const r=e.options,i=(h=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},p=yD(e.options,e.fetchOptions),_=async(w,b,S)=>{if(v)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const M={queryKey:e.queryKey,pageParam:b,direction:S?"backward":"forward",meta:e.options.meta};g(M);const C=await p(M),{maxPages:P}=e.options,A=S?$4:W4;return{pages:A(w.pages,C,P),pageParams:A(w.pageParams,b,P)}};if(i&&s.length){const w=i==="backward",b=w?nB:fE,S={pages:s,pageParams:a},M=b(r,S);o=await _(S,M,w)}else{const w=t??s.length;do{const b=c===0?a[0]??r.initialPageParam:fE(r,o);if(c>0&&b==null)break;o=await _(o,b),c++}while(c<w)}return o};e.options.persister?e.fetchFn=()=>{var v,g;return(g=(v=e.options).persister)==null?void 0:g.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function fE(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function nB(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var un,Pa,Ra,Wc,$c,Da,qc,Xc,aC,rB=(aC=class{constructor(t={}){Je(this,un);Je(this,Pa);Je(this,Ra);Je(this,Wc);Je(this,$c);Je(this,Da);Je(this,qc);Je(this,Xc);ze(this,un,t.queryCache||new J4),ze(this,Pa,t.mutationCache||new tB),ze(this,Ra,t.defaultOptions||{}),ze(this,Wc,new Map),ze(this,$c,new Map),ze(this,Da,0)}mount(){Jf(this,Da)._++,G(this,Da)===1&&(ze(this,qc,fw.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,un).onFocus())})),ze(this,Xc,cm.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,un).onOnline())})))}unmount(){var t,e;Jf(this,Da)._--,G(this,Da)===0&&((t=G(this,qc))==null||t.call(this),ze(this,qc,void 0),(e=G(this,Xc))==null||e.call(this),ze(this,Xc,void 0))}isFetching(t){return G(this,un).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return G(this,Pa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,un).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=G(this,un).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Ac(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return G(this,un).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=G(this,un).get(r.queryHash),s=i==null?void 0:i.state.data,a=H4(e,s);if(a!==void 0)return G(this,un).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return An.batch(()=>G(this,un).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,un).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=G(this,un);An.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=G(this,un),r={type:"active",...t};return An.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=An.batch(()=>G(this,un).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(oi).catch(oi)}invalidateQueries(t={},e={}){return An.batch(()=>{if(G(this,un).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=An.batch(()=>G(this,un).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(oi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(oi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=G(this,un).build(this,e);return n.isStaleByTime(Ac(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(oi).catch(oi)}fetchInfiniteQuery(t){return t.behavior=dE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(oi).catch(oi)}ensureInfiniteQueryData(t){return t.behavior=dE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return cm.isOnline()?G(this,Pa).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,un)}getMutationCache(){return G(this,Pa)}getDefaultOptions(){return G(this,Ra)}setDefaultOptions(t){ze(this,Ra,t)}setQueryDefaults(t,e){G(this,Wc).set(cl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...G(this,Wc).values()];let n={};return e.forEach(r=>{qd(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){G(this,$c).set(cl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...G(this,$c).values()];let n={};return e.forEach(r=>{qd(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...G(this,Ra).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=uw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===dw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...G(this,Ra).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){G(this,un).clear(),G(this,Pa).clear()}},un=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,Wc=new WeakMap,$c=new WeakMap,Da=new WeakMap,qc=new WeakMap,Xc=new WeakMap,aC),Mr,Mt,Sf,ur,Xo,Zc,ka,ns,Ef,Kc,Yc,Zo,Ko,La,Qc,zt,ad,Px,Rx,Dx,kx,Lx,Ix,jx,MD,oC,iB=(oC=class extends Eu{constructor(e,n){super();Je(this,zt);Je(this,Mr);Je(this,Mt);Je(this,Sf);Je(this,ur);Je(this,Xo);Je(this,Zc);Je(this,ka);Je(this,ns);Je(this,Ef);Je(this,Kc);Je(this,Yc);Je(this,Zo);Je(this,Ko);Je(this,La);Je(this,Qc,new Set);this.options=n,ze(this,Mr,e),ze(this,ns,null),ze(this,ka,Nx()),this.options.experimental_prefetchInRender||G(this,ka).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,Mt).addObserver(this),hE(G(this,Mt),this.options)?mt(this,zt,ad).call(this):this.updateResult(),mt(this,zt,kx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zx(G(this,Mt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zx(G(this,Mt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,mt(this,zt,Lx).call(this),mt(this,zt,Ix).call(this),G(this,Mt).removeObserver(this)}setOptions(e,n){const r=this.options,i=G(this,Mt);if(this.options=G(this,Mr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ni(this.options.enabled,G(this,Mt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");mt(this,zt,jx).call(this),G(this,Mt).setOptions(this.options),r._defaulted&&!lm(this.options,r)&&G(this,Mr).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,Mt),observer:this});const s=this.hasListeners();s&&pE(G(this,Mt),i,this.options,r)&&mt(this,zt,ad).call(this),this.updateResult(n),s&&(G(this,Mt)!==i||Ni(this.options.enabled,G(this,Mt))!==Ni(r.enabled,G(this,Mt))||Ac(this.options.staleTime,G(this,Mt))!==Ac(r.staleTime,G(this,Mt)))&&mt(this,zt,Px).call(this);const a=mt(this,zt,Rx).call(this);s&&(G(this,Mt)!==i||Ni(this.options.enabled,G(this,Mt))!==Ni(r.enabled,G(this,Mt))||a!==G(this,La))&&mt(this,zt,Dx).call(this,a)}getOptimisticResult(e){const n=G(this,Mr).getQueryCache().build(G(this,Mr),e),r=this.createResult(n,e);return aB(this,r)&&(ze(this,ur,r),ze(this,Zc,this.options),ze(this,Xo,G(this,Mt).state)),r}getCurrentResult(){return G(this,ur)}trackResult(e,n){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),e[i])})}),r}trackProp(e){G(this,Qc).add(e)}getCurrentQuery(){return G(this,Mt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=G(this,Mr).defaultQueryOptions(e),r=G(this,Mr).getQueryCache().build(G(this,Mr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return mt(this,zt,ad).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,ur)))}createResult(e,n){var P;const r=G(this,Mt),i=this.options,s=G(this,ur),a=G(this,Xo),o=G(this,Zc),u=e!==r?e.state:G(this,Sf),{state:d}=e;let f={...d},h=!1,m;if(n._optimisticResults){const A=this.hasListeners(),E=!A&&hE(e,n),L=A&&pE(e,r,n,i);(E||L)&&(f={...f,...SD(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:g}=f;if(n.select&&f.data!==void 0)if(s&&f.data===(a==null?void 0:a.data)&&n.select===G(this,Ef))m=G(this,Kc);else try{ze(this,Ef,n.select),m=n.select(f.data),m=Ax(s==null?void 0:s.data,m,n),ze(this,Kc,m),ze(this,ns,null)}catch(A){ze(this,ns,A)}else m=f.data;if(n.placeholderData!==void 0&&m===void 0&&g==="pending"){let A;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData))A=s.data;else if(A=typeof n.placeholderData=="function"?n.placeholderData((P=G(this,Yc))==null?void 0:P.state.data,G(this,Yc)):n.placeholderData,n.select&&A!==void 0)try{A=n.select(A),ze(this,ns,null)}catch(E){ze(this,ns,E)}A!==void 0&&(g="success",m=Ax(s==null?void 0:s.data,A,n),h=!0)}G(this,ns)&&(y=G(this,ns),m=G(this,Kc),v=Date.now(),g="error");const p=f.fetchStatus==="fetching",_=g==="pending",w=g==="error",b=_&&p,S=m!==void 0,C={status:g,fetchStatus:f.fetchStatus,isPending:_,isSuccess:g==="success",isError:w,isInitialLoading:b,isLoading:b,data:m,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:p,isRefetching:p&&!_,isLoadingError:w&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:w&&S,isStale:hw(e,n),refetch:this.refetch,promise:G(this,ka)};if(this.options.experimental_prefetchInRender){const A=O=>{C.status==="error"?O.reject(C.error):C.data!==void 0&&O.resolve(C.data)},E=()=>{const O=ze(this,ka,C.promise=Nx());A(O)},L=G(this,ka);switch(L.status){case"pending":e.queryHash===r.queryHash&&A(L);break;case"fulfilled":(C.status==="error"||C.data!==L.value)&&E();break;case"rejected":(C.status!=="error"||C.error!==L.reason)&&E();break}}return C}updateResult(e){const n=G(this,ur),r=this.createResult(G(this,Mt),this.options);if(ze(this,Xo,G(this,Mt).state),ze(this,Zc,this.options),G(this,Xo).data!==void 0&&ze(this,Yc,G(this,Mt)),lm(r,n))return;ze(this,ur,r);const i={},s=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!G(this,Qc).size)return!0;const c=new Set(o??G(this,Qc));return this.options.throwOnError&&c.add("error"),Object.keys(G(this,ur)).some(u=>{const d=u;return G(this,ur)[d]!==n[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),mt(this,zt,MD).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&mt(this,zt,kx).call(this)}},Mr=new WeakMap,Mt=new WeakMap,Sf=new WeakMap,ur=new WeakMap,Xo=new WeakMap,Zc=new WeakMap,ka=new WeakMap,ns=new WeakMap,Ef=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,Zo=new WeakMap,Ko=new WeakMap,La=new WeakMap,Qc=new WeakMap,zt=new WeakSet,ad=function(e){mt(this,zt,jx).call(this);let n=G(this,Mt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(oi)),n},Px=function(){mt(this,zt,Lx).call(this);const e=Ac(this.options.staleTime,G(this,Mt));if(ll||G(this,ur).isStale||!Tx(e))return;const r=gD(G(this,ur).dataUpdatedAt,e)+1;ze(this,Zo,setTimeout(()=>{G(this,ur).isStale||this.updateResult()},r))},Rx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,Mt)):this.options.refetchInterval)??!1},Dx=function(e){mt(this,zt,Ix).call(this),ze(this,La,e),!(ll||Ni(this.options.enabled,G(this,Mt))===!1||!Tx(G(this,La))||G(this,La)===0)&&ze(this,Ko,setInterval(()=>{(this.options.refetchIntervalInBackground||fw.isFocused())&&mt(this,zt,ad).call(this)},G(this,La)))},kx=function(){mt(this,zt,Px).call(this),mt(this,zt,Dx).call(this,mt(this,zt,Rx).call(this))},Lx=function(){G(this,Zo)&&(clearTimeout(G(this,Zo)),ze(this,Zo,void 0))},Ix=function(){G(this,Ko)&&(clearInterval(G(this,Ko)),ze(this,Ko,void 0))},jx=function(){const e=G(this,Mr).getQueryCache().build(G(this,Mr),this.options);if(e===G(this,Mt))return;const n=G(this,Mt);ze(this,Mt,e),ze(this,Sf,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},MD=function(e){An.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(G(this,ur))}),G(this,Mr).getQueryCache().notify({query:G(this,Mt),type:"observerResultsUpdated"})})},oC);function sB(t,e){return Ni(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function hE(t,e){return sB(t,e)||t.state.data!==void 0&&zx(t,e,e.refetchOnMount)}function zx(t,e,n){if(Ni(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&hw(t,e)}return!1}function pE(t,e,n,r){return(t!==e||Ni(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&hw(t,n)}function hw(t,e){return Ni(e.enabled,t)!==!1&&t.isStaleByTime(Ac(e.staleTime,t))}function aB(t,e){return!lm(t.getCurrentResult(),e)}var Ia,ja,Tr,js,Xs,wp,Ox,lC,oB=(lC=class extends Eu{constructor(n,r){super();Je(this,Xs);Je(this,Ia);Je(this,ja);Je(this,Tr);Je(this,js);ze(this,Ia,n),this.setOptions(r),this.bindMethods(),mt(this,Xs,wp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=G(this,Ia).defaultMutationOptions(n),lm(this.options,r)||G(this,Ia).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,Tr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&cl(r.mutationKey)!==cl(this.options.mutationKey)?this.reset():((i=G(this,Tr))==null?void 0:i.state.status)==="pending"&&G(this,Tr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=G(this,Tr))==null||n.removeObserver(this)}onMutationUpdate(n){mt(this,Xs,wp).call(this),mt(this,Xs,Ox).call(this,n)}getCurrentResult(){return G(this,ja)}reset(){var n;(n=G(this,Tr))==null||n.removeObserver(this),ze(this,Tr,void 0),mt(this,Xs,wp).call(this),mt(this,Xs,Ox).call(this)}mutate(n,r){var i;return ze(this,js,r),(i=G(this,Tr))==null||i.removeObserver(this),ze(this,Tr,G(this,Ia).getMutationCache().build(G(this,Ia),this.options)),G(this,Tr).addObserver(this),G(this,Tr).execute(n)}},Ia=new WeakMap,ja=new WeakMap,Tr=new WeakMap,js=new WeakMap,Xs=new WeakSet,wp=function(){var r;const n=((r=G(this,Tr))==null?void 0:r.state)??ED();ze(this,ja,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Ox=function(n){An.batch(()=>{var r,i,s,a,o,c,u,d;if(G(this,js)&&this.hasListeners()){const f=G(this,ja).variables,h=G(this,ja).context;(n==null?void 0:n.type)==="success"?((i=(r=G(this,js)).onSuccess)==null||i.call(r,n.data,f,h),(a=(s=G(this,js)).onSettled)==null||a.call(s,n.data,null,f,h)):(n==null?void 0:n.type)==="error"&&((c=(o=G(this,js)).onError)==null||c.call(o,n.error,f,h),(d=(u=G(this,js)).onSettled)==null||d.call(u,void 0,n.error,f,h))}this.listeners.forEach(f=>{f(G(this,ja))})})},lC),TD=x.createContext(void 0),Sl=t=>{const e=x.useContext(TD);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},lB=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(TD.Provider,{value:t,children:e})),CD=x.createContext(!1),cB=()=>x.useContext(CD);CD.Provider;function uB(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var dB=x.createContext(uB()),fB=()=>x.useContext(dB);function AD(t,e){return typeof t=="function"?t(...e):!!t}function Fx(){}var hB=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},pB=t=>{x.useEffect(()=>{t.clearReset()},[t])},mB=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&AD(n,[t.error,r]),gB=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},vB=(t,e)=>t.isLoading&&t.isFetching&&!e,yB=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,mE=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function xB(t,e,n){var d,f,h,m,y;const r=Sl(),i=cB(),s=fB(),a=r.defaultQueryOptions(t);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,a),a._optimisticResults=i?"isRestoring":"optimistic",gB(a),hB(a,s),pB(s);const o=!r.getQueryCache().get(a.queryHash),[c]=x.useState(()=>new e(r,a)),u=c.getOptimisticResult(a);if(x.useSyncExternalStore(x.useCallback(v=>{const g=i?Fx:c.subscribe(An.batchCalls(v));return c.updateResult(),g},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),yB(a,u))throw mE(a,c,s);if(mB({result:u,errorResetBoundary:s,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw u.error;if((m=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||m.call(h,a,u),a.experimental_prefetchInRender&&!ll&&vB(u,i)){const v=o?mE(a,c,s):(y=r.getQueryCache().get(a.queryHash))==null?void 0:y.promise;v==null||v.catch(Fx).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function mr(t,e){return xB(t,iB)}function hr(t,e){const n=Sl(),[r]=x.useState(()=>new oB(n,t));x.useEffect(()=>{r.setOptions(t)},[r,t]);const i=x.useSyncExternalStore(x.useCallback(a=>r.subscribe(An.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=x.useCallback((a,o)=>{r.mutate(a,o).catch(Fx)},[r]);if(i.error&&AD(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}async function ND(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Lt(t,e,n,r={}){const{headers:i={},on401:s="throw"}=r,a={...i};let o;n&&(a["Content-Type"]="application/json",o=JSON.stringify(n));const c=await fetch(e,{method:t,headers:a,body:o,credentials:"include"});return s==="returnNull"&&c.status===401||await ND(c),c}const _B=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await ND(n),await n.json())},Fa=new rB({defaultOptions:{queries:{queryFn:_B({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),wB=1,bB=1e6;let Av=0;function SB(){return Av=(Av+1)%Number.MAX_SAFE_INTEGER,Av.toString()}const Nv=new Map,gE=t=>{if(Nv.has(t))return;const e=setTimeout(()=>{Nv.delete(t),Ed({type:"REMOVE_TOAST",toastId:t})},bB);Nv.set(t,e)},EB=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,wB)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?gE(n):t.toasts.forEach(r=>{gE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},bp=[];let Sp={toasts:[]};function Ed(t){Sp=EB(Sp,t),bp.forEach(e=>{e(Sp)})}function Ux({...t}){const e=SB(),n=i=>Ed({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Ed({type:"DISMISS_TOAST",toastId:e});return Ed({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function jr(){const[t,e]=x.useState(Sp);return x.useEffect(()=>(bp.push(e),()=>{const n=bp.indexOf(e);n>-1&&bp.splice(n,1)}),[t]),{...t,toast:Ux,dismiss:n=>Ed({type:"DISMISS_TOAST",toastId:n})}}function Ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function MB(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function pg(...t){return e=>t.forEach(n=>MB(n,e))}function wt(...t){return x.useCallback(pg(...t),t)}function TB(t,e=[]){let n=[];function r(s,a){const o=x.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:h,children:m,...y}=f,v=(h==null?void 0:h[t][c])||o,g=x.useMemo(()=>y,Object.values(y));return l.jsx(v.Provider,{value:g,children:m})}function d(f,h){const m=(h==null?void 0:h[t][c])||o,y=x.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=n.map(a=>x.createContext(a));return function(o){const c=(o==null?void 0:o[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return i.scopeName=t,[r,CB(i,...e)]}function CB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...o,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var Js=x.forwardRef((t,e)=>{const{children:n,...r}=t,i=x.Children.toArray(n),s=i.find(AB);if(s){const a=s.props.children,o=i.map(c=>c===s?x.Children.count(a)>1?x.Children.only(null):x.isValidElement(a)?a.props.children:null:c);return l.jsx(Bx,{...r,ref:e,children:x.isValidElement(a)?x.cloneElement(a,void 0,o):null})}return l.jsx(Bx,{...r,ref:e,children:n})});Js.displayName="Slot";var Bx=x.forwardRef((t,e)=>{const{children:n,...r}=t;if(x.isValidElement(n)){const i=PB(n);return x.cloneElement(n,{...NB(r,n.props),ref:e?pg(e,i):i})}return x.Children.count(n)>1?x.Children.only(null):null});Bx.displayName="SlotClone";var pw=({children:t})=>l.jsx(l.Fragment,{children:t});function AB(t){return x.isValidElement(t)&&t.type===pw}function NB(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function PB(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function mg(t){const e=t+"CollectionProvider",[n,r]=TB(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:y,children:v}=m,g=tn.useRef(null),p=tn.useRef(new Map).current;return l.jsx(i,{scope:y,itemMap:p,collectionRef:g,children:v})};a.displayName=e;const o=t+"CollectionSlot",c=tn.forwardRef((m,y)=>{const{scope:v,children:g}=m,p=s(o,v),_=wt(y,p.collectionRef);return l.jsx(Js,{ref:_,children:g})});c.displayName=o;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=tn.forwardRef((m,y)=>{const{scope:v,children:g,...p}=m,_=tn.useRef(null),w=wt(y,_),b=s(u,v);return tn.useEffect(()=>(b.itemMap.set(_,{ref:_,...p}),()=>void b.itemMap.delete(_))),l.jsx(Js,{[d]:"",ref:w,children:g})});f.displayName=u;function h(m){const y=s(t+"CollectionConsumer",m);return tn.useCallback(()=>{const g=y.collectionRef.current;if(!g)return[];const p=Array.from(g.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((b,S)=>p.indexOf(b.ref.current)-p.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},h,r]}function RB(t,e){const n=x.createContext(e),r=s=>{const{children:a,...o}=s,c=x.useMemo(()=>o,Object.values(o));return l.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function i(s){const a=x.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function qi(t,e=[]){let n=[];function r(s,a){const o=x.createContext(a),c=n.length;n=[...n,a];const u=f=>{var p;const{scope:h,children:m,...y}=f,v=((p=h==null?void 0:h[t])==null?void 0:p[c])||o,g=x.useMemo(()=>y,Object.values(y));return l.jsx(v.Provider,{value:g,children:m})};u.displayName=s+"Provider";function d(f,h){var v;const m=((v=h==null?void 0:h[t])==null?void 0:v[c])||o,y=x.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(a=>x.createContext(a));return function(o){const c=(o==null?void 0:o[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return i.scopeName=t,[r,DB(i,...e)]}function DB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...o,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var kB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ke=kB.reduce((t,e)=>{const n=x.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?Js:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function mw(t,e){t&&bl.flushSync(()=>t.dispatchEvent(e))}function rr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function LB(t,e=globalThis==null?void 0:globalThis.document){const n=rr(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var IB="DismissableLayer",Vx="dismissableLayer.update",jB="dismissableLayer.pointerDownOutside",zB="dismissableLayer.focusOutside",vE,PD=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),El=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...c}=t,u=x.useContext(PD),[d,f]=x.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=x.useState({}),y=wt(e,C=>f(C)),v=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),p=v.indexOf(g),_=d?v.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,b=_>=p,S=FB(C=>{const P=C.target,A=[...u.branches].some(E=>E.contains(P));!b||A||(i==null||i(C),a==null||a(C),C.defaultPrevented||o==null||o())},h),M=UB(C=>{const P=C.target;[...u.branches].some(E=>E.contains(P))||(s==null||s(C),a==null||a(C),C.defaultPrevented||o==null||o())},h);return LB(C=>{_===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&o&&(C.preventDefault(),o()))},h),x.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(vE=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),yE(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=vE)}},[d,h,n,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),yE())},[d,u]),x.useEffect(()=>{const C=()=>m({});return document.addEventListener(Vx,C),()=>document.removeEventListener(Vx,C)},[]),l.jsx(Ke.div,{...c,ref:y,style:{pointerEvents:w?b?"auto":"none":void 0,...t.style},onFocusCapture:Ce(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Ce(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ce(t.onPointerDownCapture,S.onPointerDownCapture)})});El.displayName=IB;var OB="DismissableLayerBranch",RD=x.forwardRef((t,e)=>{const n=x.useContext(PD),r=x.useRef(null),i=wt(e,r);return x.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),l.jsx(Ke.div,{...t,ref:i})});RD.displayName=OB;function FB(t,e=globalThis==null?void 0:globalThis.document){const n=rr(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let c=function(){DD(jB,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function UB(t,e=globalThis==null?void 0:globalThis.document){const n=rr(t),r=x.useRef(!1);return x.useEffect(()=>{const i=s=>{s.target&&!r.current&&DD(zB,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yE(){const t=new CustomEvent(Vx);document.dispatchEvent(t)}function DD(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?mw(i,s):i.dispatchEvent(s)}var BB=El,VB=RD,ir=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},HB="Portal",Mu=x.forwardRef((t,e)=>{var o;const{container:n,...r}=t,[i,s]=x.useState(!1);ir(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?h4.createPortal(l.jsx(Ke.div,{...r,ref:e}),a):null});Mu.displayName=HB;function GB(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var zr=t=>{const{present:e,children:n}=t,r=WB(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),s=wt(r.ref,$B(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:s}):null};zr.displayName="Presence";function WB(t){const[e,n]=x.useState(),r=x.useRef({}),i=x.useRef(t),s=x.useRef("none"),a=t?"mounted":"unmounted",[o,c]=GB(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=yh(r.current);s.current=o==="mounted"?u:"none"},[o]),ir(()=>{const u=r.current,d=i.current;if(d!==t){const h=s.current,m=yh(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),ir(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=m=>{const v=yh(r.current).includes(m.animationName);if(m.target===e&&v&&(c("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},h=m=>{m.target===e&&(s.current=yh(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:x.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function yh(t){return(t==null?void 0:t.animationName)||"none"}function $B(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=qB({defaultProp:e,onChange:n}),s=t!==void 0,a=s?t:r,o=rr(n),c=x.useCallback(u=>{if(s){const f=typeof u=="function"?u(t):u;f!==t&&o(f)}else i(u)},[s,t,i,o]);return[a,c]}function qB({defaultProp:t,onChange:e}){const n=x.useState(t),[r]=n,i=x.useRef(r),s=rr(e);return x.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var XB="VisuallyHidden",Pf=x.forwardRef((t,e)=>l.jsx(Ke.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Pf.displayName=XB;var ZB=Pf,gw="ToastProvider",[vw,KB,YB]=mg("Toast"),[kD,xte]=qi("Toast",[YB]),[QB,gg]=kD(gw),LD=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=t,[o,c]=x.useState(null),[u,d]=x.useState(0),f=x.useRef(!1),h=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${gw}\`. Expected non-empty \`string\`.`),l.jsx(vw.Provider,{scope:e,children:l.jsx(QB,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:o,onViewportChange:c,onToastAdd:x.useCallback(()=>d(m=>m+1),[]),onToastRemove:x.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:a})})};LD.displayName=gw;var ID="ToastViewport",JB=["F8"],Hx="toast.viewportPause",Gx="toast.viewportResume",jD=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=JB,label:i="Notifications ({hotkey})",...s}=t,a=gg(ID,n),o=KB(n),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),h=wt(e,f,a.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;x.useEffect(()=>{const g=p=>{var w;r.length!==0&&r.every(b=>p[b]||p.code===b)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),x.useEffect(()=>{const g=c.current,p=f.current;if(y&&g&&p){const _=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Hx);p.dispatchEvent(M),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Gx);p.dispatchEvent(M),a.isClosePausedRef.current=!1}},b=M=>{!g.contains(M.relatedTarget)&&w()},S=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",_),g.addEventListener("focusout",b),g.addEventListener("pointermove",_),g.addEventListener("pointerleave",S),window.addEventListener("blur",_),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",_),g.removeEventListener("focusout",b),g.removeEventListener("pointermove",_),g.removeEventListener("pointerleave",S),window.removeEventListener("blur",_),window.removeEventListener("focus",w)}}},[y,a.isClosePausedRef]);const v=x.useCallback(({tabbingDirection:g})=>{const _=o().map(w=>{const b=w.ref.current,S=[b,...fV(b)];return g==="forwards"?S:S.reverse()});return(g==="forwards"?_.reverse():_).flat()},[o]);return x.useEffect(()=>{const g=f.current;if(g){const p=_=>{var S,M,C;const w=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!w){const P=document.activeElement,A=_.shiftKey;if(_.target===g&&A){(S=u.current)==null||S.focus();return}const O=v({tabbingDirection:A?"backwards":"forwards"}),k=O.findIndex(j=>j===P);Pv(O.slice(k+1))?_.preventDefault():A?(M=u.current)==null||M.focus():(C=d.current)==null||C.focus()}};return g.addEventListener("keydown",p),()=>g.removeEventListener("keydown",p)}},[o,v]),l.jsxs(VB,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&l.jsx(Wx,{ref:u,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"forwards"});Pv(g)}}),l.jsx(vw.Slot,{scope:n,children:l.jsx(Ke.ol,{tabIndex:-1,...s,ref:h})}),y&&l.jsx(Wx,{ref:d,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"backwards"});Pv(g)}})]})});jD.displayName=ID;var zD="ToastFocusProxy",Wx=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=gg(zD,n);return l.jsx(Pf,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=s.viewport)!=null&&u.contains(o))&&r()}})});Wx.displayName=zD;var vg="Toast",eV="toast.swipeStart",tV="toast.swipeMove",nV="toast.swipeCancel",rV="toast.swipeEnd",OD=x.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...a}=t,[o=!0,c]=vi({prop:r,defaultProp:i,onChange:s});return l.jsx(zr,{present:n||o,children:l.jsx(aV,{open:o,...a,ref:e,onClose:()=>c(!1),onPause:rr(t.onPause),onResume:rr(t.onResume),onSwipeStart:Ce(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ce(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Ce(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ce(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});OD.displayName=vg;var[iV,sV]=kD(vg,{onClose(){}}),aV=x.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...y}=t,v=gg(vg,n),[g,p]=x.useState(null),_=wt(e,j=>p(j)),w=x.useRef(null),b=x.useRef(null),S=i||v.duration,M=x.useRef(0),C=x.useRef(S),P=x.useRef(0),{onToastAdd:A,onToastRemove:E}=v,L=rr(()=>{var $;(g==null?void 0:g.contains(document.activeElement))&&(($=v.viewport)==null||$.focus()),a()}),O=x.useCallback(j=>{!j||j===1/0||(window.clearTimeout(P.current),M.current=new Date().getTime(),P.current=window.setTimeout(L,j))},[L]);x.useEffect(()=>{const j=v.viewport;if(j){const $=()=>{O(C.current),u==null||u()},U=()=>{const X=new Date().getTime()-M.current;C.current=C.current-X,window.clearTimeout(P.current),c==null||c()};return j.addEventListener(Hx,U),j.addEventListener(Gx,$),()=>{j.removeEventListener(Hx,U),j.removeEventListener(Gx,$)}}},[v.viewport,S,c,u,O]),x.useEffect(()=>{s&&!v.isClosePausedRef.current&&O(S)},[s,S,v.isClosePausedRef,O]),x.useEffect(()=>(A(),()=>E()),[A,E]);const k=x.useMemo(()=>g?WD(g):null,[g]);return v.viewport?l.jsxs(l.Fragment,{children:[k&&l.jsx(oV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),l.jsx(iV,{scope:n,onClose:L,children:bl.createPortal(l.jsx(vw.ItemSlot,{scope:n,children:l.jsx(BB,{asChild:!0,onEscapeKeyDown:Ce(o,()=>{v.isFocusedToastEscapeKeyDownRef.current||L(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Ke.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ce(t.onKeyDown,j=>{j.key==="Escape"&&(o==null||o(j.nativeEvent),j.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:Ce(t.onPointerDown,j=>{j.button===0&&(w.current={x:j.clientX,y:j.clientY})}),onPointerMove:Ce(t.onPointerMove,j=>{if(!w.current)return;const $=j.clientX-w.current.x,U=j.clientY-w.current.y,X=!!b.current,z=["left","right"].includes(v.swipeDirection),V=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,ee=z?V(0,$):0,de=z?0:V(0,U),Ee=j.pointerType==="touch"?10:2,Ne={x:ee,y:de},ne={originalEvent:j,delta:Ne};X?(b.current=Ne,xh(tV,f,ne,{discrete:!1})):xE(Ne,v.swipeDirection,Ee)?(b.current=Ne,xh(eV,d,ne,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs($)>Ee||Math.abs(U)>Ee)&&(w.current=null)}),onPointerUp:Ce(t.onPointerUp,j=>{const $=b.current,U=j.target;if(U.hasPointerCapture(j.pointerId)&&U.releasePointerCapture(j.pointerId),b.current=null,w.current=null,$){const X=j.currentTarget,z={originalEvent:j,delta:$};xE($,v.swipeDirection,v.swipeThreshold)?xh(rV,m,z,{discrete:!0}):xh(nV,h,z,{discrete:!0}),X.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),oV=t=>{const{__scopeToast:e,children:n,...r}=t,i=gg(vg,e),[s,a]=x.useState(!1),[o,c]=x.useState(!1);return uV(()=>a(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:l.jsx(Mu,{asChild:!0,children:l.jsx(Pf,{...r,children:s&&l.jsxs(l.Fragment,{children:[i.label," ",n]})})})},lV="ToastTitle",FD=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(Ke.div,{...r,ref:e})});FD.displayName=lV;var cV="ToastDescription",UD=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(Ke.div,{...r,ref:e})});UD.displayName=cV;var BD="ToastAction",VD=x.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(GD,{altText:n,asChild:!0,children:l.jsx(yw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${BD}\`. Expected non-empty \`string\`.`),null)});VD.displayName=BD;var HD="ToastClose",yw=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=sV(HD,n);return l.jsx(GD,{asChild:!0,children:l.jsx(Ke.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,i.onClose)})})});yw.displayName=HD;var GD=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return l.jsx(Ke.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function WD(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),dV(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...WD(r))}}),e}function xh(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?mw(i,s):i.dispatchEvent(s)}var xE=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function uV(t=()=>{}){const e=rr(t);ir(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function dV(t){return t.nodeType===t.ELEMENT_NODE}function fV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Pv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var hV=LD,$D=jD,qD=OD,XD=FD,ZD=UD,KD=VD,YD=yw;function QD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=QD(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function pV(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=QD(t))&&(r&&(r+=" "),r+=e);return r}const _E=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,wE=pV,Ml=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return wE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=s==null?void 0:s[u];if(d===null)return null;const h=_E(d)||_E(f);return i[u][h]}),o=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(y=>{let[v,g]=y;return Array.isArray(g)?g.includes({...s,...o}[v]):{...s,...o}[v]===g})?[...u,f,h]:u},[]);return wE(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JD=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},c)=>x.createElement("svg",{ref:c,...gV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:JD("lucide",i),...o},[...a.map(([u,d])=>x.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(t,e)=>{const n=x.forwardRef(({className:r,...i},s)=>x.createElement(vV,{ref:s,iconNode:e,className:JD(`lucide-${mV(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Ze("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Ze("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=Ze("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=Ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=Ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=Ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=Ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=Ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=Ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=Ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=Ze("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=Ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=Ze("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=Ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Ze("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=Ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=Ze("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=Ze("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Ze("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=Ze("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=Ze("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=Ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=Ze("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=Ze("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=Ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=Ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=Ze("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Ze("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=Ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=Ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=Ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=Ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=Ze("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=Ze("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=Ze("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Ze("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=Ze("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=Ze("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=Ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=Ze("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=Ze("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function a2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=a2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function FV(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=a2(t))&&(r&&(r+=" "),r+=e);return r}const Tw="-",UV=t=>{const e=VV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const o=a.split(Tw);return o[0]===""&&o.length!==1&&o.shift(),o2(o,e)||BV(a)},getConflictingClassGroupIds:(a,o)=>{const c=n[a]||[];return o&&r[a]?[...c,...r[a]]:c}}},o2=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?o2(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Tw);return(a=e.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},NE=/^\[(.+)\]$/,BV=t=>{if(NE.test(t)){const e=NE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},VV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return GV(Object.entries(t.classGroups),n).forEach(([s,a])=>{Zx(a,r,s,e)}),r},Zx=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:PE(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(HV(i)){Zx(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{Zx(a,PE(e,s),n,r)})})},PE=(t,e)=>{let n=t;return e.split(Tw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},HV=t=>t.isThemeGetter,GV=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[e+a,o])):s);return[n,i]}):t,WV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},l2="!",$V=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,a=o=>{const c=[];let u=0,d=0,f;for(let g=0;g<o.length;g++){let p=o[g];if(u===0){if(p===i&&(r||o.slice(g,g+s)===e)){c.push(o.slice(d,g)),d=g+s;continue}if(p==="/"){f=g;continue}}p==="["?u++:p==="]"&&u--}const h=c.length===0?o:o.substring(d),m=h.startsWith(l2),y=m?h.substring(1):h,v=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:v}};return n?o=>n({className:o,parseClassName:a}):a},qV=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},XV=t=>({cache:WV(t.cacheSize),parseClassName:$V(t),...UV(t)}),ZV=/\s+/,KV=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(ZV);let o="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let y=!!m,v=r(y?h.substring(0,m):h);if(!v){if(!y){o=u+(o.length>0?" "+o:o);continue}if(v=r(h),!v){o=u+(o.length>0?" "+o:o);continue}y=!1}const g=qV(d).join(":"),p=f?g+l2:g,_=p+v;if(s.includes(_))continue;s.push(_);const w=i(v,y);for(let b=0;b<w.length;++b){const S=w[b];s.push(p+S)}o=u+(o.length>0?" "+o:o)}return o};function YV(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=c2(e))&&(r&&(r+=" "),r+=n);return r}const c2=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=c2(t[r]))&&(n&&(n+=" "),n+=e);return n};function QV(t,...e){let n,r,i,s=a;function a(c){const u=e.reduce((d,f)=>f(d),t());return n=XV(u),r=n.cache.get,i=n.cache.set,s=o,o(c)}function o(c){const u=r(c);if(u)return u;const d=KV(c,n);return i(c,d),d}return function(){return s(YV.apply(null,arguments))}}const Xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},u2=/^\[(?:([a-z-]+):)?(.+)\]$/i,JV=/^\d+\/\d+$/,e5=new Set(["px","full","screen"]),t5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,n5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,r5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,i5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ss=t=>Nc(t)||e5.has(t)||JV.test(t),la=t=>Tu(t,"length",h5),Nc=t=>!!t&&!Number.isNaN(Number(t)),kv=t=>Tu(t,"number",Nc),Bu=t=>!!t&&Number.isInteger(Number(t)),a5=t=>t.endsWith("%")&&Nc(t.slice(0,-1)),ft=t=>u2.test(t),ca=t=>t5.test(t),o5=new Set(["length","size","percentage"]),l5=t=>Tu(t,o5,d2),c5=t=>Tu(t,"position",d2),u5=new Set(["image","url"]),d5=t=>Tu(t,u5,m5),f5=t=>Tu(t,"",p5),Vu=()=>!0,Tu=(t,e,n)=>{const r=u2.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},h5=t=>n5.test(t)&&!r5.test(t),d2=()=>!1,p5=t=>i5.test(t),m5=t=>s5.test(t),g5=()=>{const t=Xt("colors"),e=Xt("spacing"),n=Xt("blur"),r=Xt("brightness"),i=Xt("borderColor"),s=Xt("borderRadius"),a=Xt("borderSpacing"),o=Xt("borderWidth"),c=Xt("contrast"),u=Xt("grayscale"),d=Xt("hueRotate"),f=Xt("invert"),h=Xt("gap"),m=Xt("gradientColorStops"),y=Xt("gradientColorStopPositions"),v=Xt("inset"),g=Xt("margin"),p=Xt("opacity"),_=Xt("padding"),w=Xt("saturate"),b=Xt("scale"),S=Xt("sepia"),M=Xt("skew"),C=Xt("space"),P=Xt("translate"),A=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",ft,e],O=()=>[ft,e],k=()=>["",Ss,la],j=()=>["auto",Nc,ft],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",ft],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[Nc,ft];return{cacheSize:500,separator:":",theme:{colors:[Vu],spacing:[Ss,la],blur:["none","",ca,ft],brightness:de(),borderColor:[t],borderRadius:["none","","full",ca,ft],borderSpacing:O(),borderWidth:k(),contrast:de(),grayscale:V(),hueRotate:de(),invert:V(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[a5,la],inset:L(),margin:L(),opacity:de(),padding:O(),saturate:de(),scale:de(),sepia:V(),skew:de(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",ft]}],container:["container"],columns:[{columns:[ca]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),ft]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bu,ft]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ft]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Bu,ft]}],"grid-cols":[{"grid-cols":[Vu]}],"col-start-end":[{col:["auto",{span:["full",Bu,ft]},ft]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[Vu]}],"row-start-end":[{row:["auto",{span:[Bu,ft]},ft]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ft]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ft,e]}],"min-w":[{"min-w":[ft,e,"min","max","fit"]}],"max-w":[{"max-w":[ft,e,"none","full","min","max","fit","prose",{screen:[ca]},ca]}],h:[{h:[ft,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ft,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ca,la]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",kv]}],"font-family":[{font:[Vu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ft]}],"line-clamp":[{"line-clamp":["none",Nc,kv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ss,ft]}],"list-image":[{"list-image":["none",ft]}],"list-style-type":[{list:["none","disc","decimal",ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ss,la]}],"underline-offset":[{"underline-offset":["auto",Ss,ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),c5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",l5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},d5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Ss,ft]}],"outline-w":[{outline:[Ss,la]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Ss,la]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ca,f5]}],"shadow-color":[{shadow:[Vu]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ca,ft]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ft]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",ft]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Bu,ft]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ss,la,kv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},v5=QV(g5);function Xi(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function dl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const f2=6048e5,y5=864e5,h2=6e4,p2=36e5;let x5={};function xg(){return x5}function Zd(t,e){var o,c,u,d;const n=xg(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Xi(t),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function hm(t){return Zd(t,{weekStartsOn:1})}function m2(t){const e=Xi(t),n=e.getFullYear(),r=dl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=hm(r),s=dl(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=hm(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function RE(t){const e=Xi(t);return e.setHours(0,0,0,0),e}function DE(t){const e=Xi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function _5(t,e){const n=RE(t),r=RE(e),i=+n-DE(n),s=+r-DE(r);return Math.round((i-s)/y5)}function w5(t){const e=m2(t),n=dl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),hm(n)}function b5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function g2(t){if(!b5(t)&&typeof t!="number")return!1;const e=Xi(t);return!isNaN(Number(e))}function S5(t){const e=Xi(t),n=dl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const E5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M5=(t,e,n)=>{let r;const i=E5[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Lv(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const T5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},A5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},N5={date:Lv({formats:T5,defaultWidth:"full"}),time:Lv({formats:C5,defaultWidth:"full"}),dateTime:Lv({formats:A5,defaultWidth:"full"})},P5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},R5=(t,e,n,r)=>P5[t];function Hu(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const D5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},k5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},L5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},j5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},z5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},O5=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},F5={ordinalNumber:O5,era:Hu({values:D5,defaultWidth:"wide"}),quarter:Hu({values:k5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Hu({values:L5,defaultWidth:"wide"}),day:Hu({values:I5,defaultWidth:"wide"}),dayPeriod:Hu({values:j5,defaultWidth:"wide",formattingValues:z5,defaultFormattingWidth:"wide"})};function Gu(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?B5(o,f=>f.test(a)):U5(o,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function U5(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function B5(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function V5(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const H5=/^(\d+)(th|st|nd|rd)?/i,G5=/\d+/i,W5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$5={any:[/^b/i,/^(a|c)/i]},q5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},X5={any:[/1/i,/2/i,/3/i,/4/i]},Z5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},K5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Y5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Q5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},J5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tH={ordinalNumber:V5({matchPattern:H5,parsePattern:G5,valueCallback:t=>parseInt(t,10)}),era:Gu({matchPatterns:W5,defaultMatchWidth:"wide",parsePatterns:$5,defaultParseWidth:"any"}),quarter:Gu({matchPatterns:q5,defaultMatchWidth:"wide",parsePatterns:X5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gu({matchPatterns:Z5,defaultMatchWidth:"wide",parsePatterns:K5,defaultParseWidth:"any"}),day:Gu({matchPatterns:Y5,defaultMatchWidth:"wide",parsePatterns:Q5,defaultParseWidth:"any"}),dayPeriod:Gu({matchPatterns:J5,defaultMatchWidth:"any",parsePatterns:eH,defaultParseWidth:"any"})},nH={code:"en-US",formatDistance:M5,formatLong:N5,formatRelative:R5,localize:F5,match:tH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rH(t){const e=Xi(t);return _5(e,S5(e))+1}function iH(t){const e=Xi(t),n=+hm(e)-+w5(e);return Math.round(n/f2)+1}function v2(t,e){var d,f,h,m;const n=Xi(t),r=n.getFullYear(),i=xg(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(h=i.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,a=dl(t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Zd(a,e),c=dl(t,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Zd(c,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function sH(t,e){var o,c,u,d;const n=xg(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=v2(t,e),s=dl(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Zd(s,e)}function aH(t,e){const n=Xi(t),r=+Zd(n,e)-+sH(n,e);return Math.round(r/f2)+1}function Ut(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ua={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ut(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ut(n+1,2)},d(t,e){return Ut(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ut(t.getHours()%12||12,e.length)},H(t,e){return Ut(t.getHours(),e.length)},m(t,e){return Ut(t.getMinutes(),e.length)},s(t,e){return Ut(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ut(i,e.length)}},jl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},kE={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ua.y(t,e)},Y:function(t,e,n,r){const i=v2(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Ut(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ut(s,e.length)},R:function(t,e){const n=m2(t);return Ut(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ut(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ut(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ut(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ua.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ut(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=aH(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ut(i,e.length)},I:function(t,e,n){const r=iH(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ut(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ua.d(t,e)},D:function(t,e,n){const r=rH(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ut(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ut(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ut(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ut(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=jl.noon:r===0?i=jl.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=jl.evening:r>=12?i=jl.afternoon:r>=4?i=jl.morning:i=jl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ua.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ua.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ut(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ut(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ua.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ua.s(t,e)},S:function(t,e){return ua.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return IE(r);case"XXXX":case"XX":return ko(r);case"XXXXX":case"XXX":default:return ko(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return IE(r);case"xxxx":case"xx":return ko(r);case"xxxxx":case"xxx":default:return ko(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+LE(r,":");case"OOOO":default:return"GMT"+ko(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+LE(r,":");case"zzzz":default:return"GMT"+ko(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ut(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ut(r,e.length)}};function LE(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Ut(s,2)}function IE(t,e){return t%60===0?(t>0?"-":"+")+Ut(Math.abs(t)/60,2):ko(t,e)}function ko(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ut(Math.trunc(r/60),2),s=Ut(r%60,2);return n+i+e+s}const jE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},y2=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},oH=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return jE(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",jE(r,e)).replace("{{time}}",y2(i,e))},lH={p:y2,P:oH},cH=/^D+$/,uH=/^Y+$/,dH=["D","DD","YY","YYYY"];function fH(t){return cH.test(t)}function hH(t){return uH.test(t)}function pH(t,e,n){const r=mH(t,e,n);if(console.warn(r),dH.includes(t))throw new RangeError(r)}function mH(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yH=/^'([^]*?)'?$/,xH=/''/g,_H=/[a-zA-Z]/;function Cw(t,e,n){var d,f,h,m;const r=xg(),i=r.locale??nH,s=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=r.weekStartsOn??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,o=Xi(t);if(!g2(o))throw new RangeError("Invalid time value");let c=e.match(vH).map(y=>{const v=y[0];if(v==="p"||v==="P"){const g=lH[v];return g(y,i.formatLong)}return y}).join("").match(gH).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:wH(y)};if(kE[v])return{isToken:!0,value:y};if(v.match(_H))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(y=>{if(!y.isToken)return y.value;const v=y.value;(hH(v)||fH(v))&&pH(v,e,String(t));const g=kE[v[0]];return g(o,v,i.localize,u)}).join("")}function wH(t){const e=t.match(yH);return e?e[1].replace(xH,"'"):t}function bH(t,e){const r=TH(t);let i;if(r.date){const c=CH(r.date,2);i=AH(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,o;if(r.time&&(a=NH(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(o=PH(r.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(s+a),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(s+a+o)}const _h={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},SH=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,EH=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,MH=/^([+-])(\d{2})(?::?(\d{2}))?$/;function TH(t){const e={},n=t.split(_h.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],_h.timeZoneDelimiter.test(e.date)&&(e.date=t.split(_h.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=_h.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function CH(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function AH(t,e){if(e===null)return new Date(NaN);const n=t.match(SH);if(!n)return new Date(NaN);const r=!!n[4],i=Wu(n[1]),s=Wu(n[2])-1,a=Wu(n[3]),o=Wu(n[4]),c=Wu(n[5])-1;if(r)return IH(e,o,c)?RH(e,o,c):new Date(NaN);{const u=new Date(0);return!kH(e,s,a)||!LH(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,a)),u)}}function Wu(t){return t?parseInt(t):1}function NH(t){const e=t.match(EH);if(!e)return NaN;const n=Iv(e[1]),r=Iv(e[2]),i=Iv(e[3]);return jH(n,r,i)?n*p2+r*h2+i*1e3:NaN}function Iv(t){return t&&parseFloat(t.replace(",","."))||0}function PH(t){if(t==="Z")return 0;const e=t.match(MH);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return zH(r,i)?n*(r*p2+i*h2):NaN}function RH(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const DH=[31,null,31,30,31,30,31,31,30,31,30,31];function x2(t){return t%400===0||t%4===0&&t%100!==0}function kH(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(DH[e]||(x2(t)?29:28))}function LH(t,e){return e>=1&&e<=(x2(t)?366:365)}function IH(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function jH(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function zH(t,e){return e>=0&&e<=59}function Re(...t){return v5(FV(t))}function _2(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`}function OH(t,e="dd.MM.yyyy HH:mm"){if(!t)return"-";try{const n=bH(t);return g2(n)?Cw(n,e):"-"}catch(n){return console.error("Error formatting date:",n),t}}const FH=hV,w2=x.forwardRef(({className:t,...e},n)=>l.jsx($D,{ref:n,className:Re("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));w2.displayName=$D.displayName;const UH=Ml("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),b2=x.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(qD,{ref:r,className:Re(UH({variant:e}),t),...n}));b2.displayName=qD.displayName;const BH=x.forwardRef(({className:t,...e},n)=>l.jsx(KD,{ref:n,className:Re("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));BH.displayName=KD.displayName;const S2=x.forwardRef(({className:t,...e},n)=>l.jsx(YD,{ref:n,className:Re("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(ou,{className:"h-4 w-4"})}));S2.displayName=YD.displayName;const E2=x.forwardRef(({className:t,...e},n)=>l.jsx(XD,{ref:n,className:Re("text-sm font-semibold",t),...e}));E2.displayName=XD.displayName;const M2=x.forwardRef(({className:t,...e},n)=>l.jsx(ZD,{ref:n,className:Re("text-sm opacity-90",t),...e}));M2.displayName=ZD.displayName;function VH(){const{toasts:t}=jr();return l.jsxs(FH,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return l.jsxs(b2,{...s,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(E2,{children:n}),r&&l.jsx(M2,{children:r})]}),i,l.jsx(S2,{})]},e)}),l.jsx(w2,{})]})}const fn=x.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Re("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));fn.displayName="Card";const Pn=x.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Re("flex flex-col space-y-1.5 p-6",t),...e}));Pn.displayName="CardHeader";const Rn=x.forwardRef(({className:t,...e},n)=>l.jsx("h3",{ref:n,className:Re("text-2xl font-semibold leading-none tracking-tight",t),...e}));Rn.displayName="CardTitle";const vr=x.forwardRef(({className:t,...e},n)=>l.jsx("p",{ref:n,className:Re("text-sm text-muted-foreground",t),...e}));vr.displayName="CardDescription";const hn=x.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Re("p-6 pt-0",t),...e}));hn.displayName="CardContent";const ro=x.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Re("flex items-center p-6 pt-0",t),...e}));ro.displayName="CardFooter";const HH={services:{title:"CNC Services",laser_cutting:"Laser Cutting",laser_description:"Your 2D project is perfect for laser cutting. We offer precise laser cutting of sheet metal, plastics and other materials.",get_quote:"Request a quote",cnc_machining:"CNC Machining",cnc_description:"Your 3D model is ready for production. We offer professional CNC turning and milling services with the highest precision and quality.",manufacturing:"Manufacturing Services",manufacturing_description:"We'll implement your production project from A to Z. Contact us to discuss details and receive an individual quote.",our_services:"Our Manufacturing Services",laser_details:"Precise cutting of sheet metal, plastics and other materials with accuracy up to 0.05 mm. Ideal for 2D parts.",cnc_milling:"CNC Milling",milling_details:"Machining of materials such as aluminum, steel, plastics. Ideal for complex 3D shapes.",cnc_turning:"CNC Turning",turning_details:"Precise machining of rotary parts from metal. Ideal for shafts, bushings, machine parts with accuracy up to 0.01 mm.",prototyping:"Prototyping",prototyping_details:"Quick production of prototypes and small production series. From design to finished element in a few days.",contact_us:"Contact us"},appTitle:"CAD Viewer",applicationName:"CAD Viewer",cad_viewer:"CAD Viewer",powered_by:"Powered by",home:"Home",back_to_home:"Back to Home",language_detecting:"Detecting...",login:"Log In",logout:"Log Out",register:"Register",create_account_sharing:"Create an account to manage your files",account_created:"Your account has been created successfully. You are now logged in.",enter_credentials:"Enter your credentials to log in",username:"Username",username_optional:"Username is optional",password:"Password",create_account:"Create a new account",email:"Email",full_name:"Full Name",company:"Company",client_dashboard:"Client Dashboard",app_description:"Completely free platform for viewing CAD files. Store STL, STEP, DXF and DWG models directly in your browser. Share files secured with password protection and browse CAD models from anywhere.",app_title:"Professional CAD File Viewer",supported_formats:"Supported Formats",upload_file:"Upload File",feature_1_title:"Advanced Visualization",feature_1_desc:"View and analyze 3D models with precision and detail",feature_2_title:"Secure Sharing",feature_2_desc:"Share your models securely with clients and collaborators",feature_3_title:"Cross-Format Support",feature_3_desc:"Support for STEP, IGES, STL, DXF, and DWG formats",upload:"Upload",uploadModel:"Upload Model",view:"View",share:"Share",delete:"Delete",cancel:"Cancel",save:"Save",back:"Back",loadingGeneric:"Loading...",refresh:"Refresh",error:"Error",success:"Success",close:"Close",confirm:"Confirm",button:{upload:"Upload",cancel:"Cancel",share:"Share",copy:"Copied",back:"Back to Home"},checking:"Checking...",welcome:"Welcome to CAD Viewer",welcomeMessage:"Upload a CAD file to get started",recentModels:"Recent Models",noModels:"No models found. Upload a CAD file to get started.",noPreviousFiles:"No previous files",dropFileHere:"Drop your CAD file here",dragAndDrop:"Drag and drop your file here, or click to browse",selectFile:"Select File",uploadingModel:"Uploading model...",uploadProgress:"Upload progress",uploadComplete:"Upload complete",uploadFailed:"Upload failed",supportedFormats:"Supported formats: STEP, IGES, STL, DXF, DWG",processingFile:"Processing file...",modelInfo:"Model Info",modelInformation:"Model Information",modelTree:"Model Tree",components:"Components",part:"Part",parts:"Parts",assembly:"Assembly",assemblies:"Assemblies",surfaces:"Surfaces",solids:"Solids",viewControls:"View Controls",rotate:"Rotate",pan:"Pan",zoom:"Zoom",fitToView:"Fit to View",modelDetails:"Model Details",format:"Format",fileSize:"File Size",created:"Created",createdDate:"Creation Date",mode:"Mode",fileType:"File Type",modelEntities:"Model Entities",modelNotFound:"Model not found",errorLoadingModel:"Error loading model",measurement:{mode:"Measurement Mode",instructions:"Click on the model to mark the first measurement point, then click again to mark the second point and measure the distance.",points:"Points",distance:"Distance",units:"units",toggle:"Toggle measurement mode"},dimensions:{title:"Model Dimensions",width:"Width",height:"Height",depth:"Depth",diagonal:"Diagonal"},shareModel:"Share Model",shareTitle:"Share this CAD model",shareDescription:"Share this model with others via email",recipientEmail:"Recipient Email",shareWithPassword:"Share with password",sharePassword:"Password",generatePassword:"Generate Password",setExpiry:"Set expiry date",expiryDate:"Expiry Date",shareLink:"Share Link",copyLink:"Copy Link",linkCopied:"Link copied",enableSharing:"Enable Sharing",disableSharing:"Disable Sharing",sharingEnabled:"Sharing enabled",sharingDisabled:"Sharing disabled",sharing_enabled:"Sharing Enabled",sharing_disabled:"Sharing Disabled",sharing_enabled_success:"Model has been shared successfully",sharing_disabled_success:"Model is no longer shared",sharing_error:"Error updating sharing status",sendEmail:"Send email notification",emailSent:"Email sent",emailNotSent:"Email could not be sent",shared_models:"Your CAD Library",shared_models_description:"Manage your uploaded and shared 3D models",filename:"Filename",shared_with:"Shared With",status:"Status",shared_status:"Shared Status",last_accessed:"Last Accessed",add_to_cad_library:"Add to Public CAD Library",public_library_added:"Model added to public library",public_library_removed:"Model removed from public library",public_library_added_message:"Model has been successfully added to the public CAD library",public_library_removed_message:"Model has been successfully removed from the public CAD library",public_cad_library:"Public CAD Library",public_library_description:"Browse and download CAD models shared by our community. All models are free to use for your projects.",search_models_tags:"Search models and tags...",all_categories:"All Categories",all_tags:"All Tags",tags:"Tags",showing_models:"Showing {count} of {total} models",no_models_found:"No models found",try_different_search:"Try a different search term or clear filters",no_public_models_yet:"No public models available yet",failed_to_load_library:"Failed to load library. Please try again later.",cad_library_dimensions:"Dimensions",cad_library_view:"View",cad_library_download:"Download",password_protected_public_error:"Cannot add password-protected model to public library. Please remove private sharing or remove password first.",active:"Active",inactive:"Inactive",add_gallery:"File Gallery",add_gallery_title:"Upload Model Gallery",add_gallery_description:"Upload up to 6 images for model {modelName}. The first image will be used as thumbnail.",generate_thumbnail:"Generate Thumbnail",generating_thumbnail:"Generating...",thumbnail_generated_successfully:"Thumbnail generated successfully",thumbnail_generation_failed:"Thumbnail generation failed",upload_gallery:"Upload Gallery",gallery_uploaded_successfully:"Gallery uploaded successfully",gallery_upload_failed:"Failed to upload gallery",gallery_preview:"Gallery Preview",first_image_thumbnail_note:"The first image will be used as the model thumbnail",select_image_files:"Select Image Files",thumbnail:"Thumbnail",gallery_management:"Gallery Management",model_details:"Model Details",manage_model_gallery:"Manage gallery for model {modelName}",current_thumbnail:"Current Thumbnail",thumbnail_active:"This thumbnail is currently active",no_thumbnail_set:"No thumbnail set for this model",upload_new_images:"Upload New Images",uploaded_images:"Uploaded Images",set_as_thumbnail:"Set as Thumbnail",click_set_thumbnail_note:"Click 'Set as Thumbnail' on any image to make it the model's thumbnail",thumbnail_updated_successfully:"Thumbnail updated successfully",uploading_images:"Uploading images...",close_gallery:"Close",deleting:"Deleting",image_deleted_successfully:"Image deleted successfully",image_delete_failed:"Failed to delete image",capture_screenshot:"Capture Screenshot",screenshot_captured_successfully:"Screenshot captured and set as thumbnail",screenshot_capture_failed:"Failed to capture screenshot",screenshot_instructions:"Set the perfect view angle and zoom, then click the camera button in the 3D viewer to capture a screenshot as thumbnail",gallery_images:"Gallery Images",no_gallery_images:"No gallery images available",images_uploaded_to_gallery:"Images uploaded to gallery",new_thumbnail_set:"New thumbnail has been set",image_removed_from_gallery:"Image removed from gallery",images_in_gallery:"images in gallery",view_model:"View Model",view_share_link:"View Share Link",enable_sharing:"Share Model",disable_sharing:"Stop Sharing",change_model_color:"Change Model Color",custom_color:"Custom Color",validation_error:"Validation Error",public_library_requirements:"To add model to public library, it must have: thumbnail, description, and at least one tag",open_link:"Open Link",no_models:"No Models Found",no_models_description:"Upload your first model to get started",change_password:"Change Password",new_password:"New Password",leave_empty_to_remove:"Leave empty to remove password",password_updated:"Password Updated",password_update_success:"Password has been successfully updated",password_update_error:"Error updating password",model_is_password_protected:"This model is password protected",open_in_browser:"Open in Browser",model_deleted:"Model Deleted",model_delete_success:"Model has been successfully deleted",model_delete_error:"Error deleting model",delete_model:"Delete Model",delete_model_confirmation:"Are you sure you want to delete this model? This action cannot be undone.",save_tags:"Save Tags",tags_saved_successfully:"Tags have been successfully saved and translated",tags_save_failed:"Failed to save tags",description_save_failed:"Failed to save description",tags_help_text:"Enter tags separated by commas. They will be automatically translated to all languages.",enter_tags_placeholder:"Enter tags separated by commas",enter_model_description_placeholder:"Enter model description...",model_description:"Model Description",select_language:"Select Language",sharedModel:"Shared Model",enterPassword:"Enter password to view this model",passwordProtected:"Password protected",incorrectPassword:"Incorrect password",viewSharedModel:"View shared model",modelSharedBy:"Model shared by",shared:{protected_model:{title:"Protected Model",description:"This model is password protected.",password_placeholder:"Enter model password"},model_info:{shared_status:"Shared model"}},message:{no:{model:"Drop file here or click to browse"},loading:"Please wait, processing your file",delete:{warning:"Are you sure you want to delete this model? This action cannot be undone.",success:"Model deleted successfully"},share:{warning:"Are you sure you want to share this model?",success:"Model shared successfully",copied:"Share link copied to clipboard"},revocation:{sent:"Email notification sent to"},password:{required:"Password not required"}},label:{file:"Selected file",verification:"Verification in progress",shared:{model:"shared model"},password:"Password","password.share":"Password protected","password.share.placeholder":"Enter password for sharing",expiry:"Expiry date",email:"Email","email.placeholder":"Enter recipient email"},email_autofilled:"Your email address will be associated with this model",email_required:"Please provide your email to associate with this model",upload_success:"File uploaded successfully",upload_failed:"File upload failed",app:{footer:"CAD Viewer - © 2025 All rights reserved"},header:{error:"Error",shared:{model:"Shared model"},no:{model:"The requested model was not found or is not available."}},genericError:"Something went wrong",connectionError:"Connection error",fileNotSupported:"File format not supported",fileTooLarge:"File is too large",invalidPassword:"Invalid password",invalidEmail:"Invalid email address",email_already_exists:"This email is already registered. Please log in instead.",warning:"Warning",email_exists_warning:"This email already exists in our system. Please log in first.",login_button:"Log in",errors:{title:"Error",share:"Error sharing model",password_required:"Password required",required:"is required",model:{fetch:"Failed to fetch model information",access:"Failed to access the model",display_failed:"Cannot display the model"}},loadingState:{shared_model:"Loading shared model..."},actions:{back_to_home:"Back to home page",access:"Access",verifying:"Verifying...",go_to_app:"Go to application"},action:{back_to_home:"Back to home page",access:"Access",verifying:"Verifying...",go_to_app:"Go to application"},sharingSaved:"Sharing settings saved",sharingRemoved:"Sharing has been disabled",deleteShare:{title:"Delete Model Sharing",description:"Confirm deletion of shared model link",confirmMessage:"Are you sure you want to delete this shared model link? This action cannot be undone and the model will no longer be accessible to others.",confirm:"Delete Share",cancel:"Cancel",deleting:"Deleting...",successTitle:"Sharing Deleted",successMessage:"The shared model link has been successfully deleted and is no longer accessible.",errorTitle:"Deletion Failed",unknownError:"An unknown error occurred during deletion.",connectionError:"Connection error. Please try again later.",invalidToken:"Invalid or expired security token.",backToHome:"Back to Home"},dxf:{preview:"Graphical Preview",svg_code:"SVG Code",loading:"Loading DXF preview...",error_loading:"Error loading DXF file",select_model:"Select a DXF model to display"},library:{title:"CAD Model Library",description:"Browse and access publicly shared CAD models",filters:"Filters",searchPlaceholder:"Search by name or tag",tags:"Tags",viewModel:"View Model",noModels:"No Models Found",noModelsDescription:"There are no public models matching your search criteria. Try adjusting your filters or check back later.",error:"Error loading library"},common:{page:"Page",previous:"Previous",next:"Next",tryAgain:"Try Again",error:"Error",backToLibrary:"Back to Library",download:"Download",reportAbuse:"Report Abuse",modelInfo:"Model Information",filename:"Filename",format:"Format",filesize:"File Size",gallery:"Gallery",goBack:"Go Back",description:"Description",category:"Category",tags:"Tags"},abuse:{subtitle:"Report inappropriate or offensive content",report_for_model:"Report inappropriate content for model",report_title:"Report Inappropriate Content",form_instruction:"Please provide details about the inappropriate content you wish to report. We take all reports seriously and will investigate promptly.",details_label:"Report Details",details_placeholder:"Please describe the inappropriate content. Include specific details about what type of content violates our community guidelines (e.g., offensive imagery, inappropriate descriptions, copyright infringement, etc.).",details_required:"Report details are required",guidelines_title:"Community Guidelines",guidelines_text:"We do not tolerate inappropriate, offensive, or copyrighted content. All reports are reviewed by our moderation team and appropriate action will be taken.",report_sent:"Your abuse report has been submitted. Thank you for helping us maintain a safe community.",submitting:"Submitting Report...",submit_report:"Submit Report"},admin:{loginTitle:"Admin Panel Login",loginDescription:"Enter your credentials to access the admin panel",username:"Username",usernamePlaceholder:"admin",password:"Password",loginButton:"Log In",loggingIn:"Logging in...",dashboardTitle:"Admin Dashboard",sharedModelsTitle:"Shared Models",sharedModelsDescription:"Manage all shared model links in the system",refresh:"Refresh",logout:"Log Out",notAuthenticated:"Not Authenticated",pleaseLogin:"Please log in to access the admin panel",loadError:"Error Loading Data",unknownError:"An unknown error occurred",linkCopied:"Link Copied",linkCopiedDescription:"Link has been copied to clipboard",sharingRevoked:"Sharing Revoked",sharingRevokedDescription:"The model sharing has been successfully disabled",revokeError:"Error Revoking Sharing",loggedOut:"Logged Out",loggedOutDescription:"You have been successfully logged out",filename:"Filename",format:"Format",sharedWith:"Shared With",createdDate:"Created",lastAccessed:"Last Accessed",expiryDate:"Expiry Date",passwordProtection:"Password",actions:"Actions",shareLink:"Link",shareLinkTitle:"Share Link",openLink:"Open Link",revoke:"Revoke",protected:"Protected",notProtected:"Not Protected",noSharedModels:"No shared models found",revokeConfirmTitle:"Confirm Revocation",revokeConfirmDescription:"Are you sure you want to revoke sharing for this model? This action cannot be undone.",cancel:"Cancel",confirmRevoke:"Yes, Revoke"},upload_thumbnail:"Upload Thumbnail",upload_custom_thumbnail:"Upload Custom Thumbnail",upload_thumbnail_description:"Upload a custom thumbnail image for '{modelName}'. The image will be automatically cropped to a square format.",select_image_file:"Select Image File",supported_formats_jpg_png_max_5mb:"Supported formats: JPG, PNG. Maximum size: 5MB",max_6_photos_at_once:"Maximum 6 photos at once.",your_cad_library:"Your CAD Library",models_uploaded_to_account:"Models you have uploaded to your account",models_count_in_library:"You have {count} models in your library",no_models_in_library:"You have no models in your library yet",manage_model_description:"Manage Model Description",model_description_explanation:"Add a descriptive text for the model. The system will automatically translate it to all supported languages.",original_language:"Original Language",auto_translation_note:"The description will be automatically translated to all supported languages.",available_translations:"Available Translations",google_translate_powered:"Translations powered by Google Translate API",delete_description:"Delete Description",update_description:"Update Description",save_description:"Save Description",description_saved_successfully:"Description saved and translated successfully",description_deleted_successfully:"Description deleted successfully",description_required:"Description is required",language_required:"Language is required",add_description:"Add Description",preview:"Preview",original:"Original",cropped_to_square:"Cropped to Square",processing:"Processing...",thumbnail_uploaded_successfully:"Thumbnail uploaded successfully",thumbnail_upload_failed:"Failed to upload thumbnail",please_select_image_file:"Please select an image file",file_too_large_5mb:"File is too large. Maximum size is 5MB",image_processing_failed:"Image processing failed",invalid_image_file:"Invalid image file",thumbnail_required_for_public:"A thumbnail is required to add this model to the public library. Please upload a thumbnail first.",category_required_for_public:"A category is required to add this model to the public library. Please select a category first.",category:"Category",select_category:"Select category",no_category:"No category",art:"Art","home-garden":"Home & Garden",home_garden:"Home & Garden",architecture:"Architecture",gadget:"Gadget",game:"Game",tools:"Tools",category_updated:"Category Updated",category_updated_successfully:"Model category has been updated successfully",category_update_failed:"Failed to update model category",tags_updated:"Tags Updated",tags_updated_successfully:"Model tags have been updated successfully",tags_update_failed:"Failed to update model tags"},GH={services:{title:"Usługi CNC",laser_cutting:"Cięcie laserowe",laser_description:"Twój projekt 2D jest idealny do realizacji poprzez cięcie laserowe. Oferujemy precyzyjne cięcie laserowe blach, tworzyw sztucznych i innych materiałów.",get_quote:"Zapytaj o wycenę",cnc_machining:"Obróbka CNC",cnc_description:"Twój model 3D jest gotowy do produkcji. Oferujemy profesjonalne usługi toczenia i frezowania CNC z najwyższą precyzją i jakością.",manufacturing:"Usługi produkcyjne",manufacturing_description:"Zrealizujemy Twój projekt produkcyjny od A do Z. Skontaktuj się z nami, aby omówić szczegóły i otrzymać indywidualną wycenę.",our_services:"Nasze usługi produkcyjne",laser_details:"Precyzyjne cięcie blachy, tworzyw sztucznych i innych materiałów z dokładnością do 0,05 mm. Idealne do części 2D.",cnc_milling:"Frezowanie CNC",milling_details:"Obróbka skrawaniem materiałów takich jak aluminium, stal, tworzywa sztuczne. Idealne dla złożonych kształtów 3D.",cnc_turning:"Toczenie CNC",turning_details:"Precyzyjna obróbka części obrotowych z metalu. Idealne do wałków, tulei, części maszyn z dokładnością do 0,01 mm.",prototyping:"Prototypowanie",prototyping_details:"Szybkie wykonanie prototypów i małych serii produkcyjnych. Od projektu do gotowego elementu w kilka dni.",contact_us:"Skontaktuj się z nami"},appTitle:"Przeglądarka CAD",applicationName:"Przeglądarka CAD",cad_viewer:"Przeglądarka CAD",powered_by:"Obsługiwane przez",home:"Strona główna",back_to_home:"Powrót do strony głównej",language_detecting:"Wykrywanie...",upload:"Prześlij",uploadModel:"Prześlij model",view:"Podgląd",share:"Udostępnij",delete:"Usuń",cancel:"Anuluj",save:"Zapisz",back:"Powrót",loadingGeneric:"Ładowanie...",refresh:"Odśwież",error:"Błąd",success:"Sukces",close:"Zamknij",confirm:"Potwierdź",app_description:"Całkowicie bezpłatna platforma do przeglądania plików CAD. Przechoduj modele STL, STEP, DXF i DWG bezpośrednio w przeglądarce. Udostępniaj pliki zabezpieczone hasłem i przeglądaj modele CAD z dowolnego miejsca.",app_title:"Profesjonalna Przeglądarka Plików CAD",supported_formats:"Obsługiwane Formaty",upload_file:"Wyślij Plik",feature_1_title:"Zaawansowana wizualizacja",feature_1_desc:"Przeglądaj i analizuj modele 3D z precyzją i szczegółami",feature_2_title:"Bezpieczne udostępnianie",feature_2_desc:"Udostępniaj modele klientom i współpracownikom w bezpieczny sposób",feature_3_title:"Wsparcie wielu formatów",feature_3_desc:"Obsługa formatów STEP, IGES, STL, DXF i DWG",login:"Zaloguj się",register:"Zarejestruj się",create_account_sharing:"Utwórz konto, aby zarządzać swoimi plikami",account_created:"Twoje konto zostało pomyślnie utworzone. Jesteś teraz zalogowany.",enter_credentials:"Wprowadź dane logowania",username:"Nazwa użytkownika",username_optional:"Nazwa użytkownika jest opcjonalna",password:"Hasło",create_account:"Utwórz nowe konto",email:"Email",full_name:"Imię i nazwisko",company:"Firma",client_dashboard:"Panel klienta",button:{upload:"Prześlij",cancel:"Anuluj",share:"Udostępnij",copy:"Skopiowano"},checking:"Sprawdzanie...",welcome:"Witaj w Przeglądarce CAD",welcomeMessage:"Prześlij plik CAD, aby rozpocząć",recentModels:"Ostatnie modele",noModels:"Nie znaleziono modeli. Prześlij plik CAD, aby rozpocząć.",noPreviousFiles:"Brak wcześniejszych plików",dropFileHere:"Upuść plik CAD tutaj",dragAndDrop:"Przeciągnij i upuść plik tutaj lub kliknij, aby przeglądać",selectFile:"Wybierz plik",uploadingModel:"Przesyłanie modelu...",uploading_images:"Przesyłanie obrazów...",uploadProgress:"Postęp przesyłania",uploadComplete:"Przesyłanie zakończone",uploadFailed:"Przesyłanie nie powiodło się",supportedFormats:"Obsługiwane formaty: STEP, IGES, STL, DXF, DWG",processingFile:"Przetwarzanie pliku...",modelInfo:"Informacje o modelu",modelInformation:"Informacje o modelu",modelTree:"Drzewo modelu",components:"Komponenty",part:"Część",parts:"Części",assembly:"Złożenie",assemblies:"Złożenia",surfaces:"Powierzchnie",solids:"Bryły",viewControls:"Kontrolki widoku",rotate:"Obracaj",pan:"Przesuń",zoom:"Przybliż",fitToView:"Dopasuj do widoku",modelDetails:"Szczegóły modelu",format:"Format",fileSize:"Rozmiar pliku",created:"Utworzono",createdDate:"Data utworzenia",mode:"Tryb",fileType:"Typ pliku",modelEntities:"Elementy modelu",modelNotFound:"Nie znaleziono modelu",errorLoadingModel:"Błąd wczytywania modelu",measurement:{mode:"Tryb pomiaru",instructions:"Kliknij na model, aby zaznaczyć pierwszy punkt pomiaru, a następnie kliknij ponownie, aby zaznaczyć drugi punkt i zmierzyć odległość.",points:"Punkty",distance:"Odległość",units:"jednostek",toggle:"Włącz/wyłącz tryb pomiaru"},dimensions:{title:"Wymiary modelu",width:"Szerokość",height:"Wysokość",depth:"Głębokość",diagonal:"Przekątna"},shareModel:"Udostępnij model",shareTitle:"Udostępnij ten model CAD",shareDescription:"Udostępnij ten model innym osobom przez e-mail",recipientEmail:"E-mail odbiorcy",shareWithPassword:"Udostępnij z hasłem",sharePassword:"Hasło",generatePassword:"Wygeneruj hasło",setExpiry:"Ustaw datę wygaśnięcia",expiryDate:"Data wygaśnięcia",shareLink:"Link do udostępnienia",copyLink:"Kopiuj link",linkCopied:"Link skopiowany",enableSharing:"Włącz udostępnianie",disableSharing:"Wyłącz udostępnianie",sharingEnabled:"Udostępnianie włączone",sharingDisabled:"Udostępnianie wyłączone",sendEmail:"Wyślij powiadomienie e-mail",emailSent:"E-mail wysłany",emailNotSent:"Nie udało się wysłać e-maila",change_password:"Zmień hasło",new_password:"Nowe hasło",leave_empty_to_remove:"Pozostaw puste, aby usunąć hasło",password_updated:"Hasło zaktualizowane",password_update_success:"Hasło zostało pomyślnie zaktualizowane",password_update_error:"Błąd aktualizacji hasła",model_is_password_protected:"Ten model jest chroniony hasłem",open_in_browser:"Otwórz w przeglądarce",model_deleted:"Model usunięty",model_delete_success:"Model został pomyślnie usunięty",model_delete_error:"Błąd usuwania modelu",delete_model:"Usuń model",delete_model_confirmation:"Czy na pewno chcesz usunąć ten model? Tej operacji nie można cofnąć.",gallery_images:"Obrazy galerii",no_gallery_images:"Brak obrazów w galerii",sharedModel:"Udostępniony model",enterPassword:"Wprowadź hasło, aby zobaczyć ten model",passwordProtected:"Chroniony hasłem",incorrectPassword:"Nieprawidłowe hasło",viewSharedModel:"Zobacz udostępniony model",modelSharedBy:"Model udostępniony przez",shared:{protected_model:{title:"Chroniony model",description:"Ten model jest chroniony hasłem.",password_placeholder:"Wprowadź hasło do modelu"},model_info:{}},message:{no:{model:"Upuść plik tutaj lub kliknij, aby przeglądać"},loading:"Proszę czekać, przetwarzamy Twój plik",delete:{warning:"Czy na pewno chcesz usunąć ten model? Tej operacji nie można cofnąć.",success:"Model został pomyślnie usunięty"},share:{warning:"Czy na pewno chcesz udostępnić ten model?",success:"Model został pomyślnie udostępniony",copied:"Link do udostępnienia został skopiowany do schowka"},revocation:{sent:"Powiadomienie e-mail wysłane do"},password:{required:"Hasło nie jest wymagane"}},label:{file:"Wybrany plik",verification:"Weryfikacja w toku",shared:{model:"udostępniony model"},password:"Hasło","password.share":"Chronione hasłem","password.share.placeholder":"Wprowadź hasło do udostępnienia",expiry:"Data wygaśnięcia",email:"Email","email.placeholder":"Wprowadź email odbiorcy"},email_autofilled:"Twój adres email zostanie powiązany z tym modelem",email_required:"Podaj swój adres email, aby powiązać go z modelem",upload_success:"Plik został pomyślnie przesłany",upload_failed:"Przesyłanie pliku nie powiodło się",app:{footer:"Przeglądarka CAD - © 2025 Wszelkie prawa zastrzeżone"},header:{error:"Błąd",shared:{model:"Udostępniony model"}},genericError:"Coś poszło nie tak",connectionError:"Błąd połączenia",fileNotSupported:"Format pliku nie jest obsługiwany",fileTooLarge:"Plik jest zbyt duży",invalidPassword:"Nieprawidłowe hasło",invalidEmail:"Nieprawidłowy adres e-mail",email_already_exists:"Ten adres email jest już zarejestrowany. Proszę się zalogować.",warning:"Ostrzeżenie",email_exists_warning:"Ten adres email już istnieje w naszym systemie. Proszę się najpierw zalogować.",login_button:"Zaloguj się",errors:{title:"Błąd",share:"Błąd podczas udostępniania modelu",password_required:"Wymagane hasło",required:"jest wymagane",model:{fetch:"Nie udało się pobrać informacji o modelu",access:"Nie udało się uzyskać dostępu do modelu",display_failed:"Nie można wyświetlić modelu"}},loadingState:{shared_model:"Ładowanie udostępnionego modelu..."},action:{back_to_home:"Powrót do strony głównej",access:"Uzyskaj dostęp",verifying:"Weryfikacja...",go_to_app:"Przejdź do aplikacji"},sharingSaved:"Ustawienia udostępniania zapisane",sharingRemoved:"Udostępnianie zostało wyłączone",dxf:{preview:"Podgląd graficzny",svg_code:"Kod SVG",loading:"Ładowanie podglądu DXF...",error_loading:"Błąd ładowania pliku DXF",select_model:"Wybierz model DXF do wyświetlenia"},library:{title:"Biblioteka modeli CAD",description:"Przeglądaj i uzyskaj dostęp do publicznie udostępnionych modeli CAD",filters:"Filtry",searchPlaceholder:"Szukaj po nazwie lub tagu",tags:"Tagi",viewModel:"Zobacz model",noModels:"Nie znaleziono modeli",noModelsDescription:"Nie ma publicznych modeli pasujących do Twoich kryteriów wyszukiwania. Spróbuj dostosować filtry lub sprawdź później.",error:"Błąd ładowania biblioteki",modelNotFound:"Model nie został znaleziony"},common:{page:"Strona",previous:"Poprzednia",next:"Następna",tryAgain:"Spróbuj ponownie",error:"Błąd",backToLibrary:"Powrót do biblioteki",download:"Pobierz",reportAbuse:"Zgłoś nadużycie",modelInfo:"Informacje o modelu",filename:"Nazwa pliku",format:"Format",filesize:"Rozmiar pliku",gallery:"Galeria",goBack:"Wróć",description:"Opis",category:"Kategoria",tags:"Tagi"},abuse:{subtitle:"Zgłoś nieodpowiednie lub obraźliwe treści",report_for_model:"Zgłoś nieodpowiednie treści dla modelu",report_title:"Zgłoś nieodpowiednie treści",form_instruction:"Proszę podać szczegóły dotyczące nieodpowiednich treści, które chcesz zgłosić. Traktujemy wszystkie zgłoszenia poważnie i niezwłocznie je badamy.",details_label:"Szczegóły zgłoszenia",details_placeholder:"Proszę opisać nieodpowiednie treści. Podaj konkretne szczegóły dotyczące rodzaju treści naruszających nasze wytyczne społeczności (np. obraźliwe obrazy, nieodpowiednie opisy, naruszenie praw autorskich itp.).",guidelines_title:"Wytyczne społeczności",guidelines_text:"Nie tolerujemy nieodpowiednich, obraźliwych lub naruszających prawa autorskie treści. Wszystkie zgłoszenia są sprawdzane przez nasz zespół moderacyjny i podejmowane są odpowiednie działania.",report_sent:"Twoje zgłoszenie nadużycia zostało przesłane. Dziękujemy za pomoc w utrzymaniu bezpiecznej społeczności.",submitting:"Wysyłanie zgłoszenia...",submit_report:"Wyślij zgłoszenie"},admin:{loginTitle:"Logowanie do Panelu Administratora",loginDescription:"Wprowadź dane uwierzytelniające, aby uzyskać dostęp do panelu administratora",username:"Nazwa użytkownika",usernamePlaceholder:"admin",password:"Hasło",loginButton:"Zaloguj się",loggingIn:"Logowanie...",dashboardTitle:"Panel Administratora",sharedModelsTitle:"Udostępnione Modele",sharedModelsDescription:"Zarządzaj wszystkimi udostępnionymi modelami w systemie",refresh:"Odśwież",logout:"Wyloguj",notAuthenticated:"Niezalogowany",pleaseLogin:"Proszę zalogować się, aby uzyskać dostęp do panelu administratora",loadError:"Błąd ładowania danych",unknownError:"Wystąpił nieznany błąd",linkCopied:"Link skopiowany",linkCopiedDescription:"Link został skopiowany do schowka",sharingRevoked:"Udostępnianie odwołane",sharingRevokedDescription:"Udostępnianie modelu zostało pomyślnie wyłączone",revokeError:"Błąd odwoływania udostępniania",loggedOut:"Wylogowano",loggedOutDescription:"Zostałeś pomyślnie wylogowany",filename:"Nazwa pliku",format:"Format",sharedWith:"Udostępniono dla",createdDate:"Utworzono",lastAccessed:"Ostatni dostęp",expiryDate:"Data wygaśnięcia",passwordProtection:"Hasło",actions:"Akcje",shareLink:"Link",shareLinkTitle:"Link udostępniania",openLink:"Otwórz link",revoke:"Odwołaj",protected:"Chroniony",notProtected:"Niechroniony",noSharedModels:"Nie znaleziono udostępnionych modeli",revokeConfirmTitle:"Potwierdź odwołanie",revokeConfirmDescription:"Czy na pewno chcesz odwołać udostępnianie tego modelu? Tej operacji nie można cofnąć.",cancel:"Anuluj",confirmRevoke:"Tak, odwołaj"},shared_models:"Twoja Biblioteka CAD",shared_models_description:"Zarządzaj przesłanymi i udostępnionymi modelami 3D",shared_status:"Status udostępnienia",shared_with:"Udostępniono dla",last_accessed:"Ostatni dostęp",add_to_cad_library:"Dodaj do publicznej biblioteki CAD",public_library_added:"Model dodany do publicznej biblioteki",public_library_removed:"Model usunięty z publicznej biblioteki",public_library_added_message:"Model został pomyślnie dodany do publicznej biblioteki CAD",public_library_removed_message:"Model został pomyślnie usunięty z publicznej biblioteki CAD",public_cad_library:"Publiczna Biblioteka CAD",public_library_description:"Przeglądaj i pobieraj modele CAD udostępnione przez naszą społeczność. Wszystkie modele są darmowe do użytku w Twoich projektach.",search_models_tags:"Szukaj modeli i tagów...",all_categories:"Wszystkie Kategorie",all_tags:"Wszystkie Tagi",tags:"Tagi",showing_models:"Wyświetlane {count} z {total} modeli",no_models_found:"Nie znaleziono modeli",try_different_search:"Spróbuj innego terminu wyszukiwania lub wyczyść filtry",no_public_models_yet:"Brak publicznych modeli",failed_to_load_library:"Błąd podczas ładowania biblioteki. Spróbuj ponownie później.",cad_library_dimensions:"Wymiary",cad_library_view:"Zobacz",cad_library_download:"Pobierz",password_protected_public_error:"Nie można dodać modelu chronionego hasłem do publicznej biblioteki. Najpierw usuń udostępnianie prywatne lub usuń hasło.",logout:"Wyloguj",upload_thumbnail:"Prześlij miniaturkę",upload_custom_thumbnail:"Prześlij własną miniaturkę",upload_thumbnail_description:"Prześlij własną miniaturkę dla '{modelName}'. Obraz zostanie automatycznie przycięty do kwadratu.",select_image_file:"Wybierz plik obrazu",supported_formats_jpg_png_max_5mb:"Obsługiwane formaty: JPG, PNG. Maksymalny rozmiar: 5MB",max_6_photos_at_once:"Maksymalnie 6 zdjęć na raz.",your_cad_library:"Twoja Biblioteka CAD",models_uploaded_to_account:"Modele przesłane na Twoje konto",models_count_in_library:"Masz {count} modeli w swojej bibliotece",no_models_in_library:"Nie masz jeszcze żadnych modeli w bibliotece",manage_model_description:"Zarządzaj opisem modelu",model_description_explanation:"Dodaj opis opisowy dla modelu. System automatycznie przetłumaczy go na wszystkie obsługiwane języki.",original_language:"Język oryginalny",select_language:"Wybierz język",model_description:"Opis modelu",enter_model_description_placeholder:"Wprowadź opis opisowy modelu...",auto_translation_note:"Opis zostanie automatycznie przetłumaczony na wszystkie obsługiwane języki.",available_translations:"Dostępne tłumaczenia",google_translate_powered:"Tłumaczenia obsługiwane przez Google Translate API",delete_description:"Usuń opis",update_description:"Aktualizuj opis",save_description:"Zapisz opis",description_saved_successfully:"Opis został pomyślnie zapisany i przetłumaczony",description_deleted_successfully:"Opis został pomyślnie usunięty",description_required:"Opis jest wymagany",language_required:"Język jest wymagany",add_description:"Dodaj opis",expand_details:"Rozwiń szczegóły",model_details:"Szczegóły modelu",no_category:"Brak kategorii",select_category:"Wybierz kategorię",preview:"Podgląd",original:"Oryginał",enter_tags_placeholder:"Wprowadź tagi oddzielone przecinkami",save_tags:"Zapisz tagi",tags_saved_successfully:"Tagi zostały pomyślnie zapisane i przetłumaczone",tags_save_failed:"Nie udało się zapisać tagów",description_save_failed:"Nie udało się zapisać opisu",tags_help_text:"Wprowadź tagi oddzielone przecinkami. Zostaną automatycznie przetłumaczone na wszystkie języki.",cropped_to_square:"Przycięty do kwadratu",processing:"Przetwarzanie...",thumbnail_uploaded_successfully:"Miniaturka została przesłana pomyślnie",thumbnail_upload_failed:"Nie udało się przesłać miniaturki",please_select_image_file:"Proszę wybrać plik obrazu",file_too_large_5mb:"Plik jest za duży. Maksymalny rozmiar to 5MB",image_processing_failed:"Przetwarzanie obrazu nie powiodło się",invalid_image_file:"Nieprawidłowy plik obrazu",thumbnail_required_for_public:"Miniaturka jest wymagana aby dodać model do publicznej biblioteki. Proszę najpierw przesłać miniaturkę.",add_gallery:"Galeria plików",add_gallery_title:"Prześlij galerię modelu",add_gallery_description:"Prześlij do 6 zdjęć dla modelu {modelName}. Pierwsze zdjęcie będzie użyte jako miniaturka.",generate_thumbnail:"Generuj miniaturkę",generating_thumbnail:"Generowanie...",thumbnail_generated_successfully:"Miniaturka została wygenerowana pomyślnie",thumbnail_generation_failed:"Generowanie miniaturki nie powiodło się",upload_gallery:"Prześlij galerię",gallery_uploaded_successfully:"Galeria została przesłana pomyślnie",gallery_upload_failed:"Nie udało się przesłać galerii",gallery_preview:"Podgląd galerii",first_image_thumbnail_note:"Pierwsze zdjęcie będzie użyte jako miniaturka modelu",select_image_files:"Wybierz pliki obrazów",thumbnail:"Miniaturka",active:"Aktywny",inactive:"Nieaktywny",gallery_management:"Zarządzanie galerią",manage_model_gallery:"Zarządzaj galerią dla modelu {modelName}",current_thumbnail:"Obecna miniaturka",thumbnail_active:"Ta miniaturka jest obecnie aktywna",no_thumbnail_set:"Brak miniaturki dla tego modelu",upload_new_images:"Prześlij nowe zdjęcia",uploaded_images:"Przesłane zdjęcia",set_as_thumbnail:"Ustaw jako miniaturkę",click_set_thumbnail_note:"Kliknij 'Ustaw jako miniaturkę' na dowolnym zdjęciu, aby ustawić je jako miniaturkę modelu",close_gallery:"Zamknij",category_required_for_public:"Kategoria jest wymagana aby dodać model do publicznej biblioteki. Najpierw wybierz kategorię.",category:"Kategoria",art:"Sztuka","home-garden":"Dom i Ogród",home_garden:"Dom i Ogród",architecture:"Architektura",gadget:"Gadżety",game:"Gry",tools:"Narzędzia",deleting:"Usuwanie",image_deleted_successfully:"Obraz został pomyślnie usunięty",image_delete_failed:"Nie udało się usunąć obrazu",capture_screenshot:"Przechwyć Zrzut Ekranu",screenshot_captured_successfully:"Zrzut ekranu przechwycony i ustawiony jako miniaturka",screenshot_capture_failed:"Nie udało się przechwycić zrzutu ekranu",screenshot_instructions:"Ustaw idealny kąt widzenia i powiększenie, następnie kliknij przycisk kamery w przeglądarce 3D aby przechwycić zrzut ekranu jako miniaturkę",filename:"Nazwa pliku",table_actions:"Akcje",view_model:"Zobacz Model",view_share_link:"Zobacz Link Udostępniania",disable_sharing:"Wyłącz Udostępnianie",images_uploaded_to_gallery:"Obrazy przesłane do galerii",new_thumbnail_set:"Nowa miniaturka została ustawiona",image_removed_from_gallery:"Obraz usunięty z galerii",images_in_gallery:"obrazów w galerii",change_model_color:"Zmień Kolor Modelu",custom_color:"Kolor Niestandardowy",validation_error:"Błąd Walidacji",public_library_requirements:"Aby dodać model do biblioteki publicznej musi mieć: miniaturkę, opis i co najmniej jeden tag",category_updated:"Kategoria Zaktualizowana",category_updated_successfully:"Kategoria modelu została pomyślnie zaktualizowana",category_update_failed:"Nie udało się zaktualizować kategorii modelu",tags_updated:"Tagi Zaktualizowane",tags_updated_successfully:"Tagi modelu zostały pomyślnie zaktualizowane",tags_update_failed:"Nie udało się zaktualizować tagów modelu"},WH={services:{title:"CNC služby",laser_cutting:"Laserové řezání",laser_description:"Váš 2D návrh je ideální pro laserové řezání. Nabízíme přesné laserové řezání kovu, plastů a dalších materiálů.",cnc_machining:"CNC obrábění",cnc_description:"Váš 3D model je připraven k výrobě. Nabízíme profesionální CNC soužení a frézování s nejvyšší přesností a kvalitou.",manufacturing:"Výrobní služby",manufacturing_description:"Realizujeme váš výrobní projekt od A do Z. Kontaktujte nás pro diskuzi o detailech a získání individuální nabídky.",our_services:"Naše výrobní služby",get_quote:"Požádat o cenovou nabídku",contact_us:"Kontaktujte nás",laser_details:"Přesné řezání plechu, plastů a dalších materiálů s přesností 0,05 mm. Ideální pro 2D díly.",cnc_milling:"CNC frézování",milling_details:"Obrábění materiálů jako hliník, ocel, plast. Ideální pro komplexní 3D tvary.",cnc_turning:"CNC soužení",turning_details:"Přesné obrábění rotačních kovových dílů. Ideální pro hřídele, pouzdra, součásti strojů s přesností 0,01 mm.",prototyping:"Prototypování",prototyping_details:"Rychlá výroba prototypů a malých sérií. Od návrhu k hotovému dílu v několika dnech."},appTitle:"CAD Viewer",applicationName:"CAD Viewer",cad_viewer:"CAD Viewer",powered_by:"Podporováno",home:"Domů",back_to_home:"Zpět na domovskou stránku",upload:"Nahrát",uploadModel:"Nahrát model",view:"Zobrazit",share:"Sdílet",delete:"Smazat",cancel:"Zrušit",save:"Uložit",back:"Zpět",loadingGeneric:"Načítání...",refresh:"Obnovit",error:"Chyba",success:"Úspěch",close:"Zavřít",confirm:"Potvrdit",app_description:"Zcela bezplatná platforma pro prohlížení CAD souborů. Ukládejte modely STL, STEP, DXF a DWG přímo v prohlížeči. Sdílejte soubory chráněné heslem a procházejte CAD modely odkudkoli.",app_title:"Profesionální Prohlížeč CAD Souborů",supported_formats:"Podporované Formáty",upload_file:"Nahrát Soubor",feature_1_title:"Pokročilá vizualizace",feature_1_desc:"Prohlížejte a analyzujte 3D modely s přesností a detaily",feature_2_title:"Bezpečné sdílení",feature_2_desc:"Bezpečně sdílejte modely s klienty a kolegy",feature_3_title:"Podpora různých formátů",feature_3_desc:"Podpora formátů STEP, IGES, STL, DXF a DWG",login:"Přihlásit se",logout:"Odhlásit se",register:"Registrovat se",create_account_sharing:"Vytvořte si účet pro správu vašich souborů",account_created:"Váš účet byl úspěšně vytvořen. Nyní jste přihlášeni.",enter_credentials:"Zadejte své přihlašovací údaje",username:"Uživatelské jméno",username_optional:"Uživatelské jméno (volitelné)",password:"Heslo",create_account:"Vytvořit nový účet",email:"E-mail",full_name:"Celé jméno",company:"Společnost",client_dashboard:"Klientský dashboard",button:{upload:"Nahrát",cancel:"Zrušit",share:"Sdílet",copy:"Zkopírováno"},checking:"Kontrola...",welcome:"Vítejte v CAD Viewer",welcomeMessage:"Nahrajte CAD soubor pro začátek",recentModels:"Nedávné modely",noModels:"Nebyly nalezeny žádné modely. Nahrajte CAD soubor pro začátek.",noPreviousFiles:"Žádné předchozí soubory",dropFileHere:"Přetáhněte CAD soubor sem",dragAndDrop:"Přetáhněte soubor sem nebo klikněte pro procházení",selectFile:"Vybrat soubor",uploadingModel:"Nahrávání modelu...",uploadProgress:"Průběh nahrávání",uploadComplete:"Nahrávání dokončeno",uploadFailed:"Nahrávání selhalo",supportedFormats:"Podporované formáty: STEP, IGES, STL, DXF, DWG",processingFile:"Zpracování souboru...",modelInfo:"Informace o modelu",modelInformation:"Informace o modelu",modelTree:"Strom modelu",components:"Komponenty",part:"Díl",parts:"Díly",assembly:"Sestava",assemblies:"Sestavy",surfaces:"Povrchy",solids:"Tělesa",viewControls:"Ovládání pohledu",rotate:"Otáčet",pan:"Posouvat",zoom:"Přiblížení",fitToView:"Přizpůsobit pohledu",modelDetails:"Detaily modelu",model_details:"Detaily modelu",format:"Formát",fileSize:"Velikost souboru",created:"Vytvořeno",createdDate:"Datum vytvoření",mode:"Režim",fileType:"Typ souboru",modelEntities:"Entity modelu",modelNotFound:"Model nenalezen",errorLoadingModel:"Chyba při načítání modelu",measurement:{mode:"Režim měření",instructions:"Klikněte na model pro označení prvního bodu měření, poté klikněte znovu pro označení druhého bodu a změření vzdálenosti.",points:"Body",distance:"Vzdálenost",units:"jednotek",toggle:"Přepnout režim měření"},dimensions:{title:"Rozměry modelu",width:"Šířka (X)",height:"Výška (Y)",depth:"Hloubka (Z)",diagonal:"Úhlopříčka"},dxf:{preview:"Grafický náhled",svg_code:"SVG kód",loading:"Načítání DXF náhledu...",error_loading:"Chyba při načítání DXF souboru",select_model:"Vyberte DXF model pro zobrazení"},shareModel:"Sdílet model",shareTitle:"Sdílet tento CAD model",shareDescription:"Sdílet tento model s ostatními e-mailem",recipientEmail:"E-mail příjemce",shareWithPassword:"Sdílet s heslem",sharePassword:"Heslo",generatePassword:"Vygenerovat heslo",setExpiry:"Nastavit datum vypršení",expiryDate:"Datum vypršení",shareLink:"Odkaz pro sdílení",copyLink:"Kopírovat odkaz",linkCopied:"Odkaz zkopírován",enableSharing:"Povolit sdílení",disableSharing:"Zakázat sdílení",sharingEnabled:"Sdílení povoleno",sharingDisabled:"Sdílení zakázáno",sharing_enabled:"Sdílení povoleno",sharing_disabled:"Sdílení zakázáno",sharing_enabled_success:"Model byl úspěšně sdílen",sharing_disabled_success:"Model již není sdílen",sharing_error:"Chyba při aktualizaci stavu sdílení",sendEmail:"Poslat e-mailové oznámení",emailSent:"E-mail odeslán",emailNotSent:"E-mail se nepodařilo odeslat",shared_models:"Vaše CAD knihovna",shared_models_description:"Spravujte vaše nahrané a sdílené 3D modely",filename:"Název souboru",shared_with:"Sdíleno s",status:"Stav",shared_status:"Stav sdílení",last_accessed:"Poslední přístup",add_to_cad_library:"Přidat do veřejné CAD knihovny",public_library_added:"Model přidán do veřejné knihovny",public_library_removed:"Model odebrán z veřejné knihovny",public_library_added_message:"Model byl úspěšně přidán do veřejné CAD knihovny",public_library_removed_message:"Model byl úspěšně odebrán z veřejné CAD knihovny",public_cad_library:"Veřejná CAD knihovna",public_library_description:"Procházejte a stahujte CAD modely sdílené naší komunitou. Všechny modely jsou zdarma pro použití ve vašich projektech.",search_models_tags:"Hledat modely a štítky...",all_categories:"Všechny kategorie",showing_models:"Zobrazeno {count} z {total} modelů",no_models_found:"Nenalezeny žádné modely",try_different_search:"Zkuste jiný vyhledávací výraz nebo vymažte filtry",no_public_models_yet:"Zatím nejsou k dispozici žádné veřejné modely",failed_to_load_library:"Nepodařilo se načíst knihovnu. Zkuste to později.",cad_library_dimensions:"Rozměry",cad_library_view:"Zobrazit",cad_library_download:"Stáhnout",password_protected_public_error:"Nelze přidat model chráněný heslem do veřejné knihovny. Nejprve odstraňte soukromé sdílení nebo odstraňte heslo.",active:"Aktivní",inactive:"Neaktivní",view_model:"Zobrazit model",view_share_link:"Zobrazit odkaz pro sdílení",enable_sharing:"Sdílet model",disable_sharing:"Ukončit sdílení",open_link:"Otevřít odkaz",no_models:"Nebyly nalezeny žádné modely",no_models_description:"Nahrajte svůj první model pro začátek",change_password:"Změnit heslo",new_password:"Nové heslo",leave_empty_to_remove:"Ponechte prázdné pro odstranění hesla",password_updated:"Heslo aktualizováno",password_update_success:"Heslo bylo úspěšně aktualizováno",password_update_error:"Chyba při aktualizaci hesla",model_is_password_protected:"Tento model je chráněn heslem",open_in_browser:"Otevřít v prohlížeči",model_deleted:"Model smazán",model_delete_success:"Model byl úspěšně smazán",model_delete_error:"Chyba při mazání modelu",delete_model:"Smazat model",delete_model_confirmation:"Opravdu chcete smazat tento model? Tuto akci nelze vrátit zpět.",add_gallery:"Galerie souborů",add_gallery_title:"Nahrát galerii modelu",add_gallery_description:"Nahrajte až 6 obrázků pro model {modelName}. První obrázek bude použit jako náhled.",generate_thumbnail:"Vygenerovat náhled",generating_thumbnail:"Generování...",thumbnail_generated_successfully:"Náhled byl úspěšně vygenerován",thumbnail_generation_failed:"Generování náhledu se nezdařilo",sharedModel:"Sdílený model",enterPassword:"Zadejte heslo pro zobrazení tohoto modelu",passwordProtected:"Chráněno heslem",incorrectPassword:"Nesprávné heslo",viewSharedModel:"Zobrazit sdílený model",modelSharedBy:"Model sdílen",shared:{protected_model:{title:"Chráněný model",description:"Tento model je chráněn heslem.",password_placeholder:"Zadejte heslo modelu"},model_info:{shared_status:"Sdílený model"}},message:{no:{model:"Přetáhněte soubor sem nebo klikněte pro procházení"},loading:"Prosím čekejte, váš soubor se zpracovává",delete:{warning:"Opravdu chcete smazat tento model? Tuto akci nelze vrátit zpět.",success:"Model byl úspěšně smazán"},share:{warning:"Opravdu chcete sdílet tento model?",success:"Model byl úspěšně sdílen",copied:"Odkaz pro sdílení byl zkopírován do schránky"},revocation:{sent:"E-mailové oznámení odesláno"},password:{required:"Heslo není vyžadováno"}},label:{file:"Vybraný soubor",verification:"Probíhá ověření",shared:{model:"sdílený model"},password:"Heslo","password.share":"Chráněno heslem","password.share.placeholder":"Zadejte heslo pro sdílení",expiry:"Datum vypršení",email:"E-mail","email.placeholder":"Zadejte e-mail příjemce"},email_autofilled:"Vaše e-mailová adresa bude spojena s tímto modelem",email_required:"Zadejte svůj e-mail pro spojení s tímto modelem",upload_success:"Soubor byl úspěšně nahrán",upload_failed:"Nahrávání souboru selhalo",app:{footer:"CAD Viewer - © 2025 Všechna práva vyhrazena"},header:{error:"Chyba",shared:{model:"Sdílený model"},no:{model:"Požadovaný model nebyl nalezen nebo není k dispozici."}},genericError:"Něco se pokazilo",connectionError:"Chyba připojení",fileNotSupported:"Formát souboru není podporován",fileTooLarge:"Soubor je příliš velký",invalidPassword:"Neplatné heslo",invalidEmail:"Neplatná e-mailová adresa",email_already_exists:"Tento e-mail je již registrován. Prosím, přihlaste se.",warning:"Varování",email_exists_warning:"Tento e-mail již existuje v našem systému. Prosím, nejdříve se přihlaste.",login_button:"Přihlásit se",errors:{title:"Chyba",share:"Chyba při sdílení modelu",password_required:"Heslo je vyžadováno",required:"je vyžadováno",model:{fetch:"Nepodařilo se načíst informace o modelu",access:"Nepodařilo se získat přístup k modelu",display_failed:"Nelze zobrazit model"}},loadingState:{shared_model:"Načítání sdíleného modelu..."},actions:{back_to_home:"Zpět na domovskou stránku",access:"Přístup",verifying:"Ověřování...",go_to_app:"Přejít do aplikace"},action:{back_to_home:"Zpět na domovskou stránku",access:"Přístup",verifying:"Ověřování...",go_to_app:"Přejít do aplikace"},sharingSaved:"Nastavení sdílení uloženo",sharingRemoved:"Sdílení bylo zakázáno",deleteShare:{title:"Smazat sdílení modelu",description:"Potvrdit smazání odkazu sdíleného modelu",confirmMessage:"Opravdu chcete smazat tento odkaz na sdílený model? Tuto akci nelze vrátit zpět a model již nebude přístupný ostatním.",confirm:"Smazat sdílení",cancel:"Zrušit",deleting:"Mazání...",successTitle:"Sdílení smazáno",successMessage:"Odkaz na sdílený model byl úspěšně smazán a již není přístupný.",errorTitle:"Mazání selhalo",unknownError:"Při mazání došlo k neznámé chybě.",connectionError:"Chyba připojení. Zkuste to prosím později.",invalidToken:"Neplatný nebo prošlý bezpečnostní token.",backToHome:"Zpět na domovskou stránku"},library:{title:"Knihovna CAD modelů",description:"Procházet a přistupovat k veřejně sdíleným CAD modelům",filters:"Filtry",searchPlaceholder:"Hledat podle názvu nebo tagu",tags:"Tagy",viewModel:"Zobrazit model",noModels:"Nebyly nalezeny žádné modely",noModelsDescription:"Nejsou žádné veřejné modely odpovídající vašim kritteriím vyhledávání. Zkuste upravit filtry nebo se vraťte později.",error:"Chyba při načítání knihovny"},common:{page:"Strana",previous:"Předchozí",next:"Další",tryAgain:"Zkusit znovu",error:"Chyba",backToLibrary:"Zpět do knihovny",download:"Stáhnout",reportAbuse:"Nahlásit zneužití",modelInfo:"Informace o modelu",filename:"Název souboru",format:"Formát",filesize:"Velikost souboru",gallery:"Galerie",goBack:"Zpět",tags:"Tagy"},abuse:{subtitle:"Nahlásit nevhodný nebo urážlivý obsah",report_for_model:"Nahlásit nevhodný obsah pro model",report_title:"Nahlásit nevhodný obsah",form_instruction:"Prosím poskytněte podrobnosti o nevhodném obsahu, který chcete nahlásit. Všechna hlášení bereme vážně a rychle je vyšetřujeme.",details_label:"Podrobnosti hlášení",details_placeholder:"Prosím popište nevhodný obsah. Uveďte konkrétní podrobnosti o typu obsahu, který porušuje naše komunitní směrnice (např. urážlivé obrázky, nevhodné popisy, porušení autorských práv atd.).",guidelines_title:"Komunitní směrnice",guidelines_text:"Netolerujeme nevhodný, urážlivý nebo obsah porušující autorská práva. Všechna hlášení jsou kontrolována naším moderátorským týmem a budou přijata odpovídající opatření.",report_sent:"Vaše hlášení zneužití bylo odesláno. Děkujeme, že nám pomáháte udržovat bezpečnou komunitu.",submitting:"Odesílání hlášení...",submit_report:"Odeslat hlášení"},admin:{loginTitle:"Přihlášení do administrace",loginDescription:"Zadejte své přihlašovací údaje pro přístup do administračního panelu",username:"Uživatelské jméno",usernamePlaceholder:"admin",password:"Heslo",loginButton:"Přihlásit se",loggingIn:"Přihlašování...",dashboardTitle:"Administrační panel",sharedModelsTitle:"Sdílené modely",sharedModelsDescription:"Spravujte všechny odkazy na sdílené modely v systému",refresh:"Obnovit",logout:"Odhlásit se",notAuthenticated:"Neautentizováno",pleaseLogin:"Prosím, přihlaste se pro přístup do administračního panelu",loadError:"Chyba načítání dat",unknownError:"Došlo k neznámé chybě",linkCopied:"Odkaz zkopírován",linkCopiedDescription:"Odkaz byl zkopírován do schránky",sharingRevoked:"Sdílení odvoláno",sharingRevokedDescription:"Sdílení modelu bylo úspěšně zakázáno",revokeError:"Chyba při odvolání sdílení",loggedOut:"Odhlášeno",loggedOutDescription:"Byli jste úspěšně odhlášeni",filename:"Název souboru",format:"Formát",sharedWith:"Sdíleno s",createdDate:"Vytvořeno",lastAccessed:"Poslední přístup",expiryDate:"Datum vypršení",passwordProtection:"Heslo",actions:"Akce",shareLink:"Odkaz",shareLinkTitle:"Odkaz pro sdílení",openLink:"Otevřít odkaz",revoke:"Odvolat",protected:"Chráněno",notProtected:"Nechráněno",noSharedModels:"Nebyly nalezeny žádné sdílené modely",revokeConfirmTitle:"Potvrdit odvolání",revokeConfirmDescription:"Opravdu chcete odvolat sdílení pro tento model? Tuto akci nelze vrátit zpět.",cancel:"Zrušit",confirmRevoke:"Ano, odvolat"},upload_thumbnail:"Nahrát náhled",upload_custom_thumbnail:"Nahrát vlastní náhled",upload_thumbnail_description:"Nahrajte vlastní obrázek náhledu pro '{modelName}'. Obrázek bude automaticky oříznut na čtvercový formát.",select_image_file:"Vybrat soubor obrázku",supported_formats_jpg_png_max_5mb:"Podporované formáty: JPG, PNG. Maximální velikost: 5MB",max_6_photos_at_once:"Maximálně 6 fotografií najednou.",your_cad_library:"Vaše CAD knihovna",models_uploaded_to_account:"Modely nahrané na váš účet",models_count_in_library:"Máte {count} modelů ve své knihovně",no_models_in_library:"Ve své knihovně ještě nemáte žádné modely",preview:"Náhled",original:"Originál",cropped_to_square:"Oříznut na čtverec",processing:"Zpracovávání...",thumbnail_uploaded_successfully:"Náhled byl úspěšně nahrán",thumbnail_upload_failed:"Nepodařilo se nahrát náhled",please_select_image_file:"Prosím vyberte soubor obrázku",file_too_large_5mb:"Soubor je příliš velký. Maximální velikost je 5MB",image_processing_failed:"Zpracování obrázku selhalo",invalid_image_file:"Neplatný soubor obrázku",thumbnail_required_for_public:"Pro přidání tohoto modelu do veřejné knihovny je vyžadován náhled. Nejprve prosím nahrajte náhled.",save_tags:"Uložit tagy",tags_saved_successfully:"Tagy byly úspěšně uloženy a přeloženy",tags_save_failed:"Nepodařilo se uložit tagy",description_save_failed:"Nepodařilo se uložit popis",tags_help_text:"Zadejte tagy oddělené čárkami. Budou automaticky přeloženy do všech jazyků.",enter_tags_placeholder:"Zadejte tagy oddělené čárkami",enter_model_description_placeholder:"Zadejte popis modelu...",model_description:"Popis modelu",select_language:"Vybrat jazyk",save_description:"Uložit popis",auto_translation_note:"Popis bude automaticky přeložen do všech podporovaných jazyků.",gallery_management:"Správa galerie",upload_new_images:"Nahrát nové obrázky",current_thumbnail:"Aktuální náhled",select_image_files:"Vybrat soubory obrázků",click_set_thumbnail_note:"Klikněte na 'Nastavit jako náhled' u libovolného obrázku pro nastavení náhledu modelu",thumbnail_active:"Tento náhled je aktuálně aktivní",capture_screenshot:"Zachytit snímek obrazovky",gallery_images:"Obrázky galerie",manage_model_gallery:"Správa galerie pro model {modelName}",images_in_gallery:"obrázků v galerii",screenshot_instructions:"Umístěte 3D model podle potřeby a klikněte na tlačítko pro zachycení snímku obrazovky do galerie",category_updated:"Kategorie Aktualizována",category_updated_successfully:"Kategorie modelu byla úspěšně aktualizována",category_update_failed:"Nepodařilo se aktualizovat kategorii modelu",tags_updated:"Tagy Aktualizovány",tags_updated_successfully:"Tagy modelu byly úspěšně aktualizovány",tags_update_failed:"Nepodařilo se aktualizovat tagy modelu",description_saved_successfully:"Popis byl úspěšně uložen"},$H={services:{title:"CNC Dienstleistungen",laser_cutting:"Laserschneiden",laser_description:"Ihr 2D-Design ist ideal für Laserschneiden geeignet. Wir bieten präzises Laserschneiden von Metall, Kunststoff und anderen Materialien an.",cnc_machining:"CNC-Bearbeitung",cnc_description:"Ihr 3D-Modell ist bereit für die Produktion. Wir bieten professionelles CNC-Drehen und -Fräsen mit höchster Präzision und Qualität an.",manufacturing:"Fertigungsdienstleistungen",manufacturing_description:"Wir können Ihr Fertigungsprojekt von A bis Z umsetzen. Kontaktieren Sie uns, um Details zu besprechen und ein individuelles Angebot zu erhalten.",our_services:"Unsere Fertigungsdienstleistungen",get_quote:"Angebot anfragen",contact_us:"Kontaktieren Sie uns",laser_details:"Präzises Schneiden von Metall, Kunststoff und anderen Materialien mit einer Genauigkeit von 0,05 mm. Ideal für 2D-Teile.",cnc_milling:"CNC-Fräsen",milling_details:"Bearbeitung von Materialien wie Aluminium, Stahl, Kunststoff. Ideal für komplexe 3D-Formen.",cnc_turning:"CNC-Drehen",turning_details:"Präzise Bearbeitung von rotierenden Metallteilen. Ideal für Wellen, Hülsen, Maschinenteile mit einer Genauigkeit von 0,01 mm.",prototyping:"Prototypenbau",prototyping_details:"Schnelle Herstellung von Prototypen und Kleinserien. Vom Design zum fertigen Teil in nur wenigen Tagen."},appTitle:"CAD Viewer",applicationName:"CAD Viewer",cad_viewer:"CAD Viewer",powered_by:"Unterstützt von",home:"Startseite",back_to_home:"Zurück zur Startseite",language_detecting:"Erkennung...",upload:"Hochladen",uploadModel:"Modell hochladen",view:"Ansicht",share:"Teilen",delete:"Löschen",cancel:"Abbrechen",save:"Speichern",back:"Zurück",loadingGeneric:"Wird geladen...",refresh:"Aktualisieren",error:"Fehler",success:"Erfolg",close:"Schließen",confirm:"Bestätigen",app_description:"Völlig kostenlose Plattform zur Betrachtung von CAD-Dateien. Speichern Sie STL-, STEP-, DXF- und DWG-Modelle direkt in Ihrem Browser. Teilen Sie passwortgeschützte Dateien und durchsuchen Sie CAD-Modelle von überall.",app_title:"Professioneller CAD-Dateibetrachter",supported_formats:"Unterstützte Formate",upload_file:"Datei Hochladen",feature_1_title:"Fortschrittliche Visualisierung",feature_1_desc:"Betrachten und analysieren Sie 3D-Modelle mit Präzision und Detail",feature_2_title:"Sicheres Teilen",feature_2_desc:"Teilen Sie Ihre Modelle sicher mit Kunden und Kollegen",feature_3_title:"Unterstützung verschiedener Formate",feature_3_desc:"Unterstützung für STEP, IGES, STL, DXF und DWG Formate",login:"Anmelden",logout:"Abmelden",register:"Registrieren",create_account_sharing:"Erstellen Sie ein Konto, um Ihre Dateien zu verwalten",account_created:"Ihr Konto wurde erfolgreich erstellt. Sie sind jetzt angemeldet.",enter_credentials:"Geben Sie Ihre Anmeldedaten ein",username:"Benutzername",username_optional:"Benutzername ist optional",password:"Passwort",create_account:"Neues Konto erstellen",email:"E-Mail",full_name:"Vollständiger Name",company:"Unternehmen",client_dashboard:"Kunden-Dashboard",button:{upload:"Hochladen",cancel:"Abbrechen",share:"Teilen",copy:"Kopiert"},checking:"Überprüfung...",welcome:"Willkommen bei CAD Viewer",welcomeMessage:"Laden Sie eine CAD-Datei hoch, um zu beginnen",recentModels:"Letzte Modelle",noModels:"Keine Modelle gefunden. Laden Sie eine CAD-Datei hoch, um zu beginnen.",noPreviousFiles:"Keine früheren Dateien",dropFileHere:"CAD-Datei hier ablegen",dragAndDrop:"Ziehen Sie Ihre Datei hierher oder klicken Sie zum Durchsuchen",selectFile:"Datei auswählen",uploadingModel:"Modell wird hochgeladen...",uploadProgress:"Upload-Fortschritt",uploadComplete:"Hochladen abgeschlossen",uploadFailed:"Hochladen fehlgeschlagen",supportedFormats:"Unterstützte Formate: STEP, IGES, STL, DXF, DWG",processingFile:"Datei wird verarbeitet...",modelInfo:"Modellinformationen",modelInformation:"Modellinformationen",modelTree:"Modellbaum",components:"Komponenten",part:"Teil",parts:"Teile",assembly:"Baugruppe",assemblies:"Baugruppen",surfaces:"Oberflächen",solids:"Festkörper",viewControls:"Ansichtsteuerung",rotate:"Drehen",pan:"Verschieben",zoom:"Zoom",fitToView:"An Ansicht anpassen",modelDetails:"Modelldetails",model_details:"Modelldetails",format:"Format",fileSize:"Dateigröße",created:"Erstellt",createdDate:"Erstellungsdatum",mode:"Modus",fileType:"Dateityp",modelEntities:"Modellentitäten",modelNotFound:"Modell nicht gefunden",errorLoadingModel:"Fehler beim Laden des Modells",measurement:{mode:"Messmodus",instructions:"Klicken Sie auf das Modell, um den ersten Messpunkt zu markieren, und klicken Sie dann erneut, um den zweiten Punkt zu markieren und den Abstand zu messen.",points:"Punkte",distance:"Abstand",units:"Einheiten",toggle:"Messmodus umschalten"},dimensions:{title:"Modellabmessungen",width:"Breite (X)",height:"Höhe (Y)",depth:"Tiefe (Z)",diagonal:"Diagonale"},dxf:{preview:"Grafische Vorschau",svg_code:"SVG-Code",loading:"DXF-Vorschau wird geladen...",error_loading:"Fehler beim Laden der DXF-Datei",select_model:"Wählen Sie ein DXF-Modell zur Anzeige"},shareModel:"Modell teilen",shareTitle:"Dieses CAD-Modell teilen",shareDescription:"Teilen Sie dieses Modell mit anderen per E-Mail",recipientEmail:"E-Mail des Empfängers",shareWithPassword:"Mit Passwort teilen",sharePassword:"Passwort",generatePassword:"Passwort generieren",setExpiry:"Ablaufdatum festlegen",expiryDate:"Ablaufdatum",shareLink:"Link zum Teilen",copyLink:"Link kopieren",linkCopied:"Link kopiert",enableSharing:"Teilen aktivieren",disableSharing:"Teilen deaktivieren",sharingEnabled:"Teilen aktiviert",sharingDisabled:"Teilen deaktiviert",sharing_enabled:"Teilen aktiviert",sharing_disabled:"Teilen deaktiviert",sharing_enabled_success:"Modell wurde erfolgreich geteilt",sharing_disabled_success:"Modell wird nicht mehr geteilt",sharing_error:"Fehler beim Aktualisieren des Freigabestatus",sendEmail:"E-Mail-Benachrichtigung senden",emailSent:"E-Mail gesendet",emailNotSent:"E-Mail konnte nicht gesendet werden",shared_models:"Ihre CAD-Bibliothek",shared_models_description:"Verwalten Sie Ihre hochgeladenen und geteilten 3D-Modelle",filename:"Dateiname",shared_with:"Geteilt mit",status:"Status",shared_status:"Freigabestatus",last_accessed:"Letzter Zugriff",add_to_cad_library:"Zur öffentlichen CAD-Bibliothek hinzufügen",public_library_added:"Modell zur öffentlichen Bibliothek hinzugefügt",public_library_removed:"Modell aus öffentlicher Bibliothek entfernt",public_library_added_message:"Modell wurde erfolgreich zur öffentlichen CAD-Bibliothek hinzugefügt",public_library_removed_message:"Modell wurde erfolgreich aus der öffentlichen CAD-Bibliothek entfernt",public_cad_library:"Öffentliche CAD-Bibliothek",public_library_description:"Durchsuchen und laden Sie CAD-Modelle herunter, die von unserer Community geteilt werden. Alle Modelle sind kostenlos für Ihre Projekte.",search_models_tags:"Modelle und Tags suchen...",all_categories:"Alle Kategorien",showing_models:"{count} von {total} Modellen angezeigt",no_models_found:"Keine Modelle gefunden",try_different_search:"Versuchen Sie einen anderen Suchbegriff oder löschen Sie Filter",no_public_models_yet:"Noch keine öffentlichen Modelle verfügbar",failed_to_load_library:"Bibliothek konnte nicht geladen werden. Versuchen Sie es später erneut.",cad_library_dimensions:"Abmessungen",cad_library_view:"Anzeigen",cad_library_download:"Herunterladen",password_protected_public_error:"Passwort-geschütztes Modell kann nicht zur öffentlichen Bibliothek hinzugefügt werden. Bitte entfernen Sie zuerst die private Freigabe oder das Passwort.",active:"Aktiv",inactive:"Inaktiv",view_model:"Modell anzeigen",view_share_link:"Teilungslink anzeigen",enable_sharing:"Modell teilen",disable_sharing:"Teilen beenden",open_link:"Link öffnen",no_models:"Keine Modelle gefunden",no_models_description:"Laden Sie Ihr erstes Modell hoch, um zu beginnen",change_password:"Passwort ändern",new_password:"Neues Passwort",leave_empty_to_remove:"Lassen Sie das Feld leer, um das Passwort zu entfernen",password_updated:"Passwort aktualisiert",password_update_success:"Passwort wurde erfolgreich aktualisiert",password_update_error:"Fehler beim Aktualisieren des Passworts",model_is_password_protected:"Dieses Modell ist passwortgeschützt",open_in_browser:"Im Browser öffnen",model_deleted:"Modell gelöscht",model_delete_success:"Modell wurde erfolgreich gelöscht",model_delete_error:"Fehler beim Löschen des Modells",delete_model:"Modell löschen",delete_model_confirmation:"Sind Sie sicher, dass Sie dieses Modell löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden.",add_gallery:"Datei-Galerie",add_gallery_title:"Modell-Galerie hochladen",add_gallery_description:"Laden Sie bis zu 6 Bilder für Modell {modelName} hoch. Das erste Bild wird als Miniaturansicht verwendet.",generate_thumbnail:"Miniaturansicht erstellen",generating_thumbnail:"Erstelle...",thumbnail_generated_successfully:"Miniaturansicht erfolgreich erstellt",thumbnail_generation_failed:"Erstellen der Miniaturansicht fehlgeschlagen",sharedModel:"Geteiltes Modell",enterPassword:"Geben Sie das Passwort ein, um dieses Modell anzuzeigen",passwordProtected:"Passwortgeschützt",incorrectPassword:"Falsches Passwort",viewSharedModel:"Geteiltes Modell anzeigen",modelSharedBy:"Modell geteilt von",shared:{protected_model:{title:"Geschütztes Modell",description:"Dieses Modell ist passwortgeschützt.",password_placeholder:"Geben Sie das Modellpasswort ein"},model_info:{shared_status:"Geteiltes Modell"}},message:{no:{model:"Datei hier ablegen oder zum Durchsuchen klicken"},loading:"Bitte warten, Ihre Datei wird verarbeitet",delete:{warning:"Sind Sie sicher, dass Sie dieses Modell löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden.",success:"Modell erfolgreich gelöscht"},share:{warning:"Sind Sie sicher, dass Sie dieses Modell teilen möchten?",success:"Modell erfolgreich geteilt",copied:"Teilungslink wurde in die Zwischenablage kopiert"},revocation:{sent:"E-Mail-Benachrichtigung gesendet an"},password:{required:"Passwort nicht erforderlich"}},label:{file:"Ausgewählte Datei",verification:"Überprüfung läuft",shared:{model:"geteiltes Modell"},password:"Passwort","password.share":"Passwortgeschützt","password.share.placeholder":"Passwort für die Freigabe eingeben",expiry:"Ablaufdatum",email:"E-Mail","email.placeholder":"E-Mail des Empfängers eingeben"},email_autofilled:"Ihre E-Mail-Adresse wird mit diesem Modell verknüpft",email_required:"Bitte geben Sie Ihre E-Mail-Adresse an, um sie mit diesem Modell zu verknüpfen",upload_success:"Datei erfolgreich hochgeladen",upload_failed:"Datei-Upload fehlgeschlagen",app:{footer:"CAD Viewer - © 2025 Alle Rechte vorbehalten"},header:{error:"Fehler",shared:{model:"Geteiltes Modell"},no:{model:"Das angeforderte Modell wurde nicht gefunden oder ist nicht verfügbar."}},genericError:"Etwas ist schiefgelaufen",connectionError:"Verbindungsfehler",fileNotSupported:"Dateiformat wird nicht unterstützt",fileTooLarge:"Datei ist zu groß",invalidPassword:"Ungültiges Passwort",invalidEmail:"Ungültige E-Mail-Adresse",email_already_exists:"Diese E-Mail ist bereits registriert. Bitte melden Sie sich stattdessen an.",warning:"Warnung",email_exists_warning:"Diese E-Mail existiert bereits in unserem System. Bitte melden Sie sich zuerst an.",login_button:"Anmelden",errors:{title:"Fehler",share:"Fehler beim Teilen des Modells",password_required:"Passwort erforderlich",required:"ist erforderlich",model:{fetch:"Modellinformationen konnten nicht abgerufen werden",access:"Zugriff auf das Modell fehlgeschlagen",display_failed:"Modell kann nicht angezeigt werden"}},loadingState:{shared_model:"Geteiltes Modell wird geladen..."},actions:{back_to_home:"Zurück zur Startseite",access:"Zugriff",verifying:"Überprüfung...",go_to_app:"Zur Anwendung gehen"},action:{back_to_home:"Zurück zur Startseite",access:"Zugriff",verifying:"Überprüfung...",go_to_app:"Zur Anwendung gehen"},sharingSaved:"Freigabeeinstellungen gespeichert",sharingRemoved:"Freigabe wurde deaktiviert",deleteShare:{title:"Modellfreigabe löschen",description:"Löschen des geteilten Modelllinks bestätigen",confirmMessage:"Sind Sie sicher, dass Sie diesen geteilten Modelllink löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden und das Modell wird für andere nicht mehr zugänglich sein.",confirm:"Freigabe löschen",cancel:"Abbrechen",deleting:"Wird gelöscht...",successTitle:"Freigabe gelöscht",successMessage:"Der geteilte Modelllink wurde erfolgreich gelöscht und ist nicht mehr zugänglich.",errorTitle:"Löschen fehlgeschlagen",unknownError:"Ein unbekannter Fehler ist beim Löschen aufgetreten.",connectionError:"Verbindungsfehler. Bitte versuchen Sie es später erneut.",invalidToken:"Ungültiges oder abgelaufenes Sicherheitstoken.",backToHome:"Zurück zur Startseite"},library:{title:"CAD-Modellbibliothek",description:"Durchsuchen und Zugriff auf öffentlich geteilte CAD-Modelle",filters:"Filter",searchPlaceholder:"Nach Name oder Tag suchen",tags:"Tags",viewModel:"Modell anzeigen",noModels:"Keine Modelle gefunden",noModelsDescription:"Es gibt keine öffentlichen Modelle, die Ihren Suchkriterien entsprechen. Versuchen Sie, Ihre Filter anzupassen oder schauen Sie später wieder vorbei.",error:"Fehler beim Laden der Bibliothek"},common:{page:"Seite",previous:"Zurück",next:"Weiter",tryAgain:"Erneut versuchen",error:"Fehler",backToLibrary:"Zurück zur Bibliothek",download:"Herunterladen",reportAbuse:"Missbrauch melden",modelInfo:"Modellinformationen",filename:"Dateiname",format:"Format",filesize:"Dateigröße",gallery:"Galerie",goBack:"Zurück",tags:"Tags"},abuse:{subtitle:"Unangemessene oder beleidigende Inhalte melden",report_for_model:"Unangemessene Inhalte für Modell melden",report_title:"Unangemessene Inhalte melden",form_instruction:"Bitte geben Sie Details zu den unangemessenen Inhalten an, die Sie melden möchten. Wir nehmen alle Meldungen ernst und untersuchen sie umgehend.",details_label:"Meldungsdetails",details_placeholder:"Bitte beschreiben Sie die unangemessenen Inhalte. Geben Sie spezifische Details über die Art von Inhalten an, die gegen unsere Community-Richtlinien verstoßen (z.B. beleidigende Bilder, unangemessene Beschreibungen, Urheberrechtsverletzungen usw.).",guidelines_title:"Community-Richtlinien",guidelines_text:"Wir tolerieren keine unangemessenen, beleidigenden oder urheberrechtsverletzenden Inhalte. Alle Meldungen werden von unserem Moderationsteam überprüft und entsprechende Maßnahmen ergriffen.",report_sent:"Ihre Missbrauchsmeldung wurde eingereicht. Vielen Dank, dass Sie uns dabei helfen, eine sichere Community zu erhalten.",submitting:"Meldung wird eingereicht...",submit_report:"Meldung einreichen"},admin:{loginTitle:"Admin-Panel Login",loginDescription:"Geben Sie Ihre Anmeldedaten ein, um auf das Admin-Panel zuzugreifen",username:"Benutzername",usernamePlaceholder:"admin",password:"Passwort",loginButton:"Anmelden",loggingIn:"Anmeldung...",dashboardTitle:"Admin-Dashboard",sharedModelsTitle:"Geteilte Modelle",sharedModelsDescription:"Verwalten Sie alle geteilten Modelllinks im System",refresh:"Aktualisieren",logout:"Abmelden",notAuthenticated:"Nicht authentifiziert",pleaseLogin:"Bitte melden Sie sich an, um auf das Admin-Panel zuzugreifen",loadError:"Fehler beim Laden der Daten",unknownError:"Ein unbekannter Fehler ist aufgetreten",linkCopied:"Link kopiert",linkCopiedDescription:"Link wurde in die Zwischenablage kopiert",sharingRevoked:"Freigabe widerrufen",sharingRevokedDescription:"Die Modellfreigabe wurde erfolgreich deaktiviert",revokeError:"Fehler beim Widerrufen der Freigabe",loggedOut:"Abgemeldet",loggedOutDescription:"Sie wurden erfolgreich abgemeldet",filename:"Dateiname",format:"Format",sharedWith:"Geteilt mit",createdDate:"Erstellt",lastAccessed:"Letzter Zugriff",expiryDate:"Ablaufdatum",passwordProtection:"Passwort",actions:"Aktionen",shareLink:"Link",shareLinkTitle:"Freigabelink",openLink:"Link öffnen",revoke:"Widerrufen",protected:"Geschützt",notProtected:"Nicht geschützt",noSharedModels:"Keine geteilten Modelle gefunden",revokeConfirmTitle:"Widerruf bestätigen",revokeConfirmDescription:"Sind Sie sicher, dass Sie die Freigabe für dieses Modell widerrufen möchten? Diese Aktion kann nicht rückgängig gemacht werden.",cancel:"Abbrechen",confirmRevoke:"Ja, widerrufen"},upload_thumbnail:"Vorschaubild hochladen",upload_custom_thumbnail:"Benutzerdefiniertes Vorschaubild hochladen",upload_thumbnail_description:"Laden Sie ein benutzerdefiniertes Vorschaubild für '{modelName}' hoch. Das Bild wird automatisch zu einem quadratischen Format zugeschnitten.",select_image_file:"Bilddatei auswählen",supported_formats_jpg_png_max_5mb:"Unterstützte Formate: JPG, PNG. Maximale Größe: 5MB",max_6_photos_at_once:"Maximal 6 Fotos auf einmal.",your_cad_library:"Ihre CAD-Bibliothek",models_uploaded_to_account:"Modelle, die Sie auf Ihr Konto hochgeladen haben",models_count_in_library:"Sie haben {count} Modelle in Ihrer Bibliothek",no_models_in_library:"Sie haben noch keine Modelle in Ihrer Bibliothek",preview:"Vorschau",original:"Original",cropped_to_square:"Zu Quadrat zugeschnitten",processing:"Verarbeitung...",thumbnail_uploaded_successfully:"Vorschaubild erfolgreich hochgeladen",thumbnail_upload_failed:"Fehler beim Hochladen des Vorschaubilds",please_select_image_file:"Bitte wählen Sie eine Bilddatei aus",file_too_large_5mb:"Datei ist zu groß. Maximale Größe ist 5MB",image_processing_failed:"Bildverarbeitung fehlgeschlagen",invalid_image_file:"Ungültige Bilddatei",thumbnail_required_for_public:"Ein Vorschaubild ist erforderlich, um dieses Modell zur öffentlichen Bibliothek hinzuzufügen. Bitte laden Sie zuerst ein Vorschaubild hoch.",save_tags:"Tags speichern",tags_saved_successfully:"Tags wurden erfolgreich gespeichert und übersetzt",tags_save_failed:"Fehler beim Speichern der Tags",description_save_failed:"Fehler beim Speichern der Beschreibung",tags_help_text:"Geben Sie Tags durch Kommas getrennt ein. Sie werden automatisch in alle Sprachen übersetzt.",enter_tags_placeholder:"Tags durch Kommas getrennt eingeben",enter_model_description_placeholder:"Modellbeschreibung eingeben...",model_description:"Modellbeschreibung",select_language:"Sprache auswählen",save_description:"Beschreibung speichern",auto_translation_note:"Die Beschreibung wird automatisch in alle unterstützten Sprachen übersetzt.",gallery_management:"Galerie-Verwaltung",upload_new_images:"Neue Bilder hochladen",current_thumbnail:"Aktuelles Vorschaubild",select_image_files:"Bilddateien auswählen",click_set_thumbnail_note:"Klicken Sie bei einem beliebigen Bild auf 'Als Vorschaubild setzen', um es als Modellvorschaubild festzulegen",thumbnail_active:"Dieses Vorschaubild ist derzeit aktiv",capture_screenshot:"Screenshot aufnehmen",gallery_images:"Galeriebilder",manage_model_gallery:"Galerie für Modell {modelName} verwalten",images_in_gallery:"Bilder in der Galerie",screenshot_instructions:"Positionieren Sie das 3D-Modell wie gewünscht und klicken Sie auf die Schaltfläche, um einen Screenshot für die Galerie aufzunehmen",category_updated:"Kategorie Aktualisiert",category_updated_successfully:"Die Modellkategorie wurde erfolgreich aktualisiert",category_update_failed:"Die Modellkategorie konnte nicht aktualisiert werden",tags_updated:"Tags Aktualisiert",tags_updated_successfully:"Die Modell-Tags wurden erfolgreich aktualisiert",tags_update_failed:"Die Modell-Tags konnten nicht aktualisiert werden",description_saved_successfully:"Beschreibung erfolgreich gespeichert"},qH={services:{title:"Services CNC",laser_cutting:"Découpe laser",laser_description:"Votre conception 2D est idéale pour la découpe laser. Nous proposons une découpe laser précise des métaux, plastiques et autres matériaux.",cnc_machining:"Usinage CNC",cnc_description:"Votre modèle 3D est prêt pour la production. Nous proposons des services professionnels de tournage et fraisage CNC avec la plus haute précision et qualité.",manufacturing:"Services de fabrication",manufacturing_description:"Nous réaliserons votre projet de fabrication de A à Z. Contactez-nous pour discuter des détails et recevoir un devis personnalisé.",our_services:"Nos services de fabrication",get_quote:"Demander un devis",contact_us:"Contactez-nous",laser_details:"Découpe précise de tôle, plastique et autres matériaux avec une précision de 0,05 mm. Idéal pour les pièces 2D.",cnc_milling:"Fraisage CNC",milling_details:"Usinage de matériaux comme l'aluminium, l'acier, le plastique. Idéal pour les formes 3D complexes.",cnc_turning:"Tournage CNC",turning_details:"Usinage précis de pièces métalliques rotatives. Idéal pour les arbres, manchons, pièces de machines avec une précision de 0,01 mm.",prototyping:"Prototypage",prototyping_details:"Fabrication rapide de prototypes et petites séries. Du design à la pièce finie en quelques jours."},appTitle:"CAD Viewer",applicationName:"CAD Viewer",cad_viewer:"CAD Viewer",powered_by:"Propulsé par",home:"Accueil",back_to_home:"Retour à l'accueil",upload:"Télécharger",uploadModel:"Télécharger un modèle",view:"Voir",share:"Partager",delete:"Supprimer",cancel:"Annuler",save:"Enregistrer",back:"Retour",loadingGeneric:"Chargement...",refresh:"Actualiser",error:"Erreur",success:"Succès",close:"Fermer",confirm:"Confirmer",app_description:"Plateforme entièrement gratuite pour visualiser les fichiers CAO. Stockez les modèles STL, STEP, DXF et DWG directement dans votre navigateur. Partagez des fichiers protégés par mot de passe et parcourez les modèles CAO de n'importe où.",app_title:"Visionneuse Professionnelle de Fichiers CAO",supported_formats:"Formats Supportés",upload_file:"Télécharger Fichier",feature_1_title:"Visualisation avancée",feature_1_desc:"Visualisez et analysez des modèles 3D avec précision et détail",feature_2_title:"Partage sécurisé",feature_2_desc:"Partagez vos modèles en toute sécurité avec des clients et des collaborateurs",feature_3_title:"Support multi-formats",feature_3_desc:"Support des formats STEP, IGES, STL, DXF et DWG",login:"Connexion",logout:"Déconnexion",register:"S'inscrire",create_account_sharing:"Créez un compte pour gérer vos fichiers",account_created:"Votre compte a été créé avec succès. Vous êtes maintenant connecté.",enter_credentials:"Entrez vos identifiants",username:"Nom d'utilisateur",username_optional:"Nom d'utilisateur (optionnel)",password:"Mot de passe",create_account:"Créer un nouveau compte",email:"Email",full_name:"Nom complet",company:"Entreprise",client_dashboard:"Tableau de bord client",button:{upload:"Télécharger",cancel:"Annuler",share:"Partager",copy:"Copié"},checking:"Vérification...",welcome:"Bienvenue sur CAD Viewer",welcomeMessage:"Téléchargez un fichier CAO pour commencer",recentModels:"Modèles récents",noModels:"Aucun modèle trouvé. Téléchargez un fichier CAO pour commencer.",noPreviousFiles:"Aucun fichier précédent",dropFileHere:"Déposez votre fichier CAO ici",dragAndDrop:"Glissez-déposez votre fichier ici, ou cliquez pour parcourir",selectFile:"Sélectionner un fichier",uploadingModel:"Téléchargement du modèle...",uploadProgress:"Progression du téléchargement",uploadComplete:"Téléchargement terminé",uploadFailed:"Échec du téléchargement",supportedFormats:"Formats pris en charge: STEP, IGES, STL, DXF, DWG",processingFile:"Traitement du fichier...",modelInfo:"Informations sur le modèle",modelInformation:"Informations sur le modèle",modelTree:"Arborescence du modèle",components:"Composants",part:"Pièce",parts:"Pièces",assembly:"Assemblage",assemblies:"Assemblages",surfaces:"Surfaces",solids:"Solides",viewControls:"Contrôles de vue",rotate:"Rotation",pan:"Panoramique",zoom:"Zoom",fitToView:"Ajuster à la vue",modelDetails:"Détails du modèle",model_details:"Détails du modèle",format:"Format",fileSize:"Taille du fichier",created:"Créé",createdDate:"Date de création",mode:"Mode",fileType:"Type de fichier",modelEntities:"Entités du modèle",modelNotFound:"Modèle non trouvé",errorLoadingModel:"Erreur lors du chargement du modèle",measurement:{mode:"Mode de mesure",instructions:"Cliquez sur le modèle pour marquer le premier point de mesure, puis cliquez à nouveau pour marquer le deuxième point et mesurer la distance.",points:"Points",distance:"Distance",units:"unités",toggle:"Activer/désactiver le mode de mesure"},dimensions:{title:"Dimensions du modèle",width:"Largeur (X)",height:"Hauteur (Y)",depth:"Profondeur (Z)",diagonal:"Diagonale"},dxf:{preview:"Aperçu graphique",svg_code:"Code SVG",loading:"Chargement de l'aperçu DXF...",error_loading:"Erreur lors du chargement du fichier DXF",select_model:"Sélectionnez un modèle DXF à afficher"},shareModel:"Partager le modèle",shareTitle:"Partager ce modèle CAO",shareDescription:"Partagez ce modèle avec d'autres par email",recipientEmail:"Email du destinataire",shareWithPassword:"Partager avec un mot de passe",sharePassword:"Mot de passe",generatePassword:"Générer un mot de passe",setExpiry:"Définir une date d'expiration",expiryDate:"Date d'expiration",shareLink:"Lien de partage",copyLink:"Copier le lien",linkCopied:"Lien copié",enableSharing:"Activer le partage",disableSharing:"Désactiver le partage",sharingEnabled:"Partage activé",sharingDisabled:"Partage désactivé",sharing_enabled:"Partage activé",sharing_disabled:"Partage désactivé",sharing_enabled_success:"Le modèle a été partagé avec succès",sharing_disabled_success:"Le modèle n'est plus partagé",sharing_error:"Erreur lors de la mise à jour du statut de partage",sendEmail:"Envoyer une notification par email",emailSent:"Email envoyé",emailNotSent:"L'email n'a pas pu être envoyé",shared_models:"Votre bibliothèque CAO",shared_models_description:"Gérez vos modèles 3D téléchargés et partagés",filename:"Nom de fichier",shared_with:"Partagé avec",status:"Statut",shared_status:"Statut de partage",last_accessed:"Dernier accès",add_to_cad_library:"Ajouter à la bibliothèque CAO publique",public_library_added:"Modèle ajouté à la bibliothèque publique",public_library_removed:"Modèle retiré de la bibliothèque publique",public_library_added_message:"Le modèle a été ajouté avec succès à la bibliothèque CAO publique",public_library_removed_message:"Le modèle a été retiré avec succès de la bibliothèque CAO publique",public_cad_library:"Bibliothèque CAO publique",public_library_description:"Parcourez et téléchargez des modèles CAO partagés par notre communauté. Tous les modèles sont gratuits pour vos projets.",search_models_tags:"Rechercher modèles et étiquettes...",all_categories:"Toutes les catégories",showing_models:"Affichage de {count} sur {total} modèles",no_models_found:"Aucun modèle trouvé",try_different_search:"Essayez un autre terme de recherche ou effacez les filtres",no_public_models_yet:"Aucun modèle public disponible pour le moment",failed_to_load_library:"Échec du chargement de la bibliothèque. Veuillez réessayer plus tard.",cad_library_dimensions:"Dimensions",cad_library_view:"Voir",cad_library_download:"Télécharger",password_protected_public_error:"Impossible d'ajouter un modèle protégé par mot de passe à la bibliothèque publique. Veuillez d'abord supprimer le partage privé ou supprimer le mot de passe.",active:"Actif",inactive:"Inactif",view_model:"Voir le modèle",view_share_link:"Voir le lien de partage",enable_sharing:"Partager le modèle",disable_sharing:"Arrêter le partage",open_link:"Ouvrir le lien",no_models:"Aucun modèle trouvé",no_models_description:"Téléchargez votre premier modèle pour commencer",change_password:"Changer le mot de passe",new_password:"Nouveau mot de passe",leave_empty_to_remove:"Laissez vide pour supprimer le mot de passe",password_updated:"Mot de passe mis à jour",password_update_success:"Le mot de passe a été mis à jour avec succès",password_update_error:"Erreur lors de la mise à jour du mot de passe",model_is_password_protected:"Ce modèle est protégé par un mot de passe",open_in_browser:"Ouvrir dans le navigateur",model_deleted:"Modèle supprimé",model_delete_success:"Le modèle a été supprimé avec succès",model_delete_error:"Erreur lors de la suppression du modèle",delete_model:"Supprimer le modèle",delete_model_confirmation:"Êtes-vous sûr de vouloir supprimer ce modèle? Cette action ne peut pas être annulée.",add_gallery:"Galerie de fichiers",add_gallery_title:"Télécharger la galerie du modèle",add_gallery_description:"Téléchargez jusqu'à 6 images pour le modèle {modelName}. La première image sera utilisée comme miniature.",generate_thumbnail:"Générer miniature",generating_thumbnail:"Génération...",thumbnail_generated_successfully:"Miniature générée avec succès",thumbnail_generation_failed:"Échec de la génération de miniature",sharedModel:"Modèle partagé",enterPassword:"Entrez le mot de passe pour voir ce modèle",passwordProtected:"Protégé par mot de passe",incorrectPassword:"Mot de passe incorrect",viewSharedModel:"Voir le modèle partagé",modelSharedBy:"Modèle partagé par",shared:{protected_model:{title:"Modèle protégé",description:"Ce modèle est protégé par un mot de passe.",password_placeholder:"Entrez le mot de passe du modèle"},model_info:{shared_status:"Modèle partagé"}},message:{no:{model:"Déposez le fichier ici ou cliquez pour parcourir"},loading:"Veuillez patienter, traitement de votre fichier en cours",delete:{warning:"Êtes-vous sûr de vouloir supprimer ce modèle? Cette action ne peut pas être annulée.",success:"Modèle supprimé avec succès"},share:{warning:"Êtes-vous sûr de vouloir partager ce modèle?",success:"Modèle partagé avec succès",copied:"Lien de partage copié dans le presse-papiers"},revocation:{sent:"Notification par email envoyée à"},password:{required:"Mot de passe non requis"}},label:{file:"Fichier sélectionné",verification:"Vérification en cours",shared:{model:"modèle partagé"},password:"Mot de passe","password.share":"Protégé par mot de passe","password.share.placeholder":"Entrez le mot de passe pour le partage",expiry:"Date d'expiration",email:"Email","email.placeholder":"Entrez l'email du destinataire"},email_autofilled:"Votre adresse email sera associée à ce modèle",email_required:"Veuillez fournir votre email pour l'associer à ce modèle",upload_success:"Fichier téléchargé avec succès",upload_failed:"Échec du téléchargement du fichier",app:{footer:"CAD Viewer - © 2025 Tous droits réservés"},header:{error:"Erreur",shared:{model:"Modèle partagé"},no:{model:"Le modèle demandé n'a pas été trouvé ou n'est pas disponible."}},genericError:"Une erreur s'est produite",connectionError:"Erreur de connexion",fileNotSupported:"Format de fichier non pris en charge",fileTooLarge:"Le fichier est trop volumineux",invalidPassword:"Mot de passe invalide",invalidEmail:"Adresse email invalide",email_already_exists:"Cet email est déjà enregistré. Veuillez vous connecter à la place.",warning:"Avertissement",email_exists_warning:"Cet email existe déjà dans notre système. Veuillez vous connecter d'abord.",login_button:"Se connecter",errors:{title:"Erreur",share:"Erreur lors du partage du modèle",password_required:"Mot de passe requis",required:"est requis",model:{fetch:"Échec de récupération des informations du modèle",access:"Échec d'accès au modèle",display_failed:"Impossible d'afficher le modèle"}},loadingState:{shared_model:"Chargement du modèle partagé..."},actions:{back_to_home:"Retour à la page d'accueil",access:"Accéder",verifying:"Vérification...",go_to_app:"Accéder à l'application"},action:{back_to_home:"Retour à la page d'accueil",access:"Accéder",verifying:"Vérification...",go_to_app:"Accéder à l'application"},sharingSaved:"Paramètres de partage enregistrés",sharingRemoved:"Le partage a été désactivé",deleteShare:{title:"Supprimer le partage du modèle",description:"Confirmer la suppression du lien de modèle partagé",confirmMessage:"Êtes-vous sûr de vouloir supprimer ce lien de modèle partagé? Cette action ne peut pas être annulée et le modèle ne sera plus accessible aux autres.",confirm:"Supprimer le partage",cancel:"Annuler",deleting:"Suppression...",successTitle:"Partage supprimé",successMessage:"Le lien de modèle partagé a été supprimé avec succès et n'est plus accessible.",errorTitle:"Échec de la suppression",unknownError:"Une erreur inconnue s'est produite lors de la suppression.",connectionError:"Erreur de connexion. Veuillez réessayer plus tard.",invalidToken:"Jeton de sécurité invalide ou expiré.",backToHome:"Retour à l'accueil"},library:{title:"Bibliothèque de modèles CAO",description:"Parcourir et accéder aux modèles CAO partagés publiquement",filters:"Filtres",searchPlaceholder:"Rechercher par nom ou tag",tags:"Tags",viewModel:"Voir le modèle",noModels:"Aucun modèle trouvé",noModelsDescription:"Il n'y a pas de modèles publics correspondant à vos critères de recherche. Essayez d'ajuster vos filtres ou revenez plus tard.",error:"Erreur lors du chargement de la bibliothèque"},common:{page:"Page",previous:"Précédent",next:"Suivant",tryAgain:"Réessayer",error:"Erreur",backToLibrary:"Retour à la bibliothèque",download:"Télécharger",reportAbuse:"Signaler un abus",modelInfo:"Informations du modèle",filename:"Nom de fichier",format:"Format",filesize:"Taille du fichier",gallery:"Galerie",goBack:"Retour",tags:"Tags"},abuse:{subtitle:"Signaler du contenu inapproprié ou offensant",report_for_model:"Signaler du contenu inapproprié pour le modèle",report_title:"Signaler du contenu inapproprié",form_instruction:"Veuillez fournir des détails sur le contenu inapproprié que vous souhaitez signaler. Nous prenons tous les signalements au sérieux et enquêtons rapidement.",details_label:"Détails du signalement",details_placeholder:"Veuillez décrire le contenu inapproprié. Incluez des détails spécifiques sur le type de contenu qui viole nos directives communautaires (par ex. images offensantes, descriptions inappropriées, violation de droits d'auteur, etc.).",guidelines_title:"Directives communautaires",guidelines_text:"Nous ne tolérons pas les contenus inappropriés, offensants ou portant atteinte aux droits d'auteur. Tous les signalements sont examinés par notre équipe de modération et des mesures appropriées seront prises.",report_sent:"Votre signalement d'abus a été soumis. Merci de nous aider à maintenir une communauté sûre.",submitting:"Envoi du signalement...",submit_report:"Envoyer le signalement"},admin:{loginTitle:"Connexion au panneau d'administration",loginDescription:"Entrez vos identifiants pour accéder au panneau d'administration",username:"Nom d'utilisateur",usernamePlaceholder:"admin",password:"Mot de passe",loginButton:"Se connecter",loggingIn:"Connexion...",dashboardTitle:"Tableau de bord administrateur",sharedModelsTitle:"Modèles partagés",sharedModelsDescription:"Gérez tous les liens de modèles partagés dans le système",refresh:"Actualiser",logout:"Déconnexion",notAuthenticated:"Non authentifié",pleaseLogin:"Veuillez vous connecter pour accéder au panneau d'administration",loadError:"Erreur de chargement des données",unknownError:"Une erreur inconnue s'est produite",linkCopied:"Lien copié",linkCopiedDescription:"Le lien a été copié dans le presse-papiers",sharingRevoked:"Partage révoqué",sharingRevokedDescription:"Le partage du modèle a été désactivé avec succès",revokeError:"Erreur lors de la révocation du partage",loggedOut:"Déconnecté",loggedOutDescription:"Vous avez été déconnecté avec succès",filename:"Nom de fichier",format:"Format",sharedWith:"Partagé avec",createdDate:"Créé",lastAccessed:"Dernier accès",expiryDate:"Date d'expiration",passwordProtection:"Mot de passe",actions:"Actions",shareLink:"Lien",shareLinkTitle:"Lien de partage",openLink:"Ouvrir le lien",revoke:"Révoquer",protected:"Protégé",notProtected:"Non protégé",noSharedModels:"Aucun modèle partagé trouvé",revokeConfirmTitle:"Confirmer la révocation",revokeConfirmDescription:"Êtes-vous sûr de vouloir révoquer le partage pour ce modèle? Cette action ne peut pas être annulée.",cancel:"Annuler",confirmRevoke:"Oui, révoquer"},upload_thumbnail:"Télécharger la miniature",upload_custom_thumbnail:"Télécharger une miniature personnalisée",upload_thumbnail_description:"Téléchargez une image miniature personnalisée pour '{modelName}'. L'image sera automatiquement recadrée au format carré.",select_image_file:"Sélectionner un fichier image",supported_formats_jpg_png_max_5mb:"Formats supportés: JPG, PNG. Taille maximale: 5MB",max_6_photos_at_once:"Maximum 6 photos à la fois.",your_cad_library:"Votre Bibliothèque CAD",models_uploaded_to_account:"Modèles téléchargés sur votre compte",models_count_in_library:"Vous avez {count} modèles dans votre bibliothèque",no_models_in_library:"Vous n'avez pas encore de modèles dans votre bibliothèque",preview:"Aperçu",original:"Original",cropped_to_square:"Recadré en carré",processing:"Traitement...",thumbnail_uploaded_successfully:"Miniature téléchargée avec succès",thumbnail_upload_failed:"Échec du téléchargement de la miniature",please_select_image_file:"Veuillez sélectionner un fichier image",file_too_large_5mb:"Le fichier est trop volumineux. Taille maximale: 5MB",image_processing_failed:"Échec du traitement de l'image",invalid_image_file:"Fichier image invalide",thumbnail_required_for_public:"Une miniature est requise pour ajouter ce modèle à la bibliothèque publique. Veuillez d'abord télécharger une miniature.",save_tags:"Enregistrer les tags",tags_saved_successfully:"Les tags ont été enregistrés et traduits avec succès",tags_save_failed:"Échec de l'enregistrement des tags",description_save_failed:"Échec de l'enregistrement de la description",tags_help_text:"Entrez les tags séparés par des virgules. Ils seront automatiquement traduits dans toutes les langues.",enter_tags_placeholder:"Entrez les tags séparés par des virgules",enter_model_description_placeholder:"Entrez la description du modèle...",model_description:"Description du modèle",select_language:"Sélectionner la langue",save_description:"Enregistrer la description",auto_translation_note:"La description sera automatiquement traduite dans toutes les langues prises en charge.",gallery_management:"Gestion de la galerie",upload_new_images:"Télécharger de nouvelles images",current_thumbnail:"Miniature actuelle",select_image_files:"Sélectionner les fichiers d'image",click_set_thumbnail_note:"Cliquez sur 'Définir comme miniature' sur n'importe quelle image pour en faire la miniature du modèle",thumbnail_active:"Cette miniature est actuellement active",capture_screenshot:"Capturer une capture d'écran",gallery_images:"Images de la galerie",manage_model_gallery:"Gérer la galerie pour le modèle {modelName}",images_in_gallery:"images dans la galerie",screenshot_instructions:"Positionnez le modèle 3D comme souhaité et cliquez sur le bouton pour capturer une capture d'écran pour la galerie",category_updated:"Catégorie Mise à Jour",category_updated_successfully:"La catégorie du modèle a été mise à jour avec succès",category_update_failed:"Échec de la mise à jour de la catégorie du modèle",tags_updated:"Tags Mis à Jour",tags_updated_successfully:"Les tags du modèle ont été mis à jour avec succès",tags_update_failed:"Échec de la mise à jour des tags du modèle",description_saved_successfully:"Description sauvegardée avec succès"},XH={home:"Inicio",about:"Acerca de",contact:"Contacto",login:"Iniciar sesión",logout:"Cerrar sesión",register:"Registrarse",back:"Volver",close:"Cerrar",save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",view:"Ver",download:"Descargar",upload:"Subir",loading:"Cargando...",error:"Error",success:"Éxito",warning:"Advertencia",info:"Información",confirm:"Confirmar",yes:"Sí",no:"No",ok:"OK",next:"Siguiente",previous:"Anterior",search:"Buscar",reset:"Restablecer",refresh:"Actualizar",submit:"Enviar",create:"Crear",update:"Actualizar",remove:"Eliminar",add:"Añadir",file:"Archivo",files:"Archivos",filename:"Nombre del archivo",file_size:"Tamaño del archivo",file_type:"Tipo de archivo",format:"Formato",app_description:"Plataforma completamente gratuita para visualizar archivos CAD. Almacena modelos STL, STEP, DXF y DWG directamente en tu navegador. Comparte archivos protegidos con contraseña y navega modelos CAD desde cualquier lugar.",app_title:"Visor Profesional de Archivos CAD",upload_file:"Subir archivo",select_file:"Seleccionar archivo",drag_drop_files:"Arrastra y suelta archivos aquí o haz clic para seleccionar",supported_formats:"Formatos Soportados",max_file_size:"Tamaño máximo del archivo",username:"Nombre de usuario",email:"Correo electrónico",password:"Contraseña",confirm_password:"Confirmar contraseña",forgot_password:"¿Olvidaste tu contraseña?",remember_me:"Recordarme",sign_in:"Iniciar sesión",sign_up:"Registrarse",sign_out:"Cerrar sesión",create_account:"Crear cuenta",already_have_account:"¿Ya tienes una cuenta?",dont_have_account:"¿No tienes una cuenta?",dashboard:"Panel de control",my_models:"Mis modelos",my_files:"Mis archivos",recent_uploads:"Subidas recientes",storage_used:"Almacenamiento usado",total_models:"Total de modelos",public_models:"Modelos públicos",private_models:"Modelos privados",shared_models:"Modelos compartidos",model_viewer:"Visor de modelos",view_model:"Ver modelo",model_info:"Información del modelo",model_details:"Detalles del modelo",model_properties:"Propiedades del modelo",material:"Material",created_at:"Creado el",updated_at:"Actualizado el",author:"Autor",description:"Descripción",zoom_in:"Acercar",zoom_out:"Alejar",rotate:"Rotar",pan:"Panorámica",reset_view:"Restablecer vista",wireframe:"Estructura alámbrica",solid:"Sólido",shaded:"Sombreado",fit_to_screen:"Ajustar a pantalla",upload_model:"Subir modelo",choose_files:"Elegir archivos",upload_progress:"Progreso de subida",upload_complete:"Subida completa",upload_failed:"Error en la subida",file_too_large:"Archivo demasiado grande",invalid_file_type:"Tipo de archivo no válido",upload_in_progress:"Subida en progreso...",share:"Compartir",share_model:"Compartir modelo",sharing_options:"Opciones de compartir",public_link:"Enlace público",private_link:"Enlace privado",share_via_email:"Compartir por correo",copy_link:"Copiar enlace",link_copied:"Enlace copiado",generate_link:"Generar enlace",access_level:"Nivel de acceso",view_only:"Solo vista",download_allowed:"Descarga permitida",file_not_found:"Archivo no encontrado",access_denied:"Acceso denegado",invalid_credentials:"Credenciales no válidas",network_error:"Error de red",server_error:"Error del servidor",upload_error:"Error de subida",processing_error:"Error de procesamiento",file_uploaded:"Archivo subido exitosamente",model_saved:"Modelo guardado",settings_updated:"Configuración actualizada",link_generated:"Enlace generado",email_sent:"Correo enviado",settings:"Configuración",account_settings:"Configuración de cuenta",profile:"Perfil",preferences:"Preferencias",language:"Idioma",theme:"Tema",notifications:"Notificaciones",privacy:"Privacidad",security:"Seguridad",open:"Abrir",import:"Importar",export:"Exportar",copy:"Copiar",paste:"Pegar",cut:"Cortar",undo:"Deshacer",redo:"Rehacer",select_all:"Seleccionar todo",clear:"Limpiar",today:"Hoy",yesterday:"Ayer",last_week:"Semana pasada",last_month:"Mes pasado",never:"Nunca",step_files:"Archivos STEP",stl_files:"Archivos STL",dxf_files:"Archivos DXF",iges_files:"Archivos IGES",cad_viewer:"Visor CAD",model_library:"Biblioteca de modelos",file_converter:"Conversor de archivos",batch_processing:"Procesamiento por lotes",library:{title:"Biblioteca CAD",description:"Explora y gestiona tu colección de modelos CAD"},welcome_message:"Bienvenido al Visor CAD",header:"Encabezado",menu:"Menú",sidebar:"Barra lateral",footer:"Pie de página",breadcrumb:"Ruta de navegación",model_name:"Nombre del modelo",model_type:"Tipo de modelo",model_version:"Versión del modelo",model_status:"Estado del modelo",upload_date:"Fecha de subida",file_format:"Formato de archivo",workspace:"Espacio de trabajo",project:"Proyecto",folder:"Carpeta",organize:"Organizar",sort_by:"Ordenar por",filter_by:"Filtrar por",group_by:"Agrupar por",tools:"Herramientas",measure:"Medir",annotate:"Anotar",section:"Sección",explode:"Explotar",assembly:"Ensamblaje",parts:"Piezas",print:"Imprimir",print_preview:"Vista previa de impresión",export_options:"Opciones de exportación",quality:"Calidad",resolution:"Resolución",help:"Ayuda",documentation:"Documentación",tutorials:"Tutoriales",support:"Soporte",contact_support:"Contactar soporte",report_bug:"Reportar error",feedback:"Comentarios",admin:"Administrador",admin_panel:"Panel de administrador",user_management:"Gestión de usuarios",system_settings:"Configuración del sistema",logs:"Registros",analytics:"Analíticas",mobile_view:"Vista móvil",desktop_view:"Vista de escritorio",responsive:"Responsivo",notification:"Notificación",alert:"Alerta",message:"Mensaje",inbox:"Bandeja de entrada",unread:"No leído",search_results:"Resultados de búsqueda",no_results:"Sin resultados",advanced_search:"Búsqueda avanzada",filter:"Filtro",sort:"Ordenar",public_cad_library:"Biblioteca Pública CAD",public_library_description:"Navega y descarga modelos CAD compartidos por nuestra comunidad. Todos los modelos son gratuitos para usar en tus proyectos.",search_models_tags:"Buscar modelos y etiquetas...",all_categories:"Todas las Categorías",all_tags:"Todas las Etiquetas",tags:"Etiquetas",showing_models:"Mostrando {count} de {total} modelos",no_models_found:"No se encontraron modelos",try_different_search:"Prueba un término de búsqueda diferente o limpia los filtros",no_public_models_yet:"Aún no hay modelos públicos disponibles",cad_library_view:"Ver",cad_library_download:"Descargar",failed_to_load_library:"Error al cargar la biblioteca",category:"Categoría",select_category:"Seleccionar categoría",no_category:"Sin categoría",art:"Arte","home-garden":"Hogar y Jardín",architecture:"Arquitectura",gadget:"Gadgets",game:"Juegos",category_required_for_public:"Se requiere una categoría para agregar este modelo a la biblioteca pública. Por favor selecciona una categoría primero.",thumbnail_required_for_public:"Se requiere una miniatura para agregar este modelo a la biblioteca pública. Por favor sube una miniatura primero.",contact_us:"Contáctanos",send_message:"Enviar mensaje",your_name:"Tu nombre",your_email:"Tu correo electrónico",your_message:"Tu mensaje",subject:"Asunto",phone:"Teléfono",company:"Empresa",actions:"Acciones",status:"Estado",active:"Activo",inactive:"Inactivo",enabled:"Habilitado",disabled:"Deshabilitado",public:"Público",private:"Privado",shared:"Compartido",date:"Fecha",time:"Hora",datetime:"Fecha y hora",created:"Creado",modified:"Modificado",accessed:"Accedido",rename:"Renombrar",move:"Mover",duplicate:"Duplicar",compress:"Comprimir",decompress:"Descomprimir",convert:"Convertir",share_with:"Compartir con",shared_with_you:"Compartido contigo",collaboration:"Colaboración",comments:"Comentarios",revisions:"Revisiones",version_history:"Historial de versiones",system:"Sistema",version:"Versión",build:"Compilación",environment:"Entorno",configuration:"Configuración",maintenance:"Mantenimiento",gallery:"Galería",thumbnail:"Miniatura",thumbnails:"Miniaturas",preview:"Vista previa",full_size:"Tamaño completo",model_id:"ID del modelo",file_path:"Ruta del archivo",checksum:"Suma de verificación",metadata:"Metadatos",noPreviousFiles:"No hay archivos anteriores",supportedFormats:"Formatos soportados","library.title":"Biblioteca CAD","library.description":"Explora nuestra colección de modelos CAD",client_dashboard:"Panel del Cliente","button.upload":"Subir","button.cancel":"Cancelar","button.share":"Compartir","message.no.model":"No hay modelos disponibles","message.share.warning":"Advertencia al compartir",email_autofilled:"Correo electrónico completado automáticamente",email_required:"Correo electrónico requerido","header.error":"Error en cabecera","common.gallery":"Galería",dimensions:{title:"Dimensiones",width:"Ancho",height:"Alto",depth:"Profundidad"},mode:"Modo",library_title:"Biblioteca CAD",library_description:"Explora nuestra colección de modelos CAD",message_share_warning:"Advertencia al compartir",header_error:"Error en cabecera",common_gallery:"Galería",dimensions_title:"Dimensiones",dimensions_width:"Ancho",dimensions_height:"Alto",dimensions_depth:"Profundidad",common:{backToLibrary:"Volver a la biblioteca",download:"Descargar",reportAbuse:"Reportar abuso",modelInfo:"Información del modelo",gallery:"Galería",filename:"Nombre del archivo",format:"Formato",filesize:"Tamaño del archivo",tags:"Etiquetas"},services:{title:"Servicios CNC",laser_cutting:"Corte láser",laser_description:"Tu proyecto 2D es ideal para realizar mediante corte láser. Ofrecemos corte láser preciso de chapas metálicas, plásticos y otros materiales.",get_quote:"Solicitar presupuesto",cnc_machining:"Mecanizado CNC",cnc_description:"Tu modelo 3D está listo para producción. Ofrecemos servicios profesionales de torneado y fresado CNC con la máxima precisión y calidad.",manufacturing:"Servicios de manufactura",manufacturing_description:"Realizaremos tu proyecto de producción de A a Z. Contáctanos para discutir los detalles y recibir un presupuesto personalizado.",our_services:"Nuestros servicios de producción",laser_details:"Corte preciso de chapa metálica, plásticos y otros materiales con precisión de hasta 0,05 mm. Ideal para piezas 2D.",cnc_milling:"Fresado CNC",milling_details:"Mecanizado por arranque de virutas de materiales como aluminio, acero, plásticos. Ideal para formas complejas 3D.",cnc_turning:"Torneado CNC",turning_details:"Mecanizado preciso de piezas rotativas de metal. Ideal para ejes, casquillos, piezas de máquinas con precisión de hasta 0,01 mm.",prototyping:"Prototipado",prototyping_details:"Ejecución rápida de prototipos y pequeñas series de producción. Del diseño al elemento terminado en pocos días.",contact_us:"Contáctanos"},upload_thumbnail:"Subir miniatura",shared_status:"Estado compartido",last_accessed:"Último acceso",add_to_cad_library:"Agregar a biblioteca CAD",view_share_link:"Ver enlace compartido",change_password:"Cambiar contraseña",disable_sharing:"Deshabilitar compartir",enable_sharing:"Habilitar compartir",new_password:"Nueva contraseña",leave_empty_to_remove:"Dejar vacío para eliminar",delete_model:"Eliminar modelo",delete_model_confirmation:"¿Estás seguro de que deseas eliminar este modelo?",shareLink:"Enlace compartido",open_in_browser:"Abrir en navegador",add_gallery:"Agregar galería",generate_thumbnail:"Generar miniatura",back_to_home:"Volver al inicio",welcome:"Bienvenido",shared_models_description:"Gestiona tus modelos compartidos",gallery_management:"Gestión de galería",manage_model_gallery:"Gestionar galería del modelo",current_thumbnail:"Miniatura actual",no_thumbnail_set:"Sin miniatura establecida",upload_new_images:"Subir nuevas imágenes",supported_formats_jpg_png_max_5mb:"Formatos soportados: JPG, PNG (máx. 5MB)",max_6_photos_at_once:"Máximo 6 fotos a la vez.",your_cad_library:"Tu Biblioteca CAD",models_uploaded_to_account:"Modelos subidos a tu cuenta",models_count_in_library:"Tienes {count} modelos en tu biblioteca",no_models_in_library:"Aún no tienes modelos en tu biblioteca",gallery_images:"Imágenes de galería",no_gallery_images:"Sin imágenes en galería",click_set_thumbnail_note:"Haz clic en una imagen para establecerla como miniatura",close_gallery:"Cerrar galería",set_as_thumbnail:"Establecer como miniatura",thumbnail_active:"Miniatura activa",save_tags:"Guardar etiquetas",tags_help_text:"Ingrese etiquetas separadas por comas. Se traducirán automáticamente a todos los idiomas.",model_description:"Descripción del modelo",save_description:"Guardar descripción",auto_translation_note:"La descripción se traducirá automáticamente a todos los idiomas compatibles.",select_image_files:"Seleccionar archivos de imagen",images_in_gallery:"imágenes en la galería",capture_screenshot:"Capturar pantalla",uploaded_images:"Imágenes subidas",screenshot_instructions:"Posicione el modelo 3D como desee y haga clic en el botón para capturar una captura de pantalla para la galería",upload_and_share:"Subir y Compartir",drag_drop_file:"Arrastra y suelta tu archivo aquí",or_click_to_browse:"o haz clic para explorar",selected_file:"Archivo seleccionado",file_verification:"Verificación de archivo",uploading:"Subiendo...",email_for_notifications:"Email para notificaciones",enter_email_address:"Ingresa tu dirección de email",checking_email:"Verificando email...",email_exists_create_account:"Este email ya existe. ¿Crear cuenta?",create_new_account:"Crear nueva cuenta",use_existing_account:"Usar cuenta existente",username_placeholder:"Nombre de usuario",full_name_placeholder:"Nombre completo",company_placeholder:"Empresa (opcional)",register_and_upload:"Registrar y Subir",enable_model_sharing:"Habilitar compartir modelo",password_protection:"Protección con contraseña",optional_password:"Contraseña (opcional)",expiry_date:"Fecha de vencimiento",select_expiry_date:"Seleccionar fecha de vencimiento",recipient_email:"Email del destinatario",enter_recipient_email:"Ingresa el email del destinatario",share_link_generated:"Enlace de compartir generado",send_notification:"Enviar notificación",sharing_enabled:"Compartir habilitado",sharing_disabled:"Compartir deshabilitado",update_sharing:"Actualizar compartir",category_updated:"Categoría Actualizada",category_updated_successfully:"La categoría del modelo ha sido actualizada exitosamente",category_update_failed:"No se pudo actualizar la categoría del modelo",tags_updated:"Etiquetas Actualizadas",tags_updated_successfully:"Las etiquetas del modelo han sido actualizadas exitosamente",tags_update_failed:"No se pudieron actualizar las etiquetas del modelo",description_saved_successfully:"Descripción guardada exitosamente"},ZH=["en","pl","cs","de","fr","es"],zE={en:"English",pl:"Polski",cs:"Čeština",de:"Deutsch",fr:"Français",es:"Español"},wh={en:HH,pl:GH,cs:WH,de:$H,fr:qH,es:XH},bh="cadviewer_language",T2=x.createContext({language:"en",setLanguage:()=>{},t:(t,e)=>t,isDetecting:!1});function KH(t,e){return e.split(".").reduce((n,r)=>n&&typeof n=="object"?n[r]:void 0,t)}function jv(t){const e=t.match(/^\/(en|pl|cs|de|fr|es)(\/|$)/);return e?e[1]:null}function YH({children:t}){const[e]=kn(),n=()=>{try{const h=localStorage.getItem(bh);if(h&&Object.keys(wh).includes(h))return h}catch(h){console.error("Failed to read language preference:",h)}return null},r=()=>{const h=jv(e);if(h)return h;const m=n();return m||"en"},[i,s]=x.useState(r()),[a,o]=x.useState(!1);x.useEffect(()=>{if(e==="/"){const h=n();if(h){d(`/${h}`);return}(async()=>{try{o(!0);const v=await(await fetch("/api/language-preference")).json();if(v.detectedLanguage&&Object.keys(wh).includes(v.detectedLanguage)){s(v.detectedLanguage),d(`/${v.detectedLanguage}`);try{localStorage.setItem(bh,v.detectedLanguage)}catch(g){console.error("Failed to save language preference:",g)}}}catch(y){console.error("Error fetching language preference:",y)}finally{o(!1)}})()}},[e]);const c=(h,m)=>m?Object.entries(m).reduce((y,[v,g])=>y.replace(new RegExp(`{${v}}`,"g"),String(g)).replace(new RegExp(`{{${v}}}`,"g"),String(g)),h):h,u=(h,m)=>{const y=wh[i]||wh.en,v=KH(y,h);return typeof m=="string"?v===void 0?m:typeof v=="string"?v:h:v===void 0?(console.warn(`Translation key not found: ${h}`),h):typeof v!="string"?(console.warn(`Translation key is not a string: ${h}`),h):c(v,m)},[,d]=kn(),f=h=>{s(h);try{localStorage.setItem(bh,h)}catch(y){console.error("Failed to save language preference:",y)}const m=jv(e);if(m!==h){let y=e;if(m&&(y=y.replace(new RegExp(`^/${m}(/|$)`),"/"),y===""&&(y="/")),y==="/")d(`/${h}`);else{const v=y.startsWith("/")?y.substring(1):y;d(`/${h}/${v}`)}}};return x.useEffect(()=>{document.documentElement.lang=i},[i]),x.useEffect(()=>{const h=jv(e);if(h&&h!==i){s(h);try{localStorage.setItem(bh,h)}catch(m){console.error("Failed to save language preference:",m)}}},[e]),l.jsx(T2.Provider,{value:{language:i,setLanguage:f,t:u,isDetecting:a},children:t})}const on=()=>x.useContext(T2),Aw=Ml("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ye=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const a=r?Js:"button";return l.jsx(a,{className:Re(Aw({variant:e,size:n,className:t})),ref:s,...i})});ye.displayName="Button";function QH(){const{t}=on();return l.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:l.jsx(fn,{className:"w-full max-w-md mx-4",children:l.jsxs(hn,{className:"pt-6",children:[l.jsxs("div",{className:"flex mb-4 gap-2",children:[l.jsx(Xa,{className:"h-8 w-8 text-red-500"}),l.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["404 ",t("header.error")]})]}),l.jsx("p",{className:"mt-4 text-sm text-gray-600",children:t("header.no.model","The requested model was not found or is not available.")}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx(ai,{href:"/",children:l.jsx(ye,{variant:"outline",children:t("action.back_to_home","Back to home page")})})})]})})})}var JH=x.createContext(void 0);function _g(t){const e=x.useContext(JH);return t||e||"ltr"}var zv=0;function wg(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??OE()),document.body.insertAdjacentElement("beforeend",t[1]??OE()),zv++,()=>{zv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zv--}},[])}function OE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ov="focusScope.autoFocusOnMount",Fv="focusScope.autoFocusOnUnmount",FE={bubbles:!1,cancelable:!0},eG="FocusScope",Rf=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[o,c]=x.useState(null),u=rr(i),d=rr(s),f=x.useRef(null),h=wt(e,v=>c(v)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let v=function(w){if(m.paused||!o)return;const b=w.target;o.contains(b)?f.current=b:ya(f.current,{select:!0})},g=function(w){if(m.paused||!o)return;const b=w.relatedTarget;b!==null&&(o.contains(b)||ya(f.current,{select:!0}))},p=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&ya(o)};document.addEventListener("focusin",v),document.addEventListener("focusout",g);const _=new MutationObserver(p);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",g),_.disconnect()}}},[r,o,m.paused]),x.useEffect(()=>{if(o){BE.add(m);const v=document.activeElement;if(!o.contains(v)){const p=new CustomEvent(Ov,FE);o.addEventListener(Ov,u),o.dispatchEvent(p),p.defaultPrevented||(tG(aG(C2(o)),{select:!0}),document.activeElement===v&&ya(o))}return()=>{o.removeEventListener(Ov,u),setTimeout(()=>{const p=new CustomEvent(Fv,FE);o.addEventListener(Fv,d),o.dispatchEvent(p),p.defaultPrevented||ya(v??document.body,{select:!0}),o.removeEventListener(Fv,d),BE.remove(m)},0)}}},[o,u,d,m]);const y=x.useCallback(v=>{if(!n&&!r||m.paused)return;const g=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,p=document.activeElement;if(g&&p){const _=v.currentTarget,[w,b]=nG(_);w&&b?!v.shiftKey&&p===b?(v.preventDefault(),n&&ya(w,{select:!0})):v.shiftKey&&p===w&&(v.preventDefault(),n&&ya(b,{select:!0})):p===_&&v.preventDefault()}},[n,r,m.paused]);return l.jsx(Ke.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});Rf.displayName=eG;function tG(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ya(r,{select:e}),document.activeElement!==n)return}function nG(t){const e=C2(t),n=UE(e,t),r=UE(e.reverse(),t);return[n,r]}function C2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function UE(t,e){for(const n of t)if(!rG(n,{upTo:e}))return n}function rG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function iG(t){return t instanceof HTMLInputElement&&"select"in t}function ya(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&iG(t)&&e&&t.select()}}var BE=sG();function sG(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=VE(t,e),t.unshift(e)},remove(e){var n;t=VE(t,e),(n=t[0])==null||n.resume()}}}function VE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function aG(t){return t.filter(e=>e.tagName!=="A")}var oG=nP.useId||(()=>{}),lG=0;function hi(t){const[e,n]=x.useState(oG());return ir(()=>{t||n(r=>r??String(lG++))},[t]),t||(e?`radix-${e}`:"")}const cG=["top","right","bottom","left"],io=Math.min,Gr=Math.max,pm=Math.round,Sh=Math.floor,ds=t=>({x:t,y:t}),uG={left:"right",right:"left",bottom:"top",top:"bottom"},dG={start:"end",end:"start"};function Kx(t,e,n){return Gr(t,io(e,n))}function ea(t,e){return typeof t=="function"?t(e):t}function ta(t){return t.split("-")[0]}function Cu(t){return t.split("-")[1]}function Nw(t){return t==="x"?"y":"x"}function Pw(t){return t==="y"?"height":"width"}function so(t){return["top","bottom"].includes(ta(t))?"y":"x"}function Rw(t){return Nw(so(t))}function fG(t,e,n){n===void 0&&(n=!1);const r=Cu(t),i=Rw(t),s=Pw(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=mm(a)),[a,mm(a)]}function hG(t){const e=mm(t);return[Yx(t),e,Yx(e)]}function Yx(t){return t.replace(/start|end/g,e=>dG[e])}function pG(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:a;default:return[]}}function mG(t,e,n,r){const i=Cu(t);let s=pG(ta(t),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(Yx)))),s}function mm(t){return t.replace(/left|right|bottom|top/g,e=>uG[e])}function gG(t){return{top:0,right:0,bottom:0,left:0,...t}}function A2(t){return typeof t!="number"?gG(t):{top:t,right:t,bottom:t,left:t}}function gm(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function HE(t,e,n){let{reference:r,floating:i}=t;const s=so(e),a=Rw(e),o=Pw(a),c=ta(e),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let m;switch(c){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Cu(e)){case"start":m[a]-=h*(n&&u?-1:1);break;case"end":m[a]+=h*(n&&u?-1:1);break}return m}const vG=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=HE(u,r,c),h=r,m={},y=0;for(let v=0;v<o.length;v++){const{name:g,fn:p}=o[v],{x:_,y:w,data:b,reset:S}=await p({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:u,platform:a,elements:{reference:t,floating:e}});d=_??d,f=w??f,m={...m,[g]:{...m[g],...b}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:f}=HE(u,h,c)),v=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:m}};async function Kd(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=ea(e,t),y=A2(m),g=o[h?f==="floating"?"reference":"floating":f],p=gm(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:c})),_=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),b=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=gm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:w,strategy:c}):_);return{top:(p.top-S.top+y.top)/b.y,bottom:(S.bottom-p.bottom+y.bottom)/b.y,left:(p.left-S.left+y.left)/b.x,right:(S.right-p.right+y.right)/b.x}}const yG=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:c}=e,{element:u,padding:d=0}=ea(t,e)||{};if(u==null)return{};const f=A2(d),h={x:n,y:r},m=Rw(i),y=Pw(m),v=await a.getDimensions(u),g=m==="y",p=g?"top":"left",_=g?"bottom":"right",w=g?"clientHeight":"clientWidth",b=s.reference[y]+s.reference[m]-h[m]-s.floating[y],S=h[m]-s.reference[m],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let C=M?M[w]:0;(!C||!await(a.isElement==null?void 0:a.isElement(M)))&&(C=o.floating[w]||s.floating[y]);const P=b/2-S/2,A=C/2-v[y]/2-1,E=io(f[p],A),L=io(f[_],A),O=E,k=C-v[y]-L,j=C/2-v[y]/2+P,$=Kx(O,j,k),U=!c.arrow&&Cu(i)!=null&&j!==$&&s.reference[y]/2-(j<O?E:L)-v[y]/2<0,X=U?j<O?j-O:j-k:0;return{[m]:h[m]+X,data:{[m]:$,centerOffset:j-$-X,...U&&{alignmentOffset:X}},reset:U}}}),xG=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...g}=ea(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const p=ta(i),_=so(o),w=ta(o)===o,b=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(w||!v?[mm(o)]:hG(o)),M=y!=="none";!h&&M&&S.push(...mG(o,v,y,b));const C=[o,...S],P=await Kd(e,g),A=[];let E=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&A.push(P[p]),f){const j=fG(i,a,b);A.push(P[j[0]],P[j[1]])}if(E=[...E,{placement:i,overflows:A}],!A.every(j=>j<=0)){var L,O;const j=(((L=s.flip)==null?void 0:L.index)||0)+1,$=C[j];if($)return{data:{index:j,overflows:E},reset:{placement:$}};let U=(O=E.filter(X=>X.overflows[0]<=0).sort((X,z)=>X.overflows[1]-z.overflows[1])[0])==null?void 0:O.placement;if(!U)switch(m){case"bestFit":{var k;const X=(k=E.filter(z=>{if(M){const V=so(z.placement);return V===_||V==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(V=>V>0).reduce((V,ee)=>V+ee,0)]).sort((z,V)=>z[1]-V[1])[0])==null?void 0:k[0];X&&(U=X);break}case"initialPlacement":U=o;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function GE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function WE(t){return cG.some(e=>t[e]>=0)}const _G=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ea(t,e);switch(r){case"referenceHidden":{const s=await Kd(e,{...i,elementContext:"reference"}),a=GE(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:WE(a)}}}case"escaped":{const s=await Kd(e,{...i,altBoundary:!0}),a=GE(s,n.floating);return{data:{escapedOffsets:a,escaped:WE(a)}}}default:return{}}}}};async function wG(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=ta(n),o=Cu(n),c=so(n)==="y",u=["left","top"].includes(a)?-1:1,d=s&&c?-1:1,f=ea(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const bG=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=e,c=await wG(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:a}}}}},SG=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:g=>{let{x:p,y:_}=g;return{x:p,y:_}}},...c}=ea(t,e),u={x:n,y:r},d=await Kd(e,c),f=so(ta(i)),h=Nw(f);let m=u[h],y=u[f];if(s){const g=h==="y"?"top":"left",p=h==="y"?"bottom":"right",_=m+d[g],w=m-d[p];m=Kx(_,m,w)}if(a){const g=f==="y"?"top":"left",p=f==="y"?"bottom":"right",_=y+d[g],w=y-d[p];y=Kx(_,y,w)}const v=o.fn({...e,[h]:m,[f]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[f]:a}}}}}},EG=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:c=!0,crossAxis:u=!0}=ea(t,e),d={x:n,y:r},f=so(i),h=Nw(f);let m=d[h],y=d[f];const v=ea(o,e),g=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",b=s.reference[h]-s.floating[w]+g.mainAxis,S=s.reference[h]+s.reference[w]-g.mainAxis;m<b?m=b:m>S&&(m=S)}if(u){var p,_;const w=h==="y"?"width":"height",b=["top","left"].includes(ta(i)),S=s.reference[f]-s.floating[w]+(b&&((p=a.offset)==null?void 0:p[f])||0)+(b?0:g.crossAxis),M=s.reference[f]+s.reference[w]+(b?0:((_=a.offset)==null?void 0:_[f])||0)-(b?g.crossAxis:0);y<S?y=S:y>M&&(y=M)}return{[h]:m,[f]:y}}}},MG=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:c=()=>{},...u}=ea(t,e),d=await Kd(e,u),f=ta(i),h=Cu(i),m=so(i)==="y",{width:y,height:v}=s.floating;let g,p;f==="top"||f==="bottom"?(g=f,p=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(p=f,g=h==="end"?"top":"bottom");const _=v-d.top-d.bottom,w=y-d.left-d.right,b=io(v-d[g],_),S=io(y-d[p],w),M=!e.middlewareData.shift;let C=b,P=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=_),M&&!h){const E=Gr(d.left,0),L=Gr(d.right,0),O=Gr(d.top,0),k=Gr(d.bottom,0);m?P=y-2*(E!==0||L!==0?E+L:Gr(d.left,d.right)):C=v-2*(O!==0||k!==0?O+k:Gr(d.top,d.bottom))}await c({...e,availableWidth:P,availableHeight:C});const A=await a.getDimensions(o.floating);return y!==A.width||v!==A.height?{reset:{rects:!0}}:{}}}};function bg(){return typeof window<"u"}function Au(t){return N2(t)?(t.nodeName||"").toLowerCase():"#document"}function Kr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ws(t){var e;return(e=(N2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function N2(t){return bg()?t instanceof Node||t instanceof Kr(t).Node:!1}function Gi(t){return bg()?t instanceof Element||t instanceof Kr(t).Element:!1}function vs(t){return bg()?t instanceof HTMLElement||t instanceof Kr(t).HTMLElement:!1}function $E(t){return!bg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Kr(t).ShadowRoot}function Df(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Wi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function TG(t){return["table","td","th"].includes(Au(t))}function Sg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Dw(t){const e=kw(),n=Gi(t)?Wi(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function CG(t){let e=ao(t);for(;vs(e)&&!lu(e);){if(Dw(e))return e;if(Sg(e))return null;e=ao(e)}return null}function kw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lu(t){return["html","body","#document"].includes(Au(t))}function Wi(t){return Kr(t).getComputedStyle(t)}function Eg(t){return Gi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ao(t){if(Au(t)==="html")return t;const e=t.assignedSlot||t.parentNode||$E(t)&&t.host||ws(t);return $E(e)?e.host:e}function P2(t){const e=ao(t);return lu(e)?t.ownerDocument?t.ownerDocument.body:t.body:vs(e)&&Df(e)?e:P2(e)}function Yd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=P2(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),a=Kr(i);if(s){const o=Qx(a);return e.concat(a,a.visualViewport||[],Df(i)?i:[],o&&n?Yd(o):[])}return e.concat(i,Yd(i,[],n))}function Qx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function R2(t){const e=Wi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=vs(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:r,o=pm(n)!==s||pm(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function Lw(t){return Gi(t)?t:t.contextElement}function Pc(t){const e=Lw(t);if(!vs(e))return ds(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=R2(e);let a=(s?pm(n.width):n.width)/r,o=(s?pm(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const AG=ds(0);function D2(t){const e=Kr(t);return!kw()||!e.visualViewport?AG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NG(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Kr(t)?!1:e}function fl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Lw(t);let a=ds(1);e&&(r?Gi(r)&&(a=Pc(r)):a=Pc(t));const o=NG(s,n,r)?D2(s):ds(0);let c=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(s){const h=Kr(s),m=r&&Gi(r)?Kr(r):r;let y=h,v=Qx(y);for(;v&&r&&m!==y;){const g=Pc(v),p=v.getBoundingClientRect(),_=Wi(v),w=p.left+(v.clientLeft+parseFloat(_.paddingLeft))*g.x,b=p.top+(v.clientTop+parseFloat(_.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,f*=g.y,c+=w,u+=b,y=Kr(v),v=Qx(y)}}return gm({width:d,height:f,x:c,y:u})}function Iw(t,e){const n=Eg(t).scrollLeft;return e?e.left+n:fl(ws(t)).left+n}function k2(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Iw(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function PG(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",a=ws(r),o=e?Sg(e.floating):!1;if(r===a||o&&s)return n;let c={scrollLeft:0,scrollTop:0},u=ds(1);const d=ds(0),f=vs(r);if((f||!f&&!s)&&((Au(r)!=="body"||Df(a))&&(c=Eg(r)),vs(r))){const m=fl(r);u=Pc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const h=a&&!f&&!s?k2(a,c,!0):ds(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function RG(t){return Array.from(t.getClientRects())}function DG(t){const e=ws(t),n=Eg(t),r=t.ownerDocument.body,i=Gr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Gr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Iw(t);const o=-n.scrollTop;return Wi(r).direction==="rtl"&&(a+=Gr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function kG(t,e){const n=Kr(t),r=ws(t),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(i){s=i.width,a=i.height;const u=kw();(!u||u&&e==="fixed")&&(o=i.offsetLeft,c=i.offsetTop)}return{width:s,height:a,x:o,y:c}}function LG(t,e){const n=fl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=vs(t)?Pc(t):ds(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:a,height:o,x:c,y:u}}function qE(t,e,n){let r;if(e==="viewport")r=kG(t,n);else if(e==="document")r=DG(ws(t));else if(Gi(e))r=LG(e,n);else{const i=D2(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return gm(r)}function L2(t,e){const n=ao(t);return n===e||!Gi(n)||lu(n)?!1:Wi(n).position==="fixed"||L2(n,e)}function IG(t,e){const n=e.get(t);if(n)return n;let r=Yd(t,[],!1).filter(o=>Gi(o)&&Au(o)!=="body"),i=null;const s=Wi(t).position==="fixed";let a=s?ao(t):t;for(;Gi(a)&&!lu(a);){const o=Wi(a),c=Dw(a);!c&&o.position==="fixed"&&(i=null),(s?!c&&!i:!c&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Df(a)&&!c&&L2(t,a))?r=r.filter(d=>d!==a):i=o,a=ao(a)}return e.set(t,r),r}function jG(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?Sg(e)?[]:IG(e,this._c):[].concat(n),r],o=a[0],c=a.reduce((u,d)=>{const f=qE(e,d,i);return u.top=Gr(f.top,u.top),u.right=io(f.right,u.right),u.bottom=io(f.bottom,u.bottom),u.left=Gr(f.left,u.left),u},qE(e,o,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zG(t){const{width:e,height:n}=R2(t);return{width:e,height:n}}function OG(t,e,n){const r=vs(e),i=ws(e),s=n==="fixed",a=fl(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const c=ds(0);if(r||!r&&!s)if((Au(e)!=="body"||Df(i))&&(o=Eg(e)),r){const h=fl(e,!0,s,e);c.x=h.x+e.clientLeft,c.y=h.y+e.clientTop}else i&&(c.x=Iw(i));const u=i&&!r&&!s?k2(i,o):ds(0),d=a.left+o.scrollLeft-c.x-u.x,f=a.top+o.scrollTop-c.y-u.y;return{x:d,y:f,width:a.width,height:a.height}}function Uv(t){return Wi(t).position==="static"}function XE(t,e){if(!vs(t)||Wi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ws(t)===n&&(n=n.ownerDocument.body),n}function I2(t,e){const n=Kr(t);if(Sg(t))return n;if(!vs(t)){let i=ao(t);for(;i&&!lu(i);){if(Gi(i)&&!Uv(i))return i;i=ao(i)}return n}let r=XE(t,e);for(;r&&TG(r)&&Uv(r);)r=XE(r,e);return r&&lu(r)&&Uv(r)&&!Dw(r)?n:r||CG(t)||n}const FG=async function(t){const e=this.getOffsetParent||I2,n=this.getDimensions,r=await n(t.floating);return{reference:OG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UG(t){return Wi(t).direction==="rtl"}const BG={convertOffsetParentRelativeRectToViewportRelativeRect:PG,getDocumentElement:ws,getClippingRect:jG,getOffsetParent:I2,getElementRects:FG,getClientRects:RG,getDimensions:zG,getScale:Pc,isElement:Gi,isRTL:UG};function VG(t,e){let n=null,r;const i=ws(t);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),s();const{left:u,top:d,width:f,height:h}=t.getBoundingClientRect();if(o||e(),!f||!h)return;const m=Sh(d),y=Sh(i.clientWidth-(u+f)),v=Sh(i.clientHeight-(d+h)),g=Sh(u),_={rootMargin:-m+"px "+-y+"px "+-v+"px "+-g+"px",threshold:Gr(0,io(1,c))||1};let w=!0;function b(S){const M=S[0].intersectionRatio;if(M!==c){if(!w)return a();M?a(!1,M):r=setTimeout(()=>{a(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(b,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,_)}n.observe(t)}return a(!0),s}function HG(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Lw(t),d=i||s?[...u?Yd(u):[],...Yd(e)]:[];d.forEach(p=>{i&&p.addEventListener("scroll",n,{passive:!0}),s&&p.addEventListener("resize",n)});const f=u&&o?VG(u,n):null;let h=-1,m=null;a&&(m=new ResizeObserver(p=>{let[_]=p;_&&_.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let y,v=c?fl(t):null;c&&g();function g(){const p=fl(t);v&&(p.x!==v.x||p.y!==v.y||p.width!==v.width||p.height!==v.height)&&n(),v=p,y=requestAnimationFrame(g)}return n(),()=>{var p;d.forEach(_=>{i&&_.removeEventListener("scroll",n),s&&_.removeEventListener("resize",n)}),f==null||f(),(p=m)==null||p.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const GG=bG,WG=SG,$G=xG,qG=MG,XG=_G,ZE=yG,ZG=EG,KG=(t,e,n)=>{const r=new Map,i={platform:BG,...n},s={...i.platform,_c:r};return vG(t,e,{...i,platform:s})};var Mp=typeof document<"u"?x.useLayoutEffect:x.useEffect;function vm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vm(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!vm(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function j2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function KE(t,e){const n=j2(t);return Math.round(e*n)/n}function Bv(t){const e=x.useRef(t);return Mp(()=>{e.current=t}),e}function YG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:c,open:u}=t,[d,f]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=x.useState(r);vm(h,r)||m(r);const[y,v]=x.useState(null),[g,p]=x.useState(null),_=x.useCallback(z=>{z!==M.current&&(M.current=z,v(z))},[]),w=x.useCallback(z=>{z!==C.current&&(C.current=z,p(z))},[]),b=s||y,S=a||g,M=x.useRef(null),C=x.useRef(null),P=x.useRef(d),A=c!=null,E=Bv(c),L=Bv(i),O=Bv(u),k=x.useCallback(()=>{if(!M.current||!C.current)return;const z={placement:e,strategy:n,middleware:h};L.current&&(z.platform=L.current),KG(M.current,C.current,z).then(V=>{const ee={...V,isPositioned:O.current!==!1};j.current&&!vm(P.current,ee)&&(P.current=ee,bl.flushSync(()=>{f(ee)}))})},[h,e,n,L,O]);Mp(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[u]);const j=x.useRef(!1);Mp(()=>(j.current=!0,()=>{j.current=!1}),[]),Mp(()=>{if(b&&(M.current=b),S&&(C.current=S),b&&S){if(E.current)return E.current(b,S,k);k()}},[b,S,k,E,A]);const $=x.useMemo(()=>({reference:M,floating:C,setReference:_,setFloating:w}),[_,w]),U=x.useMemo(()=>({reference:b,floating:S}),[b,S]),X=x.useMemo(()=>{const z={position:n,left:0,top:0};if(!U.floating)return z;const V=KE(U.floating,d.x),ee=KE(U.floating,d.y);return o?{...z,transform:"translate("+V+"px, "+ee+"px)",...j2(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:ee}},[n,o,U.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:k,refs:$,elements:U,floatingStyles:X}),[d,k,$,U,X])}const QG=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ZE({element:r.current,padding:i}).fn(n):{}:r?ZE({element:r,padding:i}).fn(n):{}}}},JG=(t,e)=>({...GG(t),options:[t,e]}),e6=(t,e)=>({...WG(t),options:[t,e]}),t6=(t,e)=>({...ZG(t),options:[t,e]}),n6=(t,e)=>({...$G(t),options:[t,e]}),r6=(t,e)=>({...qG(t),options:[t,e]}),i6=(t,e)=>({...XG(t),options:[t,e]}),s6=(t,e)=>({...QG(t),options:[t,e]});var a6="Arrow",z2=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return l.jsx(Ke.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});z2.displayName=a6;var o6=z2;function l6(t,e=[]){let n=[];function r(s,a){const o=x.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:h,children:m,...y}=f,v=(h==null?void 0:h[t][c])||o,g=x.useMemo(()=>y,Object.values(y));return l.jsx(v.Provider,{value:g,children:m})}function d(f,h){const m=(h==null?void 0:h[t][c])||o,y=x.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=n.map(a=>x.createContext(a));return function(o){const c=(o==null?void 0:o[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return i.scopeName=t,[r,c6(i,...e)]}function c6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...o,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function jw(t){const[e,n]=x.useState(void 0);return ir(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,o=u.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var zw="Popper",[O2,vo]=l6(zw),[u6,F2]=O2(zw),U2=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return l.jsx(u6,{scope:e,anchor:r,onAnchorChange:i,children:n})};U2.displayName=zw;var B2="PopperAnchor",V2=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=F2(B2,n),a=x.useRef(null),o=wt(e,a);return x.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:l.jsx(Ke.div,{...i,ref:o})});V2.displayName=B2;var Ow="PopperContent",[d6,f6]=O2(Ow),H2=x.forwardRef((t,e)=>{var ie,Me,Ue,ce,me,ve;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...v}=t,g=F2(Ow,n),[p,_]=x.useState(null),w=wt(e,q=>_(q)),[b,S]=x.useState(null),M=jw(b),C=(M==null?void 0:M.width)??0,P=(M==null?void 0:M.height)??0,A=r+(s!=="center"?"-"+s:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(u)?u:[u],O=L.length>0,k={padding:E,boundary:L.filter(p6),altBoundary:O},{refs:j,floatingStyles:$,placement:U,isPositioned:X,middlewareData:z}=YG({strategy:"fixed",placement:A,whileElementsMounted:(...q)=>HG(...q,{animationFrame:m==="always"}),elements:{reference:g.anchor},middleware:[JG({mainAxis:i+P,alignmentAxis:a}),c&&e6({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?t6():void 0,...k}),c&&n6({...k}),r6({...k,apply:({elements:q,rects:I,availableWidth:qe,availableHeight:W})=>{const{width:he,height:R}=I.reference,B=q.floating.style;B.setProperty("--radix-popper-available-width",`${qe}px`),B.setProperty("--radix-popper-available-height",`${W}px`),B.setProperty("--radix-popper-anchor-width",`${he}px`),B.setProperty("--radix-popper-anchor-height",`${R}px`)}}),b&&s6({element:b,padding:o}),m6({arrowWidth:C,arrowHeight:P}),h&&i6({strategy:"referenceHidden",...k})]}),[V,ee]=$2(U),de=rr(y);ir(()=>{X&&(de==null||de())},[X,de]);const Ee=(ie=z.arrow)==null?void 0:ie.x,Ne=(Me=z.arrow)==null?void 0:Me.y,ne=((Ue=z.arrow)==null?void 0:Ue.centerOffset)!==0,[fe,xe]=x.useState();return ir(()=>{p&&xe(window.getComputedStyle(p).zIndex)},[p]),l.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:X?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(ce=z.transformOrigin)==null?void 0:ce.x,(me=z.transformOrigin)==null?void 0:me.y].join(" "),...((ve=z.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(d6,{scope:n,placedSide:V,onArrowChange:S,arrowX:Ee,arrowY:Ne,shouldHideArrow:ne,children:l.jsx(Ke.div,{"data-side":V,"data-align":ee,...v,ref:w,style:{...v.style,animation:X?void 0:"none"}})})})});H2.displayName=Ow;var G2="PopperArrow",h6={top:"bottom",right:"left",bottom:"top",left:"right"},W2=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=f6(G2,r),a=h6[s.placedSide];return l.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:l.jsx(o6,{...i,ref:n,style:{...i.style,display:"block"}})})});W2.displayName=G2;function p6(t){return t!==null}var m6=t=>({name:"transformOrigin",options:t,fn(e){var g,p,_;const{placement:n,rects:r,middlewareData:i}=e,a=((g=i.arrow)==null?void 0:g.centerOffset)!==0,o=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=$2(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((p=i.arrow)==null?void 0:p.x)??0)+o/2,m=(((_=i.arrow)==null?void 0:_.y)??0)+c/2;let y="",v="";return u==="bottom"?(y=a?f:`${h}px`,v=`${-c}px`):u==="top"?(y=a?f:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,v=a?f:`${m}px`):u==="left"&&(y=`${r.floating.width+c}px`,v=a?f:`${m}px`),{data:{x:y,y:v}}}});function $2(t){const[e,n="center"]=t.split("-");return[e,n]}var Mg=U2,kf=V2,Tg=H2,Cg=W2;function g6(t,e=[]){let n=[];function r(s,a){const o=x.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:h,children:m,...y}=f,v=(h==null?void 0:h[t][c])||o,g=x.useMemo(()=>y,Object.values(y));return l.jsx(v.Provider,{value:g,children:m})}function d(f,h){const m=(h==null?void 0:h[t][c])||o,y=x.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=n.map(a=>x.createContext(a));return function(o){const c=(o==null?void 0:o[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return i.scopeName=t,[r,v6(i,...e)]}function v6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...o,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var Vv="rovingFocusGroup.onEntryFocus",y6={bubbles:!1,cancelable:!0},Ag="RovingFocusGroup",[Jx,q2,x6]=mg(Ag),[_6,Ng]=g6(Ag,[x6]),[w6,b6]=_6(Ag),X2=x.forwardRef((t,e)=>l.jsx(Jx.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(Jx.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(S6,{...t,ref:e})})}));X2.displayName=Ag;var S6=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,h=x.useRef(null),m=wt(e,h),y=_g(s),[v=null,g]=vi({prop:a,defaultProp:o,onChange:c}),[p,_]=x.useState(!1),w=rr(u),b=q2(n),S=x.useRef(!1),[M,C]=x.useState(0);return x.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(Vv,w),()=>P.removeEventListener(Vv,w)},[w]),l.jsx(w6,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:v,onItemFocus:x.useCallback(P=>g(P),[g]),onItemShiftTab:x.useCallback(()=>_(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>C(P=>P-1),[]),children:l.jsx(Ke.div,{tabIndex:p||M===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...t.style},onMouseDown:Ce(t.onMouseDown,()=>{S.current=!0}),onFocus:Ce(t.onFocus,P=>{const A=!S.current;if(P.target===P.currentTarget&&A&&!p){const E=new CustomEvent(Vv,y6);if(P.currentTarget.dispatchEvent(E),!E.defaultPrevented){const L=b().filter(U=>U.focusable),O=L.find(U=>U.active),k=L.find(U=>U.id===v),$=[O,k,...L].filter(Boolean).map(U=>U.ref.current);Y2($,d)}}S.current=!1}),onBlur:Ce(t.onBlur,()=>_(!1))})})}),Z2="RovingFocusGroupItem",K2=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...a}=t,o=hi(),c=s||o,u=b6(Z2,n),d=u.currentTabStopId===c,f=q2(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=u;return x.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),l.jsx(Jx.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:l.jsx(Ke.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:Ce(t.onMouseDown,y=>{r?u.onItemFocus(c):y.preventDefault()}),onFocus:Ce(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ce(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=T6(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let p=f().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")p.reverse();else if(v==="prev"||v==="next"){v==="prev"&&p.reverse();const _=p.indexOf(y.currentTarget);p=u.loop?C6(p,_+1):p.slice(_+1)}setTimeout(()=>Y2(p))}})})})});K2.displayName=Z2;var E6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function M6(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function T6(t,e,n){const r=M6(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return E6[r]}function Y2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function C6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Q2=X2,J2=K2,A6=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zl=new WeakMap,Eh=new WeakMap,Mh={},Hv=0,ek=function(t){return t&&(t.host||ek(t.parentNode))},N6=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ek(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},P6=function(t,e,n,r){var i=N6(e,Array.isArray(t)?t:[t]);Mh[n]||(Mh[n]=new WeakMap);var s=Mh[n],a=[],o=new Set,c=new Set(i),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(o.has(h))d(h);else try{var m=h.getAttribute(r),y=m!==null&&m!=="false",v=(zl.get(h)||0)+1,g=(s.get(h)||0)+1;zl.set(h,v),s.set(h,g),a.push(h),v===1&&y&&Eh.set(h,!0),g===1&&h.setAttribute(n,"true"),y||h.setAttribute(r,"true")}catch(p){console.error("aria-hidden: cannot operate on ",h,p)}})};return d(e),o.clear(),Hv++,function(){a.forEach(function(f){var h=zl.get(f)-1,m=s.get(f)-1;zl.set(f,h),s.set(f,m),h||(Eh.has(f)||f.removeAttribute(r),Eh.delete(f)),m||f.removeAttribute(n)}),Hv--,Hv||(zl=new WeakMap,zl=new WeakMap,Eh=new WeakMap,Mh={})}},Pg=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=A6(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),P6(r,i,n,"aria-hidden")):function(){return null}},ss=function(){return ss=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ss.apply(this,arguments)};function tk(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function R6(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Tp="right-scroll-bar-position",Cp="width-before-scroll-bar",D6="with-scroll-bars-hidden",k6="--removed-body-scroll-bar-size";function Gv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function L6(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var I6=typeof window<"u"?x.useLayoutEffect:x.useEffect,YE=new WeakMap;function j6(t,e){var n=L6(null,function(r){return t.forEach(function(i){return Gv(i,r)})});return I6(function(){var r=YE.get(n);if(r){var i=new Set(r),s=new Set(t),a=n.current;i.forEach(function(o){s.has(o)||Gv(o,null)}),s.forEach(function(o){i.has(o)||Gv(o,a)})}YE.set(n,t)},[t]),n}function z6(t){return t}function O6(t,e){e===void 0&&(e=z6);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var c=function(){var d=a;a=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return i}function F6(t){t===void 0&&(t={});var e=O6(null);return e.options=ss({async:!0,ssr:!1},t),e}var nk=function(t){var e=t.sideCar,n=tk(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,ss({},n))};nk.isSideCarExport=!0;function U6(t,e){return t.useMedium(e),nk}var rk=F6(),Wv=function(){},Rg=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:Wv,onWheelCapture:Wv,onTouchMoveCapture:Wv}),i=r[0],s=r[1],a=t.forwardProps,o=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,m=t.noIsolation,y=t.inert,v=t.allowPinchZoom,g=t.as,p=g===void 0?"div":g,_=t.gapMode,w=tk(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,S=j6([n,e]),M=ss(ss({},w),i);return x.createElement(x.Fragment,null,d&&x.createElement(b,{sideCar:rk,removeScrollBar:u,shards:f,noIsolation:m,inert:y,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:_}),a?x.cloneElement(x.Children.only(o),ss(ss({},M),{ref:S})):x.createElement(p,ss({},M,{className:c,ref:S}),o))});Rg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rg.classNames={fullWidth:Cp,zeroRight:Tp};var B6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function V6(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=B6();return e&&t.setAttribute("nonce",e),t}function H6(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function G6(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var W6=function(){var t=0,e=null;return{add:function(n){t==0&&(e=V6())&&(H6(e,n),G6(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},$6=function(){var t=W6();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ik=function(){var t=$6(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},q6={left:0,top:0,right:0,gap:0},$v=function(t){return parseInt(t||"",10)||0},X6=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[$v(n),$v(r),$v(i)]},Z6=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return q6;var e=X6(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},K6=ik(),Rc="data-scroll-locked",Y6=function(t,e,n,r){var i=t.left,s=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(D6,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Rc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tp,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Cp,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Tp," .").concat(Tp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Cp," .").concat(Cp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Rc,`] {
    `).concat(k6,": ").concat(o,`px;
  }
`)},QE=function(){var t=parseInt(document.body.getAttribute(Rc)||"0",10);return isFinite(t)?t:0},Q6=function(){x.useEffect(function(){return document.body.setAttribute(Rc,(QE()+1).toString()),function(){var t=QE()-1;t<=0?document.body.removeAttribute(Rc):document.body.setAttribute(Rc,t.toString())}},[])},J6=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Q6();var s=x.useMemo(function(){return Z6(i)},[i]);return x.createElement(K6,{styles:Y6(s,!e,i,n?"":"!important")})},e_=!1;if(typeof window<"u")try{var Th=Object.defineProperty({},"passive",{get:function(){return e_=!0,!0}});window.addEventListener("test",Th,Th),window.removeEventListener("test",Th,Th)}catch{e_=!1}var Ol=e_?{passive:!1}:!1,eW=function(t){return t.tagName==="TEXTAREA"},sk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!eW(t)&&n[e]==="visible")},tW=function(t){return sk(t,"overflowY")},nW=function(t){return sk(t,"overflowX")},JE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ak(t,r);if(i){var s=ok(t,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rW=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},iW=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},ak=function(t,e){return t==="v"?tW(e):nW(e)},ok=function(t,e){return t==="v"?rW(e):iW(e)},sW=function(t,e){return t==="h"&&e==="rtl"?-1:1},aW=function(t,e,n,r,i){var s=sW(t,window.getComputedStyle(e).direction),a=s*r,o=n.target,c=e.contains(o),u=!1,d=a>0,f=0,h=0;do{var m=ok(t,o),y=m[0],v=m[1],g=m[2],p=v-g-s*y;(y||p)&&ak(t,o)&&(f+=p,h+=y),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(e.contains(o)||e===o));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(h)<1||!i))&&(u=!0),u},Ch=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},eM=function(t){return[t.deltaX,t.deltaY]},tM=function(t){return t&&"current"in t?t.current:t},oW=function(t,e){return t[0]===e[0]&&t[1]===e[1]},lW=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},cW=0,Fl=[];function uW(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(cW++)[0],s=x.useState(ik)[0],a=x.useRef(t);x.useEffect(function(){a.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=R6([t.lockRef.current],(t.shards||[]).map(tM),!0).filter(Boolean);return v.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=x.useCallback(function(v,g){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var p=Ch(v),_=n.current,w="deltaX"in v?v.deltaX:_[0]-p[0],b="deltaY"in v?v.deltaY:_[1]-p[1],S,M=v.target,C=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in v&&C==="h"&&M.type==="range")return!1;var P=JE(C,M);if(!P)return!0;if(P?S=C:(S=C==="v"?"h":"v",P=JE(C,M)),!P)return!1;if(!r.current&&"changedTouches"in v&&(w||b)&&(r.current=S),!S)return!0;var A=r.current||S;return aW(A,g,v,A==="h"?w:b,!0)},[]),c=x.useCallback(function(v){var g=v;if(!(!Fl.length||Fl[Fl.length-1]!==s)){var p="deltaY"in g?eM(g):Ch(g),_=e.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&oW(S.delta,p)})[0];if(_&&_.should){g.cancelable&&g.preventDefault();return}if(!_){var w=(a.current.shards||[]).map(tM).filter(Boolean).filter(function(S){return S.contains(g.target)}),b=w.length>0?o(g,w[0]):!a.current.noIsolation;b&&g.cancelable&&g.preventDefault()}}},[]),u=x.useCallback(function(v,g,p,_){var w={name:v,delta:g,target:p,should:_,shadowParent:dW(p)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(b){return b!==w})},1)},[]),d=x.useCallback(function(v){n.current=Ch(v),r.current=void 0},[]),f=x.useCallback(function(v){u(v.type,eM(v),v.target,o(v,t.lockRef.current))},[]),h=x.useCallback(function(v){u(v.type,Ch(v),v.target,o(v,t.lockRef.current))},[]);x.useEffect(function(){return Fl.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Ol),document.addEventListener("touchmove",c,Ol),document.addEventListener("touchstart",d,Ol),function(){Fl=Fl.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,Ol),document.removeEventListener("touchmove",c,Ol),document.removeEventListener("touchstart",d,Ol)}},[]);var m=t.removeScrollBar,y=t.inert;return x.createElement(x.Fragment,null,y?x.createElement(s,{styles:lW(i)}):null,m?x.createElement(J6,{gapMode:t.gapMode}):null)}function dW(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const fW=U6(rk,uW);var Lf=x.forwardRef(function(t,e){return x.createElement(Rg,ss({},t,{ref:e,sideCar:fW}))});Lf.classNames=Rg.classNames;var t_=["Enter"," "],hW=["ArrowDown","PageUp","Home"],lk=["ArrowUp","PageDown","End"],pW=[...hW,...lk],mW={ltr:[...t_,"ArrowRight"],rtl:[...t_,"ArrowLeft"]},gW={ltr:["ArrowLeft"],rtl:["ArrowRight"]},If="Menu",[Qd,vW,yW]=mg(If),[Tl,ck]=qi(If,[yW,vo,Ng]),Dg=vo(),uk=Ng(),[xW,Cl]=Tl(If),[_W,jf]=Tl(If),dk=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:a=!0}=t,o=Dg(e),[c,u]=x.useState(null),d=x.useRef(!1),f=rr(s),h=_g(i);return x.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),l.jsx(Mg,{...o,children:l.jsx(xW,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:l.jsx(_W,{scope:e,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:a,children:r})})})};dk.displayName=If;var wW="MenuAnchor",Fw=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Dg(n);return l.jsx(kf,{...i,...r,ref:e})});Fw.displayName=wW;var Uw="MenuPortal",[bW,fk]=Tl(Uw,{forceMount:void 0}),hk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Cl(Uw,e);return l.jsx(bW,{scope:e,forceMount:n,children:l.jsx(zr,{present:n||s.open,children:l.jsx(Mu,{asChild:!0,container:i,children:r})})})};hk.displayName=Uw;var pi="MenuContent",[SW,Bw]=Tl(pi),pk=x.forwardRef((t,e)=>{const n=fk(pi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Cl(pi,t.__scopeMenu),a=jf(pi,t.__scopeMenu);return l.jsx(Qd.Provider,{scope:t.__scopeMenu,children:l.jsx(zr,{present:r||s.open,children:l.jsx(Qd.Slot,{scope:t.__scopeMenu,children:a.modal?l.jsx(EW,{...i,ref:e}):l.jsx(MW,{...i,ref:e})})})})}),EW=x.forwardRef((t,e)=>{const n=Cl(pi,t.__scopeMenu),r=x.useRef(null),i=wt(e,r);return x.useEffect(()=>{const s=r.current;if(s)return Pg(s)},[]),l.jsx(Vw,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ce(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),MW=x.forwardRef((t,e)=>{const n=Cl(pi,t.__scopeMenu);return l.jsx(Vw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Vw=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:y,...v}=t,g=Cl(pi,n),p=jf(pi,n),_=Dg(n),w=uk(n),b=vW(n),[S,M]=x.useState(null),C=x.useRef(null),P=wt(e,C,g.onContentChange),A=x.useRef(0),E=x.useRef(""),L=x.useRef(0),O=x.useRef(null),k=x.useRef("right"),j=x.useRef(0),$=y?Lf:x.Fragment,U=y?{as:Js,allowPinchZoom:!0}:void 0,X=V=>{var ie,Me;const ee=E.current+V,de=b().filter(Ue=>!Ue.disabled),Ee=document.activeElement,Ne=(ie=de.find(Ue=>Ue.ref.current===Ee))==null?void 0:ie.textValue,ne=de.map(Ue=>Ue.textValue),fe=zW(ne,ee,Ne),xe=(Me=de.find(Ue=>Ue.textValue===fe))==null?void 0:Me.ref.current;(function Ue(ce){E.current=ce,window.clearTimeout(A.current),ce!==""&&(A.current=window.setTimeout(()=>Ue(""),1e3))})(ee),xe&&setTimeout(()=>xe.focus())};x.useEffect(()=>()=>window.clearTimeout(A.current),[]),wg();const z=x.useCallback(V=>{var de,Ee;return k.current===((de=O.current)==null?void 0:de.side)&&FW(V,(Ee=O.current)==null?void 0:Ee.area)},[]);return l.jsx(SW,{scope:n,searchRef:E,onItemEnter:x.useCallback(V=>{z(V)&&V.preventDefault()},[z]),onItemLeave:x.useCallback(V=>{var ee;z(V)||((ee=C.current)==null||ee.focus(),M(null))},[z]),onTriggerLeave:x.useCallback(V=>{z(V)&&V.preventDefault()},[z]),pointerGraceTimerRef:L,onPointerGraceIntentChange:x.useCallback(V=>{O.current=V},[]),children:l.jsx($,{...U,children:l.jsx(Rf,{asChild:!0,trapped:i,onMountAutoFocus:Ce(s,V=>{var ee;V.preventDefault(),(ee=C.current)==null||ee.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:l.jsx(El,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:l.jsx(Q2,{asChild:!0,...w,dir:p.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:M,onEntryFocus:Ce(c,V=>{p.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(Tg,{role:"menu","aria-orientation":"vertical","data-state":Pk(g.open),"data-radix-menu-content":"",dir:p.dir,..._,...v,ref:P,style:{outline:"none",...v.style},onKeyDown:Ce(v.onKeyDown,V=>{const de=V.target.closest("[data-radix-menu-content]")===V.currentTarget,Ee=V.ctrlKey||V.altKey||V.metaKey,Ne=V.key.length===1;de&&(V.key==="Tab"&&V.preventDefault(),!Ee&&Ne&&X(V.key));const ne=C.current;if(V.target!==ne||!pW.includes(V.key))return;V.preventDefault();const xe=b().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);lk.includes(V.key)&&xe.reverse(),IW(xe)}),onBlur:Ce(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(A.current),E.current="")}),onPointerMove:Ce(t.onPointerMove,Jd(V=>{const ee=V.target,de=j.current!==V.clientX;if(V.currentTarget.contains(ee)&&de){const Ee=V.clientX>j.current?"right":"left";k.current=Ee,j.current=V.clientX}}))})})})})})})});pk.displayName=pi;var TW="MenuGroup",Hw=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ke.div,{role:"group",...r,ref:e})});Hw.displayName=TW;var CW="MenuLabel",mk=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ke.div,{...r,ref:e})});mk.displayName=CW;var ym="MenuItem",nM="menu.itemSelect",kg=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=x.useRef(null),a=jf(ym,t.__scopeMenu),o=Bw(ym,t.__scopeMenu),c=wt(e,s),u=x.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const h=new CustomEvent(nM,{bubbles:!0,cancelable:!0});f.addEventListener(nM,m=>r==null?void 0:r(m),{once:!0}),mw(f,h),h.defaultPrevented?u.current=!1:a.onClose()}};return l.jsx(gk,{...i,ref:c,disabled:n,onClick:Ce(t.onClick,d),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),u.current=!0},onPointerUp:Ce(t.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:Ce(t.onKeyDown,f=>{const h=o.searchRef.current!=="";n||h&&f.key===" "||t_.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});kg.displayName=ym;var gk=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,a=Bw(ym,n),o=uk(n),c=x.useRef(null),u=wt(e,c),[d,f]=x.useState(!1),[h,m]=x.useState("");return x.useEffect(()=>{const y=c.current;y&&m((y.textContent??"").trim())},[s.children]),l.jsx(Qd.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:l.jsx(J2,{asChild:!0,...o,focusable:!r,children:l.jsx(Ke.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Ce(t.onPointerMove,Jd(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ce(t.onPointerLeave,Jd(y=>a.onItemLeave(y))),onFocus:Ce(t.onFocus,()=>f(!0)),onBlur:Ce(t.onBlur,()=>f(!1))})})})}),AW="MenuCheckboxItem",vk=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return l.jsx(bk,{scope:t.__scopeMenu,checked:n,children:l.jsx(kg,{role:"menuitemcheckbox","aria-checked":xm(n)?"mixed":n,...i,ref:e,"data-state":Ww(n),onSelect:Ce(i.onSelect,()=>r==null?void 0:r(xm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});vk.displayName=AW;var yk="MenuRadioGroup",[NW,PW]=Tl(yk,{value:void 0,onValueChange:()=>{}}),xk=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=rr(r);return l.jsx(NW,{scope:t.__scopeMenu,value:n,onValueChange:s,children:l.jsx(Hw,{...i,ref:e})})});xk.displayName=yk;var _k="MenuRadioItem",wk=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=PW(_k,t.__scopeMenu),s=n===i.value;return l.jsx(bk,{scope:t.__scopeMenu,checked:s,children:l.jsx(kg,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":Ww(s),onSelect:Ce(r.onSelect,()=>{var a;return(a=i.onValueChange)==null?void 0:a.call(i,n)},{checkForDefaultPrevented:!1})})})});wk.displayName=_k;var Gw="MenuItemIndicator",[bk,RW]=Tl(Gw,{checked:!1}),Sk=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=RW(Gw,n);return l.jsx(zr,{present:r||xm(s.checked)||s.checked===!0,children:l.jsx(Ke.span,{...i,ref:e,"data-state":Ww(s.checked)})})});Sk.displayName=Gw;var DW="MenuSeparator",Ek=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ke.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Ek.displayName=DW;var kW="MenuArrow",Mk=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Dg(n);return l.jsx(Cg,{...i,...r,ref:e})});Mk.displayName=kW;var LW="MenuSub",[_te,Tk]=Tl(LW),od="MenuSubTrigger",Ck=x.forwardRef((t,e)=>{const n=Cl(od,t.__scopeMenu),r=jf(od,t.__scopeMenu),i=Tk(od,t.__scopeMenu),s=Bw(od,t.__scopeMenu),a=x.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=s,u={__scopeMenu:t.__scopeMenu},d=x.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const f=o.current;return()=>{window.clearTimeout(f),c(null)}},[o,c]),l.jsx(Fw,{asChild:!0,...u,children:l.jsx(gk,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Pk(n.open),...t,ref:pg(e,i.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ce(t.onPointerMove,Jd(f=>{s.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Ce(t.onPointerLeave,Jd(f=>{var m,y;d();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(y=n.content)==null?void 0:y.dataset.side,g=v==="right",p=g?-5:5,_=h[g?"left":"right"],w=h[g?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+p,y:f.clientY},{x:_,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:_,y:h.bottom}],side:v}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ce(t.onKeyDown,f=>{var m;const h=s.searchRef.current!=="";t.disabled||h&&f.key===" "||mW[r.dir].includes(f.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),f.preventDefault())})})})});Ck.displayName=od;var Ak="MenuSubContent",Nk=x.forwardRef((t,e)=>{const n=fk(pi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Cl(pi,t.__scopeMenu),a=jf(pi,t.__scopeMenu),o=Tk(Ak,t.__scopeMenu),c=x.useRef(null),u=wt(e,c);return l.jsx(Qd.Provider,{scope:t.__scopeMenu,children:l.jsx(zr,{present:r||s.open,children:l.jsx(Qd.Slot,{scope:t.__scopeMenu,children:l.jsx(Vw,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ce(t.onFocusOutside,d=>{d.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ce(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:Ce(t.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=gW[a.dir].includes(d.key);f&&h&&(s.onOpenChange(!1),(m=o.trigger)==null||m.focus(),d.preventDefault())})})})})})});Nk.displayName=Ak;function Pk(t){return t?"open":"closed"}function xm(t){return t==="indeterminate"}function Ww(t){return xm(t)?"indeterminate":t?"checked":"unchecked"}function IW(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function jW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function zW(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let a=jW(t,Math.max(s,0));i.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function OW(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,c=e[s].y,u=e[a].x,d=e[a].y;c>r!=d>r&&n<(u-o)*(r-c)/(d-c)+o&&(i=!i)}return i}function FW(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return OW(n,e)}function Jd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var UW=dk,BW=Fw,VW=hk,HW=pk,GW=Hw,WW=mk,$W=kg,qW=vk,XW=xk,ZW=wk,KW=Sk,YW=Ek,QW=Mk,JW=Ck,e8=Nk,$w="DropdownMenu",[t8,wte]=qi($w,[ck]),br=ck(),[n8,Rk]=t8($w),Dk=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,c=br(e),u=x.useRef(null),[d=!1,f]=vi({prop:i,defaultProp:s,onChange:a});return l.jsx(n8,{scope:e,triggerId:hi(),triggerRef:u,contentId:hi(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),modal:o,children:l.jsx(UW,{...c,open:d,onOpenChange:f,dir:r,modal:o,children:n})})};Dk.displayName=$w;var kk="DropdownMenuTrigger",Lk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=Rk(kk,n),a=br(n);return l.jsx(BW,{asChild:!0,...a,children:l.jsx(Ke.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:pg(e,s.triggerRef),onPointerDown:Ce(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:Ce(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});Lk.displayName=kk;var r8="DropdownMenuPortal",Ik=t=>{const{__scopeDropdownMenu:e,...n}=t,r=br(e);return l.jsx(VW,{...r,...n})};Ik.displayName=r8;var jk="DropdownMenuContent",zk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Rk(jk,n),s=br(n),a=x.useRef(!1);return l.jsx(HW,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Ce(t.onCloseAutoFocus,o=>{var c;a.current||(c=i.triggerRef.current)==null||c.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:Ce(t.onInteractOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zk.displayName=jk;var i8="DropdownMenuGroup",s8=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(GW,{...i,...r,ref:e})});s8.displayName=i8;var a8="DropdownMenuLabel",Ok=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(WW,{...i,...r,ref:e})});Ok.displayName=a8;var o8="DropdownMenuItem",Fk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx($W,{...i,...r,ref:e})});Fk.displayName=o8;var l8="DropdownMenuCheckboxItem",Uk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(qW,{...i,...r,ref:e})});Uk.displayName=l8;var c8="DropdownMenuRadioGroup",u8=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(XW,{...i,...r,ref:e})});u8.displayName=c8;var d8="DropdownMenuRadioItem",Bk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(ZW,{...i,...r,ref:e})});Bk.displayName=d8;var f8="DropdownMenuItemIndicator",Vk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(KW,{...i,...r,ref:e})});Vk.displayName=f8;var h8="DropdownMenuSeparator",Hk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(YW,{...i,...r,ref:e})});Hk.displayName=h8;var p8="DropdownMenuArrow",m8=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(QW,{...i,...r,ref:e})});m8.displayName=p8;var g8="DropdownMenuSubTrigger",Gk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(JW,{...i,...r,ref:e})});Gk.displayName=g8;var v8="DropdownMenuSubContent",Wk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return l.jsx(e8,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Wk.displayName=v8;var y8=Dk,x8=Lk,_8=Ik,$k=zk,qk=Ok,Xk=Fk,Zk=Uk,Kk=Bk,Yk=Vk,Qk=Hk,Jk=Gk,eL=Wk;const tL=y8,nL=x8,w8=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>l.jsxs(Jk,{ref:i,className:Re("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,l.jsx(_V,{className:"ml-auto h-4 w-4"})]}));w8.displayName=Jk.displayName;const b8=x.forwardRef(({className:t,...e},n)=>l.jsx(eL,{ref:n,className:Re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));b8.displayName=eL.displayName;const qw=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(_8,{children:l.jsx($k,{ref:r,sideOffset:e,className:Re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));qw.displayName=$k.displayName;const Md=x.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(Xk,{ref:r,className:Re("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));Md.displayName=Xk.displayName;const S8=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>l.jsxs(Zk,{ref:i,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Yk,{children:l.jsx(ul,{className:"h-4 w-4"})})}),e]}));S8.displayName=Zk.displayName;const E8=x.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(Kk,{ref:r,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Yk,{children:l.jsx(SV,{className:"h-2 w-2 fill-current"})})}),e]}));E8.displayName=Kk.displayName;const rL=x.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(qk,{ref:r,className:Re("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));rL.displayName=qk.displayName;const n_=x.forwardRef(({className:t,...e},n)=>l.jsx(Qk,{ref:n,className:Re("-mx-1 my-1 h-px bg-muted",t),...e}));n_.displayName=Qk.displayName;function _m(){const{language:t,setLanguage:e,t:n,isDetecting:r}=on(),[i,s]=x.useState(!1),a=c=>{e(c),s(!1)},o=zE[t];return l.jsx("div",{className:"relative inline-block",children:l.jsxs(tL,{open:i,onOpenChange:s,children:[l.jsx(nL,{asChild:!0,children:l.jsx(ye,{variant:"outline",size:"sm",className:"gap-2",children:r?l.jsxs(l.Fragment,{children:[l.jsx(mn,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{className:"hidden sm:inline",children:n("language_detecting")})]}):l.jsxs(l.Fragment,{children:[l.jsx(CV,{className:"h-4 w-4"}),l.jsx("span",{className:"hidden sm:inline",children:o}),l.jsx(_w,{className:"h-4 w-4 opacity-50"})]})})}),l.jsx(qw,{align:"end",className:"w-[160px]",children:ZH.map(c=>l.jsxs(Md,{onClick:()=>a(c),className:"flex items-center justify-between cursor-pointer",children:[zE[c],t===c&&l.jsx(ul,{className:"h-4 w-4 ml-2"})]},c))})]})})}const rM="/assets/fastcnc-logo-D0g7pJpx.jpg",iL=x.createContext(null);function M8({children:t}){const{toast:e}=jr(),{data:n,error:r,isLoading:i}=mr({queryKey:["/api/user"],queryFn:async()=>{try{const u=await Lt("GET","/api/user");return u.status===401?null:await u.json()}catch{return null}},retry:!1}),s=hr({mutationFn:async u=>{const d=await Lt("POST","/api/login",u);if(!d.ok){const f=await d.json();throw new Error(f.error||"Błąd logowania")}return await d.json()},onSuccess:u=>{Fa.setQueryData(["/api/user"],u),e({title:"Zalogowano pomyślnie",description:`Witaj, ${u.fullName||u.email}!`})},onError:u=>{e({title:"Błąd logowania",description:u.message,variant:"destructive"})}}),a=hr({mutationFn:async u=>{const d=await Lt("POST","/api/register",u);if(!d.ok){const f=await d.json();throw new Error(f.error||"Błąd rejestracji")}return await d.json()},onSuccess:u=>{Fa.setQueryData(["/api/user"],u),e({title:"Rejestracja zakończona sukcesem",description:`Konto ${u.fullName||u.email} zostało utworzone i zalogowane`})},onError:u=>{e({title:"Błąd rejestracji",description:u.message,variant:"destructive"})}}),o=hr({mutationFn:async()=>{if(!(await Lt("POST","/api/logout")).ok)throw new Error("Błąd wylogowania")},onSuccess:()=>{Fa.setQueryData(["/api/user"],null),e({title:"Wylogowano pomyślnie"})},onError:u=>{e({title:"Błąd wylogowania",description:u.message,variant:"destructive"})}}),c=hr({mutationFn:async u=>{const d=await Lt("POST","/api/user/change-password",u);if(!d.ok){const f=await d.json();throw new Error(f.error||"Błąd zmiany hasła")}return await d.json()},onSuccess:u=>{e({title:"Hasło zmienione",description:u.message||"Twoje hasło zostało pomyślnie zmienione"})},onError:u=>{e({title:"Błąd zmiany hasła",description:u.message,variant:"destructive"})}});return l.jsx(iL.Provider,{value:{user:n||null,isLoading:i,error:r,loginMutation:s,registerMutation:a,logoutMutation:o,changePasswordMutation:c},children:t})}function Al(){const t=x.useContext(iL);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const qv=768;function T8(){const[t,e]=x.useState(void 0);return x.useEffect(()=>{const n=window.matchMedia(`(max-width: ${qv-1}px)`),r=()=>{e(window.innerWidth<qv)};return n.addEventListener("change",r),e(window.innerWidth<qv),()=>n.removeEventListener("change",r)},[]),!!t}var Xw="Dialog",[sL,aL]=qi(Xw),[C8,Zi]=sL(Xw),oL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,o=x.useRef(null),c=x.useRef(null),[u=!1,d]=vi({prop:r,defaultProp:i,onChange:s});return l.jsx(C8,{scope:e,triggerRef:o,contentRef:c,contentId:hi(),titleId:hi(),descriptionId:hi(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:a,children:n})};oL.displayName=Xw;var lL="DialogTrigger",cL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Zi(lL,n),s=wt(e,i.triggerRef);return l.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Yw(i.open),...r,ref:s,onClick:Ce(t.onClick,i.onOpenToggle)})});cL.displayName=lL;var Zw="DialogPortal",[A8,uL]=sL(Zw,{forceMount:void 0}),dL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Zi(Zw,e);return l.jsx(A8,{scope:e,forceMount:n,children:x.Children.map(r,a=>l.jsx(zr,{present:n||s.open,children:l.jsx(Mu,{asChild:!0,container:i,children:a})}))})};dL.displayName=Zw;var wm="DialogOverlay",fL=x.forwardRef((t,e)=>{const n=uL(wm,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Zi(wm,t.__scopeDialog);return s.modal?l.jsx(zr,{present:r||s.open,children:l.jsx(N8,{...i,ref:e})}):null});fL.displayName=wm;var N8=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Zi(wm,n);return l.jsx(Lf,{as:Js,allowPinchZoom:!0,shards:[i.contentRef],children:l.jsx(Ke.div,{"data-state":Yw(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),hl="DialogContent",hL=x.forwardRef((t,e)=>{const n=uL(hl,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Zi(hl,t.__scopeDialog);return l.jsx(zr,{present:r||s.open,children:s.modal?l.jsx(P8,{...i,ref:e}):l.jsx(R8,{...i,ref:e})})});hL.displayName=hl;var P8=x.forwardRef((t,e)=>{const n=Zi(hl,t.__scopeDialog),r=x.useRef(null),i=wt(e,n.contentRef,r);return x.useEffect(()=>{const s=r.current;if(s)return Pg(s)},[]),l.jsx(pL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:Ce(t.onFocusOutside,s=>s.preventDefault())})}),R8=x.forwardRef((t,e)=>{const n=Zi(hl,t.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return l.jsx(pL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),pL=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,o=Zi(hl,n),c=x.useRef(null),u=wt(e,c);return wg(),l.jsxs(l.Fragment,{children:[l.jsx(Rf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:l.jsx(El,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Yw(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(k8,{titleId:o.titleId}),l.jsx(I8,{contentRef:c,descriptionId:o.descriptionId})]})]})}),Kw="DialogTitle",mL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Zi(Kw,n);return l.jsx(Ke.h2,{id:i.titleId,...r,ref:e})});mL.displayName=Kw;var gL="DialogDescription",vL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Zi(gL,n);return l.jsx(Ke.p,{id:i.descriptionId,...r,ref:e})});vL.displayName=gL;var yL="DialogClose",xL=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Zi(yL,n);return l.jsx(Ke.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,()=>i.onOpenChange(!1))})});xL.displayName=yL;function Yw(t){return t?"open":"closed"}var _L="DialogTitleWarning",[D8,wL]=RB(_L,{contentName:hl,titleName:Kw,docsSlug:"dialog"}),k8=({titleId:t})=>{const e=wL(_L),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},L8="DialogDescriptionWarning",I8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wL(L8).contentName}}.`;return x.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Qw=oL,bL=cL,Jw=dL,zf=fL,Of=hL,Ff=mL,Uf=vL,Bf=xL;const j8=Qw,z8=bL,O8=Jw,SL=x.forwardRef(({className:t,...e},n)=>l.jsx(zf,{className:Re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));SL.displayName=zf.displayName;const F8=Ml("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),EL=x.forwardRef(({side:t="right",className:e,children:n,...r},i)=>l.jsxs(O8,{children:[l.jsx(SL,{}),l.jsxs(Of,{ref:i,className:Re(F8({side:t}),e),...r,children:[n,l.jsxs(Bf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[l.jsx(ou,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));EL.displayName=Of.displayName;const ML=({className:t,...e})=>l.jsx("div",{className:Re("flex flex-col space-y-2 text-center sm:text-left",t),...e});ML.displayName="SheetHeader";const TL=x.forwardRef(({className:t,...e},n)=>l.jsx(Ff,{ref:n,className:Re("text-lg font-semibold text-foreground",t),...e}));TL.displayName=Ff.displayName;const U8=x.forwardRef(({className:t,...e},n)=>l.jsx(Uf,{ref:n,className:Re("text-sm text-muted-foreground",t),...e}));U8.displayName=Uf.displayName;function Hs({onUploadClick:t}){const{t:e}=on(),{user:n,logoutMutation:r}=Al(),[i,s]=kn(),a=T8(),[o,c]=x.useState(!1),u=i.match(/^\/([a-z]{2})(?:\/|$)/),d=u?u[1]:"";x.useEffect(()=>{["/cad-library","/auth","/client/dashboard","/admin/dashboard","/quote"].some(y=>i===y||i.startsWith(`${y}/`))&&!d&&s(`/en${i}`)},[i,d,s]);const f=h=>d?`/${d}${h}`:`/en${h}`;return a?l.jsx("header",{className:"bg-white shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:[l.jsx("a",{href:"https://fastcnc.eu",target:"_blank",rel:"noopener noreferrer",children:l.jsx("img",{src:rM,alt:"Fast CNC Logo",className:"w-[80px]"})}),l.jsxs(j8,{open:o,onOpenChange:c,children:[l.jsx(z8,{asChild:!0,children:l.jsx(ye,{variant:"outline",size:"icon",children:l.jsx(DV,{className:"h-5 w-5"})})}),l.jsxs(EL,{side:"right",className:"w-[280px]",children:[l.jsx(ML,{children:l.jsx(TL,{children:e("navigation.menu","Menu")})}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx(_m,{}),l.jsx(ye,{variant:"outline",className:"w-full justify-start",asChild:!0,onClick:()=>c(!1),children:l.jsxs(ai,{href:f("/cad-library"),children:[l.jsx(dm,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("library.title")})]})}),l.jsxs(ye,{onClick:()=>{t(),c(!1)},className:"w-full bg-primary hover:bg-blue-700 text-white",children:[l.jsx(Xx,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("upload")})]}),n?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-3 py-2 text-sm font-medium text-gray-900 border-b",children:n.username}),n.isClient&&l.jsx(ye,{variant:"outline",className:"w-full justify-start",asChild:!0,onClick:()=>c(!1),children:l.jsxs(ai,{href:f("/client/dashboard"),children:[l.jsx(Dv,{className:"mr-2 h-4 w-4"}),e("client_dashboard")]})}),n.isAdmin&&l.jsx(ye,{variant:"outline",className:"w-full justify-start",asChild:!0,onClick:()=>c(!1),children:l.jsxs(ai,{href:f("/admin/dashboard"),children:[l.jsx(Dv,{className:"mr-2 h-4 w-4"}),e("admin.dashboardTitle")]})}),l.jsxs(ye,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:()=>{r.mutate(),c(!1)},children:[l.jsx(ME,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("logout")})]})]}):l.jsx(ye,{variant:"outline",className:"w-full justify-start",asChild:!0,onClick:()=>c(!1),children:l.jsxs(ai,{href:f("/auth"),children:[l.jsx(qx,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("login")})]})})]})]})]})]})}):l.jsx("header",{className:"bg-white shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("a",{href:"https://fastcnc.eu",target:"_blank",rel:"noopener noreferrer",children:l.jsx("img",{src:rM,alt:"Fast CNC Logo",className:"w-[80px]"})})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(_m,{}),l.jsx(ye,{variant:"outline",size:"sm",asChild:!0,className:"mr-2",children:l.jsxs(ai,{href:f("/cad-library"),children:[l.jsx(dm,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("library.title")})]})}),l.jsxs(ye,{onClick:t,className:"bg-primary hover:bg-blue-700 text-white",children:[l.jsx(Xx,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("upload")})]}),n?l.jsxs(tL,{children:[l.jsx(nL,{asChild:!0,children:l.jsx(ye,{variant:"outline",size:"icon",className:"ml-2",children:l.jsx(Dv,{className:"h-5 w-5"})})}),l.jsxs(qw,{align:"end",children:[l.jsx(rL,{children:n.username}),l.jsx(n_,{}),n.isClient&&l.jsx(Md,{asChild:!0,children:l.jsx(ai,{href:f("/client/dashboard"),children:e("client_dashboard")})}),n.isAdmin&&l.jsx(Md,{asChild:!0,children:l.jsx(ai,{href:f("/admin/dashboard"),children:e("admin.dashboardTitle")})}),l.jsx(n_,{}),l.jsxs(Md,{onClick:()=>r.mutate(),children:[l.jsx(ME,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("logout")})]})]})]}):l.jsx(ye,{variant:"outline",size:"sm",asChild:!0,children:l.jsxs(ai,{href:f("/auth"),children:[l.jsx(qx,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e("login")})]})})]})]})})}const B8="modulepreload",V8=function(t){return"/"+t},iM={},eb=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=V8(c),c in iM)return;iM[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":B8,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},H8=Ml("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tr({className:t,variant:e,...n}){return l.jsx("div",{className:Re(H8({variant:e}),t),...n})}const fs=Qw,G8=Jw,W8=Bf,CL=x.forwardRef(({className:t,...e},n)=>l.jsx(zf,{ref:n,className:Re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));CL.displayName=zf.displayName;const zi=x.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(G8,{children:[l.jsx(CL,{}),l.jsxs(Of,{ref:r,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(Bf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(ou,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zi.displayName=Of.displayName;const Oi=({className:t,...e})=>l.jsx("div",{className:Re("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Oi.displayName="DialogHeader";const Gs=({className:t,...e})=>l.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Gs.displayName="DialogFooter";const Fi=x.forwardRef(({className:t,...e},n)=>l.jsx(Ff,{ref:n,className:Re("text-lg font-semibold leading-none tracking-tight",t),...e}));Fi.displayName=Ff.displayName;const Za=x.forwardRef(({className:t,...e},n)=>l.jsx(Uf,{ref:n,className:Re("text-sm text-muted-foreground",t),...e}));Za.displayName=Uf.displayName;var $8="Label",AL=x.forwardRef((t,e)=>l.jsx(Ke.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));AL.displayName=$8;var NL=AL;const q8=Ml("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),St=x.forwardRef(({className:t,...e},n)=>l.jsx(NL,{ref:n,className:Re(q8(),t),...e}));St.displayName=NL.displayName;const _t=x.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:Re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));_t.displayName="Input";function tb(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var nb="Switch",[X8,bte]=qi(nb),[Z8,K8]=X8(nb),PL=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:c="on",onCheckedChange:u,form:d,...f}=t,[h,m]=x.useState(null),y=wt(e,w=>m(w)),v=x.useRef(!1),g=h?d||!!h.closest("form"):!0,[p=!1,_]=vi({prop:i,defaultProp:s,onChange:u});return l.jsxs(Z8,{scope:n,checked:p,disabled:o,children:[l.jsx(Ke.button,{type:"button",role:"switch","aria-checked":p,"aria-required":a,"data-state":kL(p),"data-disabled":o?"":void 0,disabled:o,value:c,...f,ref:y,onClick:Ce(t.onClick,w=>{_(b=>!b),g&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),g&&l.jsx(Y8,{control:h,bubbles:!v.current,name:r,value:c,checked:p,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});PL.displayName=nb;var RL="SwitchThumb",DL=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=K8(RL,n);return l.jsx(Ke.span,{"data-state":kL(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});DL.displayName=RL;var Y8=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=x.useRef(null),a=tb(n),o=jw(e);return x.useEffect(()=>{const c=s.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&f){const h=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(h)}},[a,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function kL(t){return t?"checked":"unchecked"}var LL=PL,Q8=DL;const rb=x.forwardRef(({className:t,...e},n)=>l.jsx(LL,{className:Re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:l.jsx(Q8,{className:Re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));rb.displayName=LL.displayName;const bm="/assets/fastcnc-logo-D0g7pJpx.jpg";var ib="Checkbox",[J8,Ste]=qi(ib),[e$,t$]=J8(ib),IL=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:c="on",onCheckedChange:u,form:d,...f}=t,[h,m]=x.useState(null),y=wt(e,b=>m(b)),v=x.useRef(!1),g=h?d||!!h.closest("form"):!0,[p=!1,_]=vi({prop:i,defaultProp:s,onChange:u}),w=x.useRef(p);return x.useEffect(()=>{const b=h==null?void 0:h.form;if(b){const S=()=>_(w.current);return b.addEventListener("reset",S),()=>b.removeEventListener("reset",S)}},[h,_]),l.jsxs(e$,{scope:n,state:p,disabled:o,children:[l.jsx(Ke.button,{type:"button",role:"checkbox","aria-checked":Ka(p)?"mixed":p,"aria-required":a,"data-state":OL(p),"data-disabled":o?"":void 0,disabled:o,value:c,...f,ref:y,onKeyDown:Ce(t.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Ce(t.onClick,b=>{_(S=>Ka(S)?!0:!S),g&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),g&&l.jsx(n$,{control:h,bubbles:!v.current,name:r,value:c,checked:p,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Ka(s)?!1:s})]})});IL.displayName=ib;var jL="CheckboxIndicator",zL=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=t$(jL,n);return l.jsx(zr,{present:r||Ka(s.state)||s.state===!0,children:l.jsx(Ke.span,{"data-state":OL(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});zL.displayName=jL;var n$=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...s}=t,a=x.useRef(null),o=tb(n),c=jw(e);x.useEffect(()=>{const d=a.current,f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(o!==n&&m){const y=new Event("click",{bubbles:r});d.indeterminate=Ka(n),m.call(d,Ka(n)?!1:n),d.dispatchEvent(y)}},[o,n,r]);const u=x.useRef(Ka(n)?!1:n);return l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...s,tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ka(t){return t==="indeterminate"}function OL(t){return Ka(t)?"indeterminate":t?"checked":"unchecked"}var FL=IL,r$=zL;const UL=x.forwardRef(({className:t,...e},n)=>l.jsx(FL,{ref:n,className:Re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:l.jsx(r$,{className:Re("flex items-center justify-center text-current"),children:l.jsx(ul,{className:"h-4 w-4"})})}));UL.displayName=FL.displayName;function i$({isOpen:t,onClose:e,modelId:n,modelInfo:r}){const{t:i,language:s}=on(),{toast:a}=jr(),{user:o}=Al(),c=Sl(),[,u]=kn(),[d,f]=x.useState((r==null?void 0:r.shareEnabled)||!1),[h,m]=x.useState(""),[y,v]=x.useState(""),[g,p]=x.useState((r==null?void 0:r.shareEmail)||""),[_,w]=x.useState(""),[b,S]=x.useState(!1),[M,C]=x.useState(!1),[P,A]=x.useState(!1),[E,L]=x.useState(!1),[O,k]=x.useState(!1);x.useEffect(()=>{o!=null&&o.email&&p(o.email)},[o]);const[j,$]=x.useState({username:"",password:"",fullName:"",company:""}),U=async Ne=>{if(!(!Ne||!Ne.includes("@")))try{k(!0);const fe=await(await Lt("GET",`/api/check-email/${encodeURIComponent(Ne)}`,void 0,{on401:"returnNull"})).json();L(fe.exists),fe.exists&&A(!1)}catch(ne){console.error("Error checking email:",ne)}finally{k(!1)}},X=()=>{g&&!o&&U(g)},z=Ne=>{const ne=Ne.target.value;p(ne),E&&L(!1)},V=Ne=>{const{name:ne,value:fe}=Ne.target;$(xe=>({...xe,[ne]:fe}))},ee=()=>{m(""),v(""),o?o.email&&p(o.email):p(""),A(!1),$({username:"",password:"",fullName:"",company:""}),C(!1),e()},de=async()=>{if(n){if(d&&g.trim()===""){a({title:i("label.email"),description:i("label.email.placeholder"),variant:"destructive"});return}if(!o&&P&&!j.fullName){a({title:i("full_name"),description:i("full_name")+" "+i("errors.required"),variant:"destructive"});return}try{S(!0);const Ne={modelId:n,enableSharing:d,password:h.length>0?h:void 0,expiryDate:y.length>0?y:void 0,email:g.trim()!==""?g.trim():void 0,language:s,createAccount:!o&&P?!0:void 0,userData:!o&&P?{username:j.username,password:j.password||h,fullName:j.fullName,company:j.company,email:g}:void 0},fe=await(await Lt("POST",`/api/models/${n}/share`,Ne,{on401:"throw"})).json();if(fe.shareEnabled&&fe.shareUrl){const ie=window.location.origin;w(`${ie}${fe.shareUrl}`)}else w("");c.invalidateQueries({queryKey:[`/api/models/${n}/info`]}),P&&c.invalidateQueries({queryKey:["/api/user"]});let xe=d?fe.emailSent?`${i("message.share.success")}. ${i("message.revocation.sent")}: ${g}.`:`${i("message.share.success")}. ${i("message.share.copied")}.`:i("message.delete.success");fe.accountCreated&&(xe+=" "+i("account_created")),a({title:i("message.share.success"),description:xe,variant:"default"})}catch(Ne){console.error("Error sharing model:",Ne),a({title:i("header.error"),description:Ne instanceof Error?Ne.message:i("errors.share"),variant:"destructive"})}finally{S(!1)}}},Ee=()=>{_&&navigator.clipboard.writeText(_).then(()=>{C(!0),setTimeout(()=>C(!1),2e3),a({title:i("button.copy"),description:i("message.share.copied"),variant:"default"})})};return l.jsx(fs,{open:t,onOpenChange:ee,children:l.jsxs(zi,{className:"sm:max-w-[425px]",children:[l.jsx("div",{className:"flex justify-center mb-2",children:l.jsx("img",{src:bm,alt:"FastCNC Logo",className:"w-[100px]"})}),l.jsxs(Oi,{children:[l.jsx(Fi,{children:i("button.share")}),l.jsx(Za,{children:i("message.share.warning")})]}),l.jsxs("div",{className:"grid gap-4 py-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(St,{htmlFor:"enable-sharing",className:"text-right",children:i("button.share")}),l.jsx(rb,{id:"enable-sharing",checked:d,onCheckedChange:f})]}),d&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[l.jsx(St,{htmlFor:"password",className:"text-right",children:i("label.password")}),l.jsx(_t,{id:"password",type:"password",placeholder:i("label.password.share.placeholder"),className:"col-span-3",value:h,onChange:Ne=>m(Ne.target.value)})]}),l.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[l.jsxs(St,{htmlFor:"expiry-date",className:"text-right flex items-center gap-2",children:[l.jsx(xw,{className:"h-4 w-4"}),i("label.expiry")]}),l.jsx(_t,{id:"expiry-date",type:"date",className:"col-span-3",value:y,onChange:Ne=>v(Ne.target.value)})]}),l.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[l.jsxs(St,{htmlFor:"email",className:"text-right flex items-center gap-2",children:[l.jsx(RV,{className:"h-4 w-4"}),i("label.email")]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx(_t,{id:"email",type:"email",placeholder:i("label.email.placeholder"),className:E?"border-orange-400":"",value:g,onChange:z,onBlur:X,disabled:!!o,required:!0}),E&&l.jsxs("div",{className:"flex flex-col space-y-2 mt-1",children:[l.jsx("p",{className:"text-xs text-orange-500",children:i("email_already_exists")}),l.jsxs(ye,{variant:"outline",size:"sm",className:"text-xs h-8 w-full",onClick:()=>{ee(),u("/auth")},children:[l.jsx(qx,{className:"mr-2 h-3 w-3"}),i("login")]})]})]})]}),!o&&!E&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-2 mt-1 ml-[calc(25%+8px)]",children:[l.jsx(UL,{id:"create-account",checked:P,onCheckedChange:Ne=>A(Ne===!0),disabled:E}),l.jsxs(St,{htmlFor:"create-account",className:`text-sm flex items-center ${E?"cursor-not-allowed text-muted-foreground":"cursor-pointer"}`,children:[l.jsx(s2,{className:"h-4 w-4 mr-1 text-muted-foreground"}),i("create_account_sharing")]})]}),P&&l.jsxs("div",{className:"border rounded-md p-4 mt-2 bg-secondary/10",children:[l.jsx("h4",{className:"font-medium text-sm mb-3",children:i("create_account")}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(St,{htmlFor:"reg-username",className:"text-sm",children:i("username")}),l.jsx(_t,{id:"reg-username",name:"username",value:j.username,onChange:V,className:"h-8 text-sm"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:i("username_optional")})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs(St,{htmlFor:"reg-password",className:"text-sm",children:[i("password")," *"]}),l.jsx(_t,{id:"reg-password",name:"password",type:"password",value:j.password,onChange:V,className:"h-8 text-sm",placeholder:j.password?"":i("sharePassword")+" "+i("username_optional")}),!j.password&&l.jsx("p",{className:"text-xs text-muted-foreground",children:i("label.password.share.placeholder")})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs(St,{htmlFor:"reg-fullName",className:"text-sm",children:[i("full_name")," *"]}),l.jsx(_t,{id:"reg-fullName",name:"fullName",value:j.fullName,onChange:V,className:"h-8 text-sm",required:!0})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(St,{htmlFor:"reg-company",className:"text-sm",children:i("company")}),l.jsx(_t,{id:"reg-company",name:"company",value:j.company,onChange:V,className:"h-8 text-sm"})]})]})]})]}),(r==null?void 0:r.shareEnabled)&&(r==null?void 0:r.shareId)&&l.jsxs("div",{className:"mt-2 p-3 border rounded-lg bg-secondary/20",children:[l.jsxs(St,{className:"text-sm mb-2 block",children:[i("header.shared.model"),":"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex-1 truncate text-sm bg-background rounded px-2 py-1",children:[window.location.origin,"/shared/",r.shareId]}),l.jsx(ye,{variant:"outline",size:"icon",onClick:()=>{const Ne=`${window.location.origin}/shared/${r.shareId}`;navigator.clipboard.writeText(Ne),a({title:i("button.copy"),description:i("message.share.copied")})},children:l.jsx(fm,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[l.jsx(AV,{className:"h-3 w-3"}),r.hasPassword?i("label.password.share"):i("message.password.required")]})]})]})]}),_&&l.jsxs("div",{className:"mb-4 p-3 border rounded-lg bg-secondary/20",children:[l.jsxs("div",{className:"text-sm mb-1",children:[i("message.share.success"),":"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_t,{readOnly:!0,value:_,className:"text-xs"}),l.jsx(ye,{size:"icon",variant:"outline",onClick:Ee,children:M?l.jsx(ul,{className:"h-4 w-4"}):l.jsx(EV,{className:"h-4 w-4"})})]})]}),l.jsxs(Gs,{children:[l.jsx(ye,{variant:"outline",onClick:ee,children:i("button.cancel")}),l.jsx(ye,{onClick:de,disabled:b,children:i(b?"label.verification":d?"button.share":"button.cancel")})]})]})})}const s$=x.lazy(()=>eb(()=>Promise.resolve().then(()=>yY),void 0)),a$=x.lazy(()=>eb(()=>import("./DxfViewer-CzhJfsN3.js"),[]));x.lazy(()=>eb(()=>Promise.resolve().then(()=>xY),void 0));class sM extends x.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("Error caught by ErrorBoundary:",e)}render(){return this.state.hasError?this.props.fallback:this.props.children}}function Lg({modelId:t,isPublic:e,publicId:n,allowScreenshots:r=!1}){const{t:i}=on(),[s,a]=x.useState("unknown"),[o,c]=x.useState(null),[u,d]=x.useState(!1),[f,h]=x.useState(null),[m,y]=x.useState(!1),[v,g]=x.useState(!1);return x.useEffect(()=>{if(!t){a("unknown"),c(null);return}(async()=>{var _;try{d(!0),h(null);const w=e&&n?`/api/public/models/${n}`:`/api/models/${t}`,b=await fetch(w);if(!b.ok)throw new Error(`Nie można pobrać informacji o modelu (${b.status})`);const S=await b.json();c(S);const M=((_=S.filename)==null?void 0:_.toLowerCase())||"";let C="unknown";M.endsWith(".stl")?C="3d":(M.endsWith(".dxf")||M.endsWith(".dwg"))&&(C="2d"),a(C),y(!0)}catch(w){console.error("Błąd pobierania informacji o modelu:",w),h(w instanceof Error?w.message:"Nieznany błąd"),a("unknown")}finally{d(!1)}})()},[t,e,n]),l.jsxs(l.Fragment,{children:[l.jsx(i$,{isOpen:v,onClose:()=>g(!1),modelId:t||0,modelInfo:o}),l.jsx("div",{className:"w-full h-full flex flex-col md:flex-row min-h-[440px] bg-[#ffffff]",children:l.jsxs("div",{className:"flex flex-col flex-grow w-full md:w-3/4",children:[l.jsxs("div",{className:"h-10 bg-slate-100 border-b border-slate-200 flex items-center px-3 justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm font-medium",children:[i("mode"),":"]}),l.jsx(tr,{variant:s==="3d"?"default":"outline",children:"3D"}),l.jsx(tr,{variant:s==="2d"?"default":"outline",children:"2D"}),(o==null?void 0:o.filename)&&l.jsx("span",{className:"text-xs text-slate-500 ml-3",children:o.filename})]}),o&&t&&l.jsxs(ye,{variant:"outline",size:"sm",className:"flex items-center gap-1 h-7",onClick:()=>g(!0),children:[l.jsx(LV,{className:"h-3.5 w-3.5"}),l.jsx("span",{className:"text-xs",children:i("share")})]})]}),l.jsxs("div",{className:"flex-1 relative",children:[u&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-20",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),l.jsx("p",{className:"mt-2 text-sm",children:"Loading model..."})]})}),f&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-20",children:l.jsxs("div",{className:"text-center max-w-md p-4",children:[l.jsx(Xa,{size:40,className:"mx-auto text-red-500 mb-2"}),l.jsx("h3",{className:"text-lg font-medium mb-1",children:"Model loading error"}),l.jsx("p",{className:"text-sm text-slate-600",children:f})]})}),!u&&!f&&l.jsxs(l.Fragment,{children:[s==="3d"&&l.jsx(x.Suspense,{fallback:l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),l.jsx("p",{className:"mt-2 text-sm",children:"Loading 3D component..."})]})}),children:l.jsx(sM,{fallback:l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(Xa,{size:40,className:"mx-auto text-amber-500 mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"3D rendering issue"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"There was a problem loading the 3D rendering component. Check if your browser supports WebGL."}),l.jsx(ye,{onClick:()=>window.location.reload(),children:"Refresh page"})]}),children:l.jsx(s$,{modelId:t,isPublic:e,publicId:n,allowScreenshots:r})})}),s==="2d"&&l.jsx(x.Suspense,{fallback:l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),l.jsx("p",{className:"mt-2 text-sm",children:"Loading 2D component..."})]})}),children:l.jsx(sM,{fallback:l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(Xa,{size:40,className:"mx-auto text-amber-500 mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"2D rendering issue"}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"There was a problem loading the 2D rendering component."}),l.jsx(ye,{onClick:()=>window.location.reload(),children:"Refresh page"})]}),children:l.jsx(a$,{modelId:t})})}),s==="unknown"&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg font-medium mb-2",children:"Select a model to display"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Supported formats: STL, DXF, DWG"})]})})]})]})]})})]})}function Ws({}){return on(),l.jsx("footer",{className:"bg-white border-t border-gray-200",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-center items-center text-sm text-gray-500",children:l.jsx("div",{className:"flex items-center space-x-8",children:l.jsx("a",{href:"https://fastcnc.eu",target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:opacity-80 transition-opacity",children:l.jsx("img",{src:bm,alt:"FastCNC Logo",className:"h-8"})})})})})}function o$(t,e=[]){let n=[];function r(s,a){const o=x.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:h,children:m,...y}=f,v=(h==null?void 0:h[t][c])||o,g=x.useMemo(()=>y,Object.values(y));return l.jsx(v.Provider,{value:g,children:m})}function d(f,h){const m=(h==null?void 0:h[t][c])||o,y=x.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=n.map(a=>x.createContext(a));return function(o){const c=(o==null?void 0:o[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return i.scopeName=t,[r,l$(i,...e)]}function l$(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...o,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var sb="Progress",ab=100,[c$,Ete]=o$(sb),[u$,d$]=c$(sb),BL=x.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=f$,...a}=t;(i||i===0)&&!aM(i)&&console.error(h$(`${i}`,"Progress"));const o=aM(i)?i:ab;r!==null&&!oM(r,o)&&console.error(p$(`${r}`,"Progress"));const c=oM(r,o)?r:null,u=Sm(c)?s(c,o):void 0;return l.jsx(u$,{scope:n,value:c,max:o,children:l.jsx(Ke.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Sm(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":GL(c,o),"data-value":c??void 0,"data-max":o,...a,ref:e})})});BL.displayName=sb;var VL="ProgressIndicator",HL=x.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=d$(VL,n);return l.jsx(Ke.div,{"data-state":GL(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});HL.displayName=VL;function f$(t,e){return`${Math.round(t/e*100)}%`}function GL(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Sm(t){return typeof t=="number"}function aM(t){return Sm(t)&&!isNaN(t)&&t>0}function oM(t,e){return Sm(t)&&!isNaN(t)&&t<=e&&t>=0}function h$(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ab}\`.`}function p$(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ab} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var WL=BL,m$=HL;const Ig=x.forwardRef(({className:t,value:e,...n},r)=>l.jsx(WL,{ref:r,className:Re("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:l.jsx(m$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ig.displayName=WL.displayName;const g$=Ml("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Em=x.forwardRef(({className:t,variant:e,...n},r)=>l.jsx("div",{ref:r,role:"alert",className:Re(g$({variant:e}),t),...n}));Em.displayName="Alert";const Mm=x.forwardRef(({className:t,...e},n)=>l.jsx("h5",{ref:n,className:Re("mb-1 font-medium leading-none tracking-tight",t),...e}));Mm.displayName="AlertTitle";const Tm=x.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Re("text-sm [&_p]:leading-relaxed",t),...e}));Tm.displayName="AlertDescription";function $L({isOpen:t,onClose:e,isUploading:n,uploadProgress:r,onUpload:i}){const{t:s}=on(),{user:a}=Al(),{toast:o}=jr(),[,c]=kn(),u=x.useRef(null),[d,f]=x.useState(null),[h,m]=x.useState(!1),[y,v]=x.useState(""),[g,p]=x.useState(!1),[_,w]=x.useState(!1),[b,S]=x.useState(!1),[M,C]=x.useState(!1);x.useEffect(()=>{a!=null&&a.email&&(v(a.email),S(!0))},[a]);const P=async U=>{if(!U||!U.includes("@")){console.log("[CHECK-EMAIL] Nieprawidłowy format emaila:",U);return}console.log("[CHECK-EMAIL] Sprawdzanie czy email istnieje:",U),p(!0),S(!1),C(!0);try{const X=`/api/check-email/${encodeURIComponent(U)}`;console.log("[CHECK-EMAIL] Wysyłanie zapytania do endpointu:",X);const z=await Lt("GET",X);if(!z.ok)throw console.error("[CHECK-EMAIL] Nieprawidłowa odpowiedź z serwera:",z.status),new Error("Failed to check email");const V=await z.json();console.log("[CHECK-EMAIL] Otrzymana odpowiedź:",V),w(V.exists),S(!0),console.log("[CHECK-EMAIL] Ustawiono stan:",{emailExists:V.exists,emailChecked:!0,isProtected:V.exists&&!(a!=null&&a.email)})}catch(X){console.error("[CHECK-EMAIL] Błąd podczas sprawdzania emaila:",X),S(!0),w(!1),o({variant:"destructive",title:s("error"),description:X instanceof Error?X.message:s("error.unknown")})}finally{p(!1),C(!1)}},A=U=>{U.target.files&&U.target.files[0]&&f(U.target.files[0])},E=()=>{u.current&&u.current.click()},L=U=>{U.preventDefault(),m(!0)},O=()=>{m(!1)},k=U=>{if(U.preventDefault(),m(!1),U.dataTransfer.files&&U.dataTransfer.files[0]){const X=U.dataTransfer.files[0];X.name.match(/\.(stp|step|stl|dxf|dwg)$/i)&&f(X)}},j=()=>{if(b&&_&&!(a!=null&&a.email)){console.log("[UPLOAD_MODAL] Blokada uploadu - email istnieje w bazie:",{email:y,emailChecked:b,emailExists:_,isLoggedIn:!!a}),o({variant:"destructive",title:s("warning"),description:s("email_exists_warning")||"This email already exists in our system. Please log in first."});return}d&&y&&(console.log("[UPLOAD_MODAL] Rozpoczynam upload z emailem:",{email:y,filename:d.name,emailChecked:b,emailExists:_,isLoggedIn:!!a}),i(d,y))},$=()=>{f(null),e()};return l.jsx(fs,{open:t,onOpenChange:$,children:l.jsxs(zi,{className:"sm:max-w-md",children:[l.jsx(Oi,{children:l.jsx(Fi,{className:"text-xl",children:s("button.upload")})}),n?l.jsxs("div",{className:"py-6",children:[l.jsx("div",{className:"flex items-center justify-center mb-4",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),l.jsx("h3",{className:"text-center font-medium text-lg mb-2",children:s("label.verification")}),l.jsx("p",{className:"text-center text-gray-500 mb-4",children:s("message.loading")}),l.jsx(Ig,{value:r,className:"h-2"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`border-2 border-dashed ${h?"border-primary":"border-gray-300"} rounded-md p-6 flex flex-col items-center justify-center transition-colors`,onDragOver:L,onDragLeave:O,onDrop:k,children:[l.jsx(r2,{className:"h-10 w-10 text-gray-400 mb-4"}),l.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:d?`${s("label.file")}: ${d.name} (${(d.size/1024/1024).toFixed(2)} MB)`:s("message.no.model")}),l.jsx("input",{type:"file",ref:u,className:"hidden",accept:".stp,.step,.stl,.dxf,.dwg",onChange:A}),l.jsx(ye,{onClick:E,className:"bg-primary hover:bg-blue-700",children:s("button.upload")})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"STEP (AP203, AP214), STL, DXF, DWG"}),l.jsxs("div",{className:"mt-4 space-y-2",children:[l.jsx(St,{htmlFor:"email",children:s("email")}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(_t,{id:"email",type:"email",value:y,onChange:U=>{const X=U.target.value;v(X),S(!1),w(!1),!X||!X.includes("@")?C(!1):C(!0)},onBlur:()=>{y&&!(a!=null&&a.email)&&P(y)},placeholder:"email@example.com",disabled:!!(a!=null&&a.email),required:!0}),!(a!=null&&a.email)&&l.jsx(ye,{type:"button",variant:"outline",size:"icon",onClick:()=>P(y),disabled:g||!y||!y.includes("@"),children:g?l.jsx(mn,{className:"h-4 w-4 animate-spin"}):l.jsx("span",{className:"text-xs font-medium",children:"Check"})})]}),l.jsx("p",{className:"text-xs text-gray-500",children:a!=null&&a.email?s("email_autofilled"):s("email_required")}),b&&_&&!(a!=null&&a.email)&&l.jsxs(Em,{variant:"destructive",className:"mt-2",children:[l.jsx(Mw,{className:"h-4 w-4"}),l.jsx(Mm,{children:s("warning")}),l.jsxs(Tm,{children:[l.jsx("p",{children:s("email_exists_warning")||"This email already exists in our system."}),l.jsx("div",{className:"mt-2",children:l.jsx(ye,{size:"sm",onClick:()=>c("/auth"),className:"mr-2",children:s("login_button")||"Log in"})})]})]})]}),l.jsxs(Gs,{className:"mt-4",children:[l.jsx(ye,{variant:"outline",onClick:$,children:s("button.cancel")}),l.jsx(ye,{disabled:!d||!y||M||g||b&&_&&!(a!=null&&a.email),onClick:j,className:"bg-primary hover:bg-blue-700",children:M||g?l.jsxs(l.Fragment,{children:[l.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),s("checking")]}):s("button.upload")})]})]})]})})}function ef({onSuccess:t,onError:e}={}){const n=Sl(),[r,i]=x.useState(0),{mutate:s,isPending:a}=hr({mutationFn:async u=>{const{file:d,url:f}=u,h=new FormData;return h.append("file",d),new Promise((m,y)=>{const v=new XMLHttpRequest;v.upload.addEventListener("progress",g=>{if(g.lengthComputable){const p=Math.round(g.loaded/g.total*100);i(p)}}),v.addEventListener("load",()=>{if(v.status>=200&&v.status<300)try{const g=JSON.parse(v.responseText);m(g)}catch{y(new Error("Invalid response format"))}else y(new Error(`Upload failed with status: ${v.status}`))}),v.addEventListener("error",()=>{y(new Error("Upload failed"))}),v.addEventListener("abort",()=>{y(new Error("Upload aborted"))}),v.open("POST",f),v.send(h)})},onSuccess:u=>{n.invalidateQueries({queryKey:["/api/models"]}),n.invalidateQueries({queryKey:["/api/client/models"]}),i(100),t&&t(u)},onError:u=>{i(0),e&&e(u)}});return{upload:(u,d)=>{s({file:u,url:d})},isUploading:a,uploadProgress:r,reset:()=>{i(0)}}}function lM(){const{language:t,t:e}=on(),[n,r]=kn(),[i]=Cc("/");x.useEffect(()=>{if(i&&n==="/"){const m=window.location.search;r(`/${t}${m}`)}},[i,t,n]);const[s,a]=x.useState(!1);x.useState("info");const[o,c]=x.useState(null);x.useEffect(()=>{const y=new URLSearchParams(window.location.search).get("id");y&&c(parseInt(y,10))},[n]);const{isUploading:u,uploadProgress:d,upload:f}=ef({onSuccess:m=>{c(m.id),a(!1),Ux({title:e("uploadProgress",{percent:"100"}),description:m.filename,duration:3e3})},onError:m=>{Ux({title:e("uploadError","Upload failed"),description:m.message,variant:"destructive",duration:5e3})}}),h=!!o;return l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>a(!0)}),l.jsx("main",{className:"flex-grow flex flex-col lg:flex-row",children:l.jsx("section",{className:"flex-grow bg-gray-50 relative h-[500px] lg:h-auto",children:h?l.jsx(Lg,{modelId:o}):l.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6",children:l.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-8 max-w-2xl w-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"flex justify-center mb-6",children:l.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(yV,{className:"w-8 h-8 text-blue-600"})})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:e("app_title","Profesjonalna Przeglądarka Plików CAD")}),l.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:e("app_description","Całkowicie bezpłatna platforma do przeglądania plików CAD. Przechoduj modele STL, STEP, DXF i DWG bezpośrednio w przeglądarce. Udostępniaj pliki zabezpieczone hasłem i przeglądaj modele CAD z dowolnego miejsca.")}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-green-600 font-bold text-sm",children:"✓"})}),l.jsx("span",{className:"text-gray-700 font-medium",children:"Całkowicie bezpłatnie"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-green-600 font-bold text-sm",children:"✓"})}),l.jsx("span",{className:"text-gray-700 font-medium",children:"Przechowuj pliki CAD"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-green-600 font-bold text-sm",children:"✓"})}),l.jsx("span",{className:"text-gray-700 font-medium",children:"Udostępniaj zabezpieczone hasłem"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-green-600 font-bold text-sm",children:"✓"})}),l.jsx("span",{className:"text-gray-700 font-medium",children:"Przeglądaj modele CAD"})]})]}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:e("supported_formats","Obsługiwane Formaty")}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[l.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"STL"}),l.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"STEP"}),l.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:"DXF"}),l.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:"DWG"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(ye,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2",size:"lg",children:[l.jsx(Xx,{className:"mr-2 h-5 w-5"}),l.jsx("span",{children:e("upload_file","Upload File")})]}),l.jsxs(ye,{variant:"outline",size:"lg",onClick:()=>r("/cad-library"),children:[l.jsx(dm,{className:"mr-2 h-5 w-5"}),l.jsx("span",{children:e("library.title")})]})]})]})})})})}),l.jsx(Ws,{}),l.jsx($L,{isOpen:s,onClose:()=>a(!1),isUploading:u,uploadProgress:d,onUpload:m=>{var g;const y=(g=m.name.split(".").pop())==null?void 0:g.toLowerCase();let v="/api/models/upload";y==="stl"?v="/api/models/upload-stl":(y==="dxf"||y==="dwg")&&(v="/api/models/upload-cad"),f(m,v)}})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ob="175",Dc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},v$=0,cM=1,y$=2,qL=1,x$=2,Ds=3,oo=0,kr=1,as=2,Ya=0,kc=1,uM=2,dM=3,fM=4,_$=5,Io=100,w$=101,b$=102,S$=103,E$=104,M$=200,T$=201,C$=202,A$=203,r_=204,i_=205,N$=206,P$=207,R$=208,D$=209,k$=210,L$=211,I$=212,j$=213,z$=214,s_=0,a_=1,o_=2,cu=3,l_=4,c_=5,u_=6,d_=7,XL=0,O$=1,F$=2,Qa=0,U$=1,B$=2,V$=3,H$=4,G$=5,W$=6,$$=7,ZL=300,uu=301,du=302,f_=303,h_=304,jg=306,p_=1e3,Bo=1001,m_=1002,Ui=1003,q$=1004,Ah=1005,os=1006,Xv=1007,Vo=1008,na=1009,KL=1010,YL=1011,tf=1012,lb=1013,pl=1014,Fs=1015,Vf=1016,cb=1017,ub=1018,nf=1020,QL=35902,JL=1021,eI=1022,Di=1023,tI=1024,nI=1025,rf=1026,sf=1027,rI=1028,db=1029,iI=1030,fb=1031,hb=1033,Ap=33776,Np=33777,Pp=33778,Rp=33779,g_=35840,v_=35841,y_=35842,x_=35843,__=36196,w_=37492,b_=37496,S_=37808,E_=37809,M_=37810,T_=37811,C_=37812,A_=37813,N_=37814,P_=37815,R_=37816,D_=37817,k_=37818,L_=37819,I_=37820,j_=37821,Dp=36492,z_=36494,O_=36495,sI=36283,F_=36284,U_=36285,B_=36286,X$=3200,Z$=3201,aI=0,K$=1,Ea="",Hr="srgb",fu="srgb-linear",Cm="linear",Gt="srgb",Ul=7680,hM=519,Y$=512,Q$=513,J$=514,oI=515,e9=516,t9=517,n9=518,r9=519,V_=35044,pM="300 es",Us=2e3,Am=2001;class Nl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const Yn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mM=1234567;const Lc=Math.PI/180,af=180/Math.PI;function $s(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Yn[t&255]+Yn[t>>8&255]+Yn[t>>16&255]+Yn[t>>24&255]+"-"+Yn[e&255]+Yn[e>>8&255]+"-"+Yn[e>>16&15|64]+Yn[e>>24&255]+"-"+Yn[n&63|128]+Yn[n>>8&255]+"-"+Yn[n>>16&255]+Yn[n>>24&255]+Yn[r&255]+Yn[r>>8&255]+Yn[r>>16&255]+Yn[r>>24&255]).toLowerCase()}function xt(t,e,n){return Math.max(e,Math.min(n,t))}function pb(t,e){return(t%e+e)%e}function i9(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function s9(t,e,n){return t!==e?(n-t)/(e-t):0}function Td(t,e,n){return(1-n)*t+n*e}function a9(t,e,n,r){return Td(t,e,1-Math.exp(-n*r))}function o9(t,e=1){return e-Math.abs(pb(t,e*2)-e)}function l9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function c9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function u9(t,e){return t+Math.floor(Math.random()*(e-t+1))}function d9(t,e){return t+Math.random()*(e-t)}function f9(t){return t*(.5-Math.random())}function h9(t){t!==void 0&&(mM=t);let e=mM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function p9(t){return t*Lc}function m9(t){return t*af}function g9(t){return(t&t-1)===0&&t!==0}function v9(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function y9(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function x9(t,e,n,r,i){const s=Math.cos,a=Math.sin,o=s(n/2),c=a(n/2),u=s((e+r)/2),d=a((e+r)/2),f=s((e-r)/2),h=a((e-r)/2),m=s((r-e)/2),y=a((r-e)/2);switch(i){case"XYX":t.set(o*d,c*f,c*h,o*u);break;case"YZY":t.set(c*h,o*d,c*f,o*u);break;case"ZXZ":t.set(c*f,c*h,o*d,o*u);break;case"XZX":t.set(o*d,c*y,c*m,o*u);break;case"YXY":t.set(c*m,o*d,c*y,o*u);break;case"ZYZ":t.set(c*y,c*m,o*d,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Pi(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Bt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const _9={DEG2RAD:Lc,RAD2DEG:af,generateUUID:$s,clamp:xt,euclideanModulo:pb,mapLinear:i9,inverseLerp:s9,lerp:Td,damp:a9,pingpong:o9,smoothstep:l9,smootherstep:c9,randInt:u9,randFloat:d9,randFloatSpread:f9,seededRandom:h9,degToRad:p9,radToDeg:m9,isPowerOfTwo:g9,ceilPowerOfTwo:v9,floorPowerOfTwo:y9,setQuaternionFromProperEuler:x9,normalize:Bt,denormalize:Pi};class nt{constructor(e=0,n=0){nt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=xt(this.x,e.x,n.x),this.y=xt(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=xt(this.x,e,n),this.y=xt(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(xt(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(xt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ht{constructor(e,n,r,i,s,a,o,c,u){ht.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,c,u)}set(e,n,r,i,s,a,o,c,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=o,d[3]=n,d[4]=s,d[5]=c,d[6]=r,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[3],c=r[6],u=r[1],d=r[4],f=r[7],h=r[2],m=r[5],y=r[8],v=i[0],g=i[3],p=i[6],_=i[1],w=i[4],b=i[7],S=i[2],M=i[5],C=i[8];return s[0]=a*v+o*_+c*S,s[3]=a*g+o*w+c*M,s[6]=a*p+o*b+c*C,s[1]=u*v+d*_+f*S,s[4]=u*g+d*w+f*M,s[7]=u*p+d*b+f*C,s[2]=h*v+m*_+y*S,s[5]=h*g+m*w+y*M,s[8]=h*p+m*b+y*C,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],c=e[6],u=e[7],d=e[8];return n*a*d-n*o*u-r*s*d+r*o*c+i*s*u-i*a*c}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],c=e[6],u=e[7],d=e[8],f=d*a-o*u,h=o*c-d*s,m=u*s-a*c,y=n*f+r*h+i*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/y;return e[0]=f*v,e[1]=(i*u-d*r)*v,e[2]=(o*r-i*a)*v,e[3]=h*v,e[4]=(d*n-i*c)*v,e[5]=(i*s-o*n)*v,e[6]=m*v,e[7]=(r*c-u*n)*v,e[8]=(a*n-r*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,o){const c=Math.cos(s),u=Math.sin(s);return this.set(r*c,r*u,-r*(c*a+u*o)+a+e,-i*u,i*c,-i*(-u*a+c*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(Zv.makeScale(e,n)),this}rotate(e){return this.premultiply(Zv.makeRotation(-e)),this}translate(e,n){return this.premultiply(Zv.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Zv=new ht;function lI(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Nm(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function w9(){const t=Nm("canvas");return t.style.display="block",t}const gM={};function kp(t){t in gM||(gM[t]=!0,console.warn(t))}function b9(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function S9(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function E9(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const vM=new ht().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),yM=new ht().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function M9(){const t={enabled:!0,workingColorSpace:fu,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Gt&&(i.r=qs(i.r),i.g=qs(i.g),i.b=qs(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Gt&&(i.r=Ic(i.r),i.g=Ic(i.g),i.b=Ic(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Ea?Cm:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[fu]:{primaries:e,whitePoint:r,transfer:Cm,toXYZ:vM,fromXYZ:yM,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Hr},outputColorSpaceConfig:{drawingBufferColorSpace:Hr}},[Hr]:{primaries:e,whitePoint:r,transfer:Gt,toXYZ:vM,fromXYZ:yM,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Hr}}}),t}const kt=M9();function qs(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Ic(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Bl;class T9{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Bl===void 0&&(Bl=Nm("canvas")),Bl.width=e.width,Bl.height=e.height;const i=Bl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Bl}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Nm("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=qs(s[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(qs(n[r]/255)*255):n[r]=qs(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let C9=0;class mb{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:C9++}),this.uuid=$s(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(Kv(i[a].image)):s.push(Kv(i[a]))}else s=Kv(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function Kv(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?T9.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let A9=0;class yr extends Nl{constructor(e=yr.DEFAULT_IMAGE,n=yr.DEFAULT_MAPPING,r=Bo,i=Bo,s=os,a=Vo,o=Di,c=na,u=yr.DEFAULT_ANISOTROPY,d=Ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:A9++}),this.uuid=$s(),this.name="",this.source=new mb(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=c,this.offset=new nt(0,0),this.repeat=new nt(1,1),this.center=new nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ZL)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case p_:e.x=e.x-Math.floor(e.x);break;case Bo:e.x=e.x<0?0:1;break;case m_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case p_:e.y=e.y-Math.floor(e.y);break;case Bo:e.y=e.y<0?0:1;break;case m_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}yr.DEFAULT_IMAGE=null;yr.DEFAULT_MAPPING=ZL;yr.DEFAULT_ANISOTROPY=1;class pn{constructor(e=0,n=0,r=0,i=1){pn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const c=e.elements,u=c[0],d=c[4],f=c[8],h=c[1],m=c[5],y=c[9],v=c[2],g=c[6],p=c[10];if(Math.abs(d-h)<.01&&Math.abs(f-v)<.01&&Math.abs(y-g)<.01){if(Math.abs(d+h)<.1&&Math.abs(f+v)<.1&&Math.abs(y+g)<.1&&Math.abs(u+m+p-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(u+1)/2,b=(m+1)/2,S=(p+1)/2,M=(d+h)/4,C=(f+v)/4,P=(y+g)/4;return w>b&&w>S?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=M/r,s=C/r):b>S?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=M/i,s=P/i):S<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(S),r=C/s,i=P/s),this.set(r,i,s,n),this}let _=Math.sqrt((g-y)*(g-y)+(f-v)*(f-v)+(h-d)*(h-d));return Math.abs(_)<.001&&(_=1),this.x=(g-y)/_,this.y=(f-v)/_,this.z=(h-d)/_,this.w=Math.acos((u+m+p-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=xt(this.x,e.x,n.x),this.y=xt(this.y,e.y,n.y),this.z=xt(this.z,e.z,n.z),this.w=xt(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=xt(this.x,e,n),this.y=xt(this.y,e,n),this.z=xt(this.z,e,n),this.w=xt(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(xt(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class N9 extends Nl{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new pn(0,0,e,n),this.scissorTest=!1,this.viewport=new pn(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:os,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new yr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const a=r.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new mb(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ml extends N9{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class cI extends yr{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ui,this.minFilter=Ui,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class P9 extends yr{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ui,this.minFilter=Ui,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gl{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,a,o){let c=r[i+0],u=r[i+1],d=r[i+2],f=r[i+3];const h=s[a+0],m=s[a+1],y=s[a+2],v=s[a+3];if(o===0){e[n+0]=c,e[n+1]=u,e[n+2]=d,e[n+3]=f;return}if(o===1){e[n+0]=h,e[n+1]=m,e[n+2]=y,e[n+3]=v;return}if(f!==v||c!==h||u!==m||d!==y){let g=1-o;const p=c*h+u*m+d*y+f*v,_=p>=0?1:-1,w=1-p*p;if(w>Number.EPSILON){const S=Math.sqrt(w),M=Math.atan2(S,p*_);g=Math.sin(g*M)/S,o=Math.sin(o*M)/S}const b=o*_;if(c=c*g+h*b,u=u*g+m*b,d=d*g+y*b,f=f*g+v*b,g===1-o){const S=1/Math.sqrt(c*c+u*u+d*d+f*f);c*=S,u*=S,d*=S,f*=S}}e[n]=c,e[n+1]=u,e[n+2]=d,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,a){const o=r[i],c=r[i+1],u=r[i+2],d=r[i+3],f=s[a],h=s[a+1],m=s[a+2],y=s[a+3];return e[n]=o*y+d*f+c*m-u*h,e[n+1]=c*y+d*h+u*f-o*m,e[n+2]=u*y+d*m+o*h-c*f,e[n+3]=d*y-o*f-c*h-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,c=Math.sin,u=o(r/2),d=o(i/2),f=o(s/2),h=c(r/2),m=c(i/2),y=c(s/2);switch(a){case"XYZ":this._x=h*d*f+u*m*y,this._y=u*m*f-h*d*y,this._z=u*d*y+h*m*f,this._w=u*d*f-h*m*y;break;case"YXZ":this._x=h*d*f+u*m*y,this._y=u*m*f-h*d*y,this._z=u*d*y-h*m*f,this._w=u*d*f+h*m*y;break;case"ZXY":this._x=h*d*f-u*m*y,this._y=u*m*f+h*d*y,this._z=u*d*y+h*m*f,this._w=u*d*f-h*m*y;break;case"ZYX":this._x=h*d*f-u*m*y,this._y=u*m*f+h*d*y,this._z=u*d*y-h*m*f,this._w=u*d*f+h*m*y;break;case"YZX":this._x=h*d*f+u*m*y,this._y=u*m*f+h*d*y,this._z=u*d*y-h*m*f,this._w=u*d*f-h*m*y;break;case"XZY":this._x=h*d*f-u*m*y,this._y=u*m*f-h*d*y,this._z=u*d*y+h*m*f,this._w=u*d*f+h*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],c=n[9],u=n[2],d=n[6],f=n[10],h=r+o+f;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(d-c)*m,this._y=(s-u)*m,this._z=(a-i)*m}else if(r>o&&r>f){const m=2*Math.sqrt(1+r-o-f);this._w=(d-c)/m,this._x=.25*m,this._y=(i+a)/m,this._z=(s+u)/m}else if(o>f){const m=2*Math.sqrt(1+o-r-f);this._w=(s-u)/m,this._x=(i+a)/m,this._y=.25*m,this._z=(c+d)/m}else{const m=2*Math.sqrt(1+f-r-o);this._w=(a-i)/m,this._x=(s+u)/m,this._y=(c+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xt(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,a=e._w,o=n._x,c=n._y,u=n._z,d=n._w;return this._x=r*d+a*o+i*u-s*c,this._y=i*d+a*c+s*o-r*u,this._z=s*d+a*u+r*c-i*o,this._w=a*d-r*o-i*c-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const c=1-o*o;if(c<=Number.EPSILON){const m=1-n;return this._w=m*a+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,o),f=Math.sin((1-n)*d)/u,h=Math.sin(n*d)/u;return this._w=a*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,n=0,r=0){K.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(xM.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(xM.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,c=e.w,u=2*(a*i-o*r),d=2*(o*n-s*i),f=2*(s*r-a*n);return this.x=n+c*u+a*f-o*d,this.y=r+c*d+o*u-s*f,this.z=i+c*f+s*d-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=xt(this.x,e.x,n.x),this.y=xt(this.y,e.y,n.y),this.z=xt(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=xt(this.x,e,n),this.y=xt(this.y,e,n),this.z=xt(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(xt(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,a=n.x,o=n.y,c=n.z;return this.x=i*c-s*o,this.y=s*a-r*c,this.z=r*o-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Yv.copy(this).projectOnVector(e),this.sub(Yv)}reflect(e){return this.sub(Yv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(xt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yv=new K,xM=new gl;class Pl{constructor(e=new K(1/0,1/0,1/0),n=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(wi.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(wi.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=wi.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,wi):wi.fromBufferAttribute(s,a),wi.applyMatrix4(e.matrixWorld),this.expandByPoint(wi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Nh.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Nh.copy(r.boundingBox)),Nh.applyMatrix4(e.matrixWorld),this.union(Nh)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,wi),wi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($u),Ph.subVectors(this.max,$u),Vl.subVectors(e.a,$u),Hl.subVectors(e.b,$u),Gl.subVectors(e.c,$u),da.subVectors(Hl,Vl),fa.subVectors(Gl,Hl),Mo.subVectors(Vl,Gl);let n=[0,-da.z,da.y,0,-fa.z,fa.y,0,-Mo.z,Mo.y,da.z,0,-da.x,fa.z,0,-fa.x,Mo.z,0,-Mo.x,-da.y,da.x,0,-fa.y,fa.x,0,-Mo.y,Mo.x,0];return!Qv(n,Vl,Hl,Gl,Ph)||(n=[1,0,0,0,1,0,0,0,1],!Qv(n,Vl,Hl,Gl,Ph))?!1:(Rh.crossVectors(da,fa),n=[Rh.x,Rh.y,Rh.z],Qv(n,Vl,Hl,Gl,Ph))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(wi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Es[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Es[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Es[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Es[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Es[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Es[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Es[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Es[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Es),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Es=[new K,new K,new K,new K,new K,new K,new K,new K],wi=new K,Nh=new Pl,Vl=new K,Hl=new K,Gl=new K,da=new K,fa=new K,Mo=new K,$u=new K,Ph=new K,Rh=new K,To=new K;function Qv(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){To.fromArray(t,s);const o=i.x*Math.abs(To.x)+i.y*Math.abs(To.y)+i.z*Math.abs(To.z),c=e.dot(To),u=n.dot(To),d=r.dot(To);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>o)return!1}return!0}const R9=new Pl,qu=new K,Jv=new K;class zg{constructor(e=new K,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):R9.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;qu.subVectors(e,this.center);const n=qu.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(qu,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(qu.copy(e.center).add(Jv)),this.expandByPoint(qu.copy(e.center).sub(Jv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ms=new K,ey=new K,Dh=new K,ha=new K,ty=new K,kh=new K,ny=new K;class Og{constructor(e=new K,n=new K(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ms)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ms.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ms.copy(this.origin).addScaledVector(this.direction,n),Ms.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){ey.copy(e).add(n).multiplyScalar(.5),Dh.copy(n).sub(e).normalize(),ha.copy(this.origin).sub(ey);const s=e.distanceTo(n)*.5,a=-this.direction.dot(Dh),o=ha.dot(this.direction),c=-ha.dot(Dh),u=ha.lengthSq(),d=Math.abs(1-a*a);let f,h,m,y;if(d>0)if(f=a*c-o,h=a*o-c,y=s*d,f>=0)if(h>=-y)if(h<=y){const v=1/d;f*=v,h*=v,m=f*(f+a*h+2*o)+h*(a*f+h+2*c)+u}else h=s,f=Math.max(0,-(a*h+o)),m=-f*f+h*(h+2*c)+u;else h=-s,f=Math.max(0,-(a*h+o)),m=-f*f+h*(h+2*c)+u;else h<=-y?(f=Math.max(0,-(-a*s+o)),h=f>0?-s:Math.min(Math.max(-s,-c),s),m=-f*f+h*(h+2*c)+u):h<=y?(f=0,h=Math.min(Math.max(-s,-c),s),m=h*(h+2*c)+u):(f=Math.max(0,-(a*s+o)),h=f>0?s:Math.min(Math.max(-s,-c),s),m=-f*f+h*(h+2*c)+u);else h=a>0?-s:s,f=Math.max(0,-(a*h+o)),m=-f*f+h*(h+2*c)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(ey).addScaledVector(Dh,h),m}intersectSphere(e,n){Ms.subVectors(e.center,this.origin);const r=Ms.dot(this.direction),i=Ms.dot(Ms)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,c=r+a;return c<0?null:o<0?this.at(c,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,a,o,c;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),d>=0?(s=(e.min.y-h.y)*d,a=(e.max.y-h.y)*d):(s=(e.max.y-h.y)*d,a=(e.min.y-h.y)*d),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),f>=0?(o=(e.min.z-h.z)*f,c=(e.max.z-h.z)*f):(o=(e.max.z-h.z)*f,c=(e.min.z-h.z)*f),r>c||o>i)||((o>r||r!==r)&&(r=o),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Ms)!==null}intersectTriangle(e,n,r,i,s){ty.subVectors(n,e),kh.subVectors(r,e),ny.crossVectors(ty,kh);let a=this.direction.dot(ny),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;ha.subVectors(this.origin,e);const c=o*this.direction.dot(kh.crossVectors(ha,kh));if(c<0)return null;const u=o*this.direction.dot(ty.cross(ha));if(u<0||c+u>a)return null;const d=-o*ha.dot(ny);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yt{constructor(e,n,r,i,s,a,o,c,u,d,f,h,m,y,v,g){Yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,c,u,d,f,h,m,y,v,g)}set(e,n,r,i,s,a,o,c,u,d,f,h,m,y,v,g){const p=this.elements;return p[0]=e,p[4]=n,p[8]=r,p[12]=i,p[1]=s,p[5]=a,p[9]=o,p[13]=c,p[2]=u,p[6]=d,p[10]=f,p[14]=h,p[3]=m,p[7]=y,p[11]=v,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yt().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Wl.setFromMatrixColumn(e,0).length(),s=1/Wl.setFromMatrixColumn(e,1).length(),a=1/Wl.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),c=Math.cos(i),u=Math.sin(i),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=a*d,m=a*f,y=o*d,v=o*f;n[0]=c*d,n[4]=-c*f,n[8]=u,n[1]=m+y*u,n[5]=h-v*u,n[9]=-o*c,n[2]=v-h*u,n[6]=y+m*u,n[10]=a*c}else if(e.order==="YXZ"){const h=c*d,m=c*f,y=u*d,v=u*f;n[0]=h+v*o,n[4]=y*o-m,n[8]=a*u,n[1]=a*f,n[5]=a*d,n[9]=-o,n[2]=m*o-y,n[6]=v+h*o,n[10]=a*c}else if(e.order==="ZXY"){const h=c*d,m=c*f,y=u*d,v=u*f;n[0]=h-v*o,n[4]=-a*f,n[8]=y+m*o,n[1]=m+y*o,n[5]=a*d,n[9]=v-h*o,n[2]=-a*u,n[6]=o,n[10]=a*c}else if(e.order==="ZYX"){const h=a*d,m=a*f,y=o*d,v=o*f;n[0]=c*d,n[4]=y*u-m,n[8]=h*u+v,n[1]=c*f,n[5]=v*u+h,n[9]=m*u-y,n[2]=-u,n[6]=o*c,n[10]=a*c}else if(e.order==="YZX"){const h=a*c,m=a*u,y=o*c,v=o*u;n[0]=c*d,n[4]=v-h*f,n[8]=y*f+m,n[1]=f,n[5]=a*d,n[9]=-o*d,n[2]=-u*d,n[6]=m*f+y,n[10]=h-v*f}else if(e.order==="XZY"){const h=a*c,m=a*u,y=o*c,v=o*u;n[0]=c*d,n[4]=-f,n[8]=u*d,n[1]=h*f+v,n[5]=a*d,n[9]=m*f-y,n[2]=y*f-m,n[6]=o*d,n[10]=v*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(D9,e,k9)}lookAt(e,n,r){const i=this.elements;return Fr.subVectors(e,n),Fr.lengthSq()===0&&(Fr.z=1),Fr.normalize(),pa.crossVectors(r,Fr),pa.lengthSq()===0&&(Math.abs(r.z)===1?Fr.x+=1e-4:Fr.z+=1e-4,Fr.normalize(),pa.crossVectors(r,Fr)),pa.normalize(),Lh.crossVectors(Fr,pa),i[0]=pa.x,i[4]=Lh.x,i[8]=Fr.x,i[1]=pa.y,i[5]=Lh.y,i[9]=Fr.y,i[2]=pa.z,i[6]=Lh.z,i[10]=Fr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[4],c=r[8],u=r[12],d=r[1],f=r[5],h=r[9],m=r[13],y=r[2],v=r[6],g=r[10],p=r[14],_=r[3],w=r[7],b=r[11],S=r[15],M=i[0],C=i[4],P=i[8],A=i[12],E=i[1],L=i[5],O=i[9],k=i[13],j=i[2],$=i[6],U=i[10],X=i[14],z=i[3],V=i[7],ee=i[11],de=i[15];return s[0]=a*M+o*E+c*j+u*z,s[4]=a*C+o*L+c*$+u*V,s[8]=a*P+o*O+c*U+u*ee,s[12]=a*A+o*k+c*X+u*de,s[1]=d*M+f*E+h*j+m*z,s[5]=d*C+f*L+h*$+m*V,s[9]=d*P+f*O+h*U+m*ee,s[13]=d*A+f*k+h*X+m*de,s[2]=y*M+v*E+g*j+p*z,s[6]=y*C+v*L+g*$+p*V,s[10]=y*P+v*O+g*U+p*ee,s[14]=y*A+v*k+g*X+p*de,s[3]=_*M+w*E+b*j+S*z,s[7]=_*C+w*L+b*$+S*V,s[11]=_*P+w*O+b*U+S*ee,s[15]=_*A+w*k+b*X+S*de,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],c=e[9],u=e[13],d=e[2],f=e[6],h=e[10],m=e[14],y=e[3],v=e[7],g=e[11],p=e[15];return y*(+s*c*f-i*u*f-s*o*h+r*u*h+i*o*m-r*c*m)+v*(+n*c*m-n*u*h+s*a*h-i*a*m+i*u*d-s*c*d)+g*(+n*u*f-n*o*m-s*a*f+r*a*m+s*o*d-r*u*d)+p*(-i*o*d-n*c*f+n*o*h+i*a*f-r*a*h+r*c*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],m=e[11],y=e[12],v=e[13],g=e[14],p=e[15],_=f*g*u-v*h*u+v*c*m-o*g*m-f*c*p+o*h*p,w=y*h*u-d*g*u-y*c*m+a*g*m+d*c*p-a*h*p,b=d*v*u-y*f*u+y*o*m-a*v*m-d*o*p+a*f*p,S=y*f*c-d*v*c-y*o*h+a*v*h+d*o*g-a*f*g,M=n*_+r*w+i*b+s*S;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/M;return e[0]=_*C,e[1]=(v*h*s-f*g*s-v*i*m+r*g*m+f*i*p-r*h*p)*C,e[2]=(o*g*s-v*c*s+v*i*u-r*g*u-o*i*p+r*c*p)*C,e[3]=(f*c*s-o*h*s-f*i*u+r*h*u+o*i*m-r*c*m)*C,e[4]=w*C,e[5]=(d*g*s-y*h*s+y*i*m-n*g*m-d*i*p+n*h*p)*C,e[6]=(y*c*s-a*g*s-y*i*u+n*g*u+a*i*p-n*c*p)*C,e[7]=(a*h*s-d*c*s+d*i*u-n*h*u-a*i*m+n*c*m)*C,e[8]=b*C,e[9]=(y*f*s-d*v*s-y*r*m+n*v*m+d*r*p-n*f*p)*C,e[10]=(a*v*s-y*o*s+y*r*u-n*v*u-a*r*p+n*o*p)*C,e[11]=(d*o*s-a*f*s-d*r*u+n*f*u+a*r*m-n*o*m)*C,e[12]=S*C,e[13]=(d*v*i-y*f*i+y*r*h-n*v*h-d*r*g+n*f*g)*C,e[14]=(y*o*i-a*v*i-y*r*c+n*v*c+a*r*g-n*o*g)*C,e[15]=(a*f*i-d*o*i+d*r*c-n*f*c-a*r*h+n*o*h)*C,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,o=e.y,c=e.z,u=s*a,d=s*o;return this.set(u*a+r,u*o-i*c,u*c+i*o,0,u*o+i*c,d*o+r,d*c-i*a,0,u*c-i*o,d*c+i*a,s*c*c+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,a=n._y,o=n._z,c=n._w,u=s+s,d=a+a,f=o+o,h=s*u,m=s*d,y=s*f,v=a*d,g=a*f,p=o*f,_=c*u,w=c*d,b=c*f,S=r.x,M=r.y,C=r.z;return i[0]=(1-(v+p))*S,i[1]=(m+b)*S,i[2]=(y-w)*S,i[3]=0,i[4]=(m-b)*M,i[5]=(1-(h+p))*M,i[6]=(g+_)*M,i[7]=0,i[8]=(y+w)*C,i[9]=(g-_)*C,i[10]=(1-(h+v))*C,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Wl.set(i[0],i[1],i[2]).length();const a=Wl.set(i[4],i[5],i[6]).length(),o=Wl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],bi.copy(this);const u=1/s,d=1/a,f=1/o;return bi.elements[0]*=u,bi.elements[1]*=u,bi.elements[2]*=u,bi.elements[4]*=d,bi.elements[5]*=d,bi.elements[6]*=d,bi.elements[8]*=f,bi.elements[9]*=f,bi.elements[10]*=f,n.setFromRotationMatrix(bi),r.x=s,r.y=a,r.z=o,this}makePerspective(e,n,r,i,s,a,o=Us){const c=this.elements,u=2*s/(n-e),d=2*s/(r-i),f=(n+e)/(n-e),h=(r+i)/(r-i);let m,y;if(o===Us)m=-(a+s)/(a-s),y=-2*a*s/(a-s);else if(o===Am)m=-a/(a-s),y=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=m,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,r,i,s,a,o=Us){const c=this.elements,u=1/(n-e),d=1/(r-i),f=1/(a-s),h=(n+e)*u,m=(r+i)*d;let y,v;if(o===Us)y=(a+s)*f,v=-2*f;else if(o===Am)y=s*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-m,c[2]=0,c[6]=0,c[10]=v,c[14]=-y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Wl=new K,bi=new Yt,D9=new K(0,0,0),k9=new K(1,1,1),pa=new K,Lh=new K,Fr=new K,_M=new Yt,wM=new gl;class ys{constructor(e=0,n=0,r=0,i=ys.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],c=i[1],u=i[5],d=i[9],f=i[2],h=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(xt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-xt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(xt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-xt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(xt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-xt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return _M.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_M,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return wM.setFromEuler(this),this.setFromQuaternion(wM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ys.DEFAULT_ORDER="XYZ";class gb{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let L9=0;const bM=new K,$l=new gl,Ts=new Yt,Ih=new K,Xu=new K,I9=new K,j9=new gl,SM=new K(1,0,0),EM=new K(0,1,0),MM=new K(0,0,1),TM={type:"added"},z9={type:"removed"},ql={type:"childadded",child:null},ry={type:"childremoved",child:null};class Un extends Nl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:L9++}),this.uuid=$s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Un.DEFAULT_UP.clone();const e=new K,n=new ys,r=new gl,i=new K(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Yt},normalMatrix:{value:new ht}}),this.matrix=new Yt,this.matrixWorld=new Yt,this.matrixAutoUpdate=Un.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return $l.setFromAxisAngle(e,n),this.quaternion.multiply($l),this}rotateOnWorldAxis(e,n){return $l.setFromAxisAngle(e,n),this.quaternion.premultiply($l),this}rotateX(e){return this.rotateOnAxis(SM,e)}rotateY(e){return this.rotateOnAxis(EM,e)}rotateZ(e){return this.rotateOnAxis(MM,e)}translateOnAxis(e,n){return bM.copy(e).applyQuaternion(this.quaternion),this.position.add(bM.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(SM,e)}translateY(e){return this.translateOnAxis(EM,e)}translateZ(e){return this.translateOnAxis(MM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ts.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Ih.copy(e):Ih.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Xu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ts.lookAt(Xu,Ih,this.up):Ts.lookAt(Ih,Xu,this.up),this.quaternion.setFromRotationMatrix(Ts),i&&(Ts.extractRotation(i.matrixWorld),$l.setFromRotationMatrix(Ts),this.quaternion.premultiply($l.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(TM),ql.child=e,this.dispatchEvent(ql),ql.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(z9),ry.child=e,this.dispatchEvent(ry),ry.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ts.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ts.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ts),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(TM),ql.child=e,this.dispatchEvent(ql),ql.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xu,e,I9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xu,j9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const f=c[u];s(e.shapes,f)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,u=this.material.length;c<u;c++)o.push(s(e.materials,this.material[c]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];i.animations.push(s(e.animations,c))}}if(n){const o=a(e.geometries),c=a(e.materials),u=a(e.textures),d=a(e.images),f=a(e.shapes),h=a(e.skeletons),m=a(e.animations),y=a(e.nodes);o.length>0&&(r.geometries=o),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),m.length>0&&(r.animations=m),y.length>0&&(r.nodes=y)}return r.object=i,r;function a(o){const c=[];for(const u in o){const d=o[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Un.DEFAULT_UP=new K(0,1,0);Un.DEFAULT_MATRIX_AUTO_UPDATE=!0;Un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Si=new K,Cs=new K,iy=new K,As=new K,Xl=new K,Zl=new K,CM=new K,sy=new K,ay=new K,oy=new K,ly=new pn,cy=new pn,uy=new pn;class qr{constructor(e=new K,n=new K,r=new K){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Si.subVectors(e,n),i.cross(Si);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Si.subVectors(i,n),Cs.subVectors(r,n),iy.subVectors(e,n);const a=Si.dot(Si),o=Si.dot(Cs),c=Si.dot(iy),u=Cs.dot(Cs),d=Cs.dot(iy),f=a*u-o*o;if(f===0)return s.set(0,0,0),null;const h=1/f,m=(u*c-o*d)*h,y=(a*d-o*c)*h;return s.set(1-m-y,y,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,As)===null?!1:As.x>=0&&As.y>=0&&As.x+As.y<=1}static getInterpolation(e,n,r,i,s,a,o,c){return this.getBarycoord(e,n,r,i,As)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,As.x),c.addScaledVector(a,As.y),c.addScaledVector(o,As.z),c)}static getInterpolatedAttribute(e,n,r,i,s,a){return ly.setScalar(0),cy.setScalar(0),uy.setScalar(0),ly.fromBufferAttribute(e,n),cy.fromBufferAttribute(e,r),uy.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(ly,s.x),a.addScaledVector(cy,s.y),a.addScaledVector(uy,s.z),a}static isFrontFacing(e,n,r,i){return Si.subVectors(r,n),Cs.subVectors(e,n),Si.cross(Cs).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Si.subVectors(this.c,this.b),Cs.subVectors(this.a,this.b),Si.cross(Cs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return qr.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return qr.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return qr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let a,o;Xl.subVectors(i,r),Zl.subVectors(s,r),sy.subVectors(e,r);const c=Xl.dot(sy),u=Zl.dot(sy);if(c<=0&&u<=0)return n.copy(r);ay.subVectors(e,i);const d=Xl.dot(ay),f=Zl.dot(ay);if(d>=0&&f<=d)return n.copy(i);const h=c*f-d*u;if(h<=0&&c>=0&&d<=0)return a=c/(c-d),n.copy(r).addScaledVector(Xl,a);oy.subVectors(e,s);const m=Xl.dot(oy),y=Zl.dot(oy);if(y>=0&&m<=y)return n.copy(s);const v=m*u-c*y;if(v<=0&&u>=0&&y<=0)return o=u/(u-y),n.copy(r).addScaledVector(Zl,o);const g=d*y-m*f;if(g<=0&&f-d>=0&&m-y>=0)return CM.subVectors(s,i),o=(f-d)/(f-d+(m-y)),n.copy(i).addScaledVector(CM,o);const p=1/(g+v+h);return a=v*p,o=h*p,n.copy(r).addScaledVector(Xl,a).addScaledVector(Zl,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const uI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ma={h:0,s:0,l:0},jh={h:0,s:0,l:0};function dy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class vt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Hr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,kt.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=kt.workingColorSpace){return this.r=e,this.g=n,this.b=r,kt.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=kt.workingColorSpace){if(e=pb(e,1),n=xt(n,0,1),r=xt(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,a=2*r-s;this.r=dy(a,s,e+1/3),this.g=dy(a,s,e),this.b=dy(a,s,e-1/3)}return kt.toWorkingColorSpace(this,i),this}setStyle(e,n=Hr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Hr){const r=uI[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qs(e.r),this.g=qs(e.g),this.b=qs(e.b),this}copyLinearToSRGB(e){return this.r=Ic(e.r),this.g=Ic(e.g),this.b=Ic(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Hr){return kt.fromWorkingColorSpace(Qn.copy(this),e),Math.round(xt(Qn.r*255,0,255))*65536+Math.round(xt(Qn.g*255,0,255))*256+Math.round(xt(Qn.b*255,0,255))}getHexString(e=Hr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=kt.workingColorSpace){kt.fromWorkingColorSpace(Qn.copy(this),n);const r=Qn.r,i=Qn.g,s=Qn.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let c,u;const d=(o+a)/2;if(o===a)c=0,u=0;else{const f=a-o;switch(u=d<=.5?f/(a+o):f/(2-a-o),a){case r:c=(i-s)/f+(i<s?6:0);break;case i:c=(s-r)/f+2;break;case s:c=(r-i)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,n=kt.workingColorSpace){return kt.fromWorkingColorSpace(Qn.copy(this),n),e.r=Qn.r,e.g=Qn.g,e.b=Qn.b,e}getStyle(e=Hr){kt.fromWorkingColorSpace(Qn.copy(this),e);const n=Qn.r,r=Qn.g,i=Qn.b;return e!==Hr?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(ma),this.setHSL(ma.h+e,ma.s+n,ma.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ma),e.getHSL(jh);const r=Td(ma.h,jh.h,n),i=Td(ma.s,jh.s,n),s=Td(ma.l,jh.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qn=new vt;vt.NAMES=uI;let O9=0;class Rl extends Nl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:O9++}),this.uuid=$s(),this.name="",this.type="Material",this.blending=kc,this.side=oo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=r_,this.blendDst=i_,this.blendEquation=Io,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vt(0,0,0),this.blendAlpha=0,this.depthFunc=cu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=hM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ul,this.stencilZFail=Ul,this.stencilZPass=Ul,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==kc&&(r.blending=this.blending),this.side!==oo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==r_&&(r.blendSrc=this.blendSrc),this.blendDst!==i_&&(r.blendDst=this.blendDst),this.blendEquation!==Io&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==cu&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==hM&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ul&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Ul&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Ul&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const c=s[o];delete c.metadata,a.push(c)}return a}if(n){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ma extends Rl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ys,this.combine=XL,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const bn=new K,zh=new nt;let F9=0;class Lr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:F9++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=V_,this.updateRanges=[],this.gpuType=Fs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)zh.fromBufferAttribute(this,n),zh.applyMatrix3(e),this.setXY(n,zh.x,zh.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)bn.fromBufferAttribute(this,n),bn.applyMatrix3(e),this.setXYZ(n,bn.x,bn.y,bn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)bn.fromBufferAttribute(this,n),bn.applyMatrix4(e),this.setXYZ(n,bn.x,bn.y,bn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)bn.fromBufferAttribute(this,n),bn.applyNormalMatrix(e),this.setXYZ(n,bn.x,bn.y,bn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)bn.fromBufferAttribute(this,n),bn.transformDirection(e),this.setXYZ(n,bn.x,bn.y,bn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Pi(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Bt(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Pi(n,this.array)),n}setX(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Pi(n,this.array)),n}setY(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Pi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Pi(n,this.array)),n}setW(e,n){return this.normalized&&(n=Bt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),r=Bt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),r=Bt(r,this.array),i=Bt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Bt(n,this.array),r=Bt(r,this.array),i=Bt(i,this.array),s=Bt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==V_&&(e.usage=this.usage),e}}class dI extends Lr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class fI extends Lr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class gn extends Lr{constructor(e,n,r){super(new Float32Array(e),n,r)}}let U9=0;const ri=new Yt,fy=new Un,Kl=new K,Ur=new Pl,Zu=new Pl,jn=new K;class En extends Nl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:U9++}),this.uuid=$s(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(lI(e)?fI:dI)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new ht().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ri.makeRotationFromQuaternion(e),this.applyMatrix4(ri),this}rotateX(e){return ri.makeRotationX(e),this.applyMatrix4(ri),this}rotateY(e){return ri.makeRotationY(e),this.applyMatrix4(ri),this}rotateZ(e){return ri.makeRotationZ(e),this.applyMatrix4(ri),this}translate(e,n,r){return ri.makeTranslation(e,n,r),this.applyMatrix4(ri),this}scale(e,n,r){return ri.makeScale(e,n,r),this.applyMatrix4(ri),this}lookAt(e){return fy.lookAt(e),fy.updateMatrix(),this.applyMatrix4(fy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kl).negate(),this.translate(Kl.x,Kl.y,Kl.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new gn(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Ur.setFromBufferAttribute(s),this.morphTargetsRelative?(jn.addVectors(this.boundingBox.min,Ur.min),this.boundingBox.expandByPoint(jn),jn.addVectors(this.boundingBox.max,Ur.max),this.boundingBox.expandByPoint(jn)):(this.boundingBox.expandByPoint(Ur.min),this.boundingBox.expandByPoint(Ur.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zg);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const r=this.boundingSphere.center;if(Ur.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];Zu.setFromBufferAttribute(o),this.morphTargetsRelative?(jn.addVectors(Ur.min,Zu.min),Ur.expandByPoint(jn),jn.addVectors(Ur.max,Zu.max),Ur.expandByPoint(jn)):(Ur.expandByPoint(Zu.min),Ur.expandByPoint(Zu.max))}Ur.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)jn.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(jn));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],c=this.morphTargetsRelative;for(let u=0,d=o.count;u<d;u++)jn.fromBufferAttribute(o,u),c&&(Kl.fromBufferAttribute(e,u),jn.add(Kl)),i=Math.max(i,r.distanceToSquared(jn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Lr(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),o=[],c=[];for(let P=0;P<r.count;P++)o[P]=new K,c[P]=new K;const u=new K,d=new K,f=new K,h=new nt,m=new nt,y=new nt,v=new K,g=new K;function p(P,A,E){u.fromBufferAttribute(r,P),d.fromBufferAttribute(r,A),f.fromBufferAttribute(r,E),h.fromBufferAttribute(s,P),m.fromBufferAttribute(s,A),y.fromBufferAttribute(s,E),d.sub(u),f.sub(u),m.sub(h),y.sub(h);const L=1/(m.x*y.y-y.x*m.y);isFinite(L)&&(v.copy(d).multiplyScalar(y.y).addScaledVector(f,-m.y).multiplyScalar(L),g.copy(f).multiplyScalar(m.x).addScaledVector(d,-y.x).multiplyScalar(L),o[P].add(v),o[A].add(v),o[E].add(v),c[P].add(g),c[A].add(g),c[E].add(g))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let P=0,A=_.length;P<A;++P){const E=_[P],L=E.start,O=E.count;for(let k=L,j=L+O;k<j;k+=3)p(e.getX(k+0),e.getX(k+1),e.getX(k+2))}const w=new K,b=new K,S=new K,M=new K;function C(P){S.fromBufferAttribute(i,P),M.copy(S);const A=o[P];w.copy(A),w.sub(S.multiplyScalar(S.dot(A))).normalize(),b.crossVectors(M,A);const L=b.dot(c[P])<0?-1:1;a.setXYZW(P,w.x,w.y,w.z,L)}for(let P=0,A=_.length;P<A;++P){const E=_[P],L=E.start,O=E.count;for(let k=L,j=L+O;k<j;k+=3)C(e.getX(k+0)),C(e.getX(k+1)),C(e.getX(k+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Lr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,m=r.count;h<m;h++)r.setXYZ(h,0,0,0);const i=new K,s=new K,a=new K,o=new K,c=new K,u=new K,d=new K,f=new K;if(e)for(let h=0,m=e.count;h<m;h+=3){const y=e.getX(h+0),v=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(n,y),s.fromBufferAttribute(n,v),a.fromBufferAttribute(n,g),d.subVectors(a,s),f.subVectors(i,s),d.cross(f),o.fromBufferAttribute(r,y),c.fromBufferAttribute(r,v),u.fromBufferAttribute(r,g),o.add(d),c.add(d),u.add(d),r.setXYZ(y,o.x,o.y,o.z),r.setXYZ(v,c.x,c.y,c.z),r.setXYZ(g,u.x,u.y,u.z)}else for(let h=0,m=n.count;h<m;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),d.subVectors(a,s),f.subVectors(i,s),d.cross(f),r.setXYZ(h+0,d.x,d.y,d.z),r.setXYZ(h+1,d.x,d.y,d.z),r.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)jn.fromBufferAttribute(e,n),jn.normalize(),e.setXYZ(n,jn.x,jn.y,jn.z)}toNonIndexed(){function e(o,c){const u=o.array,d=o.itemSize,f=o.normalized,h=new u.constructor(c.length*d);let m=0,y=0;for(let v=0,g=c.length;v<g;v++){o.isInterleavedBufferAttribute?m=c[v]*o.data.stride+o.offset:m=c[v]*d;for(let p=0;p<d;p++)h[y++]=u[m++]}return new Lr(h,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new En,r=this.index.array,i=this.attributes;for(const o in i){const c=i[o],u=e(c,r);n.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const c=[],u=s[o];for(let d=0,f=u.length;d<f;d++){const h=u[d],m=e(h,r);c.push(m)}n.morphAttributes[o]=c}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,c=a.length;o<c;o++){const u=a[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const c in r){const u=r[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let f=0,h=u.length;f<h;f++){const m=u[f];d.push(m.toJSON(e.data))}d.length>0&&(i[c]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(n))}const s=e.morphAttributes;for(const u in s){const d=[],f=s[u];for(let h=0,m=f.length;h<m;h++)d.push(f[h].clone(n));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,d=a.length;u<d;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const AM=new Yt,Co=new Og,Oh=new zg,NM=new K,Fh=new K,Uh=new K,Bh=new K,hy=new K,Vh=new K,PM=new K,Hh=new K;class On extends Un{constructor(e=new En,n=new Ma){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){Vh.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const d=o[c],f=s[c];d!==0&&(hy.fromBufferAttribute(f,e),a?Vh.addScaledVector(hy,d):Vh.addScaledVector(hy.sub(n),d))}n.add(Vh)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Oh.copy(r.boundingSphere),Oh.applyMatrix4(s),Co.copy(e.ray).recast(e.near),!(Oh.containsPoint(Co.origin)===!1&&(Co.intersectSphere(Oh,NM)===null||Co.origin.distanceToSquared(NM)>(e.far-e.near)**2))&&(AM.copy(s).invert(),Co.copy(e.ray).applyMatrix4(AM),!(r.boundingBox!==null&&Co.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Co)))}_computeIntersections(e,n,r){let i;const s=this.geometry,a=this.material,o=s.index,c=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,h=s.groups,m=s.drawRange;if(o!==null)if(Array.isArray(a))for(let y=0,v=h.length;y<v;y++){const g=h[y],p=a[g.materialIndex],_=Math.max(g.start,m.start),w=Math.min(o.count,Math.min(g.start+g.count,m.start+m.count));for(let b=_,S=w;b<S;b+=3){const M=o.getX(b),C=o.getX(b+1),P=o.getX(b+2);i=Gh(this,p,e,r,u,d,f,M,C,P),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const y=Math.max(0,m.start),v=Math.min(o.count,m.start+m.count);for(let g=y,p=v;g<p;g+=3){const _=o.getX(g),w=o.getX(g+1),b=o.getX(g+2);i=Gh(this,a,e,r,u,d,f,_,w,b),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(c!==void 0)if(Array.isArray(a))for(let y=0,v=h.length;y<v;y++){const g=h[y],p=a[g.materialIndex],_=Math.max(g.start,m.start),w=Math.min(c.count,Math.min(g.start+g.count,m.start+m.count));for(let b=_,S=w;b<S;b+=3){const M=b,C=b+1,P=b+2;i=Gh(this,p,e,r,u,d,f,M,C,P),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const y=Math.max(0,m.start),v=Math.min(c.count,m.start+m.count);for(let g=y,p=v;g<p;g+=3){const _=g,w=g+1,b=g+2;i=Gh(this,a,e,r,u,d,f,_,w,b),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function B9(t,e,n,r,i,s,a,o){let c;if(e.side===kr?c=r.intersectTriangle(a,s,i,!0,o):c=r.intersectTriangle(i,s,a,e.side===oo,o),c===null)return null;Hh.copy(o),Hh.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Hh);return u<n.near||u>n.far?null:{distance:u,point:Hh.clone(),object:t}}function Gh(t,e,n,r,i,s,a,o,c,u){t.getVertexPosition(o,Fh),t.getVertexPosition(c,Uh),t.getVertexPosition(u,Bh);const d=B9(t,e,n,r,Fh,Uh,Bh,PM);if(d){const f=new K;qr.getBarycoord(PM,Fh,Uh,Bh,f),i&&(d.uv=qr.getInterpolatedAttribute(i,o,c,u,f,new nt)),s&&(d.uv1=qr.getInterpolatedAttribute(s,o,c,u,f,new nt)),a&&(d.normal=qr.getInterpolatedAttribute(a,o,c,u,f,new K),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const h={a:o,b:c,c:u,normal:new K,materialIndex:0};qr.getNormal(Fh,Uh,Bh,h.normal),d.face=h,d.barycoord=f}return d}class Dl extends En{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const c=[],u=[],d=[],f=[];let h=0,m=0;y("z","y","x",-1,-1,r,n,e,a,s,0),y("z","y","x",1,-1,r,n,-e,a,s,1),y("x","z","y",1,1,e,r,n,i,a,2),y("x","z","y",1,-1,e,r,-n,i,a,3),y("x","y","z",1,-1,e,n,r,i,s,4),y("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new gn(u,3)),this.setAttribute("normal",new gn(d,3)),this.setAttribute("uv",new gn(f,2));function y(v,g,p,_,w,b,S,M,C,P,A){const E=b/C,L=S/P,O=b/2,k=S/2,j=M/2,$=C+1,U=P+1;let X=0,z=0;const V=new K;for(let ee=0;ee<U;ee++){const de=ee*L-k;for(let Ee=0;Ee<$;Ee++){const Ne=Ee*E-O;V[v]=Ne*_,V[g]=de*w,V[p]=j,u.push(V.x,V.y,V.z),V[v]=0,V[g]=0,V[p]=M>0?1:-1,d.push(V.x,V.y,V.z),f.push(Ee/C),f.push(1-ee/P),X+=1}}for(let ee=0;ee<P;ee++)for(let de=0;de<C;de++){const Ee=h+de+$*ee,Ne=h+de+$*(ee+1),ne=h+(de+1)+$*(ee+1),fe=h+(de+1)+$*ee;c.push(Ee,Ne,fe),c.push(Ne,ne,fe),z+=6}o.addGroup(m,z,A),m+=z,h+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hu(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function lr(t){const e={};for(let n=0;n<t.length;n++){const r=hu(t[n]);for(const i in r)e[i]=r[i]}return e}function V9(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function hI(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:kt.workingColorSpace}const H9={clone:hu,merge:lr};var G9=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,W9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class lo extends Rl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=G9,this.fragmentShader=W9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hu(e.uniforms),this.uniformsGroups=V9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class pI extends Un{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yt,this.projectionMatrix=new Yt,this.projectionMatrixInverse=new Yt,this.coordinateSystem=Us}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ga=new K,RM=new nt,DM=new nt;class Wr extends pI{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=af*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Lc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return af*2*Math.atan(Math.tan(Lc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){ga.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ga.x,ga.y).multiplyScalar(-e/ga.z),ga.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ga.x,ga.y).multiplyScalar(-e/ga.z)}getViewSize(e,n){return this.getViewBounds(e,RM,DM),n.subVectors(DM,RM)}setViewOffset(e,n,r,i,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Lc*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;s+=a.offsetX*i/c,n-=a.offsetY*r/u,i*=a.width/c,r*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Yl=-90,Ql=1;class $9 extends Un{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Wr(Yl,Ql,e,n);i.layers=this.layers,this.add(i);const s=new Wr(Yl,Ql,e,n);s.layers=this.layers,this.add(s);const a=new Wr(Yl,Ql,e,n);a.layers=this.layers,this.add(a);const o=new Wr(Yl,Ql,e,n);o.layers=this.layers,this.add(o);const c=new Wr(Yl,Ql,e,n);c.layers=this.layers,this.add(c);const u=new Wr(Yl,Ql,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,a,o,c]=n;for(const u of n)this.remove(u);if(e===Us)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Am)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,c,u,d]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,c),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,d),e.setRenderTarget(f,h,m),e.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class mI extends yr{constructor(e=[],n=uu,r,i,s,a,o,c,u,d){super(e,n,r,i,s,a,o,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class q9 extends ml{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new mI(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:os}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Dl(5,5,5),s=new lo({name:"CubemapFromEquirect",uniforms:hu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:kr,blending:Ya});s.uniforms.tEquirect.value=n;const a=new On(i,s),o=n.minFilter;return n.minFilter===Vo&&(n.minFilter=os),new $9(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(s)}}class ki extends Un{constructor(){super(),this.isGroup=!0,this.type="Group"}}const X9={type:"move"};class py{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ki,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ki,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ki,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,a=null;const o=this._targetRay,c=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const v of e.hand.values()){const g=n.getJointPose(v,r),p=this._getHandJoint(u,v);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=d.position.distanceTo(f.position),m=.02,y=.005;u.inputState.pinching&&h>m+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=m-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(X9)))}return o!==null&&(o.visible=i!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new ki;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class gI extends Un{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ys,this.environmentIntensity=1,this.environmentRotation=new ys,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class Z9{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=V_,this.updateRanges=[],this.version=0,this.uuid=$s()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const or=new K;class Pm{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)or.fromBufferAttribute(this,n),or.applyMatrix4(e),this.setXYZ(n,or.x,or.y,or.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)or.fromBufferAttribute(this,n),or.applyNormalMatrix(e),this.setXYZ(n,or.x,or.y,or.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)or.fromBufferAttribute(this,n),or.transformDirection(e),this.setXYZ(n,or.x,or.y,or.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=Pi(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Bt(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Bt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Pi(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Pi(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Pi(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Pi(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bt(n,this.array),r=Bt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bt(n,this.array),r=Bt(r,this.array),i=Bt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bt(n,this.array),r=Bt(r,this.array),i=Bt(i,this.array),s=Bt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Lr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Pm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vI extends Rl{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Jl;const Ku=new K,ec=new K,tc=new K,nc=new nt,Yu=new nt,yI=new Yt,Wh=new K,Qu=new K,$h=new K,kM=new nt,my=new nt,LM=new nt;class K9 extends Un{constructor(e=new vI){if(super(),this.isSprite=!0,this.type="Sprite",Jl===void 0){Jl=new En;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Z9(n,5);Jl.setIndex([0,1,2,0,2,3]),Jl.setAttribute("position",new Pm(r,3,0,!1)),Jl.setAttribute("uv",new Pm(r,2,3,!1))}this.geometry=Jl,this.material=e,this.center=new nt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ec.setFromMatrixScale(this.matrixWorld),yI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),tc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ec.multiplyScalar(-tc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const a=this.center;qh(Wh.set(-.5,-.5,0),tc,a,ec,i,s),qh(Qu.set(.5,-.5,0),tc,a,ec,i,s),qh($h.set(.5,.5,0),tc,a,ec,i,s),kM.set(0,0),my.set(1,0),LM.set(1,1);let o=e.ray.intersectTriangle(Wh,Qu,$h,!1,Ku);if(o===null&&(qh(Qu.set(-.5,.5,0),tc,a,ec,i,s),my.set(0,1),o=e.ray.intersectTriangle(Wh,$h,Qu,!1,Ku),o===null))return;const c=e.ray.origin.distanceTo(Ku);c<e.near||c>e.far||n.push({distance:c,point:Ku.clone(),uv:qr.getInterpolation(Ku,Wh,Qu,$h,kM,my,LM,new nt),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function qh(t,e,n,r,i,s){nc.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Yu.x=s*nc.x-i*nc.y,Yu.y=i*nc.x+s*nc.y):Yu.copy(nc),t.copy(e),t.x+=Yu.x,t.y+=Yu.y,t.applyMatrix4(yI)}const gy=new K,Y9=new K,Q9=new ht;class wa{constructor(e=new K(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=gy.subVectors(r,n).cross(Y9.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(gy),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Q9.getNormalMatrix(e),i=this.coplanarPoint(gy).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ao=new zg,Xh=new K;class vb{constructor(e=new wa,n=new wa,r=new wa,i=new wa,s=new wa,a=new wa){this.planes=[e,n,r,i,s,a]}set(e,n,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Us){const r=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],c=i[3],u=i[4],d=i[5],f=i[6],h=i[7],m=i[8],y=i[9],v=i[10],g=i[11],p=i[12],_=i[13],w=i[14],b=i[15];if(r[0].setComponents(c-s,h-u,g-m,b-p).normalize(),r[1].setComponents(c+s,h+u,g+m,b+p).normalize(),r[2].setComponents(c+a,h+d,g+y,b+_).normalize(),r[3].setComponents(c-a,h-d,g-y,b-_).normalize(),r[4].setComponents(c-o,h-f,g-v,b-w).normalize(),n===Us)r[5].setComponents(c+o,h+f,g+v,b+w).normalize();else if(n===Am)r[5].setComponents(o,f,v,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ao.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ao.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ao)}intersectsSprite(e){return Ao.center.set(0,0,0),Ao.radius=.7071067811865476,Ao.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ao)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Xh.x=i.normal.x>0?e.max.x:e.min.x,Xh.y=i.normal.y>0?e.max.y:e.min.y,Xh.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Xh)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class kl extends Rl{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Rm=new K,Dm=new K,IM=new Yt,Ju=new Og,Zh=new zg,vy=new K,jM=new K;class Cd extends Un{constructor(e=new En,n=new kl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)Rm.fromBufferAttribute(n,i-1),Dm.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=Rm.distanceTo(Dm);e.setAttribute("lineDistance",new gn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Zh.copy(r.boundingSphere),Zh.applyMatrix4(i),Zh.radius+=s,e.ray.intersectsSphere(Zh)===!1)return;IM.copy(i).invert(),Ju.copy(e.ray).applyMatrix4(IM);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=this.isLineSegments?2:1,d=r.index,h=r.attributes.position;if(d!==null){const m=Math.max(0,a.start),y=Math.min(d.count,a.start+a.count);for(let v=m,g=y-1;v<g;v+=u){const p=d.getX(v),_=d.getX(v+1),w=Kh(this,e,Ju,c,p,_,v);w&&n.push(w)}if(this.isLineLoop){const v=d.getX(y-1),g=d.getX(m),p=Kh(this,e,Ju,c,v,g,y-1);p&&n.push(p)}}else{const m=Math.max(0,a.start),y=Math.min(h.count,a.start+a.count);for(let v=m,g=y-1;v<g;v+=u){const p=Kh(this,e,Ju,c,v,v+1,v);p&&n.push(p)}if(this.isLineLoop){const v=Kh(this,e,Ju,c,y-1,m,y-1);v&&n.push(v)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Kh(t,e,n,r,i,s,a){const o=t.geometry.attributes.position;if(Rm.fromBufferAttribute(o,i),Dm.fromBufferAttribute(o,s),n.distanceSqToSegment(Rm,Dm,vy,jM)>r)return;vy.applyMatrix4(t.matrixWorld);const u=e.ray.origin.distanceTo(vy);if(!(u<e.near||u>e.far))return{distance:u,point:jM.clone().applyMatrix4(t.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:t}}const zM=new K,OM=new K;class Fg extends Cd{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)zM.fromBufferAttribute(n,i),OM.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+zM.distanceTo(OM);e.setAttribute("lineDistance",new gn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class J9 extends yr{constructor(e,n,r,i,s,a,o,c,u){super(e,n,r,i,s,a,o,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xI extends yr{constructor(e,n,r=pl,i,s,a,o=Ui,c=Ui,u,d=rf){if(d!==rf&&d!==sf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,i,s,a,o,c,d,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new mb(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class yb extends En{constructor(e=1,n=1,r=1,i=32,s=1,a=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:c};const u=this;i=Math.floor(i),s=Math.floor(s);const d=[],f=[],h=[],m=[];let y=0;const v=[],g=r/2;let p=0;_(),a===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new gn(f,3)),this.setAttribute("normal",new gn(h,3)),this.setAttribute("uv",new gn(m,2));function _(){const b=new K,S=new K;let M=0;const C=(n-e)/r;for(let P=0;P<=s;P++){const A=[],E=P/s,L=E*(n-e)+e;for(let O=0;O<=i;O++){const k=O/i,j=k*c+o,$=Math.sin(j),U=Math.cos(j);S.x=L*$,S.y=-E*r+g,S.z=L*U,f.push(S.x,S.y,S.z),b.set($,C,U).normalize(),h.push(b.x,b.y,b.z),m.push(k,1-E),A.push(y++)}v.push(A)}for(let P=0;P<i;P++)for(let A=0;A<s;A++){const E=v[A][P],L=v[A+1][P],O=v[A+1][P+1],k=v[A][P+1];(e>0||A!==0)&&(d.push(E,L,k),M+=3),(n>0||A!==s-1)&&(d.push(L,O,k),M+=3)}u.addGroup(p,M,0),p+=M}function w(b){const S=y,M=new nt,C=new K;let P=0;const A=b===!0?e:n,E=b===!0?1:-1;for(let O=1;O<=i;O++)f.push(0,g*E,0),h.push(0,E,0),m.push(.5,.5),y++;const L=y;for(let O=0;O<=i;O++){const j=O/i*c+o,$=Math.cos(j),U=Math.sin(j);C.x=A*U,C.y=g*E,C.z=A*$,f.push(C.x,C.y,C.z),h.push(0,E,0),M.x=$*.5+.5,M.y=U*.5*E+.5,m.push(M.x,M.y),y++}for(let O=0;O<i;O++){const k=S+O,j=L+O;b===!0?d.push(j,j+1,k):d.push(j+1,j,k),P+=3}u.addGroup(p,P,b===!0?1:2),p+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xb extends yb{constructor(e=1,n=1,r=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,n,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new xb(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const Yh=new K,Qh=new K,yy=new K,Jh=new qr;class _I extends En{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Lc*n),a=e.getIndex(),o=e.getAttribute("position"),c=a?a.count:o.count,u=[0,0,0],d=["a","b","c"],f=new Array(3),h={},m=[];for(let y=0;y<c;y+=3){a?(u[0]=a.getX(y),u[1]=a.getX(y+1),u[2]=a.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:v,b:g,c:p}=Jh;if(v.fromBufferAttribute(o,u[0]),g.fromBufferAttribute(o,u[1]),p.fromBufferAttribute(o,u[2]),Jh.getNormal(yy),f[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[1]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,f[2]=`${Math.round(p.x*i)},${Math.round(p.y*i)},${Math.round(p.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const w=(_+1)%3,b=f[_],S=f[w],M=Jh[d[_]],C=Jh[d[w]],P=`${b}_${S}`,A=`${S}_${b}`;A in h&&h[A]?(yy.dot(h[A].normal)<=s&&(m.push(M.x,M.y,M.z),m.push(C.x,C.y,C.z)),h[A]=null):P in h||(h[P]={index0:u[_],index1:u[w],normal:yy.clone()})}}for(const y in h)if(h[y]){const{index0:v,index1:g}=h[y];Yh.fromBufferAttribute(o,v),Qh.fromBufferAttribute(o,g),m.push(Yh.x,Yh.y,Yh.z),m.push(Qh.x,Qh.y,Qh.z)}this.setAttribute("position",new gn(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Hf extends En{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,a=n/2,o=Math.floor(r),c=Math.floor(i),u=o+1,d=c+1,f=e/o,h=n/c,m=[],y=[],v=[],g=[];for(let p=0;p<d;p++){const _=p*h-a;for(let w=0;w<u;w++){const b=w*f-s;y.push(b,-_,0),v.push(0,0,1),g.push(w/o),g.push(1-p/c)}}for(let p=0;p<c;p++)for(let _=0;_<o;_++){const w=_+u*p,b=_+u*(p+1),S=_+1+u*(p+1),M=_+1+u*p;m.push(w,b,M),m.push(b,S,M)}this.setIndex(m),this.setAttribute("position",new gn(y,3)),this.setAttribute("normal",new gn(v,3)),this.setAttribute("uv",new gn(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hf(e.width,e.height,e.widthSegments,e.heightSegments)}}class km extends En{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const c=Math.min(a+o,Math.PI);let u=0;const d=[],f=new K,h=new K,m=[],y=[],v=[],g=[];for(let p=0;p<=r;p++){const _=[],w=p/r;let b=0;p===0&&a===0?b=.5/n:p===r&&c===Math.PI&&(b=-.5/n);for(let S=0;S<=n;S++){const M=S/n;f.x=-e*Math.cos(i+M*s)*Math.sin(a+w*o),f.y=e*Math.cos(a+w*o),f.z=e*Math.sin(i+M*s)*Math.sin(a+w*o),y.push(f.x,f.y,f.z),h.copy(f).normalize(),v.push(h.x,h.y,h.z),g.push(M+b,1-w),_.push(u++)}d.push(_)}for(let p=0;p<r;p++)for(let _=0;_<n;_++){const w=d[p][_+1],b=d[p][_],S=d[p+1][_],M=d[p+1][_+1];(p!==0||a>0)&&m.push(w,b,M),(p!==r-1||c<Math.PI)&&m.push(b,S,M)}this.setIndex(m),this.setAttribute("position",new gn(y,3)),this.setAttribute("normal",new gn(v,3)),this.setAttribute("uv",new gn(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new km(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wI extends Rl{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=aI,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ys,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class e7 extends Rl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=X$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class t7 extends Rl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class n7 extends kl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const FM={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class r7{constructor(e,n,r){const i=this;let s=!1,a=0,o=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){o++,s===!1&&i.onStart!==void 0&&i.onStart(d,a,o),s=!0},this.itemEnd=function(d){a++,i.onProgress!==void 0&&i.onProgress(d,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,h=u.length;f<h;f+=2){const m=u[f],y=u[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return y}return null}}}const i7=new r7;class _b{constructor(e){this.manager=e!==void 0?e:i7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}_b.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ns={};class s7 extends Error{constructor(e,n){super(e),this.response=n}}class a7 extends _b{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=FM.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Ns[e]!==void 0){Ns[e].push({onLoad:n,onProgress:r,onError:i});return}Ns[e]=[],Ns[e].push({onLoad:n,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,c=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Ns[e],f=u.body.getReader(),h=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=h?parseInt(h):0,y=m!==0;let v=0;const g=new ReadableStream({start(p){_();function _(){f.read().then(({done:w,value:b})=>{if(w)p.close();else{v+=b.byteLength;const S=new ProgressEvent("progress",{lengthComputable:y,loaded:v,total:m});for(let M=0,C=d.length;M<C;M++){const P=d[M];P.onProgress&&P.onProgress(S)}p.enqueue(b),_()}},w=>{p.error(w)})}}});return new Response(g)}else throw new s7(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return u.json();default:if(o==="")return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),h=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(h);return u.arrayBuffer().then(y=>m.decode(y))}}}).then(u=>{FM.add(e,u);const d=Ns[e];delete Ns[e];for(let f=0,h=d.length;f<h;f++){const m=d[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const d=Ns[e];if(d===void 0)throw this.manager.itemError(e),u;delete Ns[e];for(let f=0,h=d.length;f<h;f++){const m=d[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class bI extends Un{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const xy=new Yt,UM=new K,BM=new K;class o7{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nt(512,512),this.map=null,this.mapPass=null,this.matrix=new Yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vb,this._frameExtents=new nt(1,1),this._viewportCount=1,this._viewports=[new pn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;UM.setFromMatrixPosition(e.matrixWorld),n.position.copy(UM),BM.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(BM),n.updateMatrixWorld(),xy.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xy),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(xy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SI extends pI{constructor(e=-1,n=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+n,c=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class l7 extends o7{constructor(){super(new SI(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class c7 extends bI{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.target=new Un,this.shadow=new l7}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class u7 extends bI{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class d7 extends Wr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}const VM=new Yt;class f7{constructor(e,n,r=0,i=1/0){this.ray=new Og(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new gb,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return VM.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(VM),this}intersectObject(e,n=!0,r=[]){return H_(e,this,r,n),r.sort(HM),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)H_(e[i],this,r,n);return r.sort(HM),r}}function HM(t,e){return t.distance-e.distance}function H_(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const s=t.children;for(let a=0,o=s.length;a<o;a++)H_(s[a],e,n,!0)}}class GM{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=xt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(xt(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class h7 extends Fg{constructor(e=10,n=10,r=4473924,i=8947848){r=new vt(r),i=new vt(i);const s=n/2,a=e/n,o=e/2,c=[],u=[];for(let h=0,m=0,y=-o;h<=n;h++,y+=a){c.push(-o,0,y,o,0,y),c.push(y,0,-o,y,0,o);const v=h===s?r:i;v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3}const d=new En;d.setAttribute("position",new gn(c,3)),d.setAttribute("color",new gn(u,3));const f=new kl({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ad extends Fg{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new En;i.setAttribute("position",new gn(n,3)),i.setAttribute("color",new gn(r,3));const s=new kl({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new vt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class p7 extends Nl{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function WM(t,e,n,r){const i=m7(r);switch(n){case JL:return t*e;case tI:return t*e;case nI:return t*e*2;case rI:return t*e/i.components*i.byteLength;case db:return t*e/i.components*i.byteLength;case iI:return t*e*2/i.components*i.byteLength;case fb:return t*e*2/i.components*i.byteLength;case eI:return t*e*3/i.components*i.byteLength;case Di:return t*e*4/i.components*i.byteLength;case hb:return t*e*4/i.components*i.byteLength;case Ap:case Np:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Pp:case Rp:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case v_:case x_:return Math.max(t,16)*Math.max(e,8)/4;case g_:case y_:return Math.max(t,8)*Math.max(e,8)/2;case __:case w_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case b_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case S_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case E_:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case M_:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case T_:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case C_:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case A_:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case N_:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case P_:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case R_:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case D_:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case k_:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case L_:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case I_:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case j_:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Dp:case z_:case O_:return Math.ceil(t/4)*Math.ceil(e/4)*16;case sI:case F_:return Math.ceil(t/4)*Math.ceil(e/4)*8;case U_:case B_:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function m7(t){switch(t){case na:case KL:return{byteLength:1,components:1};case tf:case YL:case Vf:return{byteLength:2,components:1};case cb:case ub:return{byteLength:2,components:4};case pl:case lb:case Fs:return{byteLength:4,components:1};case QL:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ob}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ob);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function EI(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function g7(t){const e=new WeakMap;function n(o,c){const u=o.array,d=o.usage,f=u.byteLength,h=t.createBuffer();t.bindBuffer(c,h),t.bufferData(c,u,d),o.onUploadCallback();let m;if(u instanceof Float32Array)m=t.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=t.SHORT;else if(u instanceof Uint32Array)m=t.UNSIGNED_INT;else if(u instanceof Int32Array)m=t.INT;else if(u instanceof Int8Array)m=t.BYTE;else if(u instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:f}}function r(o,c,u){const d=c.array,f=c.updateRanges;if(t.bindBuffer(u,o),f.length===0)t.bufferSubData(u,0,d);else{f.sort((m,y)=>m.start-y.start);let h=0;for(let m=1;m<f.length;m++){const y=f[h],v=f[m];v.start<=y.start+y.count+1?y.count=Math.max(y.count,v.start+v.count-y.start):(++h,f[h]=v)}f.length=h+1;for(let m=0,y=f.length;m<y;m++){const v=f[m];t.bufferSubData(u,v.start*d.BYTES_PER_ELEMENT,d,v.start,v.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(t.deleteBuffer(c.buffer),e.delete(o))}function a(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,n(o,c));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,c),u.version=o.version}}return{get:i,remove:s,update:a}}var v7=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,y7=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,x7=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,_7=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,w7=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,b7=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,S7=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,E7=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,M7=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,T7=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,C7=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,A7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,N7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,P7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,R7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,D7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,k7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,L7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,I7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,j7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,z7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,O7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,F7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,U7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,B7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,V7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,H7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,G7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,W7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,q7="gl_FragColor = linearToOutputTexel( gl_FragColor );",X7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Z7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,K7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Y7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Q7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,J7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,eq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tq=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,nq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,iq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,aq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,oq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cq=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,uq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,fq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,mq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gq=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,vq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,yq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,xq=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_q=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wq=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bq=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Sq=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Eq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Mq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tq=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Cq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Aq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Nq=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Pq=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Rq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Dq=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Lq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Iq=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,jq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Oq=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Fq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Uq=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Bq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Vq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Hq=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Gq=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Wq=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,$q=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,qq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Xq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Zq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Kq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qq=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Jq=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,eX=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,tX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,nX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,iX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,sX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,aX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,lX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,uX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,dX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,fX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,pX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,mX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const gX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,vX=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_X=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,SX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,EX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,MX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,TX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,CX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,RX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,IX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,OX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,BX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,WX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$X=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,XX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ZX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gt={alphahash_fragment:v7,alphahash_pars_fragment:y7,alphamap_fragment:x7,alphamap_pars_fragment:_7,alphatest_fragment:w7,alphatest_pars_fragment:b7,aomap_fragment:S7,aomap_pars_fragment:E7,batching_pars_vertex:M7,batching_vertex:T7,begin_vertex:C7,beginnormal_vertex:A7,bsdfs:N7,iridescence_fragment:P7,bumpmap_pars_fragment:R7,clipping_planes_fragment:D7,clipping_planes_pars_fragment:k7,clipping_planes_pars_vertex:L7,clipping_planes_vertex:I7,color_fragment:j7,color_pars_fragment:z7,color_pars_vertex:O7,color_vertex:F7,common:U7,cube_uv_reflection_fragment:B7,defaultnormal_vertex:V7,displacementmap_pars_vertex:H7,displacementmap_vertex:G7,emissivemap_fragment:W7,emissivemap_pars_fragment:$7,colorspace_fragment:q7,colorspace_pars_fragment:X7,envmap_fragment:Z7,envmap_common_pars_fragment:K7,envmap_pars_fragment:Y7,envmap_pars_vertex:Q7,envmap_physical_pars_fragment:cq,envmap_vertex:J7,fog_vertex:eq,fog_pars_vertex:tq,fog_fragment:nq,fog_pars_fragment:rq,gradientmap_pars_fragment:iq,lightmap_pars_fragment:sq,lights_lambert_fragment:aq,lights_lambert_pars_fragment:oq,lights_pars_begin:lq,lights_toon_fragment:uq,lights_toon_pars_fragment:dq,lights_phong_fragment:fq,lights_phong_pars_fragment:hq,lights_physical_fragment:pq,lights_physical_pars_fragment:mq,lights_fragment_begin:gq,lights_fragment_maps:vq,lights_fragment_end:yq,logdepthbuf_fragment:xq,logdepthbuf_pars_fragment:_q,logdepthbuf_pars_vertex:wq,logdepthbuf_vertex:bq,map_fragment:Sq,map_pars_fragment:Eq,map_particle_fragment:Mq,map_particle_pars_fragment:Tq,metalnessmap_fragment:Cq,metalnessmap_pars_fragment:Aq,morphinstance_vertex:Nq,morphcolor_vertex:Pq,morphnormal_vertex:Rq,morphtarget_pars_vertex:Dq,morphtarget_vertex:kq,normal_fragment_begin:Lq,normal_fragment_maps:Iq,normal_pars_fragment:jq,normal_pars_vertex:zq,normal_vertex:Oq,normalmap_pars_fragment:Fq,clearcoat_normal_fragment_begin:Uq,clearcoat_normal_fragment_maps:Bq,clearcoat_pars_fragment:Vq,iridescence_pars_fragment:Hq,opaque_fragment:Gq,packing:Wq,premultiplied_alpha_fragment:$q,project_vertex:qq,dithering_fragment:Xq,dithering_pars_fragment:Zq,roughnessmap_fragment:Kq,roughnessmap_pars_fragment:Yq,shadowmap_pars_fragment:Qq,shadowmap_pars_vertex:Jq,shadowmap_vertex:eX,shadowmask_pars_fragment:tX,skinbase_vertex:nX,skinning_pars_vertex:rX,skinning_vertex:iX,skinnormal_vertex:sX,specularmap_fragment:aX,specularmap_pars_fragment:oX,tonemapping_fragment:lX,tonemapping_pars_fragment:cX,transmission_fragment:uX,transmission_pars_fragment:dX,uv_pars_fragment:fX,uv_pars_vertex:hX,uv_vertex:pX,worldpos_vertex:mX,background_vert:gX,background_frag:vX,backgroundCube_vert:yX,backgroundCube_frag:xX,cube_vert:_X,cube_frag:wX,depth_vert:bX,depth_frag:SX,distanceRGBA_vert:EX,distanceRGBA_frag:MX,equirect_vert:TX,equirect_frag:CX,linedashed_vert:AX,linedashed_frag:NX,meshbasic_vert:PX,meshbasic_frag:RX,meshlambert_vert:DX,meshlambert_frag:kX,meshmatcap_vert:LX,meshmatcap_frag:IX,meshnormal_vert:jX,meshnormal_frag:zX,meshphong_vert:OX,meshphong_frag:FX,meshphysical_vert:UX,meshphysical_frag:BX,meshtoon_vert:VX,meshtoon_frag:HX,points_vert:GX,points_frag:WX,shadow_vert:$X,shadow_frag:qX,sprite_vert:XX,sprite_frag:ZX},Pe={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ht},alphaMap:{value:null},alphaMapTransform:{value:new ht},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ht}},envmap:{envMap:{value:null},envMapRotation:{value:new ht},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ht}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ht}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ht},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ht},normalScale:{value:new nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ht},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ht}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ht}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ht}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ht},alphaTest:{value:0},uvTransform:{value:new ht}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new nt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ht},alphaMap:{value:null},alphaMapTransform:{value:new ht},alphaTest:{value:0}}},rs={basic:{uniforms:lr([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:gt.meshbasic_vert,fragmentShader:gt.meshbasic_frag},lambert:{uniforms:lr([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new vt(0)}}]),vertexShader:gt.meshlambert_vert,fragmentShader:gt.meshlambert_frag},phong:{uniforms:lr([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:gt.meshphong_vert,fragmentShader:gt.meshphong_frag},standard:{uniforms:lr([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gt.meshphysical_vert,fragmentShader:gt.meshphysical_frag},toon:{uniforms:lr([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new vt(0)}}]),vertexShader:gt.meshtoon_vert,fragmentShader:gt.meshtoon_frag},matcap:{uniforms:lr([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:gt.meshmatcap_vert,fragmentShader:gt.meshmatcap_frag},points:{uniforms:lr([Pe.points,Pe.fog]),vertexShader:gt.points_vert,fragmentShader:gt.points_frag},dashed:{uniforms:lr([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gt.linedashed_vert,fragmentShader:gt.linedashed_frag},depth:{uniforms:lr([Pe.common,Pe.displacementmap]),vertexShader:gt.depth_vert,fragmentShader:gt.depth_frag},normal:{uniforms:lr([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:gt.meshnormal_vert,fragmentShader:gt.meshnormal_frag},sprite:{uniforms:lr([Pe.sprite,Pe.fog]),vertexShader:gt.sprite_vert,fragmentShader:gt.sprite_frag},background:{uniforms:{uvTransform:{value:new ht},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:gt.background_vert,fragmentShader:gt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ht}},vertexShader:gt.backgroundCube_vert,fragmentShader:gt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gt.cube_vert,fragmentShader:gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gt.equirect_vert,fragmentShader:gt.equirect_frag},distanceRGBA:{uniforms:lr([Pe.common,Pe.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gt.distanceRGBA_vert,fragmentShader:gt.distanceRGBA_frag},shadow:{uniforms:lr([Pe.lights,Pe.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:gt.shadow_vert,fragmentShader:gt.shadow_frag}};rs.physical={uniforms:lr([rs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ht},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ht},clearcoatNormalScale:{value:new nt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ht},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ht},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ht},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ht},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ht},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ht},transmissionSamplerSize:{value:new nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ht},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ht},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ht},anisotropyVector:{value:new nt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ht}}]),vertexShader:gt.meshphysical_vert,fragmentShader:gt.meshphysical_frag};const ep={r:0,b:0,g:0},No=new ys,KX=new Yt;function YX(t,e,n,r,i,s,a){const o=new vt(0);let c=s===!0?0:1,u,d,f=null,h=0,m=null;function y(w){let b=w.isScene===!0?w.background:null;return b&&b.isTexture&&(b=(w.backgroundBlurriness>0?n:e).get(b)),b}function v(w){let b=!1;const S=y(w);S===null?p(o,c):S&&S.isColor&&(p(S,1),b=!0);const M=t.xr.getEnvironmentBlendMode();M==="additive"?r.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||b)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function g(w,b){const S=y(b);S&&(S.isCubeTexture||S.mapping===jg)?(d===void 0&&(d=new On(new Dl(1,1,1),new lo({name:"BackgroundCubeMaterial",uniforms:hu(rs.backgroundCube.uniforms),vertexShader:rs.backgroundCube.vertexShader,fragmentShader:rs.backgroundCube.fragmentShader,side:kr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(M,C,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),No.copy(b.backgroundRotation),No.x*=-1,No.y*=-1,No.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(No.y*=-1,No.z*=-1),d.material.uniforms.envMap.value=S,d.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(KX.makeRotationFromEuler(No)),d.material.toneMapped=kt.getTransfer(S.colorSpace)!==Gt,(f!==S||h!==S.version||m!==t.toneMapping)&&(d.material.needsUpdate=!0,f=S,h=S.version,m=t.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new On(new Hf(2,2),new lo({name:"BackgroundMaterial",uniforms:hu(rs.background.uniforms),vertexShader:rs.background.vertexShader,fragmentShader:rs.background.fragmentShader,side:oo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.toneMapped=kt.getTransfer(S.colorSpace)!==Gt,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||h!==S.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,f=S,h=S.version,m=t.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function p(w,b){w.getRGB(ep,hI(t)),r.buffers.color.setClear(ep.r,ep.g,ep.b,b,a)}function _(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(w,b=1){o.set(w),c=b,p(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(w){c=w,p(o,c)},render:v,addToRenderList:g,dispose:_}}function QX(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=h(null);let s=i,a=!1;function o(E,L,O,k,j){let $=!1;const U=f(k,O,L);s!==U&&(s=U,u(s.object)),$=m(E,k,O,j),$&&y(E,k,O,j),j!==null&&e.update(j,t.ELEMENT_ARRAY_BUFFER),($||a)&&(a=!1,b(E,L,O,k),j!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(j).buffer))}function c(){return t.createVertexArray()}function u(E){return t.bindVertexArray(E)}function d(E){return t.deleteVertexArray(E)}function f(E,L,O){const k=O.wireframe===!0;let j=r[E.id];j===void 0&&(j={},r[E.id]=j);let $=j[L.id];$===void 0&&($={},j[L.id]=$);let U=$[k];return U===void 0&&(U=h(c()),$[k]=U),U}function h(E){const L=[],O=[],k=[];for(let j=0;j<n;j++)L[j]=0,O[j]=0,k[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:O,attributeDivisors:k,object:E,attributes:{},index:null}}function m(E,L,O,k){const j=s.attributes,$=L.attributes;let U=0;const X=O.getAttributes();for(const z in X)if(X[z].location>=0){const ee=j[z];let de=$[z];if(de===void 0&&(z==="instanceMatrix"&&E.instanceMatrix&&(de=E.instanceMatrix),z==="instanceColor"&&E.instanceColor&&(de=E.instanceColor)),ee===void 0||ee.attribute!==de||de&&ee.data!==de.data)return!0;U++}return s.attributesNum!==U||s.index!==k}function y(E,L,O,k){const j={},$=L.attributes;let U=0;const X=O.getAttributes();for(const z in X)if(X[z].location>=0){let ee=$[z];ee===void 0&&(z==="instanceMatrix"&&E.instanceMatrix&&(ee=E.instanceMatrix),z==="instanceColor"&&E.instanceColor&&(ee=E.instanceColor));const de={};de.attribute=ee,ee&&ee.data&&(de.data=ee.data),j[z]=de,U++}s.attributes=j,s.attributesNum=U,s.index=k}function v(){const E=s.newAttributes;for(let L=0,O=E.length;L<O;L++)E[L]=0}function g(E){p(E,0)}function p(E,L){const O=s.newAttributes,k=s.enabledAttributes,j=s.attributeDivisors;O[E]=1,k[E]===0&&(t.enableVertexAttribArray(E),k[E]=1),j[E]!==L&&(t.vertexAttribDivisor(E,L),j[E]=L)}function _(){const E=s.newAttributes,L=s.enabledAttributes;for(let O=0,k=L.length;O<k;O++)L[O]!==E[O]&&(t.disableVertexAttribArray(O),L[O]=0)}function w(E,L,O,k,j,$,U){U===!0?t.vertexAttribIPointer(E,L,O,j,$):t.vertexAttribPointer(E,L,O,k,j,$)}function b(E,L,O,k){v();const j=k.attributes,$=O.getAttributes(),U=L.defaultAttributeValues;for(const X in $){const z=$[X];if(z.location>=0){let V=j[X];if(V===void 0&&(X==="instanceMatrix"&&E.instanceMatrix&&(V=E.instanceMatrix),X==="instanceColor"&&E.instanceColor&&(V=E.instanceColor)),V!==void 0){const ee=V.normalized,de=V.itemSize,Ee=e.get(V);if(Ee===void 0)continue;const Ne=Ee.buffer,ne=Ee.type,fe=Ee.bytesPerElement,xe=ne===t.INT||ne===t.UNSIGNED_INT||V.gpuType===lb;if(V.isInterleavedBufferAttribute){const ie=V.data,Me=ie.stride,Ue=V.offset;if(ie.isInstancedInterleavedBuffer){for(let ce=0;ce<z.locationSize;ce++)p(z.location+ce,ie.meshPerAttribute);E.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let ce=0;ce<z.locationSize;ce++)g(z.location+ce);t.bindBuffer(t.ARRAY_BUFFER,Ne);for(let ce=0;ce<z.locationSize;ce++)w(z.location+ce,de/z.locationSize,ne,ee,Me*fe,(Ue+de/z.locationSize*ce)*fe,xe)}else{if(V.isInstancedBufferAttribute){for(let ie=0;ie<z.locationSize;ie++)p(z.location+ie,V.meshPerAttribute);E.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let ie=0;ie<z.locationSize;ie++)g(z.location+ie);t.bindBuffer(t.ARRAY_BUFFER,Ne);for(let ie=0;ie<z.locationSize;ie++)w(z.location+ie,de/z.locationSize,ne,ee,de*fe,de/z.locationSize*ie*fe,xe)}}else if(U!==void 0){const ee=U[X];if(ee!==void 0)switch(ee.length){case 2:t.vertexAttrib2fv(z.location,ee);break;case 3:t.vertexAttrib3fv(z.location,ee);break;case 4:t.vertexAttrib4fv(z.location,ee);break;default:t.vertexAttrib1fv(z.location,ee)}}}}_()}function S(){P();for(const E in r){const L=r[E];for(const O in L){const k=L[O];for(const j in k)d(k[j].object),delete k[j];delete L[O]}delete r[E]}}function M(E){if(r[E.id]===void 0)return;const L=r[E.id];for(const O in L){const k=L[O];for(const j in k)d(k[j].object),delete k[j];delete L[O]}delete r[E.id]}function C(E){for(const L in r){const O=r[L];if(O[E.id]===void 0)continue;const k=O[E.id];for(const j in k)d(k[j].object),delete k[j];delete O[E.id]}}function P(){A(),a=!0,s!==i&&(s=i,u(s.object))}function A(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:P,resetDefaultState:A,dispose:S,releaseStatesOfGeometry:M,releaseStatesOfProgram:C,initAttributes:v,enableAttribute:g,disableUnusedAttributes:_}}function JX(t,e,n){let r;function i(u){r=u}function s(u,d){t.drawArrays(r,u,d),n.update(d,r,1)}function a(u,d,f){f!==0&&(t.drawArraysInstanced(r,u,d,f),n.update(d,r,f))}function o(u,d,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,d,0,f);let m=0;for(let y=0;y<f;y++)m+=d[y];n.update(m,r,1)}function c(u,d,f,h){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<u.length;y++)a(u[y],d[y],h[y]);else{m.multiDrawArraysInstancedWEBGL(r,u,0,d,0,h,0,f);let y=0;for(let v=0;v<f;v++)y+=d[v]*h[v];n.update(y,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function eZ(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(C){return!(C!==Di&&r.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(C){const P=C===Vf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==na&&r.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==Fs&&!P)}function c(C){if(C==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const f=n.logarithmicDepthBuffer===!0,h=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),_=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),w=t.getParameter(t.MAX_VARYING_VECTORS),b=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),S=y>0,M=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:m,maxVertexTextures:y,maxTextureSize:v,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:_,maxVaryings:w,maxFragmentUniforms:b,vertexTextures:S,maxSamples:M}}function tZ(t){const e=this;let n=null,r=0,i=!1,s=!1;const a=new wa,o=new ht,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const m=f.length!==0||h||r!==0||i;return i=h,r=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){n=d(f,h,0)},this.setState=function(f,h,m){const y=f.clippingPlanes,v=f.clipIntersection,g=f.clipShadows,p=t.get(f);if(!i||y===null||y.length===0||s&&!g)s?d(null):u();else{const _=s?0:r,w=_*4;let b=p.clippingState||null;c.value=b,b=d(y,h,w,m);for(let S=0;S!==w;++S)b[S]=n[S];p.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=_}};function u(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(f,h,m,y){const v=f!==null?f.length:0;let g=null;if(v!==0){if(g=c.value,y!==!0||g===null){const p=m+v*4,_=h.matrixWorldInverse;o.getNormalMatrix(_),(g===null||g.length<p)&&(g=new Float32Array(p));for(let w=0,b=m;w!==v;++w,b+=4)a.copy(f[w]).applyMatrix4(_,o),a.normal.toArray(g,b),g[b+3]=a.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function nZ(t){let e=new WeakMap;function n(a,o){return o===f_?a.mapping=uu:o===h_&&(a.mapping=du),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===f_||o===h_)if(e.has(a)){const c=e.get(a).texture;return n(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new q9(c.height);return u.fromEquirectangularTexture(t,a),e.set(a,u),a.addEventListener("dispose",i),n(u.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const xc=4,$M=[.125,.215,.35,.446,.526,.582],jo=20,_y=new SI,qM=new vt;let wy=null,by=0,Sy=0,Ey=!1;const Lo=(1+Math.sqrt(5))/2,rc=1/Lo,XM=[new K(-Lo,rc,0),new K(Lo,rc,0),new K(-rc,0,Lo),new K(rc,0,Lo),new K(0,Lo,-rc),new K(0,Lo,rc),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],rZ=new K;class ZM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,s={}){const{size:a=256,position:o=rZ}=s;wy=this._renderer.getRenderTarget(),by=this._renderer.getActiveCubeFace(),Sy=this._renderer.getActiveMipmapLevel(),Ey=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,i,c,o),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=QM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=YM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wy,by,Sy),this._renderer.xr.enabled=Ey,e.scissorTest=!1,tp(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===uu||e.mapping===du?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wy=this._renderer.getRenderTarget(),by=this._renderer.getActiveCubeFace(),Sy=this._renderer.getActiveMipmapLevel(),Ey=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:os,minFilter:os,generateMipmaps:!1,type:Vf,format:Di,colorSpace:fu,depthBuffer:!1},i=KM(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=KM(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=iZ(s)),this._blurMaterial=sZ(s,e,n)}return i}_compileMaterial(e){const n=new On(this._lodPlanes[0],e);this._renderer.compile(n,_y)}_sceneToCubeUV(e,n,r,i,s){const c=new Wr(90,1,n,r),u=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,m=f.toneMapping;f.getClearColor(qM),f.toneMapping=Qa,f.autoClear=!1;const y=new Ma({name:"PMREM.Background",side:kr,depthWrite:!1,depthTest:!1}),v=new On(new Dl,y);let g=!1;const p=e.background;p?p.isColor&&(y.color.copy(p),e.background=null,g=!0):(y.color.copy(qM),g=!0);for(let _=0;_<6;_++){const w=_%3;w===0?(c.up.set(0,u[_],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+d[_],s.y,s.z)):w===1?(c.up.set(0,0,u[_]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+d[_],s.z)):(c.up.set(0,u[_],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+d[_]));const b=this._cubeSize;tp(i,w*b,_>2?b:0,b,b),f.setRenderTarget(i),g&&f.render(v,c),f.render(e,c)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=m,f.autoClear=h,e.background=p}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===uu||e.mapping===du;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=QM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=YM());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new On(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const c=this._cubeSize;tp(n,0,0,3*c,2*c),r.setRenderTarget(n),r.render(a,_y)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=XM[(i-s-1)%XM.length];this._blur(e,s-1,s,a,o)}n.autoClear=r}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,o){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new On(this._lodPlanes[i],u),h=u.uniforms,m=this._sizeLods[r]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*jo-1),v=s/y,g=isFinite(s)?1+Math.floor(d*v):jo;g>jo&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${jo}`);const p=[];let _=0;for(let C=0;C<jo;++C){const P=C/v,A=Math.exp(-P*P/2);p.push(A),C===0?_+=A:C<g&&(_+=2*A)}for(let C=0;C<p.length;C++)p[C]=p[C]/_;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:w}=this;h.dTheta.value=y,h.mipInt.value=w-r;const b=this._sizeLods[i],S=3*b*(i>w-xc?i-w+xc:0),M=4*(this._cubeSize-b);tp(n,S,M,3*b,2*b),c.setRenderTarget(n),c.render(f,_y)}}function iZ(t){const e=[],n=[],r=[];let i=t;const s=t-xc+1+$M.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);n.push(o);let c=1/o;a>t-xc?c=$M[a-t+xc-1]:a===0&&(c=0),r.push(c);const u=1/(o-2),d=-u,f=1+u,h=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,y=6,v=3,g=2,p=1,_=new Float32Array(v*y*m),w=new Float32Array(g*y*m),b=new Float32Array(p*y*m);for(let M=0;M<m;M++){const C=M%3*2/3-1,P=M>2?0:-1,A=[C,P,0,C+2/3,P,0,C+2/3,P+1,0,C,P,0,C+2/3,P+1,0,C,P+1,0];_.set(A,v*y*M),w.set(h,g*y*M);const E=[M,M,M,M,M,M];b.set(E,p*y*M)}const S=new En;S.setAttribute("position",new Lr(_,v)),S.setAttribute("uv",new Lr(w,g)),S.setAttribute("faceIndex",new Lr(b,p)),e.push(S),i>xc&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function KM(t,e,n){const r=new ml(t,e,n);return r.texture.mapping=jg,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function tp(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function sZ(t,e,n){const r=new Float32Array(jo),i=new K(0,1,0);return new lo({name:"SphericalGaussianBlur",defines:{n:jo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:wb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ya,depthTest:!1,depthWrite:!1})}function YM(){return new lo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ya,depthTest:!1,depthWrite:!1})}function QM(){return new lo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ya,depthTest:!1,depthWrite:!1})}function wb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aZ(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const c=o.mapping,u=c===f_||c===h_,d=c===uu||c===du;if(u||d){let f=e.get(o);const h=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return n===null&&(n=new ZM(t)),f=u?n.fromEquirectangular(o,f):n.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{const m=o.image;return u&&m&&m.height>0||d&&m&&i(m)?(n===null&&(n=new ZM(t)),f=u?n.fromEquirectangular(o):n.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",s),f.texture):null}}}return o}function i(o){let c=0;const u=6;for(let d=0;d<u;d++)o[d]!==void 0&&c++;return c===u}function s(o){const c=o.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function oZ(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&kp("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function lZ(t,e,n,r){const i={},s=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const y in h.attributes)e.remove(h.attributes[y]);h.removeEventListener("dispose",a),delete i[h.id];const m=s.get(h);m&&(e.remove(m),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function o(f,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,n.memory.geometries++),h}function c(f){const h=f.attributes;for(const m in h)e.update(h[m],t.ARRAY_BUFFER)}function u(f){const h=[],m=f.index,y=f.attributes.position;let v=0;if(m!==null){const _=m.array;v=m.version;for(let w=0,b=_.length;w<b;w+=3){const S=_[w+0],M=_[w+1],C=_[w+2];h.push(S,M,M,C,C,S)}}else if(y!==void 0){const _=y.array;v=y.version;for(let w=0,b=_.length/3-1;w<b;w+=3){const S=w+0,M=w+1,C=w+2;h.push(S,M,M,C,C,S)}}else return;const g=new(lI(h)?fI:dI)(h,1);g.version=v;const p=s.get(f);p&&e.remove(p),s.set(f,g)}function d(f){const h=s.get(f);if(h){const m=f.index;m!==null&&h.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:o,update:c,getWireframeAttribute:d}}function cZ(t,e,n){let r;function i(h){r=h}let s,a;function o(h){s=h.type,a=h.bytesPerElement}function c(h,m){t.drawElements(r,m,s,h*a),n.update(m,r,1)}function u(h,m,y){y!==0&&(t.drawElementsInstanced(r,m,s,h*a,y),n.update(m,r,y))}function d(h,m,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,h,0,y);let g=0;for(let p=0;p<y;p++)g+=m[p];n.update(g,r,1)}function f(h,m,y,v){if(y===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let p=0;p<h.length;p++)u(h[p]/a,m[p],v[p]);else{g.multiDrawElementsInstancedWEBGL(r,m,0,s,h,0,v,0,y);let p=0;for(let _=0;_<y;_++)p+=m[_]*v[_];n.update(p,r,1)}}this.setMode=i,this.setIndex=o,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function uZ(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function dZ(t,e,n){const r=new WeakMap,i=new pn;function s(a,o,c){const u=a.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=d!==void 0?d.length:0;let h=r.get(o);if(h===void 0||h.count!==f){let A=function(){C.dispose(),r.delete(o),o.removeEventListener("dispose",A)};h!==void 0&&h.texture.dispose();const m=o.morphAttributes.position!==void 0,y=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],p=o.morphAttributes.normal||[],_=o.morphAttributes.color||[];let w=0;m===!0&&(w=1),y===!0&&(w=2),v===!0&&(w=3);let b=o.attributes.position.count*w,S=1;b>e.maxTextureSize&&(S=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const M=new Float32Array(b*S*4*f),C=new cI(M,b,S,f);C.type=Fs,C.needsUpdate=!0;const P=w*4;for(let E=0;E<f;E++){const L=g[E],O=p[E],k=_[E],j=b*S*4*E;for(let $=0;$<L.count;$++){const U=$*P;m===!0&&(i.fromBufferAttribute(L,$),M[j+U+0]=i.x,M[j+U+1]=i.y,M[j+U+2]=i.z,M[j+U+3]=0),y===!0&&(i.fromBufferAttribute(O,$),M[j+U+4]=i.x,M[j+U+5]=i.y,M[j+U+6]=i.z,M[j+U+7]=0),v===!0&&(i.fromBufferAttribute(k,$),M[j+U+8]=i.x,M[j+U+9]=i.y,M[j+U+10]=i.z,M[j+U+11]=k.itemSize===4?i.w:1)}}h={count:f,texture:C,size:new nt(b,S)},r.set(o,h),o.addEventListener("dispose",A)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(t,"morphTexture",a.morphTexture,n);else{let m=0;for(let v=0;v<u.length;v++)m+=u[v];const y=o.morphTargetsRelative?1:1-m;c.getUniforms().setValue(t,"morphTargetBaseInfluence",y),c.getUniforms().setValue(t,"morphTargetInfluences",u)}c.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:s}}function fZ(t,e,n,r){let i=new WeakMap;function s(c){const u=r.render.frame,d=c.geometry,f=e.get(c,d);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),i.get(c)!==u&&(n.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,t.ARRAY_BUFFER),i.set(c,u))),c.isSkinnedMesh){const h=c.skeleton;i.get(h)!==u&&(h.update(),i.set(h,u))}return f}function a(){i=new WeakMap}function o(c){const u=c.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:a}}const MI=new yr,JM=new xI(1,1),TI=new cI,CI=new P9,AI=new mI,eT=[],tT=[],nT=new Float32Array(16),rT=new Float32Array(9),iT=new Float32Array(4);function Nu(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=eT[i];if(s===void 0&&(s=new Float32Array(i),eT[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function Ln(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function In(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Ug(t,e){let n=tT[e];n===void 0&&(n=new Int32Array(e),tT[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function hZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function pZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ln(n,e))return;t.uniform2fv(this.addr,e),In(n,e)}}function mZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ln(n,e))return;t.uniform3fv(this.addr,e),In(n,e)}}function gZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ln(n,e))return;t.uniform4fv(this.addr,e),In(n,e)}}function vZ(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ln(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),In(n,e)}else{if(Ln(n,r))return;iT.set(r),t.uniformMatrix2fv(this.addr,!1,iT),In(n,r)}}function yZ(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ln(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),In(n,e)}else{if(Ln(n,r))return;rT.set(r),t.uniformMatrix3fv(this.addr,!1,rT),In(n,r)}}function xZ(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ln(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),In(n,e)}else{if(Ln(n,r))return;nT.set(r),t.uniformMatrix4fv(this.addr,!1,nT),In(n,r)}}function _Z(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function wZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ln(n,e))return;t.uniform2iv(this.addr,e),In(n,e)}}function bZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ln(n,e))return;t.uniform3iv(this.addr,e),In(n,e)}}function SZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ln(n,e))return;t.uniform4iv(this.addr,e),In(n,e)}}function EZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function MZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ln(n,e))return;t.uniform2uiv(this.addr,e),In(n,e)}}function TZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ln(n,e))return;t.uniform3uiv(this.addr,e),In(n,e)}}function CZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ln(n,e))return;t.uniform4uiv(this.addr,e),In(n,e)}}function AZ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(JM.compareFunction=oI,s=JM):s=MI,n.setTexture2D(e||s,i)}function NZ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||CI,i)}function PZ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||AI,i)}function RZ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||TI,i)}function DZ(t){switch(t){case 5126:return hZ;case 35664:return pZ;case 35665:return mZ;case 35666:return gZ;case 35674:return vZ;case 35675:return yZ;case 35676:return xZ;case 5124:case 35670:return _Z;case 35667:case 35671:return wZ;case 35668:case 35672:return bZ;case 35669:case 35673:return SZ;case 5125:return EZ;case 36294:return MZ;case 36295:return TZ;case 36296:return CZ;case 35678:case 36198:case 36298:case 36306:case 35682:return AZ;case 35679:case 36299:case 36307:return NZ;case 35680:case 36300:case 36308:case 36293:return PZ;case 36289:case 36303:case 36311:case 36292:return RZ}}function kZ(t,e){t.uniform1fv(this.addr,e)}function LZ(t,e){const n=Nu(e,this.size,2);t.uniform2fv(this.addr,n)}function IZ(t,e){const n=Nu(e,this.size,3);t.uniform3fv(this.addr,n)}function jZ(t,e){const n=Nu(e,this.size,4);t.uniform4fv(this.addr,n)}function zZ(t,e){const n=Nu(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function OZ(t,e){const n=Nu(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function FZ(t,e){const n=Nu(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function UZ(t,e){t.uniform1iv(this.addr,e)}function BZ(t,e){t.uniform2iv(this.addr,e)}function VZ(t,e){t.uniform3iv(this.addr,e)}function HZ(t,e){t.uniform4iv(this.addr,e)}function GZ(t,e){t.uniform1uiv(this.addr,e)}function WZ(t,e){t.uniform2uiv(this.addr,e)}function $Z(t,e){t.uniform3uiv(this.addr,e)}function qZ(t,e){t.uniform4uiv(this.addr,e)}function XZ(t,e,n){const r=this.cache,i=e.length,s=Ug(n,i);Ln(r,s)||(t.uniform1iv(this.addr,s),In(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||MI,s[a])}function ZZ(t,e,n){const r=this.cache,i=e.length,s=Ug(n,i);Ln(r,s)||(t.uniform1iv(this.addr,s),In(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||CI,s[a])}function KZ(t,e,n){const r=this.cache,i=e.length,s=Ug(n,i);Ln(r,s)||(t.uniform1iv(this.addr,s),In(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||AI,s[a])}function YZ(t,e,n){const r=this.cache,i=e.length,s=Ug(n,i);Ln(r,s)||(t.uniform1iv(this.addr,s),In(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||TI,s[a])}function QZ(t){switch(t){case 5126:return kZ;case 35664:return LZ;case 35665:return IZ;case 35666:return jZ;case 35674:return zZ;case 35675:return OZ;case 35676:return FZ;case 5124:case 35670:return UZ;case 35667:case 35671:return BZ;case 35668:case 35672:return VZ;case 35669:case 35673:return HZ;case 5125:return GZ;case 36294:return WZ;case 36295:return $Z;case 36296:return qZ;case 35678:case 36198:case 36298:case 36306:case 35682:return XZ;case 35679:case 36299:case 36307:return ZZ;case 35680:case 36300:case 36308:case 36293:return KZ;case 36289:case 36303:case 36311:case 36292:return YZ}}class JZ{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=DZ(n.type)}}class eK{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=QZ(n.type)}}class tK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,n[o.id],r)}}}const My=/(\w+)(\])?(\[|\.)?/g;function sT(t,e){t.seq.push(e),t.map[e.id]=e}function nK(t,e,n){const r=t.name,i=r.length;for(My.lastIndex=0;;){const s=My.exec(r),a=My.lastIndex;let o=s[1];const c=s[2]==="]",u=s[3];if(c&&(o=o|0),u===void 0||u==="["&&a+2===i){sT(n,u===void 0?new JZ(o,t,e):new eK(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new tK(o),sT(n,f)),n=f}}}class Lp{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),a=e.getUniformLocation(n,s.name);nK(s,a,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,a=n.length;s!==a;++s){const o=n[s],c=r[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function aT(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const rK=37297;let iK=0;function sK(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return r.join(`
`)}const oT=new ht;function aK(t){kt._getMatrix(oT,kt.workingColorSpace,t);const e=`mat3( ${oT.elements.map(n=>n.toFixed(4))} )`;switch(kt.getTransfer(t)){case Cm:return[e,"LinearTransferOETF"];case Gt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function lT(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+sK(t.getShaderSource(e),a)}else return i}function oK(t,e){const n=aK(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function lK(t,e){let n;switch(e){case U$:n="Linear";break;case B$:n="Reinhard";break;case V$:n="Cineon";break;case H$:n="ACESFilmic";break;case W$:n="AgX";break;case $$:n="Neutral";break;case G$:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const np=new K;function cK(){kt.getLuminanceCoefficients(np);const t=np.x.toFixed(4),e=np.y.toFixed(4),n=np.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function uK(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ld).join(`
`)}function dK(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function fK(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function ld(t){return t!==""}function cT(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function uT(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const hK=/^[ \t]*#include +<([\w\d./]+)>/gm;function G_(t){return t.replace(hK,mK)}const pK=new Map;function mK(t,e){let n=gt[e];if(n===void 0){const r=pK.get(e);if(r!==void 0)n=gt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return G_(n)}const gK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dT(t){return t.replace(gK,vK)}function vK(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function fT(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function yK(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===qL?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===x$?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ds&&(e="SHADOWMAP_TYPE_VSM"),e}function xK(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case uu:case du:e="ENVMAP_TYPE_CUBE";break;case jg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function _K(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case du:e="ENVMAP_MODE_REFRACTION";break}return e}function wK(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case XL:e="ENVMAP_BLENDING_MULTIPLY";break;case O$:e="ENVMAP_BLENDING_MIX";break;case F$:e="ENVMAP_BLENDING_ADD";break}return e}function bK(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function SK(t,e,n,r){const i=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const c=yK(n),u=xK(n),d=_K(n),f=wK(n),h=bK(n),m=uK(n),y=dK(s),v=i.createProgram();let g,p,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(ld).join(`
`),g.length>0&&(g+=`
`),p=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(ld).join(`
`),p.length>0&&(p+=`
`)):(g=[fT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ld).join(`
`),p=[fT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Qa?"#define TONE_MAPPING":"",n.toneMapping!==Qa?gt.tonemapping_pars_fragment:"",n.toneMapping!==Qa?lK("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",gt.colorspace_pars_fragment,oK("linearToOutputTexel",n.outputColorSpace),cK(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ld).join(`
`)),a=G_(a),a=cT(a,n),a=uT(a,n),o=G_(o),o=cT(o,n),o=uT(o,n),a=dT(a),o=dT(o),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,g=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["#define varying in",n.glslVersion===pM?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===pM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const w=_+g+a,b=_+p+o,S=aT(i,i.VERTEX_SHADER,w),M=aT(i,i.FRAGMENT_SHADER,b);i.attachShader(v,S),i.attachShader(v,M),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function C(L){if(t.debug.checkShaderErrors){const O=i.getProgramInfoLog(v).trim(),k=i.getShaderInfoLog(S).trim(),j=i.getShaderInfoLog(M).trim();let $=!0,U=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if($=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,S,M);else{const X=lT(i,S,"vertex"),z=lT(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+O+`
`+X+`
`+z)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(k===""||j==="")&&(U=!1);U&&(L.diagnostics={runnable:$,programLog:O,vertexShader:{log:k,prefix:g},fragmentShader:{log:j,prefix:p}})}i.deleteShader(S),i.deleteShader(M),P=new Lp(i,v),A=fK(i,v)}let P;this.getUniforms=function(){return P===void 0&&C(this),P};let A;this.getAttributes=function(){return A===void 0&&C(this),A};let E=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=i.getProgramParameter(v,rK)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=iK++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=M,this}let EK=0;class MK{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new TK(e),n.set(e,r)),r}}class TK{constructor(e){this.id=EK++,this.code=e,this.usedTimes=0}}function CK(t,e,n,r,i,s,a){const o=new gb,c=new MK,u=new Set,d=[],f=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(A){return u.add(A),A===0?"uv":`uv${A}`}function g(A,E,L,O,k){const j=O.fog,$=k.geometry,U=A.isMeshStandardMaterial?O.environment:null,X=(A.isMeshStandardMaterial?n:e).get(A.envMap||U),z=X&&X.mapping===jg?X.image.height:null,V=y[A.type];A.precision!==null&&(m=i.getMaxPrecision(A.precision),m!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",m,"instead."));const ee=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,de=ee!==void 0?ee.length:0;let Ee=0;$.morphAttributes.position!==void 0&&(Ee=1),$.morphAttributes.normal!==void 0&&(Ee=2),$.morphAttributes.color!==void 0&&(Ee=3);let Ne,ne,fe,xe;if(V){const Ot=rs[V];Ne=Ot.vertexShader,ne=Ot.fragmentShader}else Ne=A.vertexShader,ne=A.fragmentShader,c.update(A),fe=c.getVertexShaderID(A),xe=c.getFragmentShaderID(A);const ie=t.getRenderTarget(),Me=t.state.buffers.depth.getReversed(),Ue=k.isInstancedMesh===!0,ce=k.isBatchedMesh===!0,me=!!A.map,ve=!!A.matcap,q=!!X,I=!!A.aoMap,qe=!!A.lightMap,W=!!A.bumpMap,he=!!A.normalMap,R=!!A.displacementMap,B=!!A.emissiveMap,H=!!A.metalnessMap,N=!!A.roughnessMap,T=A.anisotropy>0,F=A.clearcoat>0,te=A.dispersion>0,le=A.iridescence>0,se=A.sheen>0,Te=A.transmission>0,Ae=T&&!!A.anisotropyMap,Fe=F&&!!A.clearcoatMap,ut=F&&!!A.clearcoatNormalMap,be=F&&!!A.clearcoatRoughnessMap,Ge=le&&!!A.iridescenceMap,tt=le&&!!A.iridescenceThicknessMap,st=se&&!!A.sheenColorMap,Ve=se&&!!A.sheenRoughnessMap,Tt=!!A.specularMap,pt=!!A.specularColorMap,$t=!!A.specularIntensityMap,Z=Te&&!!A.transmissionMap,Le=Te&&!!A.thicknessMap,ue=!!A.gradientMap,pe=!!A.alphaMap,je=A.alphaTest>0,Ie=!!A.alphaHash,dt=!!A.extensions;let ln=Qa;A.toneMapped&&(ie===null||ie.isXRRenderTarget===!0)&&(ln=t.toneMapping);const Xn={shaderID:V,shaderType:A.type,shaderName:A.name,vertexShader:Ne,fragmentShader:ne,defines:A.defines,customVertexShaderID:fe,customFragmentShaderID:xe,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:m,batching:ce,batchingColor:ce&&k._colorsTexture!==null,instancing:Ue,instancingColor:Ue&&k.instanceColor!==null,instancingMorph:Ue&&k.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ie===null?t.outputColorSpace:ie.isXRRenderTarget===!0?ie.texture.colorSpace:fu,alphaToCoverage:!!A.alphaToCoverage,map:me,matcap:ve,envMap:q,envMapMode:q&&X.mapping,envMapCubeUVHeight:z,aoMap:I,lightMap:qe,bumpMap:W,normalMap:he,displacementMap:h&&R,emissiveMap:B,normalMapObjectSpace:he&&A.normalMapType===K$,normalMapTangentSpace:he&&A.normalMapType===aI,metalnessMap:H,roughnessMap:N,anisotropy:T,anisotropyMap:Ae,clearcoat:F,clearcoatMap:Fe,clearcoatNormalMap:ut,clearcoatRoughnessMap:be,dispersion:te,iridescence:le,iridescenceMap:Ge,iridescenceThicknessMap:tt,sheen:se,sheenColorMap:st,sheenRoughnessMap:Ve,specularMap:Tt,specularColorMap:pt,specularIntensityMap:$t,transmission:Te,transmissionMap:Z,thicknessMap:Le,gradientMap:ue,opaque:A.transparent===!1&&A.blending===kc&&A.alphaToCoverage===!1,alphaMap:pe,alphaTest:je,alphaHash:Ie,combine:A.combine,mapUv:me&&v(A.map.channel),aoMapUv:I&&v(A.aoMap.channel),lightMapUv:qe&&v(A.lightMap.channel),bumpMapUv:W&&v(A.bumpMap.channel),normalMapUv:he&&v(A.normalMap.channel),displacementMapUv:R&&v(A.displacementMap.channel),emissiveMapUv:B&&v(A.emissiveMap.channel),metalnessMapUv:H&&v(A.metalnessMap.channel),roughnessMapUv:N&&v(A.roughnessMap.channel),anisotropyMapUv:Ae&&v(A.anisotropyMap.channel),clearcoatMapUv:Fe&&v(A.clearcoatMap.channel),clearcoatNormalMapUv:ut&&v(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&v(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&v(A.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&v(A.iridescenceThicknessMap.channel),sheenColorMapUv:st&&v(A.sheenColorMap.channel),sheenRoughnessMapUv:Ve&&v(A.sheenRoughnessMap.channel),specularMapUv:Tt&&v(A.specularMap.channel),specularColorMapUv:pt&&v(A.specularColorMap.channel),specularIntensityMapUv:$t&&v(A.specularIntensityMap.channel),transmissionMapUv:Z&&v(A.transmissionMap.channel),thicknessMapUv:Le&&v(A.thicknessMap.channel),alphaMapUv:pe&&v(A.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(he||T),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,pointsUvs:k.isPoints===!0&&!!$.attributes.uv&&(me||pe),fog:!!j,useFog:A.fog===!0,fogExp2:!!j&&j.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:Me,skinning:k.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:de,morphTextureStride:Ee,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:A.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:ln,decodeVideoTexture:me&&A.map.isVideoTexture===!0&&kt.getTransfer(A.map.colorSpace)===Gt,decodeVideoTextureEmissive:B&&A.emissiveMap.isVideoTexture===!0&&kt.getTransfer(A.emissiveMap.colorSpace)===Gt,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===as,flipSided:A.side===kr,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:dt&&A.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dt&&A.extensions.multiDraw===!0||ce)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return Xn.vertexUv1s=u.has(1),Xn.vertexUv2s=u.has(2),Xn.vertexUv3s=u.has(3),u.clear(),Xn}function p(A){const E=[];if(A.shaderID?E.push(A.shaderID):(E.push(A.customVertexShaderID),E.push(A.customFragmentShaderID)),A.defines!==void 0)for(const L in A.defines)E.push(L),E.push(A.defines[L]);return A.isRawShaderMaterial===!1&&(_(E,A),w(E,A),E.push(t.outputColorSpace)),E.push(A.customProgramCacheKey),E.join()}function _(A,E){A.push(E.precision),A.push(E.outputColorSpace),A.push(E.envMapMode),A.push(E.envMapCubeUVHeight),A.push(E.mapUv),A.push(E.alphaMapUv),A.push(E.lightMapUv),A.push(E.aoMapUv),A.push(E.bumpMapUv),A.push(E.normalMapUv),A.push(E.displacementMapUv),A.push(E.emissiveMapUv),A.push(E.metalnessMapUv),A.push(E.roughnessMapUv),A.push(E.anisotropyMapUv),A.push(E.clearcoatMapUv),A.push(E.clearcoatNormalMapUv),A.push(E.clearcoatRoughnessMapUv),A.push(E.iridescenceMapUv),A.push(E.iridescenceThicknessMapUv),A.push(E.sheenColorMapUv),A.push(E.sheenRoughnessMapUv),A.push(E.specularMapUv),A.push(E.specularColorMapUv),A.push(E.specularIntensityMapUv),A.push(E.transmissionMapUv),A.push(E.thicknessMapUv),A.push(E.combine),A.push(E.fogExp2),A.push(E.sizeAttenuation),A.push(E.morphTargetsCount),A.push(E.morphAttributeCount),A.push(E.numDirLights),A.push(E.numPointLights),A.push(E.numSpotLights),A.push(E.numSpotLightMaps),A.push(E.numHemiLights),A.push(E.numRectAreaLights),A.push(E.numDirLightShadows),A.push(E.numPointLightShadows),A.push(E.numSpotLightShadows),A.push(E.numSpotLightShadowsWithMaps),A.push(E.numLightProbes),A.push(E.shadowMapType),A.push(E.toneMapping),A.push(E.numClippingPlanes),A.push(E.numClipIntersection),A.push(E.depthPacking)}function w(A,E){o.disableAll(),E.supportsVertexTextures&&o.enable(0),E.instancing&&o.enable(1),E.instancingColor&&o.enable(2),E.instancingMorph&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),E.alphaHash&&o.enable(18),E.batching&&o.enable(19),E.dispersion&&o.enable(20),E.batchingColor&&o.enable(21),A.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.reverseDepthBuffer&&o.enable(4),E.skinning&&o.enable(5),E.morphTargets&&o.enable(6),E.morphNormals&&o.enable(7),E.morphColors&&o.enable(8),E.premultipliedAlpha&&o.enable(9),E.shadowMapEnabled&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),E.decodeVideoTextureEmissive&&o.enable(20),E.alphaToCoverage&&o.enable(21),A.push(o.mask)}function b(A){const E=y[A.type];let L;if(E){const O=rs[E];L=H9.clone(O.uniforms)}else L=A.uniforms;return L}function S(A,E){let L;for(let O=0,k=d.length;O<k;O++){const j=d[O];if(j.cacheKey===E){L=j,++L.usedTimes;break}}return L===void 0&&(L=new SK(t,E,A,s),d.push(L)),L}function M(A){if(--A.usedTimes===0){const E=d.indexOf(A);d[E]=d[d.length-1],d.pop(),A.destroy()}}function C(A){c.remove(A)}function P(){c.dispose()}return{getParameters:g,getProgramCacheKey:p,getUniforms:b,acquireProgram:S,releaseProgram:M,releaseShaderCache:C,programs:d,dispose:P}}function AK(){let t=new WeakMap;function e(a){return t.has(a)}function n(a){let o=t.get(a);return o===void 0&&(o={},t.set(a,o)),o}function r(a){t.delete(a)}function i(a,o,c){t.get(a)[o]=c}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function NK(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function hT(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function pT(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(f,h,m,y,v,g){let p=t[e];return p===void 0?(p={id:f.id,object:f,geometry:h,material:m,groupOrder:y,renderOrder:f.renderOrder,z:v,group:g},t[e]=p):(p.id=f.id,p.object=f,p.geometry=h,p.material=m,p.groupOrder=y,p.renderOrder=f.renderOrder,p.z=v,p.group=g),e++,p}function o(f,h,m,y,v,g){const p=a(f,h,m,y,v,g);m.transmission>0?r.push(p):m.transparent===!0?i.push(p):n.push(p)}function c(f,h,m,y,v,g){const p=a(f,h,m,y,v,g);m.transmission>0?r.unshift(p):m.transparent===!0?i.unshift(p):n.unshift(p)}function u(f,h){n.length>1&&n.sort(f||NK),r.length>1&&r.sort(h||hT),i.length>1&&i.sort(h||hT)}function d(){for(let f=e,h=t.length;f<h;f++){const m=t[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:o,unshift:c,finish:d,sort:u}}function PK(){let t=new WeakMap;function e(r,i){const s=t.get(r);let a;return s===void 0?(a=new pT,t.set(r,[a])):i>=s.length?(a=new pT,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function RK(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new K,color:new vt};break;case"SpotLight":n={position:new K,direction:new K,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new K,color:new vt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new K,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":n={color:new vt,position:new K,halfWidth:new K,halfHeight:new K};break}return t[e.id]=n,n}}}function DK(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let kK=0;function LK(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function IK(t){const e=new RK,n=DK(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new K);const i=new K,s=new Yt,a=new Yt;function o(u){let d=0,f=0,h=0;for(let A=0;A<9;A++)r.probe[A].set(0,0,0);let m=0,y=0,v=0,g=0,p=0,_=0,w=0,b=0,S=0,M=0,C=0;u.sort(LK);for(let A=0,E=u.length;A<E;A++){const L=u[A],O=L.color,k=L.intensity,j=L.distance,$=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)d+=O.r*k,f+=O.g*k,h+=O.b*k;else if(L.isLightProbe){for(let U=0;U<9;U++)r.probe[U].addScaledVector(L.sh.coefficients[U],k);C++}else if(L.isDirectionalLight){const U=e.get(L);if(U.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const X=L.shadow,z=n.get(L);z.shadowIntensity=X.intensity,z.shadowBias=X.bias,z.shadowNormalBias=X.normalBias,z.shadowRadius=X.radius,z.shadowMapSize=X.mapSize,r.directionalShadow[m]=z,r.directionalShadowMap[m]=$,r.directionalShadowMatrix[m]=L.shadow.matrix,_++}r.directional[m]=U,m++}else if(L.isSpotLight){const U=e.get(L);U.position.setFromMatrixPosition(L.matrixWorld),U.color.copy(O).multiplyScalar(k),U.distance=j,U.coneCos=Math.cos(L.angle),U.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),U.decay=L.decay,r.spot[v]=U;const X=L.shadow;if(L.map&&(r.spotLightMap[S]=L.map,S++,X.updateMatrices(L),L.castShadow&&M++),r.spotLightMatrix[v]=X.matrix,L.castShadow){const z=n.get(L);z.shadowIntensity=X.intensity,z.shadowBias=X.bias,z.shadowNormalBias=X.normalBias,z.shadowRadius=X.radius,z.shadowMapSize=X.mapSize,r.spotShadow[v]=z,r.spotShadowMap[v]=$,b++}v++}else if(L.isRectAreaLight){const U=e.get(L);U.color.copy(O).multiplyScalar(k),U.halfWidth.set(L.width*.5,0,0),U.halfHeight.set(0,L.height*.5,0),r.rectArea[g]=U,g++}else if(L.isPointLight){const U=e.get(L);if(U.color.copy(L.color).multiplyScalar(L.intensity),U.distance=L.distance,U.decay=L.decay,L.castShadow){const X=L.shadow,z=n.get(L);z.shadowIntensity=X.intensity,z.shadowBias=X.bias,z.shadowNormalBias=X.normalBias,z.shadowRadius=X.radius,z.shadowMapSize=X.mapSize,z.shadowCameraNear=X.camera.near,z.shadowCameraFar=X.camera.far,r.pointShadow[y]=z,r.pointShadowMap[y]=$,r.pointShadowMatrix[y]=L.shadow.matrix,w++}r.point[y]=U,y++}else if(L.isHemisphereLight){const U=e.get(L);U.skyColor.copy(L.color).multiplyScalar(k),U.groundColor.copy(L.groundColor).multiplyScalar(k),r.hemi[p]=U,p++}}g>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=h;const P=r.hash;(P.directionalLength!==m||P.pointLength!==y||P.spotLength!==v||P.rectAreaLength!==g||P.hemiLength!==p||P.numDirectionalShadows!==_||P.numPointShadows!==w||P.numSpotShadows!==b||P.numSpotMaps!==S||P.numLightProbes!==C)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=g,r.point.length=y,r.hemi.length=p,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=b+S-M,r.spotLightMap.length=S,r.numSpotLightShadowsWithMaps=M,r.numLightProbes=C,P.directionalLength=m,P.pointLength=y,P.spotLength=v,P.rectAreaLength=g,P.hemiLength=p,P.numDirectionalShadows=_,P.numPointShadows=w,P.numSpotShadows=b,P.numSpotMaps=S,P.numLightProbes=C,r.version=kK++)}function c(u,d){let f=0,h=0,m=0,y=0,v=0;const g=d.matrixWorldInverse;for(let p=0,_=u.length;p<_;p++){const w=u[p];if(w.isDirectionalLight){const b=r.directional[f];b.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(g),f++}else if(w.isSpotLight){const b=r.spot[m];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(g),m++}else if(w.isRectAreaLight){const b=r.rectArea[y];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(g),a.identity(),s.copy(w.matrixWorld),s.premultiply(g),a.extractRotation(s),b.halfWidth.set(w.width*.5,0,0),b.halfHeight.set(0,w.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),y++}else if(w.isPointLight){const b=r.point[h];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(g),h++}else if(w.isHemisphereLight){const b=r.hemi[v];b.direction.setFromMatrixPosition(w.matrixWorld),b.direction.transformDirection(g),v++}}}return{setup:o,setupView:c,state:r}}function mT(t){const e=new IK(t),n=[],r=[];function i(d){u.camera=d,n.length=0,r.length=0}function s(d){n.push(d)}function a(d){r.push(d)}function o(){e.setup(n)}function c(d){e.setupView(n,d)}const u={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:c,pushLight:s,pushShadow:a}}function jK(t){let e=new WeakMap;function n(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new mT(t),e.set(i,[o])):s>=a.length?(o=new mT(t),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:n,dispose:r}}const zK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,OK=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function FK(t,e,n){let r=new vb;const i=new nt,s=new nt,a=new pn,o=new e7({depthPacking:Z$}),c=new t7,u={},d=n.maxTextureSize,f={[oo]:kr,[kr]:oo,[as]:as},h=new lo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new nt},radius:{value:4}},vertexShader:zK,fragmentShader:OK}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const y=new En;y.setAttribute("position",new Lr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new On(y,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qL;let p=this.type;this.render=function(M,C,P){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||M.length===0)return;const A=t.getRenderTarget(),E=t.getActiveCubeFace(),L=t.getActiveMipmapLevel(),O=t.state;O.setBlending(Ya),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const k=p!==Ds&&this.type===Ds,j=p===Ds&&this.type!==Ds;for(let $=0,U=M.length;$<U;$++){const X=M[$],z=X.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;i.copy(z.mapSize);const V=z.getFrameExtents();if(i.multiply(V),s.copy(z.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/V.x),i.x=s.x*V.x,z.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/V.y),i.y=s.y*V.y,z.mapSize.y=s.y)),z.map===null||k===!0||j===!0){const de=this.type!==Ds?{minFilter:Ui,magFilter:Ui}:{};z.map!==null&&z.map.dispose(),z.map=new ml(i.x,i.y,de),z.map.texture.name=X.name+".shadowMap",z.camera.updateProjectionMatrix()}t.setRenderTarget(z.map),t.clear();const ee=z.getViewportCount();for(let de=0;de<ee;de++){const Ee=z.getViewport(de);a.set(s.x*Ee.x,s.y*Ee.y,s.x*Ee.z,s.y*Ee.w),O.viewport(a),z.updateMatrices(X,de),r=z.getFrustum(),b(C,P,z.camera,X,this.type)}z.isPointLightShadow!==!0&&this.type===Ds&&_(z,P),z.needsUpdate=!1}p=this.type,g.needsUpdate=!1,t.setRenderTarget(A,E,L)};function _(M,C){const P=e.update(v);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new ml(i.x,i.y)),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,t.setRenderTarget(M.mapPass),t.clear(),t.renderBufferDirect(C,null,P,h,v,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,t.setRenderTarget(M.map),t.clear(),t.renderBufferDirect(C,null,P,m,v,null)}function w(M,C,P,A){let E=null;const L=P.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(L!==void 0)E=L;else if(E=P.isPointLight===!0?c:o,t.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const O=E.uuid,k=C.uuid;let j=u[O];j===void 0&&(j={},u[O]=j);let $=j[k];$===void 0&&($=E.clone(),j[k]=$,C.addEventListener("dispose",S)),E=$}if(E.visible=C.visible,E.wireframe=C.wireframe,A===Ds?E.side=C.shadowSide!==null?C.shadowSide:C.side:E.side=C.shadowSide!==null?C.shadowSide:f[C.side],E.alphaMap=C.alphaMap,E.alphaTest=C.alphaTest,E.map=C.map,E.clipShadows=C.clipShadows,E.clippingPlanes=C.clippingPlanes,E.clipIntersection=C.clipIntersection,E.displacementMap=C.displacementMap,E.displacementScale=C.displacementScale,E.displacementBias=C.displacementBias,E.wireframeLinewidth=C.wireframeLinewidth,E.linewidth=C.linewidth,P.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const O=t.properties.get(E);O.light=P}return E}function b(M,C,P,A,E){if(M.visible===!1)return;if(M.layers.test(C.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&E===Ds)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,M.matrixWorld);const k=e.update(M),j=M.material;if(Array.isArray(j)){const $=k.groups;for(let U=0,X=$.length;U<X;U++){const z=$[U],V=j[z.materialIndex];if(V&&V.visible){const ee=w(M,V,A,E);M.onBeforeShadow(t,M,C,P,k,ee,z),t.renderBufferDirect(P,null,k,ee,M,z),M.onAfterShadow(t,M,C,P,k,ee,z)}}}else if(j.visible){const $=w(M,j,A,E);M.onBeforeShadow(t,M,C,P,k,$,null),t.renderBufferDirect(P,null,k,$,M,null),M.onAfterShadow(t,M,C,P,k,$,null)}}const O=M.children;for(let k=0,j=O.length;k<j;k++)b(O[k],C,P,A,E)}function S(M){M.target.removeEventListener("dispose",S);for(const P in u){const A=u[P],E=M.target.uuid;E in A&&(A[E].dispose(),delete A[E])}}}const UK={[s_]:a_,[o_]:u_,[l_]:d_,[cu]:c_,[a_]:s_,[u_]:o_,[d_]:l_,[c_]:cu};function BK(t,e){function n(){let Z=!1;const Le=new pn;let ue=null;const pe=new pn(0,0,0,0);return{setMask:function(je){ue!==je&&!Z&&(t.colorMask(je,je,je,je),ue=je)},setLocked:function(je){Z=je},setClear:function(je,Ie,dt,ln,Xn){Xn===!0&&(je*=ln,Ie*=ln,dt*=ln),Le.set(je,Ie,dt,ln),pe.equals(Le)===!1&&(t.clearColor(je,Ie,dt,ln),pe.copy(Le))},reset:function(){Z=!1,ue=null,pe.set(-1,0,0,0)}}}function r(){let Z=!1,Le=!1,ue=null,pe=null,je=null;return{setReversed:function(Ie){if(Le!==Ie){const dt=e.get("EXT_clip_control");Ie?dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.ZERO_TO_ONE_EXT):dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.NEGATIVE_ONE_TO_ONE_EXT),Le=Ie;const ln=je;je=null,this.setClear(ln)}},getReversed:function(){return Le},setTest:function(Ie){Ie?ie(t.DEPTH_TEST):Me(t.DEPTH_TEST)},setMask:function(Ie){ue!==Ie&&!Z&&(t.depthMask(Ie),ue=Ie)},setFunc:function(Ie){if(Le&&(Ie=UK[Ie]),pe!==Ie){switch(Ie){case s_:t.depthFunc(t.NEVER);break;case a_:t.depthFunc(t.ALWAYS);break;case o_:t.depthFunc(t.LESS);break;case cu:t.depthFunc(t.LEQUAL);break;case l_:t.depthFunc(t.EQUAL);break;case c_:t.depthFunc(t.GEQUAL);break;case u_:t.depthFunc(t.GREATER);break;case d_:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}pe=Ie}},setLocked:function(Ie){Z=Ie},setClear:function(Ie){je!==Ie&&(Le&&(Ie=1-Ie),t.clearDepth(Ie),je=Ie)},reset:function(){Z=!1,ue=null,pe=null,je=null,Le=!1}}}function i(){let Z=!1,Le=null,ue=null,pe=null,je=null,Ie=null,dt=null,ln=null,Xn=null;return{setTest:function(Ot){Z||(Ot?ie(t.STENCIL_TEST):Me(t.STENCIL_TEST))},setMask:function(Ot){Le!==Ot&&!Z&&(t.stencilMask(Ot),Le=Ot)},setFunc:function(Ot,yi,bs){(ue!==Ot||pe!==yi||je!==bs)&&(t.stencilFunc(Ot,yi,bs),ue=Ot,pe=yi,je=bs)},setOp:function(Ot,yi,bs){(Ie!==Ot||dt!==yi||ln!==bs)&&(t.stencilOp(Ot,yi,bs),Ie=Ot,dt=yi,ln=bs)},setLocked:function(Ot){Z=Ot},setClear:function(Ot){Xn!==Ot&&(t.clearStencil(Ot),Xn=Ot)},reset:function(){Z=!1,Le=null,ue=null,pe=null,je=null,Ie=null,dt=null,ln=null,Xn=null}}}const s=new n,a=new r,o=new i,c=new WeakMap,u=new WeakMap;let d={},f={},h=new WeakMap,m=[],y=null,v=!1,g=null,p=null,_=null,w=null,b=null,S=null,M=null,C=new vt(0,0,0),P=0,A=!1,E=null,L=null,O=null,k=null,j=null;const $=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,X=0;const z=t.getParameter(t.VERSION);z.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(z)[1]),U=X>=1):z.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),U=X>=2);let V=null,ee={};const de=t.getParameter(t.SCISSOR_BOX),Ee=t.getParameter(t.VIEWPORT),Ne=new pn().fromArray(de),ne=new pn().fromArray(Ee);function fe(Z,Le,ue,pe){const je=new Uint8Array(4),Ie=t.createTexture();t.bindTexture(Z,Ie),t.texParameteri(Z,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Z,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let dt=0;dt<ue;dt++)Z===t.TEXTURE_3D||Z===t.TEXTURE_2D_ARRAY?t.texImage3D(Le,0,t.RGBA,1,1,pe,0,t.RGBA,t.UNSIGNED_BYTE,je):t.texImage2D(Le+dt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,je);return Ie}const xe={};xe[t.TEXTURE_2D]=fe(t.TEXTURE_2D,t.TEXTURE_2D,1),xe[t.TEXTURE_CUBE_MAP]=fe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[t.TEXTURE_2D_ARRAY]=fe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),xe[t.TEXTURE_3D]=fe(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ie(t.DEPTH_TEST),a.setFunc(cu),W(!1),he(cM),ie(t.CULL_FACE),I(Ya);function ie(Z){d[Z]!==!0&&(t.enable(Z),d[Z]=!0)}function Me(Z){d[Z]!==!1&&(t.disable(Z),d[Z]=!1)}function Ue(Z,Le){return f[Z]!==Le?(t.bindFramebuffer(Z,Le),f[Z]=Le,Z===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=Le),Z===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=Le),!0):!1}function ce(Z,Le){let ue=m,pe=!1;if(Z){ue=h.get(Le),ue===void 0&&(ue=[],h.set(Le,ue));const je=Z.textures;if(ue.length!==je.length||ue[0]!==t.COLOR_ATTACHMENT0){for(let Ie=0,dt=je.length;Ie<dt;Ie++)ue[Ie]=t.COLOR_ATTACHMENT0+Ie;ue.length=je.length,pe=!0}}else ue[0]!==t.BACK&&(ue[0]=t.BACK,pe=!0);pe&&t.drawBuffers(ue)}function me(Z){return y!==Z?(t.useProgram(Z),y=Z,!0):!1}const ve={[Io]:t.FUNC_ADD,[w$]:t.FUNC_SUBTRACT,[b$]:t.FUNC_REVERSE_SUBTRACT};ve[S$]=t.MIN,ve[E$]=t.MAX;const q={[M$]:t.ZERO,[T$]:t.ONE,[C$]:t.SRC_COLOR,[r_]:t.SRC_ALPHA,[k$]:t.SRC_ALPHA_SATURATE,[R$]:t.DST_COLOR,[N$]:t.DST_ALPHA,[A$]:t.ONE_MINUS_SRC_COLOR,[i_]:t.ONE_MINUS_SRC_ALPHA,[D$]:t.ONE_MINUS_DST_COLOR,[P$]:t.ONE_MINUS_DST_ALPHA,[L$]:t.CONSTANT_COLOR,[I$]:t.ONE_MINUS_CONSTANT_COLOR,[j$]:t.CONSTANT_ALPHA,[z$]:t.ONE_MINUS_CONSTANT_ALPHA};function I(Z,Le,ue,pe,je,Ie,dt,ln,Xn,Ot){if(Z===Ya){v===!0&&(Me(t.BLEND),v=!1);return}if(v===!1&&(ie(t.BLEND),v=!0),Z!==_$){if(Z!==g||Ot!==A){if((p!==Io||b!==Io)&&(t.blendEquation(t.FUNC_ADD),p=Io,b=Io),Ot)switch(Z){case kc:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case uM:t.blendFunc(t.ONE,t.ONE);break;case dM:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case fM:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case kc:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case uM:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case dM:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case fM:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}_=null,w=null,S=null,M=null,C.set(0,0,0),P=0,g=Z,A=Ot}return}je=je||Le,Ie=Ie||ue,dt=dt||pe,(Le!==p||je!==b)&&(t.blendEquationSeparate(ve[Le],ve[je]),p=Le,b=je),(ue!==_||pe!==w||Ie!==S||dt!==M)&&(t.blendFuncSeparate(q[ue],q[pe],q[Ie],q[dt]),_=ue,w=pe,S=Ie,M=dt),(ln.equals(C)===!1||Xn!==P)&&(t.blendColor(ln.r,ln.g,ln.b,Xn),C.copy(ln),P=Xn),g=Z,A=!1}function qe(Z,Le){Z.side===as?Me(t.CULL_FACE):ie(t.CULL_FACE);let ue=Z.side===kr;Le&&(ue=!ue),W(ue),Z.blending===kc&&Z.transparent===!1?I(Ya):I(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),a.setFunc(Z.depthFunc),a.setTest(Z.depthTest),a.setMask(Z.depthWrite),s.setMask(Z.colorWrite);const pe=Z.stencilWrite;o.setTest(pe),pe&&(o.setMask(Z.stencilWriteMask),o.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),o.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),B(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?ie(t.SAMPLE_ALPHA_TO_COVERAGE):Me(t.SAMPLE_ALPHA_TO_COVERAGE)}function W(Z){E!==Z&&(Z?t.frontFace(t.CW):t.frontFace(t.CCW),E=Z)}function he(Z){Z!==v$?(ie(t.CULL_FACE),Z!==L&&(Z===cM?t.cullFace(t.BACK):Z===y$?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Me(t.CULL_FACE),L=Z}function R(Z){Z!==O&&(U&&t.lineWidth(Z),O=Z)}function B(Z,Le,ue){Z?(ie(t.POLYGON_OFFSET_FILL),(k!==Le||j!==ue)&&(t.polygonOffset(Le,ue),k=Le,j=ue)):Me(t.POLYGON_OFFSET_FILL)}function H(Z){Z?ie(t.SCISSOR_TEST):Me(t.SCISSOR_TEST)}function N(Z){Z===void 0&&(Z=t.TEXTURE0+$-1),V!==Z&&(t.activeTexture(Z),V=Z)}function T(Z,Le,ue){ue===void 0&&(V===null?ue=t.TEXTURE0+$-1:ue=V);let pe=ee[ue];pe===void 0&&(pe={type:void 0,texture:void 0},ee[ue]=pe),(pe.type!==Z||pe.texture!==Le)&&(V!==ue&&(t.activeTexture(ue),V=ue),t.bindTexture(Z,Le||xe[Z]),pe.type=Z,pe.texture=Le)}function F(){const Z=ee[V];Z!==void 0&&Z.type!==void 0&&(t.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function te(){try{t.compressedTexImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function le(){try{t.compressedTexImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function se(){try{t.texSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Te(){try{t.texSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ae(){try{t.compressedTexSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Fe(){try{t.compressedTexSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ut(){try{t.texStorage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function be(){try{t.texStorage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ge(){try{t.texImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function tt(){try{t.texImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function st(Z){Ne.equals(Z)===!1&&(t.scissor(Z.x,Z.y,Z.z,Z.w),Ne.copy(Z))}function Ve(Z){ne.equals(Z)===!1&&(t.viewport(Z.x,Z.y,Z.z,Z.w),ne.copy(Z))}function Tt(Z,Le){let ue=u.get(Le);ue===void 0&&(ue=new WeakMap,u.set(Le,ue));let pe=ue.get(Z);pe===void 0&&(pe=t.getUniformBlockIndex(Le,Z.name),ue.set(Z,pe))}function pt(Z,Le){const pe=u.get(Le).get(Z);c.get(Le)!==pe&&(t.uniformBlockBinding(Le,pe,Z.__bindingPointIndex),c.set(Le,pe))}function $t(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),a.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},V=null,ee={},f={},h=new WeakMap,m=[],y=null,v=!1,g=null,p=null,_=null,w=null,b=null,S=null,M=null,C=new vt(0,0,0),P=0,A=!1,E=null,L=null,O=null,k=null,j=null,Ne.set(0,0,t.canvas.width,t.canvas.height),ne.set(0,0,t.canvas.width,t.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ie,disable:Me,bindFramebuffer:Ue,drawBuffers:ce,useProgram:me,setBlending:I,setMaterial:qe,setFlipSided:W,setCullFace:he,setLineWidth:R,setPolygonOffset:B,setScissorTest:H,activeTexture:N,bindTexture:T,unbindTexture:F,compressedTexImage2D:te,compressedTexImage3D:le,texImage2D:Ge,texImage3D:tt,updateUBOMapping:Tt,uniformBlockBinding:pt,texStorage2D:ut,texStorage3D:be,texSubImage2D:se,texSubImage3D:Te,compressedTexSubImage2D:Ae,compressedTexSubImage3D:Fe,scissor:st,viewport:Ve,reset:$t}}function VK(t,e,n,r,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new nt,d=new WeakMap;let f;const h=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(N,T){return m?new OffscreenCanvas(N,T):Nm("canvas")}function v(N,T,F){let te=1;const le=H(N);if((le.width>F||le.height>F)&&(te=F/Math.max(le.width,le.height)),te<1)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){const se=Math.floor(te*le.width),Te=Math.floor(te*le.height);f===void 0&&(f=y(se,Te));const Ae=T?y(se,Te):f;return Ae.width=se,Ae.height=Te,Ae.getContext("2d").drawImage(N,0,0,se,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+le.width+"x"+le.height+") to ("+se+"x"+Te+")."),Ae}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+le.width+"x"+le.height+")."),N;return N}function g(N){return N.generateMipmaps}function p(N){t.generateMipmap(N)}function _(N){return N.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:N.isWebGL3DRenderTarget?t.TEXTURE_3D:N.isWebGLArrayRenderTarget||N.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function w(N,T,F,te,le=!1){if(N!==null){if(t[N]!==void 0)return t[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let se=T;if(T===t.RED&&(F===t.FLOAT&&(se=t.R32F),F===t.HALF_FLOAT&&(se=t.R16F),F===t.UNSIGNED_BYTE&&(se=t.R8)),T===t.RED_INTEGER&&(F===t.UNSIGNED_BYTE&&(se=t.R8UI),F===t.UNSIGNED_SHORT&&(se=t.R16UI),F===t.UNSIGNED_INT&&(se=t.R32UI),F===t.BYTE&&(se=t.R8I),F===t.SHORT&&(se=t.R16I),F===t.INT&&(se=t.R32I)),T===t.RG&&(F===t.FLOAT&&(se=t.RG32F),F===t.HALF_FLOAT&&(se=t.RG16F),F===t.UNSIGNED_BYTE&&(se=t.RG8)),T===t.RG_INTEGER&&(F===t.UNSIGNED_BYTE&&(se=t.RG8UI),F===t.UNSIGNED_SHORT&&(se=t.RG16UI),F===t.UNSIGNED_INT&&(se=t.RG32UI),F===t.BYTE&&(se=t.RG8I),F===t.SHORT&&(se=t.RG16I),F===t.INT&&(se=t.RG32I)),T===t.RGB_INTEGER&&(F===t.UNSIGNED_BYTE&&(se=t.RGB8UI),F===t.UNSIGNED_SHORT&&(se=t.RGB16UI),F===t.UNSIGNED_INT&&(se=t.RGB32UI),F===t.BYTE&&(se=t.RGB8I),F===t.SHORT&&(se=t.RGB16I),F===t.INT&&(se=t.RGB32I)),T===t.RGBA_INTEGER&&(F===t.UNSIGNED_BYTE&&(se=t.RGBA8UI),F===t.UNSIGNED_SHORT&&(se=t.RGBA16UI),F===t.UNSIGNED_INT&&(se=t.RGBA32UI),F===t.BYTE&&(se=t.RGBA8I),F===t.SHORT&&(se=t.RGBA16I),F===t.INT&&(se=t.RGBA32I)),T===t.RGB&&F===t.UNSIGNED_INT_5_9_9_9_REV&&(se=t.RGB9_E5),T===t.RGBA){const Te=le?Cm:kt.getTransfer(te);F===t.FLOAT&&(se=t.RGBA32F),F===t.HALF_FLOAT&&(se=t.RGBA16F),F===t.UNSIGNED_BYTE&&(se=Te===Gt?t.SRGB8_ALPHA8:t.RGBA8),F===t.UNSIGNED_SHORT_4_4_4_4&&(se=t.RGBA4),F===t.UNSIGNED_SHORT_5_5_5_1&&(se=t.RGB5_A1)}return(se===t.R16F||se===t.R32F||se===t.RG16F||se===t.RG32F||se===t.RGBA16F||se===t.RGBA32F)&&e.get("EXT_color_buffer_float"),se}function b(N,T){let F;return N?T===null||T===pl||T===nf?F=t.DEPTH24_STENCIL8:T===Fs?F=t.DEPTH32F_STENCIL8:T===tf&&(F=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):T===null||T===pl||T===nf?F=t.DEPTH_COMPONENT24:T===Fs?F=t.DEPTH_COMPONENT32F:T===tf&&(F=t.DEPTH_COMPONENT16),F}function S(N,T){return g(N)===!0||N.isFramebufferTexture&&N.minFilter!==Ui&&N.minFilter!==os?Math.log2(Math.max(T.width,T.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?T.mipmaps.length:1}function M(N){const T=N.target;T.removeEventListener("dispose",M),P(T),T.isVideoTexture&&d.delete(T)}function C(N){const T=N.target;T.removeEventListener("dispose",C),E(T)}function P(N){const T=r.get(N);if(T.__webglInit===void 0)return;const F=N.source,te=h.get(F);if(te){const le=te[T.__cacheKey];le.usedTimes--,le.usedTimes===0&&A(N),Object.keys(te).length===0&&h.delete(F)}r.remove(N)}function A(N){const T=r.get(N);t.deleteTexture(T.__webglTexture);const F=N.source,te=h.get(F);delete te[T.__cacheKey],a.memory.textures--}function E(N){const T=r.get(N);if(N.depthTexture&&(N.depthTexture.dispose(),r.remove(N.depthTexture)),N.isWebGLCubeRenderTarget)for(let te=0;te<6;te++){if(Array.isArray(T.__webglFramebuffer[te]))for(let le=0;le<T.__webglFramebuffer[te].length;le++)t.deleteFramebuffer(T.__webglFramebuffer[te][le]);else t.deleteFramebuffer(T.__webglFramebuffer[te]);T.__webglDepthbuffer&&t.deleteRenderbuffer(T.__webglDepthbuffer[te])}else{if(Array.isArray(T.__webglFramebuffer))for(let te=0;te<T.__webglFramebuffer.length;te++)t.deleteFramebuffer(T.__webglFramebuffer[te]);else t.deleteFramebuffer(T.__webglFramebuffer);if(T.__webglDepthbuffer&&t.deleteRenderbuffer(T.__webglDepthbuffer),T.__webglMultisampledFramebuffer&&t.deleteFramebuffer(T.__webglMultisampledFramebuffer),T.__webglColorRenderbuffer)for(let te=0;te<T.__webglColorRenderbuffer.length;te++)T.__webglColorRenderbuffer[te]&&t.deleteRenderbuffer(T.__webglColorRenderbuffer[te]);T.__webglDepthRenderbuffer&&t.deleteRenderbuffer(T.__webglDepthRenderbuffer)}const F=N.textures;for(let te=0,le=F.length;te<le;te++){const se=r.get(F[te]);se.__webglTexture&&(t.deleteTexture(se.__webglTexture),a.memory.textures--),r.remove(F[te])}r.remove(N)}let L=0;function O(){L=0}function k(){const N=L;return N>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+i.maxTextures),L+=1,N}function j(N){const T=[];return T.push(N.wrapS),T.push(N.wrapT),T.push(N.wrapR||0),T.push(N.magFilter),T.push(N.minFilter),T.push(N.anisotropy),T.push(N.internalFormat),T.push(N.format),T.push(N.type),T.push(N.generateMipmaps),T.push(N.premultiplyAlpha),T.push(N.flipY),T.push(N.unpackAlignment),T.push(N.colorSpace),T.join()}function $(N,T){const F=r.get(N);if(N.isVideoTexture&&R(N),N.isRenderTargetTexture===!1&&N.version>0&&F.__version!==N.version){const te=N.image;if(te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ne(F,N,T);return}}n.bindTexture(t.TEXTURE_2D,F.__webglTexture,t.TEXTURE0+T)}function U(N,T){const F=r.get(N);if(N.version>0&&F.__version!==N.version){ne(F,N,T);return}n.bindTexture(t.TEXTURE_2D_ARRAY,F.__webglTexture,t.TEXTURE0+T)}function X(N,T){const F=r.get(N);if(N.version>0&&F.__version!==N.version){ne(F,N,T);return}n.bindTexture(t.TEXTURE_3D,F.__webglTexture,t.TEXTURE0+T)}function z(N,T){const F=r.get(N);if(N.version>0&&F.__version!==N.version){fe(F,N,T);return}n.bindTexture(t.TEXTURE_CUBE_MAP,F.__webglTexture,t.TEXTURE0+T)}const V={[p_]:t.REPEAT,[Bo]:t.CLAMP_TO_EDGE,[m_]:t.MIRRORED_REPEAT},ee={[Ui]:t.NEAREST,[q$]:t.NEAREST_MIPMAP_NEAREST,[Ah]:t.NEAREST_MIPMAP_LINEAR,[os]:t.LINEAR,[Xv]:t.LINEAR_MIPMAP_NEAREST,[Vo]:t.LINEAR_MIPMAP_LINEAR},de={[Y$]:t.NEVER,[r9]:t.ALWAYS,[Q$]:t.LESS,[oI]:t.LEQUAL,[J$]:t.EQUAL,[n9]:t.GEQUAL,[e9]:t.GREATER,[t9]:t.NOTEQUAL};function Ee(N,T){if(T.type===Fs&&e.has("OES_texture_float_linear")===!1&&(T.magFilter===os||T.magFilter===Xv||T.magFilter===Ah||T.magFilter===Vo||T.minFilter===os||T.minFilter===Xv||T.minFilter===Ah||T.minFilter===Vo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(N,t.TEXTURE_WRAP_S,V[T.wrapS]),t.texParameteri(N,t.TEXTURE_WRAP_T,V[T.wrapT]),(N===t.TEXTURE_3D||N===t.TEXTURE_2D_ARRAY)&&t.texParameteri(N,t.TEXTURE_WRAP_R,V[T.wrapR]),t.texParameteri(N,t.TEXTURE_MAG_FILTER,ee[T.magFilter]),t.texParameteri(N,t.TEXTURE_MIN_FILTER,ee[T.minFilter]),T.compareFunction&&(t.texParameteri(N,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(N,t.TEXTURE_COMPARE_FUNC,de[T.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(T.magFilter===Ui||T.minFilter!==Ah&&T.minFilter!==Vo||T.type===Fs&&e.has("OES_texture_float_linear")===!1)return;if(T.anisotropy>1||r.get(T).__currentAnisotropy){const F=e.get("EXT_texture_filter_anisotropic");t.texParameterf(N,F.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,i.getMaxAnisotropy())),r.get(T).__currentAnisotropy=T.anisotropy}}}function Ne(N,T){let F=!1;N.__webglInit===void 0&&(N.__webglInit=!0,T.addEventListener("dispose",M));const te=T.source;let le=h.get(te);le===void 0&&(le={},h.set(te,le));const se=j(T);if(se!==N.__cacheKey){le[se]===void 0&&(le[se]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,F=!0),le[se].usedTimes++;const Te=le[N.__cacheKey];Te!==void 0&&(le[N.__cacheKey].usedTimes--,Te.usedTimes===0&&A(T)),N.__cacheKey=se,N.__webglTexture=le[se].texture}return F}function ne(N,T,F){let te=t.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(te=t.TEXTURE_2D_ARRAY),T.isData3DTexture&&(te=t.TEXTURE_3D);const le=Ne(N,T),se=T.source;n.bindTexture(te,N.__webglTexture,t.TEXTURE0+F);const Te=r.get(se);if(se.version!==Te.__version||le===!0){n.activeTexture(t.TEXTURE0+F);const Ae=kt.getPrimaries(kt.workingColorSpace),Fe=T.colorSpace===Ea?null:kt.getPrimaries(T.colorSpace),ut=T.colorSpace===Ea||Ae===Fe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,T.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,T.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);let be=v(T.image,!1,i.maxTextureSize);be=B(T,be);const Ge=s.convert(T.format,T.colorSpace),tt=s.convert(T.type);let st=w(T.internalFormat,Ge,tt,T.colorSpace,T.isVideoTexture);Ee(te,T);let Ve;const Tt=T.mipmaps,pt=T.isVideoTexture!==!0,$t=Te.__version===void 0||le===!0,Z=se.dataReady,Le=S(T,be);if(T.isDepthTexture)st=b(T.format===sf,T.type),$t&&(pt?n.texStorage2D(t.TEXTURE_2D,1,st,be.width,be.height):n.texImage2D(t.TEXTURE_2D,0,st,be.width,be.height,0,Ge,tt,null));else if(T.isDataTexture)if(Tt.length>0){pt&&$t&&n.texStorage2D(t.TEXTURE_2D,Le,st,Tt[0].width,Tt[0].height);for(let ue=0,pe=Tt.length;ue<pe;ue++)Ve=Tt[ue],pt?Z&&n.texSubImage2D(t.TEXTURE_2D,ue,0,0,Ve.width,Ve.height,Ge,tt,Ve.data):n.texImage2D(t.TEXTURE_2D,ue,st,Ve.width,Ve.height,0,Ge,tt,Ve.data);T.generateMipmaps=!1}else pt?($t&&n.texStorage2D(t.TEXTURE_2D,Le,st,be.width,be.height),Z&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,be.width,be.height,Ge,tt,be.data)):n.texImage2D(t.TEXTURE_2D,0,st,be.width,be.height,0,Ge,tt,be.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){pt&&$t&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Le,st,Tt[0].width,Tt[0].height,be.depth);for(let ue=0,pe=Tt.length;ue<pe;ue++)if(Ve=Tt[ue],T.format!==Di)if(Ge!==null)if(pt){if(Z)if(T.layerUpdates.size>0){const je=WM(Ve.width,Ve.height,T.format,T.type);for(const Ie of T.layerUpdates){const dt=Ve.data.subarray(Ie*je/Ve.data.BYTES_PER_ELEMENT,(Ie+1)*je/Ve.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ue,0,0,Ie,Ve.width,Ve.height,1,Ge,dt)}T.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ue,0,0,0,Ve.width,Ve.height,be.depth,Ge,Ve.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ue,st,Ve.width,Ve.height,be.depth,0,Ve.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pt?Z&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,ue,0,0,0,Ve.width,Ve.height,be.depth,Ge,tt,Ve.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ue,st,Ve.width,Ve.height,be.depth,0,Ge,tt,Ve.data)}else{pt&&$t&&n.texStorage2D(t.TEXTURE_2D,Le,st,Tt[0].width,Tt[0].height);for(let ue=0,pe=Tt.length;ue<pe;ue++)Ve=Tt[ue],T.format!==Di?Ge!==null?pt?Z&&n.compressedTexSubImage2D(t.TEXTURE_2D,ue,0,0,Ve.width,Ve.height,Ge,Ve.data):n.compressedTexImage2D(t.TEXTURE_2D,ue,st,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?Z&&n.texSubImage2D(t.TEXTURE_2D,ue,0,0,Ve.width,Ve.height,Ge,tt,Ve.data):n.texImage2D(t.TEXTURE_2D,ue,st,Ve.width,Ve.height,0,Ge,tt,Ve.data)}else if(T.isDataArrayTexture)if(pt){if($t&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Le,st,be.width,be.height,be.depth),Z)if(T.layerUpdates.size>0){const ue=WM(be.width,be.height,T.format,T.type);for(const pe of T.layerUpdates){const je=be.data.subarray(pe*ue/be.data.BYTES_PER_ELEMENT,(pe+1)*ue/be.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,pe,be.width,be.height,1,Ge,tt,je)}T.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,Ge,tt,be.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,st,be.width,be.height,be.depth,0,Ge,tt,be.data);else if(T.isData3DTexture)pt?($t&&n.texStorage3D(t.TEXTURE_3D,Le,st,be.width,be.height,be.depth),Z&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,Ge,tt,be.data)):n.texImage3D(t.TEXTURE_3D,0,st,be.width,be.height,be.depth,0,Ge,tt,be.data);else if(T.isFramebufferTexture){if($t)if(pt)n.texStorage2D(t.TEXTURE_2D,Le,st,be.width,be.height);else{let ue=be.width,pe=be.height;for(let je=0;je<Le;je++)n.texImage2D(t.TEXTURE_2D,je,st,ue,pe,0,Ge,tt,null),ue>>=1,pe>>=1}}else if(Tt.length>0){if(pt&&$t){const ue=H(Tt[0]);n.texStorage2D(t.TEXTURE_2D,Le,st,ue.width,ue.height)}for(let ue=0,pe=Tt.length;ue<pe;ue++)Ve=Tt[ue],pt?Z&&n.texSubImage2D(t.TEXTURE_2D,ue,0,0,Ge,tt,Ve):n.texImage2D(t.TEXTURE_2D,ue,st,Ge,tt,Ve);T.generateMipmaps=!1}else if(pt){if($t){const ue=H(be);n.texStorage2D(t.TEXTURE_2D,Le,st,ue.width,ue.height)}Z&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ge,tt,be)}else n.texImage2D(t.TEXTURE_2D,0,st,Ge,tt,be);g(T)&&p(te),Te.__version=se.version,T.onUpdate&&T.onUpdate(T)}N.__version=T.version}function fe(N,T,F){if(T.image.length!==6)return;const te=Ne(N,T),le=T.source;n.bindTexture(t.TEXTURE_CUBE_MAP,N.__webglTexture,t.TEXTURE0+F);const se=r.get(le);if(le.version!==se.__version||te===!0){n.activeTexture(t.TEXTURE0+F);const Te=kt.getPrimaries(kt.workingColorSpace),Ae=T.colorSpace===Ea?null:kt.getPrimaries(T.colorSpace),Fe=T.colorSpace===Ea||Te===Ae?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,T.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,T.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const ut=T.isCompressedTexture||T.image[0].isCompressedTexture,be=T.image[0]&&T.image[0].isDataTexture,Ge=[];for(let pe=0;pe<6;pe++)!ut&&!be?Ge[pe]=v(T.image[pe],!0,i.maxCubemapSize):Ge[pe]=be?T.image[pe].image:T.image[pe],Ge[pe]=B(T,Ge[pe]);const tt=Ge[0],st=s.convert(T.format,T.colorSpace),Ve=s.convert(T.type),Tt=w(T.internalFormat,st,Ve,T.colorSpace),pt=T.isVideoTexture!==!0,$t=se.__version===void 0||te===!0,Z=le.dataReady;let Le=S(T,tt);Ee(t.TEXTURE_CUBE_MAP,T);let ue;if(ut){pt&&$t&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Tt,tt.width,tt.height);for(let pe=0;pe<6;pe++){ue=Ge[pe].mipmaps;for(let je=0;je<ue.length;je++){const Ie=ue[je];T.format!==Di?st!==null?pt?Z&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je,0,0,Ie.width,Ie.height,st,Ie.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je,Tt,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pt?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je,0,0,Ie.width,Ie.height,st,Ve,Ie.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je,Tt,Ie.width,Ie.height,0,st,Ve,Ie.data)}}}else{if(ue=T.mipmaps,pt&&$t){ue.length>0&&Le++;const pe=H(Ge[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Tt,pe.width,pe.height)}for(let pe=0;pe<6;pe++)if(be){pt?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,Ge[pe].width,Ge[pe].height,st,Ve,Ge[pe].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Tt,Ge[pe].width,Ge[pe].height,0,st,Ve,Ge[pe].data);for(let je=0;je<ue.length;je++){const dt=ue[je].image[pe].image;pt?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je+1,0,0,dt.width,dt.height,st,Ve,dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je+1,Tt,dt.width,dt.height,0,st,Ve,dt.data)}}else{pt?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,st,Ve,Ge[pe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Tt,st,Ve,Ge[pe]);for(let je=0;je<ue.length;je++){const Ie=ue[je];pt?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je+1,0,0,st,Ve,Ie.image[pe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+pe,je+1,Tt,st,Ve,Ie.image[pe])}}}g(T)&&p(t.TEXTURE_CUBE_MAP),se.__version=le.version,T.onUpdate&&T.onUpdate(T)}N.__version=T.version}function xe(N,T,F,te,le,se){const Te=s.convert(F.format,F.colorSpace),Ae=s.convert(F.type),Fe=w(F.internalFormat,Te,Ae,F.colorSpace),ut=r.get(T),be=r.get(F);if(be.__renderTarget=T,!ut.__hasExternalTextures){const Ge=Math.max(1,T.width>>se),tt=Math.max(1,T.height>>se);le===t.TEXTURE_3D||le===t.TEXTURE_2D_ARRAY?n.texImage3D(le,se,Fe,Ge,tt,T.depth,0,Te,Ae,null):n.texImage2D(le,se,Fe,Ge,tt,0,Te,Ae,null)}n.bindFramebuffer(t.FRAMEBUFFER,N),he(T)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,te,le,be.__webglTexture,0,W(T)):(le===t.TEXTURE_2D||le>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&le<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,te,le,be.__webglTexture,se),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ie(N,T,F){if(t.bindRenderbuffer(t.RENDERBUFFER,N),T.depthBuffer){const te=T.depthTexture,le=te&&te.isDepthTexture?te.type:null,se=b(T.stencilBuffer,le),Te=T.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ae=W(T);he(T)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ae,se,T.width,T.height):F?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ae,se,T.width,T.height):t.renderbufferStorage(t.RENDERBUFFER,se,T.width,T.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Te,t.RENDERBUFFER,N)}else{const te=T.textures;for(let le=0;le<te.length;le++){const se=te[le],Te=s.convert(se.format,se.colorSpace),Ae=s.convert(se.type),Fe=w(se.internalFormat,Te,Ae,se.colorSpace),ut=W(T);F&&he(T)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ut,Fe,T.width,T.height):he(T)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ut,Fe,T.width,T.height):t.renderbufferStorage(t.RENDERBUFFER,Fe,T.width,T.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Me(N,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,N),!(T.depthTexture&&T.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const te=r.get(T.depthTexture);te.__renderTarget=T,(!te.__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),$(T.depthTexture,0);const le=te.__webglTexture,se=W(T);if(T.depthTexture.format===rf)he(T)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,le,0,se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,le,0);else if(T.depthTexture.format===sf)he(T)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,le,0,se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,le,0);else throw new Error("Unknown depthTexture format")}function Ue(N){const T=r.get(N),F=N.isWebGLCubeRenderTarget===!0;if(T.__boundDepthTexture!==N.depthTexture){const te=N.depthTexture;if(T.__depthDisposeCallback&&T.__depthDisposeCallback(),te){const le=()=>{delete T.__boundDepthTexture,delete T.__depthDisposeCallback,te.removeEventListener("dispose",le)};te.addEventListener("dispose",le),T.__depthDisposeCallback=le}T.__boundDepthTexture=te}if(N.depthTexture&&!T.__autoAllocateDepthBuffer){if(F)throw new Error("target.depthTexture not supported in Cube render targets");Me(T.__webglFramebuffer,N)}else if(F){T.__webglDepthbuffer=[];for(let te=0;te<6;te++)if(n.bindFramebuffer(t.FRAMEBUFFER,T.__webglFramebuffer[te]),T.__webglDepthbuffer[te]===void 0)T.__webglDepthbuffer[te]=t.createRenderbuffer(),ie(T.__webglDepthbuffer[te],N,!1);else{const le=N.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,se=T.__webglDepthbuffer[te];t.bindRenderbuffer(t.RENDERBUFFER,se),t.framebufferRenderbuffer(t.FRAMEBUFFER,le,t.RENDERBUFFER,se)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,T.__webglFramebuffer),T.__webglDepthbuffer===void 0)T.__webglDepthbuffer=t.createRenderbuffer(),ie(T.__webglDepthbuffer,N,!1);else{const te=N.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,le=T.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,le),t.framebufferRenderbuffer(t.FRAMEBUFFER,te,t.RENDERBUFFER,le)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ce(N,T,F){const te=r.get(N);T!==void 0&&xe(te.__webglFramebuffer,N,N.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),F!==void 0&&Ue(N)}function me(N){const T=N.texture,F=r.get(N),te=r.get(T);N.addEventListener("dispose",C);const le=N.textures,se=N.isWebGLCubeRenderTarget===!0,Te=le.length>1;if(Te||(te.__webglTexture===void 0&&(te.__webglTexture=t.createTexture()),te.__version=T.version,a.memory.textures++),se){F.__webglFramebuffer=[];for(let Ae=0;Ae<6;Ae++)if(T.mipmaps&&T.mipmaps.length>0){F.__webglFramebuffer[Ae]=[];for(let Fe=0;Fe<T.mipmaps.length;Fe++)F.__webglFramebuffer[Ae][Fe]=t.createFramebuffer()}else F.__webglFramebuffer[Ae]=t.createFramebuffer()}else{if(T.mipmaps&&T.mipmaps.length>0){F.__webglFramebuffer=[];for(let Ae=0;Ae<T.mipmaps.length;Ae++)F.__webglFramebuffer[Ae]=t.createFramebuffer()}else F.__webglFramebuffer=t.createFramebuffer();if(Te)for(let Ae=0,Fe=le.length;Ae<Fe;Ae++){const ut=r.get(le[Ae]);ut.__webglTexture===void 0&&(ut.__webglTexture=t.createTexture(),a.memory.textures++)}if(N.samples>0&&he(N)===!1){F.__webglMultisampledFramebuffer=t.createFramebuffer(),F.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,F.__webglMultisampledFramebuffer);for(let Ae=0;Ae<le.length;Ae++){const Fe=le[Ae];F.__webglColorRenderbuffer[Ae]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,F.__webglColorRenderbuffer[Ae]);const ut=s.convert(Fe.format,Fe.colorSpace),be=s.convert(Fe.type),Ge=w(Fe.internalFormat,ut,be,Fe.colorSpace,N.isXRRenderTarget===!0),tt=W(N);t.renderbufferStorageMultisample(t.RENDERBUFFER,tt,Ge,N.width,N.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ae,t.RENDERBUFFER,F.__webglColorRenderbuffer[Ae])}t.bindRenderbuffer(t.RENDERBUFFER,null),N.depthBuffer&&(F.__webglDepthRenderbuffer=t.createRenderbuffer(),ie(F.__webglDepthRenderbuffer,N,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(se){n.bindTexture(t.TEXTURE_CUBE_MAP,te.__webglTexture),Ee(t.TEXTURE_CUBE_MAP,T);for(let Ae=0;Ae<6;Ae++)if(T.mipmaps&&T.mipmaps.length>0)for(let Fe=0;Fe<T.mipmaps.length;Fe++)xe(F.__webglFramebuffer[Ae][Fe],N,T,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe);else xe(F.__webglFramebuffer[Ae],N,T,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0);g(T)&&p(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Te){for(let Ae=0,Fe=le.length;Ae<Fe;Ae++){const ut=le[Ae],be=r.get(ut);n.bindTexture(t.TEXTURE_2D,be.__webglTexture),Ee(t.TEXTURE_2D,ut),xe(F.__webglFramebuffer,N,ut,t.COLOR_ATTACHMENT0+Ae,t.TEXTURE_2D,0),g(ut)&&p(t.TEXTURE_2D)}n.unbindTexture()}else{let Ae=t.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(Ae=N.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Ae,te.__webglTexture),Ee(Ae,T),T.mipmaps&&T.mipmaps.length>0)for(let Fe=0;Fe<T.mipmaps.length;Fe++)xe(F.__webglFramebuffer[Fe],N,T,t.COLOR_ATTACHMENT0,Ae,Fe);else xe(F.__webglFramebuffer,N,T,t.COLOR_ATTACHMENT0,Ae,0);g(T)&&p(Ae),n.unbindTexture()}N.depthBuffer&&Ue(N)}function ve(N){const T=N.textures;for(let F=0,te=T.length;F<te;F++){const le=T[F];if(g(le)){const se=_(N),Te=r.get(le).__webglTexture;n.bindTexture(se,Te),p(se),n.unbindTexture()}}}const q=[],I=[];function qe(N){if(N.samples>0){if(he(N)===!1){const T=N.textures,F=N.width,te=N.height;let le=t.COLOR_BUFFER_BIT;const se=N.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=r.get(N),Ae=T.length>1;if(Ae)for(let Fe=0;Fe<T.length;Fe++)n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Te.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglFramebuffer);for(let Fe=0;Fe<T.length;Fe++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(le|=t.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(le|=t.STENCIL_BUFFER_BIT)),Ae){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Fe]);const ut=r.get(T[Fe]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ut,0)}t.blitFramebuffer(0,0,F,te,0,0,F,te,le,t.NEAREST),c===!0&&(q.length=0,I.length=0,q.push(t.COLOR_ATTACHMENT0+Fe),N.depthBuffer&&N.resolveDepthBuffer===!1&&(q.push(se),I.push(se),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,I)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,q))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ae)for(let Fe=0;Fe<T.length;Fe++){n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Fe]);const ut=r.get(T[Fe]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.TEXTURE_2D,ut,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglMultisampledFramebuffer)}else if(N.depthBuffer&&N.resolveDepthBuffer===!1&&c){const T=N.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[T])}}}function W(N){return Math.min(i.maxSamples,N.samples)}function he(N){const T=r.get(N);return N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&T.__useRenderToTexture!==!1}function R(N){const T=a.render.frame;d.get(N)!==T&&(d.set(N,T),N.update())}function B(N,T){const F=N.colorSpace,te=N.format,le=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||F!==fu&&F!==Ea&&(kt.getTransfer(F)===Gt?(te!==Di||le!==na)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",F)),T}function H(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(u.width=N.naturalWidth||N.width,u.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(u.width=N.displayWidth,u.height=N.displayHeight):(u.width=N.width,u.height=N.height),u}this.allocateTextureUnit=k,this.resetTextureUnits=O,this.setTexture2D=$,this.setTexture2DArray=U,this.setTexture3D=X,this.setTextureCube=z,this.rebindTextures=ce,this.setupRenderTarget=me,this.updateRenderTargetMipmap=ve,this.updateMultisampleRenderTarget=qe,this.setupDepthRenderbuffer=Ue,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=he}function HK(t,e){function n(r,i=Ea){let s;const a=kt.getTransfer(i);if(r===na)return t.UNSIGNED_BYTE;if(r===cb)return t.UNSIGNED_SHORT_4_4_4_4;if(r===ub)return t.UNSIGNED_SHORT_5_5_5_1;if(r===QL)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===KL)return t.BYTE;if(r===YL)return t.SHORT;if(r===tf)return t.UNSIGNED_SHORT;if(r===lb)return t.INT;if(r===pl)return t.UNSIGNED_INT;if(r===Fs)return t.FLOAT;if(r===Vf)return t.HALF_FLOAT;if(r===JL)return t.ALPHA;if(r===eI)return t.RGB;if(r===Di)return t.RGBA;if(r===tI)return t.LUMINANCE;if(r===nI)return t.LUMINANCE_ALPHA;if(r===rf)return t.DEPTH_COMPONENT;if(r===sf)return t.DEPTH_STENCIL;if(r===rI)return t.RED;if(r===db)return t.RED_INTEGER;if(r===iI)return t.RG;if(r===fb)return t.RG_INTEGER;if(r===hb)return t.RGBA_INTEGER;if(r===Ap||r===Np||r===Pp||r===Rp)if(a===Gt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Ap)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Np)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Pp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Rp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Ap)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Np)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Pp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Rp)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===g_||r===v_||r===y_||r===x_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===g_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===v_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===y_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===x_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===__||r===w_||r===b_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===__||r===w_)return a===Gt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===b_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===S_||r===E_||r===M_||r===T_||r===C_||r===A_||r===N_||r===P_||r===R_||r===D_||r===k_||r===L_||r===I_||r===j_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===S_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===E_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===M_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===T_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===C_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===A_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===N_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===P_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===R_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===D_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===k_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===L_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===I_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===j_)return a===Gt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Dp||r===z_||r===O_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Dp)return a===Gt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===z_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===O_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===sI||r===F_||r===U_||r===B_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Dp)return s.COMPRESSED_RED_RGTC1_EXT;if(r===F_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===U_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===B_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===nf?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const GK=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,WK=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class $K{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new yr,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new lo({vertexShader:GK,fragmentShader:WK,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new On(new Hf(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class qK extends Nl{constructor(e,n){super();const r=this;let i=null,s=1,a=null,o="local-floor",c=1,u=null,d=null,f=null,h=null,m=null,y=null;const v=new $K,g=n.getContextAttributes();let p=null,_=null;const w=[],b=[],S=new nt;let M=null;const C=new Wr;C.viewport=new pn;const P=new Wr;P.viewport=new pn;const A=[C,P],E=new d7;let L=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ne){let fe=w[ne];return fe===void 0&&(fe=new py,w[ne]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(ne){let fe=w[ne];return fe===void 0&&(fe=new py,w[ne]=fe),fe.getGripSpace()},this.getHand=function(ne){let fe=w[ne];return fe===void 0&&(fe=new py,w[ne]=fe),fe.getHandSpace()};function k(ne){const fe=b.indexOf(ne.inputSource);if(fe===-1)return;const xe=w[fe];xe!==void 0&&(xe.update(ne.inputSource,ne.frame,u||a),xe.dispatchEvent({type:ne.type,data:ne.inputSource}))}function j(){i.removeEventListener("select",k),i.removeEventListener("selectstart",k),i.removeEventListener("selectend",k),i.removeEventListener("squeeze",k),i.removeEventListener("squeezestart",k),i.removeEventListener("squeezeend",k),i.removeEventListener("end",j),i.removeEventListener("inputsourceschange",$);for(let ne=0;ne<w.length;ne++){const fe=b[ne];fe!==null&&(b[ne]=null,w[ne].disconnect(fe))}L=null,O=null,v.reset(),e.setRenderTarget(p),m=null,h=null,f=null,i=null,_=null,Ne.stop(),r.isPresenting=!1,e.setPixelRatio(M),e.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ne){s=ne,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ne){o=ne,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(ne){u=ne},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(ne){if(i=ne,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",k),i.addEventListener("selectstart",k),i.addEventListener("selectend",k),i.addEventListener("squeeze",k),i.addEventListener("squeezestart",k),i.addEventListener("squeezeend",k),i.addEventListener("end",j),i.addEventListener("inputsourceschange",$),g.xrCompatible!==!0&&await n.makeXRCompatible(),M=e.getPixelRatio(),e.getSize(S),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let xe=null,ie=null,Me=null;g.depth&&(Me=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,xe=g.stencil?sf:rf,ie=g.stencil?nf:pl);const Ue={colorFormat:n.RGBA8,depthFormat:Me,scaleFactor:s};f=new XRWebGLBinding(i,n),h=f.createProjectionLayer(Ue),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new ml(h.textureWidth,h.textureHeight,{format:Di,type:na,depthTexture:new xI(h.textureWidth,h.textureHeight,ie,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const xe={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,xe),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new ml(m.framebufferWidth,m.framebufferHeight,{format:Di,type:na,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await i.requestReferenceSpace(o),Ne.setContext(i),Ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function $(ne){for(let fe=0;fe<ne.removed.length;fe++){const xe=ne.removed[fe],ie=b.indexOf(xe);ie>=0&&(b[ie]=null,w[ie].disconnect(xe))}for(let fe=0;fe<ne.added.length;fe++){const xe=ne.added[fe];let ie=b.indexOf(xe);if(ie===-1){for(let Ue=0;Ue<w.length;Ue++)if(Ue>=b.length){b.push(xe),ie=Ue;break}else if(b[Ue]===null){b[Ue]=xe,ie=Ue;break}if(ie===-1)break}const Me=w[ie];Me&&Me.connect(xe)}}const U=new K,X=new K;function z(ne,fe,xe){U.setFromMatrixPosition(fe.matrixWorld),X.setFromMatrixPosition(xe.matrixWorld);const ie=U.distanceTo(X),Me=fe.projectionMatrix.elements,Ue=xe.projectionMatrix.elements,ce=Me[14]/(Me[10]-1),me=Me[14]/(Me[10]+1),ve=(Me[9]+1)/Me[5],q=(Me[9]-1)/Me[5],I=(Me[8]-1)/Me[0],qe=(Ue[8]+1)/Ue[0],W=ce*I,he=ce*qe,R=ie/(-I+qe),B=R*-I;if(fe.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),ne.translateX(B),ne.translateZ(R),ne.matrixWorld.compose(ne.position,ne.quaternion,ne.scale),ne.matrixWorldInverse.copy(ne.matrixWorld).invert(),Me[10]===-1)ne.projectionMatrix.copy(fe.projectionMatrix),ne.projectionMatrixInverse.copy(fe.projectionMatrixInverse);else{const H=ce+R,N=me+R,T=W-B,F=he+(ie-B),te=ve*me/N*H,le=q*me/N*H;ne.projectionMatrix.makePerspective(T,F,te,le,H,N),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert()}}function V(ne,fe){fe===null?ne.matrixWorld.copy(ne.matrix):ne.matrixWorld.multiplyMatrices(fe.matrixWorld,ne.matrix),ne.matrixWorldInverse.copy(ne.matrixWorld).invert()}this.updateCamera=function(ne){if(i===null)return;let fe=ne.near,xe=ne.far;v.texture!==null&&(v.depthNear>0&&(fe=v.depthNear),v.depthFar>0&&(xe=v.depthFar)),E.near=P.near=C.near=fe,E.far=P.far=C.far=xe,(L!==E.near||O!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),L=E.near,O=E.far),C.layers.mask=ne.layers.mask|2,P.layers.mask=ne.layers.mask|4,E.layers.mask=C.layers.mask|P.layers.mask;const ie=ne.parent,Me=E.cameras;V(E,ie);for(let Ue=0;Ue<Me.length;Ue++)V(Me[Ue],ie);Me.length===2?z(E,C,P):E.projectionMatrix.copy(C.projectionMatrix),ee(ne,E,ie)};function ee(ne,fe,xe){xe===null?ne.matrix.copy(fe.matrixWorld):(ne.matrix.copy(xe.matrixWorld),ne.matrix.invert(),ne.matrix.multiply(fe.matrixWorld)),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.updateMatrixWorld(!0),ne.projectionMatrix.copy(fe.projectionMatrix),ne.projectionMatrixInverse.copy(fe.projectionMatrixInverse),ne.isPerspectiveCamera&&(ne.fov=af*2*Math.atan(1/ne.projectionMatrix.elements[5]),ne.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(h===null&&m===null))return c},this.setFoveation=function(ne){c=ne,h!==null&&(h.fixedFoveation=ne),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ne)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(E)};let de=null;function Ee(ne,fe){if(d=fe.getViewerPose(u||a),y=fe,d!==null){const xe=d.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let ie=!1;xe.length!==E.cameras.length&&(E.cameras.length=0,ie=!0);for(let ce=0;ce<xe.length;ce++){const me=xe[ce];let ve=null;if(m!==null)ve=m.getViewport(me);else{const I=f.getViewSubImage(h,me);ve=I.viewport,ce===0&&(e.setRenderTargetTextures(_,I.colorTexture,I.depthStencilTexture),e.setRenderTarget(_))}let q=A[ce];q===void 0&&(q=new Wr,q.layers.enable(ce),q.viewport=new pn,A[ce]=q),q.matrix.fromArray(me.transform.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale),q.projectionMatrix.fromArray(me.projectionMatrix),q.projectionMatrixInverse.copy(q.projectionMatrix).invert(),q.viewport.set(ve.x,ve.y,ve.width,ve.height),ce===0&&(E.matrix.copy(q.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),ie===!0&&E.cameras.push(q)}const Me=i.enabledFeatures;if(Me&&Me.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&f){const ce=f.getDepthInformation(xe[0]);ce&&ce.isValid&&ce.texture&&v.init(e,ce,i.renderState)}}for(let xe=0;xe<w.length;xe++){const ie=b[xe],Me=w[xe];ie!==null&&Me!==void 0&&Me.update(ie,fe,u||a)}de&&de(ne,fe),fe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:fe}),y=null}const Ne=new EI;Ne.setAnimationLoop(Ee),this.setAnimationLoop=function(ne){de=ne},this.dispose=function(){}}}const Po=new ys,XK=new Yt;function ZK(t,e){function n(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function r(g,p){p.color.getRGB(g.fogColor.value,hI(t)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function i(g,p,_,w,b){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(g,p):p.isMeshToonMaterial?(s(g,p),f(g,p)):p.isMeshPhongMaterial?(s(g,p),d(g,p)):p.isMeshStandardMaterial?(s(g,p),h(g,p),p.isMeshPhysicalMaterial&&m(g,p,b)):p.isMeshMatcapMaterial?(s(g,p),y(g,p)):p.isMeshDepthMaterial?s(g,p):p.isMeshDistanceMaterial?(s(g,p),v(g,p)):p.isMeshNormalMaterial?s(g,p):p.isLineBasicMaterial?(a(g,p),p.isLineDashedMaterial&&o(g,p)):p.isPointsMaterial?c(g,p,_,w):p.isSpriteMaterial?u(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,n(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===kr&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,n(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===kr&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,n(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,n(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,n(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);const _=e.get(p),w=_.envMap,b=_.envMapRotation;w&&(g.envMap.value=w,Po.copy(b),Po.x*=-1,Po.y*=-1,Po.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Po.y*=-1,Po.z*=-1),g.envMapRotation.value.setFromMatrix4(XK.makeRotationFromEuler(Po)),g.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap&&(g.lightMap.value=p.lightMap,g.lightMapIntensity.value=p.lightMapIntensity,n(p.lightMap,g.lightMapTransform)),p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,n(p.aoMap,g.aoMapTransform))}function a(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform))}function o(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function c(g,p,_,w){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*_,g.scale.value=w*.5,p.map&&(g.map.value=p.map,n(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function u(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function d(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function f(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,n(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,n(p.roughnessMap,g.roughnessMapTransform)),p.envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function m(g,p,_){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,n(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,n(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,n(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,n(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,n(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===kr&&g.clearcoatNormalScale.value.negate())),p.dispersion>0&&(g.dispersion.value=p.dispersion),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,n(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,n(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=_.texture,g.transmissionSamplerSize.value.set(_.width,_.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,n(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,n(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,n(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,n(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,n(p.specularIntensityMap,g.specularIntensityMapTransform))}function y(g,p){p.matcap&&(g.matcap.value=p.matcap)}function v(g,p){const _=e.get(p).light;g.referencePosition.value.setFromMatrixPosition(_.matrixWorld),g.nearDistance.value=_.shadow.camera.near,g.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function KK(t,e,n,r){let i={},s={},a=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(_,w){const b=w.program;r.uniformBlockBinding(_,b)}function u(_,w){let b=i[_.id];b===void 0&&(y(_),b=d(_),i[_.id]=b,_.addEventListener("dispose",g));const S=w.program;r.updateUBOMapping(_,S);const M=e.render.frame;s[_.id]!==M&&(h(_),s[_.id]=M)}function d(_){const w=f();_.__bindingPointIndex=w;const b=t.createBuffer(),S=_.__size,M=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,b),t.bufferData(t.UNIFORM_BUFFER,S,M),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,b),b}function f(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const w=i[_.id],b=_.uniforms,S=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let M=0,C=b.length;M<C;M++){const P=Array.isArray(b[M])?b[M]:[b[M]];for(let A=0,E=P.length;A<E;A++){const L=P[A];if(m(L,M,A,S)===!0){const O=L.__offset,k=Array.isArray(L.value)?L.value:[L.value];let j=0;for(let $=0;$<k.length;$++){const U=k[$],X=v(U);typeof U=="number"||typeof U=="boolean"?(L.__data[0]=U,t.bufferSubData(t.UNIFORM_BUFFER,O+j,L.__data)):U.isMatrix3?(L.__data[0]=U.elements[0],L.__data[1]=U.elements[1],L.__data[2]=U.elements[2],L.__data[3]=0,L.__data[4]=U.elements[3],L.__data[5]=U.elements[4],L.__data[6]=U.elements[5],L.__data[7]=0,L.__data[8]=U.elements[6],L.__data[9]=U.elements[7],L.__data[10]=U.elements[8],L.__data[11]=0):(U.toArray(L.__data,j),j+=X.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,O,L.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(_,w,b,S){const M=_.value,C=w+"_"+b;if(S[C]===void 0)return typeof M=="number"||typeof M=="boolean"?S[C]=M:S[C]=M.clone(),!0;{const P=S[C];if(typeof M=="number"||typeof M=="boolean"){if(P!==M)return S[C]=M,!0}else if(P.equals(M)===!1)return P.copy(M),!0}return!1}function y(_){const w=_.uniforms;let b=0;const S=16;for(let C=0,P=w.length;C<P;C++){const A=Array.isArray(w[C])?w[C]:[w[C]];for(let E=0,L=A.length;E<L;E++){const O=A[E],k=Array.isArray(O.value)?O.value:[O.value];for(let j=0,$=k.length;j<$;j++){const U=k[j],X=v(U),z=b%S,V=z%X.boundary,ee=z+V;b+=V,ee!==0&&S-ee<X.storage&&(b+=S-ee),O.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=b,b+=X.storage}}}const M=b%S;return M>0&&(b+=S-M),_.__size=b,_.__cache={},this}function v(_){const w={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function g(_){const w=_.target;w.removeEventListener("dispose",g);const b=a.indexOf(w.__bindingPointIndex);a.splice(b,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function p(){for(const _ in i)t.deleteBuffer(i[_]);a=[],i={},s={}}return{bind:c,update:u,dispose:p}}class NI{constructor(e={}){const{canvas:n=w9(),context:r=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=a;const y=new Uint32Array(4),v=new Int32Array(4);let g=null,p=null;const _=[],w=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Qa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const b=this;let S=!1;this._outputColorSpace=Hr;let M=0,C=0,P=null,A=-1,E=null;const L=new pn,O=new pn;let k=null;const j=new vt(0);let $=0,U=n.width,X=n.height,z=1,V=null,ee=null;const de=new pn(0,0,U,X),Ee=new pn(0,0,U,X);let Ne=!1;const ne=new vb;let fe=!1,xe=!1;const ie=new Yt,Me=new Yt,Ue=new K,ce=new pn,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ve=!1;function q(){return P===null?z:1}let I=r;function qe(D,Q){return n.getContext(D,Q)}try{const D={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${ob}`),n.addEventListener("webglcontextlost",pe,!1),n.addEventListener("webglcontextrestored",je,!1),n.addEventListener("webglcontextcreationerror",Ie,!1),I===null){const Q="webgl2";if(I=qe(Q,D),I===null)throw qe(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let W,he,R,B,H,N,T,F,te,le,se,Te,Ae,Fe,ut,be,Ge,tt,st,Ve,Tt,pt,$t,Z;function Le(){W=new oZ(I),W.init(),pt=new HK(I,W),he=new eZ(I,W,e,pt),R=new BK(I,W),he.reverseDepthBuffer&&h&&R.buffers.depth.setReversed(!0),B=new uZ(I),H=new AK,N=new VK(I,W,R,H,he,pt,B),T=new nZ(b),F=new aZ(b),te=new g7(I),$t=new QX(I,te),le=new lZ(I,te,B,$t),se=new fZ(I,le,te,B),st=new dZ(I,he,N),be=new tZ(H),Te=new CK(b,T,F,W,he,$t,be),Ae=new ZK(b,H),Fe=new PK,ut=new jK(W),tt=new YX(b,T,F,R,se,m,c),Ge=new FK(b,se,he),Z=new KK(I,B,he,R),Ve=new JX(I,W,B),Tt=new cZ(I,W,B),B.programs=Te.programs,b.capabilities=he,b.extensions=W,b.properties=H,b.renderLists=Fe,b.shadowMap=Ge,b.state=R,b.info=B}Le();const ue=new qK(b,I);this.xr=ue,this.getContext=function(){return I},this.getContextAttributes=function(){return I.getContextAttributes()},this.forceContextLoss=function(){const D=W.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=W.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(D){D!==void 0&&(z=D,this.setSize(U,X,!1))},this.getSize=function(D){return D.set(U,X)},this.setSize=function(D,Q,ae=!0){if(ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=D,X=Q,n.width=Math.floor(D*z),n.height=Math.floor(Q*z),ae===!0&&(n.style.width=D+"px",n.style.height=Q+"px"),this.setViewport(0,0,D,Q)},this.getDrawingBufferSize=function(D){return D.set(U*z,X*z).floor()},this.setDrawingBufferSize=function(D,Q,ae){U=D,X=Q,z=ae,n.width=Math.floor(D*ae),n.height=Math.floor(Q*ae),this.setViewport(0,0,D,Q)},this.getCurrentViewport=function(D){return D.copy(L)},this.getViewport=function(D){return D.copy(de)},this.setViewport=function(D,Q,ae,oe){D.isVector4?de.set(D.x,D.y,D.z,D.w):de.set(D,Q,ae,oe),R.viewport(L.copy(de).multiplyScalar(z).round())},this.getScissor=function(D){return D.copy(Ee)},this.setScissor=function(D,Q,ae,oe){D.isVector4?Ee.set(D.x,D.y,D.z,D.w):Ee.set(D,Q,ae,oe),R.scissor(O.copy(Ee).multiplyScalar(z).round())},this.getScissorTest=function(){return Ne},this.setScissorTest=function(D){R.setScissorTest(Ne=D)},this.setOpaqueSort=function(D){V=D},this.setTransparentSort=function(D){ee=D},this.getClearColor=function(D){return D.copy(tt.getClearColor())},this.setClearColor=function(){tt.setClearColor(...arguments)},this.getClearAlpha=function(){return tt.getClearAlpha()},this.setClearAlpha=function(){tt.setClearAlpha(...arguments)},this.clear=function(D=!0,Q=!0,ae=!0){let oe=0;if(D){let J=!1;if(P!==null){const Se=P.texture.format;J=Se===hb||Se===fb||Se===db}if(J){const Se=P.texture.type,De=Se===na||Se===pl||Se===tf||Se===nf||Se===cb||Se===ub,We=tt.getClearColor(),$e=tt.getClearAlpha(),ot=We.r,at=We.g,Ye=We.b;De?(y[0]=ot,y[1]=at,y[2]=Ye,y[3]=$e,I.clearBufferuiv(I.COLOR,0,y)):(v[0]=ot,v[1]=at,v[2]=Ye,v[3]=$e,I.clearBufferiv(I.COLOR,0,v))}else oe|=I.COLOR_BUFFER_BIT}Q&&(oe|=I.DEPTH_BUFFER_BIT),ae&&(oe|=I.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),I.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",pe,!1),n.removeEventListener("webglcontextrestored",je,!1),n.removeEventListener("webglcontextcreationerror",Ie,!1),tt.dispose(),Fe.dispose(),ut.dispose(),H.dispose(),T.dispose(),F.dispose(),se.dispose(),$t.dispose(),Z.dispose(),Te.dispose(),ue.dispose(),ue.removeEventListener("sessionstart",Fb),ue.removeEventListener("sessionend",Ub),So.stop()};function pe(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const D=B.autoReset,Q=Ge.enabled,ae=Ge.autoUpdate,oe=Ge.needsUpdate,J=Ge.type;Le(),B.autoReset=D,Ge.enabled=Q,Ge.autoUpdate=ae,Ge.needsUpdate=oe,Ge.type=J}function Ie(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function dt(D){const Q=D.target;Q.removeEventListener("dispose",dt),ln(Q)}function ln(D){Xn(D),H.remove(D)}function Xn(D){const Q=H.get(D).programs;Q!==void 0&&(Q.forEach(function(ae){Te.releaseProgram(ae)}),D.isShaderMaterial&&Te.releaseShaderCache(D))}this.renderBufferDirect=function(D,Q,ae,oe,J,Se){Q===null&&(Q=me);const De=J.isMesh&&J.matrixWorld.determinant()<0,We=kF(D,Q,ae,oe,J);R.setMaterial(oe,De);let $e=ae.index,ot=1;if(oe.wireframe===!0){if($e=le.getWireframeAttribute(ae),$e===void 0)return;ot=2}const at=ae.drawRange,Ye=ae.attributes.position;let Pt=at.start*ot,It=(at.start+at.count)*ot;Se!==null&&(Pt=Math.max(Pt,Se.start*ot),It=Math.min(It,(Se.start+Se.count)*ot)),$e!==null?(Pt=Math.max(Pt,0),It=Math.min(It,$e.count)):Ye!=null&&(Pt=Math.max(Pt,0),It=Math.min(It,Ye.count));const wn=It-Pt;if(wn<0||wn===1/0)return;$t.setup(J,oe,We,ae,$e);let cn,Dt=Ve;if($e!==null&&(cn=te.get($e),Dt=Tt,Dt.setIndex(cn)),J.isMesh)oe.wireframe===!0?(R.setLineWidth(oe.wireframeLinewidth*q()),Dt.setMode(I.LINES)):Dt.setMode(I.TRIANGLES);else if(J.isLine){let Qe=oe.linewidth;Qe===void 0&&(Qe=1),R.setLineWidth(Qe*q()),J.isLineSegments?Dt.setMode(I.LINES):J.isLineLoop?Dt.setMode(I.LINE_LOOP):Dt.setMode(I.LINE_STRIP)}else J.isPoints?Dt.setMode(I.POINTS):J.isSprite&&Dt.setMode(I.TRIANGLES);if(J.isBatchedMesh)if(J._multiDrawInstances!==null)kp("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Dt.renderMultiDrawInstances(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount,J._multiDrawInstances);else if(W.get("WEBGL_multi_draw"))Dt.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else{const Qe=J._multiDrawStarts,Vn=J._multiDrawCounts,jt=J._multiDrawCount,xi=$e?te.get($e).bytesPerElement:1,Ll=H.get(oe).currentProgram.getUniforms();for(let Or=0;Or<jt;Or++)Ll.setValue(I,"_gl_DrawID",Or),Dt.render(Qe[Or]/xi,Vn[Or])}else if(J.isInstancedMesh)Dt.renderInstances(Pt,wn,J.count);else if(ae.isInstancedBufferGeometry){const Qe=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,Vn=Math.min(ae.instanceCount,Qe);Dt.renderInstances(Pt,wn,Vn)}else Dt.render(Pt,wn)};function Ot(D,Q,ae){D.transparent===!0&&D.side===as&&D.forceSinglePass===!1?(D.side=kr,D.needsUpdate=!0,Qf(D,Q,ae),D.side=oo,D.needsUpdate=!0,Qf(D,Q,ae),D.side=as):Qf(D,Q,ae)}this.compile=function(D,Q,ae=null){ae===null&&(ae=D),p=ut.get(ae),p.init(Q),w.push(p),ae.traverseVisible(function(J){J.isLight&&J.layers.test(Q.layers)&&(p.pushLight(J),J.castShadow&&p.pushShadow(J))}),D!==ae&&D.traverseVisible(function(J){J.isLight&&J.layers.test(Q.layers)&&(p.pushLight(J),J.castShadow&&p.pushShadow(J))}),p.setupLights();const oe=new Set;return D.traverse(function(J){if(!(J.isMesh||J.isPoints||J.isLine||J.isSprite))return;const Se=J.material;if(Se)if(Array.isArray(Se))for(let De=0;De<Se.length;De++){const We=Se[De];Ot(We,ae,J),oe.add(We)}else Ot(Se,ae,J),oe.add(Se)}),p=w.pop(),oe},this.compileAsync=function(D,Q,ae=null){const oe=this.compile(D,Q,ae);return new Promise(J=>{function Se(){if(oe.forEach(function(De){H.get(De).currentProgram.isReady()&&oe.delete(De)}),oe.size===0){J(D);return}setTimeout(Se,10)}W.get("KHR_parallel_shader_compile")!==null?Se():setTimeout(Se,10)})};let yi=null;function bs(D){yi&&yi(D)}function Fb(){So.stop()}function Ub(){So.start()}const So=new EI;So.setAnimationLoop(bs),typeof self<"u"&&So.setContext(self),this.setAnimationLoop=function(D){yi=D,ue.setAnimationLoop(D),D===null?So.stop():So.start()},ue.addEventListener("sessionstart",Fb),ue.addEventListener("sessionend",Ub),this.render=function(D,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),ue.enabled===!0&&ue.isPresenting===!0&&(ue.cameraAutoUpdate===!0&&ue.updateCamera(Q),Q=ue.getCamera()),D.isScene===!0&&D.onBeforeRender(b,D,Q,P),p=ut.get(D,w.length),p.init(Q),w.push(p),Me.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),ne.setFromProjectionMatrix(Me),xe=this.localClippingEnabled,fe=be.init(this.clippingPlanes,xe),g=Fe.get(D,_.length),g.init(),_.push(g),ue.enabled===!0&&ue.isPresenting===!0){const Se=b.xr.getDepthSensingMesh();Se!==null&&Yg(Se,Q,-1/0,b.sortObjects)}Yg(D,Q,0,b.sortObjects),g.finish(),b.sortObjects===!0&&g.sort(V,ee),ve=ue.enabled===!1||ue.isPresenting===!1||ue.hasDepthSensing()===!1,ve&&tt.addToRenderList(g,D),this.info.render.frame++,fe===!0&&be.beginShadows();const ae=p.state.shadowsArray;Ge.render(ae,D,Q),fe===!0&&be.endShadows(),this.info.autoReset===!0&&this.info.reset();const oe=g.opaque,J=g.transmissive;if(p.setupLights(),Q.isArrayCamera){const Se=Q.cameras;if(J.length>0)for(let De=0,We=Se.length;De<We;De++){const $e=Se[De];Vb(oe,J,D,$e)}ve&&tt.render(D);for(let De=0,We=Se.length;De<We;De++){const $e=Se[De];Bb(g,D,$e,$e.viewport)}}else J.length>0&&Vb(oe,J,D,Q),ve&&tt.render(D),Bb(g,D,Q);P!==null&&C===0&&(N.updateMultisampleRenderTarget(P),N.updateRenderTargetMipmap(P)),D.isScene===!0&&D.onAfterRender(b,D,Q),$t.resetDefaultState(),A=-1,E=null,w.pop(),w.length>0?(p=w[w.length-1],fe===!0&&be.setGlobalState(b.clippingPlanes,p.state.camera)):p=null,_.pop(),_.length>0?g=_[_.length-1]:g=null};function Yg(D,Q,ae,oe){if(D.visible===!1)return;if(D.layers.test(Q.layers)){if(D.isGroup)ae=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(Q);else if(D.isLight)p.pushLight(D),D.castShadow&&p.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||ne.intersectsSprite(D)){oe&&ce.setFromMatrixPosition(D.matrixWorld).applyMatrix4(Me);const De=se.update(D),We=D.material;We.visible&&g.push(D,De,We,ae,ce.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||ne.intersectsObject(D))){const De=se.update(D),We=D.material;if(oe&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),ce.copy(D.boundingSphere.center)):(De.boundingSphere===null&&De.computeBoundingSphere(),ce.copy(De.boundingSphere.center)),ce.applyMatrix4(D.matrixWorld).applyMatrix4(Me)),Array.isArray(We)){const $e=De.groups;for(let ot=0,at=$e.length;ot<at;ot++){const Ye=$e[ot],Pt=We[Ye.materialIndex];Pt&&Pt.visible&&g.push(D,De,Pt,ae,ce.z,Ye)}}else We.visible&&g.push(D,De,We,ae,ce.z,null)}}const Se=D.children;for(let De=0,We=Se.length;De<We;De++)Yg(Se[De],Q,ae,oe)}function Bb(D,Q,ae,oe){const J=D.opaque,Se=D.transmissive,De=D.transparent;p.setupLightsView(ae),fe===!0&&be.setGlobalState(b.clippingPlanes,ae),oe&&R.viewport(L.copy(oe)),J.length>0&&Yf(J,Q,ae),Se.length>0&&Yf(Se,Q,ae),De.length>0&&Yf(De,Q,ae),R.buffers.depth.setTest(!0),R.buffers.depth.setMask(!0),R.buffers.color.setMask(!0),R.setPolygonOffset(!1)}function Vb(D,Q,ae,oe){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;p.state.transmissionRenderTarget[oe.id]===void 0&&(p.state.transmissionRenderTarget[oe.id]=new ml(1,1,{generateMipmaps:!0,type:W.has("EXT_color_buffer_half_float")||W.has("EXT_color_buffer_float")?Vf:na,minFilter:Vo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:kt.workingColorSpace}));const Se=p.state.transmissionRenderTarget[oe.id],De=oe.viewport||L;Se.setSize(De.z*b.transmissionResolutionScale,De.w*b.transmissionResolutionScale);const We=b.getRenderTarget();b.setRenderTarget(Se),b.getClearColor(j),$=b.getClearAlpha(),$<1&&b.setClearColor(16777215,.5),b.clear(),ve&&tt.render(ae);const $e=b.toneMapping;b.toneMapping=Qa;const ot=oe.viewport;if(oe.viewport!==void 0&&(oe.viewport=void 0),p.setupLightsView(oe),fe===!0&&be.setGlobalState(b.clippingPlanes,oe),Yf(D,ae,oe),N.updateMultisampleRenderTarget(Se),N.updateRenderTargetMipmap(Se),W.has("WEBGL_multisampled_render_to_texture")===!1){let at=!1;for(let Ye=0,Pt=Q.length;Ye<Pt;Ye++){const It=Q[Ye],wn=It.object,cn=It.geometry,Dt=It.material,Qe=It.group;if(Dt.side===as&&wn.layers.test(oe.layers)){const Vn=Dt.side;Dt.side=kr,Dt.needsUpdate=!0,Hb(wn,ae,oe,cn,Dt,Qe),Dt.side=Vn,Dt.needsUpdate=!0,at=!0}}at===!0&&(N.updateMultisampleRenderTarget(Se),N.updateRenderTargetMipmap(Se))}b.setRenderTarget(We),b.setClearColor(j,$),ot!==void 0&&(oe.viewport=ot),b.toneMapping=$e}function Yf(D,Q,ae){const oe=Q.isScene===!0?Q.overrideMaterial:null;for(let J=0,Se=D.length;J<Se;J++){const De=D[J],We=De.object,$e=De.geometry,ot=De.group;let at=De.material;at.allowOverride===!0&&oe!==null&&(at=oe),We.layers.test(ae.layers)&&Hb(We,Q,ae,$e,at,ot)}}function Hb(D,Q,ae,oe,J,Se){D.onBeforeRender(b,Q,ae,oe,J,Se),D.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),J.onBeforeRender(b,Q,ae,oe,D,Se),J.transparent===!0&&J.side===as&&J.forceSinglePass===!1?(J.side=kr,J.needsUpdate=!0,b.renderBufferDirect(ae,Q,oe,J,D,Se),J.side=oo,J.needsUpdate=!0,b.renderBufferDirect(ae,Q,oe,J,D,Se),J.side=as):b.renderBufferDirect(ae,Q,oe,J,D,Se),D.onAfterRender(b,Q,ae,oe,J,Se)}function Qf(D,Q,ae){Q.isScene!==!0&&(Q=me);const oe=H.get(D),J=p.state.lights,Se=p.state.shadowsArray,De=J.state.version,We=Te.getParameters(D,J.state,Se,Q,ae),$e=Te.getProgramCacheKey(We);let ot=oe.programs;oe.environment=D.isMeshStandardMaterial?Q.environment:null,oe.fog=Q.fog,oe.envMap=(D.isMeshStandardMaterial?F:T).get(D.envMap||oe.environment),oe.envMapRotation=oe.environment!==null&&D.envMap===null?Q.environmentRotation:D.envMapRotation,ot===void 0&&(D.addEventListener("dispose",dt),ot=new Map,oe.programs=ot);let at=ot.get($e);if(at!==void 0){if(oe.currentProgram===at&&oe.lightsStateVersion===De)return Wb(D,We),at}else We.uniforms=Te.getUniforms(D),D.onBeforeCompile(We,b),at=Te.acquireProgram(We,$e),ot.set($e,at),oe.uniforms=We.uniforms;const Ye=oe.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(Ye.clippingPlanes=be.uniform),Wb(D,We),oe.needsLights=IF(D),oe.lightsStateVersion=De,oe.needsLights&&(Ye.ambientLightColor.value=J.state.ambient,Ye.lightProbe.value=J.state.probe,Ye.directionalLights.value=J.state.directional,Ye.directionalLightShadows.value=J.state.directionalShadow,Ye.spotLights.value=J.state.spot,Ye.spotLightShadows.value=J.state.spotShadow,Ye.rectAreaLights.value=J.state.rectArea,Ye.ltc_1.value=J.state.rectAreaLTC1,Ye.ltc_2.value=J.state.rectAreaLTC2,Ye.pointLights.value=J.state.point,Ye.pointLightShadows.value=J.state.pointShadow,Ye.hemisphereLights.value=J.state.hemi,Ye.directionalShadowMap.value=J.state.directionalShadowMap,Ye.directionalShadowMatrix.value=J.state.directionalShadowMatrix,Ye.spotShadowMap.value=J.state.spotShadowMap,Ye.spotLightMatrix.value=J.state.spotLightMatrix,Ye.spotLightMap.value=J.state.spotLightMap,Ye.pointShadowMap.value=J.state.pointShadowMap,Ye.pointShadowMatrix.value=J.state.pointShadowMatrix),oe.currentProgram=at,oe.uniformsList=null,at}function Gb(D){if(D.uniformsList===null){const Q=D.currentProgram.getUniforms();D.uniformsList=Lp.seqWithValue(Q.seq,D.uniforms)}return D.uniformsList}function Wb(D,Q){const ae=H.get(D);ae.outputColorSpace=Q.outputColorSpace,ae.batching=Q.batching,ae.batchingColor=Q.batchingColor,ae.instancing=Q.instancing,ae.instancingColor=Q.instancingColor,ae.instancingMorph=Q.instancingMorph,ae.skinning=Q.skinning,ae.morphTargets=Q.morphTargets,ae.morphNormals=Q.morphNormals,ae.morphColors=Q.morphColors,ae.morphTargetsCount=Q.morphTargetsCount,ae.numClippingPlanes=Q.numClippingPlanes,ae.numIntersection=Q.numClipIntersection,ae.vertexAlphas=Q.vertexAlphas,ae.vertexTangents=Q.vertexTangents,ae.toneMapping=Q.toneMapping}function kF(D,Q,ae,oe,J){Q.isScene!==!0&&(Q=me),N.resetTextureUnits();const Se=Q.fog,De=oe.isMeshStandardMaterial?Q.environment:null,We=P===null?b.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:fu,$e=(oe.isMeshStandardMaterial?F:T).get(oe.envMap||De),ot=oe.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,at=!!ae.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),Ye=!!ae.morphAttributes.position,Pt=!!ae.morphAttributes.normal,It=!!ae.morphAttributes.color;let wn=Qa;oe.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(wn=b.toneMapping);const cn=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Dt=cn!==void 0?cn.length:0,Qe=H.get(oe),Vn=p.state.lights;if(fe===!0&&(xe===!0||D!==E)){const ar=D===E&&oe.id===A;be.setState(oe,D,ar)}let jt=!1;oe.version===Qe.__version?(Qe.needsLights&&Qe.lightsStateVersion!==Vn.state.version||Qe.outputColorSpace!==We||J.isBatchedMesh&&Qe.batching===!1||!J.isBatchedMesh&&Qe.batching===!0||J.isBatchedMesh&&Qe.batchingColor===!0&&J.colorTexture===null||J.isBatchedMesh&&Qe.batchingColor===!1&&J.colorTexture!==null||J.isInstancedMesh&&Qe.instancing===!1||!J.isInstancedMesh&&Qe.instancing===!0||J.isSkinnedMesh&&Qe.skinning===!1||!J.isSkinnedMesh&&Qe.skinning===!0||J.isInstancedMesh&&Qe.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&Qe.instancingColor===!1&&J.instanceColor!==null||J.isInstancedMesh&&Qe.instancingMorph===!0&&J.morphTexture===null||J.isInstancedMesh&&Qe.instancingMorph===!1&&J.morphTexture!==null||Qe.envMap!==$e||oe.fog===!0&&Qe.fog!==Se||Qe.numClippingPlanes!==void 0&&(Qe.numClippingPlanes!==be.numPlanes||Qe.numIntersection!==be.numIntersection)||Qe.vertexAlphas!==ot||Qe.vertexTangents!==at||Qe.morphTargets!==Ye||Qe.morphNormals!==Pt||Qe.morphColors!==It||Qe.toneMapping!==wn||Qe.morphTargetsCount!==Dt)&&(jt=!0):(jt=!0,Qe.__version=oe.version);let xi=Qe.currentProgram;jt===!0&&(xi=Qf(oe,Q,J));let Ll=!1,Or=!1,Du=!1;const Qt=xi.getUniforms(),ti=Qe.uniforms;if(R.useProgram(xi.program)&&(Ll=!0,Or=!0,Du=!0),oe.id!==A&&(A=oe.id,Or=!0),Ll||E!==D){R.buffers.depth.getReversed()?(ie.copy(D.projectionMatrix),S9(ie),E9(ie),Qt.setValue(I,"projectionMatrix",ie)):Qt.setValue(I,"projectionMatrix",D.projectionMatrix),Qt.setValue(I,"viewMatrix",D.matrixWorldInverse);const Sr=Qt.map.cameraPosition;Sr!==void 0&&Sr.setValue(I,Ue.setFromMatrixPosition(D.matrixWorld)),he.logarithmicDepthBuffer&&Qt.setValue(I,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&Qt.setValue(I,"isOrthographic",D.isOrthographicCamera===!0),E!==D&&(E=D,Or=!0,Du=!0)}if(J.isSkinnedMesh){Qt.setOptional(I,J,"bindMatrix"),Qt.setOptional(I,J,"bindMatrixInverse");const ar=J.skeleton;ar&&(ar.boneTexture===null&&ar.computeBoneTexture(),Qt.setValue(I,"boneTexture",ar.boneTexture,N))}J.isBatchedMesh&&(Qt.setOptional(I,J,"batchingTexture"),Qt.setValue(I,"batchingTexture",J._matricesTexture,N),Qt.setOptional(I,J,"batchingIdTexture"),Qt.setValue(I,"batchingIdTexture",J._indirectTexture,N),Qt.setOptional(I,J,"batchingColorTexture"),J._colorsTexture!==null&&Qt.setValue(I,"batchingColorTexture",J._colorsTexture,N));const ni=ae.morphAttributes;if((ni.position!==void 0||ni.normal!==void 0||ni.color!==void 0)&&st.update(J,ae,xi),(Or||Qe.receiveShadow!==J.receiveShadow)&&(Qe.receiveShadow=J.receiveShadow,Qt.setValue(I,"receiveShadow",J.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(ti.envMap.value=$e,ti.flipEnvMap.value=$e.isCubeTexture&&$e.isRenderTargetTexture===!1?-1:1),oe.isMeshStandardMaterial&&oe.envMap===null&&Q.environment!==null&&(ti.envMapIntensity.value=Q.environmentIntensity),Or&&(Qt.setValue(I,"toneMappingExposure",b.toneMappingExposure),Qe.needsLights&&LF(ti,Du),Se&&oe.fog===!0&&Ae.refreshFogUniforms(ti,Se),Ae.refreshMaterialUniforms(ti,oe,z,X,p.state.transmissionRenderTarget[D.id]),Lp.upload(I,Gb(Qe),ti,N)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(Lp.upload(I,Gb(Qe),ti,N),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&Qt.setValue(I,"center",J.center),Qt.setValue(I,"modelViewMatrix",J.modelViewMatrix),Qt.setValue(I,"normalMatrix",J.normalMatrix),Qt.setValue(I,"modelMatrix",J.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const ar=oe.uniformsGroups;for(let Sr=0,Qg=ar.length;Sr<Qg;Sr++){const Eo=ar[Sr];Z.update(Eo,xi),Z.bind(Eo,xi)}}return xi}function LF(D,Q){D.ambientLightColor.needsUpdate=Q,D.lightProbe.needsUpdate=Q,D.directionalLights.needsUpdate=Q,D.directionalLightShadows.needsUpdate=Q,D.pointLights.needsUpdate=Q,D.pointLightShadows.needsUpdate=Q,D.spotLights.needsUpdate=Q,D.spotLightShadows.needsUpdate=Q,D.rectAreaLights.needsUpdate=Q,D.hemisphereLights.needsUpdate=Q}function IF(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(D,Q,ae){const oe=H.get(D);oe.__autoAllocateDepthBuffer=D.resolveDepthBuffer===!1,oe.__autoAllocateDepthBuffer===!1&&(oe.__useRenderToTexture=!1),H.get(D.texture).__webglTexture=Q,H.get(D.depthTexture).__webglTexture=oe.__autoAllocateDepthBuffer?void 0:ae,oe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(D,Q){const ae=H.get(D);ae.__webglFramebuffer=Q,ae.__useDefaultFramebuffer=Q===void 0};const jF=I.createFramebuffer();this.setRenderTarget=function(D,Q=0,ae=0){P=D,M=Q,C=ae;let oe=!0,J=null,Se=!1,De=!1;if(D){const $e=H.get(D);if($e.__useDefaultFramebuffer!==void 0)R.bindFramebuffer(I.FRAMEBUFFER,null),oe=!1;else if($e.__webglFramebuffer===void 0)N.setupRenderTarget(D);else if($e.__hasExternalTextures)N.rebindTextures(D,H.get(D.texture).__webglTexture,H.get(D.depthTexture).__webglTexture);else if(D.depthBuffer){const Ye=D.depthTexture;if($e.__boundDepthTexture!==Ye){if(Ye!==null&&H.has(Ye)&&(D.width!==Ye.image.width||D.height!==Ye.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");N.setupDepthRenderbuffer(D)}}const ot=D.texture;(ot.isData3DTexture||ot.isDataArrayTexture||ot.isCompressedArrayTexture)&&(De=!0);const at=H.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(at[Q])?J=at[Q][ae]:J=at[Q],Se=!0):D.samples>0&&N.useMultisampledRTT(D)===!1?J=H.get(D).__webglMultisampledFramebuffer:Array.isArray(at)?J=at[ae]:J=at,L.copy(D.viewport),O.copy(D.scissor),k=D.scissorTest}else L.copy(de).multiplyScalar(z).floor(),O.copy(Ee).multiplyScalar(z).floor(),k=Ne;if(ae!==0&&(J=jF),R.bindFramebuffer(I.FRAMEBUFFER,J)&&oe&&R.drawBuffers(D,J),R.viewport(L),R.scissor(O),R.setScissorTest(k),Se){const $e=H.get(D.texture);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+Q,$e.__webglTexture,ae)}else if(De){const $e=H.get(D.texture),ot=Q;I.framebufferTextureLayer(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,$e.__webglTexture,ae,ot)}else if(D!==null&&ae!==0){const $e=H.get(D.texture);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,$e.__webglTexture,ae)}A=-1},this.readRenderTargetPixels=function(D,Q,ae,oe,J,Se,De){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let We=H.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&De!==void 0&&(We=We[De]),We){R.bindFramebuffer(I.FRAMEBUFFER,We);try{const $e=D.texture,ot=$e.format,at=$e.type;if(!he.textureFormatReadable(ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!he.textureTypeReadable(at)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=D.width-oe&&ae>=0&&ae<=D.height-J&&I.readPixels(Q,ae,oe,J,pt.convert(ot),pt.convert(at),Se)}finally{const $e=P!==null?H.get(P).__webglFramebuffer:null;R.bindFramebuffer(I.FRAMEBUFFER,$e)}}},this.readRenderTargetPixelsAsync=async function(D,Q,ae,oe,J,Se,De){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let We=H.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&De!==void 0&&(We=We[De]),We)if(Q>=0&&Q<=D.width-oe&&ae>=0&&ae<=D.height-J){R.bindFramebuffer(I.FRAMEBUFFER,We);const $e=D.texture,ot=$e.format,at=$e.type;if(!he.textureFormatReadable(ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!he.textureTypeReadable(at))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ye=I.createBuffer();I.bindBuffer(I.PIXEL_PACK_BUFFER,Ye),I.bufferData(I.PIXEL_PACK_BUFFER,Se.byteLength,I.STREAM_READ),I.readPixels(Q,ae,oe,J,pt.convert(ot),pt.convert(at),0);const Pt=P!==null?H.get(P).__webglFramebuffer:null;R.bindFramebuffer(I.FRAMEBUFFER,Pt);const It=I.fenceSync(I.SYNC_GPU_COMMANDS_COMPLETE,0);return I.flush(),await b9(I,It,4),I.bindBuffer(I.PIXEL_PACK_BUFFER,Ye),I.getBufferSubData(I.PIXEL_PACK_BUFFER,0,Se),I.deleteBuffer(Ye),I.deleteSync(It),Se}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(D,Q=null,ae=0){const oe=Math.pow(2,-ae),J=Math.floor(D.image.width*oe),Se=Math.floor(D.image.height*oe),De=Q!==null?Q.x:0,We=Q!==null?Q.y:0;N.setTexture2D(D,0),I.copyTexSubImage2D(I.TEXTURE_2D,ae,0,0,De,We,J,Se),R.unbindTexture()};const zF=I.createFramebuffer(),OF=I.createFramebuffer();this.copyTextureToTexture=function(D,Q,ae=null,oe=null,J=0,Se=null){Se===null&&(J!==0?(kp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Se=J,J=0):Se=0);let De,We,$e,ot,at,Ye,Pt,It,wn;const cn=D.isCompressedTexture?D.mipmaps[Se]:D.image;if(ae!==null)De=ae.max.x-ae.min.x,We=ae.max.y-ae.min.y,$e=ae.isBox3?ae.max.z-ae.min.z:1,ot=ae.min.x,at=ae.min.y,Ye=ae.isBox3?ae.min.z:0;else{const ni=Math.pow(2,-J);De=Math.floor(cn.width*ni),We=Math.floor(cn.height*ni),D.isDataArrayTexture?$e=cn.depth:D.isData3DTexture?$e=Math.floor(cn.depth*ni):$e=1,ot=0,at=0,Ye=0}oe!==null?(Pt=oe.x,It=oe.y,wn=oe.z):(Pt=0,It=0,wn=0);const Dt=pt.convert(Q.format),Qe=pt.convert(Q.type);let Vn;Q.isData3DTexture?(N.setTexture3D(Q,0),Vn=I.TEXTURE_3D):Q.isDataArrayTexture||Q.isCompressedArrayTexture?(N.setTexture2DArray(Q,0),Vn=I.TEXTURE_2D_ARRAY):(N.setTexture2D(Q,0),Vn=I.TEXTURE_2D),I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,Q.flipY),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),I.pixelStorei(I.UNPACK_ALIGNMENT,Q.unpackAlignment);const jt=I.getParameter(I.UNPACK_ROW_LENGTH),xi=I.getParameter(I.UNPACK_IMAGE_HEIGHT),Ll=I.getParameter(I.UNPACK_SKIP_PIXELS),Or=I.getParameter(I.UNPACK_SKIP_ROWS),Du=I.getParameter(I.UNPACK_SKIP_IMAGES);I.pixelStorei(I.UNPACK_ROW_LENGTH,cn.width),I.pixelStorei(I.UNPACK_IMAGE_HEIGHT,cn.height),I.pixelStorei(I.UNPACK_SKIP_PIXELS,ot),I.pixelStorei(I.UNPACK_SKIP_ROWS,at),I.pixelStorei(I.UNPACK_SKIP_IMAGES,Ye);const Qt=D.isDataArrayTexture||D.isData3DTexture,ti=Q.isDataArrayTexture||Q.isData3DTexture;if(D.isDepthTexture){const ni=H.get(D),ar=H.get(Q),Sr=H.get(ni.__renderTarget),Qg=H.get(ar.__renderTarget);R.bindFramebuffer(I.READ_FRAMEBUFFER,Sr.__webglFramebuffer),R.bindFramebuffer(I.DRAW_FRAMEBUFFER,Qg.__webglFramebuffer);for(let Eo=0;Eo<$e;Eo++)Qt&&(I.framebufferTextureLayer(I.READ_FRAMEBUFFER,I.COLOR_ATTACHMENT0,H.get(D).__webglTexture,J,Ye+Eo),I.framebufferTextureLayer(I.DRAW_FRAMEBUFFER,I.COLOR_ATTACHMENT0,H.get(Q).__webglTexture,Se,wn+Eo)),I.blitFramebuffer(ot,at,De,We,Pt,It,De,We,I.DEPTH_BUFFER_BIT,I.NEAREST);R.bindFramebuffer(I.READ_FRAMEBUFFER,null),R.bindFramebuffer(I.DRAW_FRAMEBUFFER,null)}else if(J!==0||D.isRenderTargetTexture||H.has(D)){const ni=H.get(D),ar=H.get(Q);R.bindFramebuffer(I.READ_FRAMEBUFFER,zF),R.bindFramebuffer(I.DRAW_FRAMEBUFFER,OF);for(let Sr=0;Sr<$e;Sr++)Qt?I.framebufferTextureLayer(I.READ_FRAMEBUFFER,I.COLOR_ATTACHMENT0,ni.__webglTexture,J,Ye+Sr):I.framebufferTexture2D(I.READ_FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,ni.__webglTexture,J),ti?I.framebufferTextureLayer(I.DRAW_FRAMEBUFFER,I.COLOR_ATTACHMENT0,ar.__webglTexture,Se,wn+Sr):I.framebufferTexture2D(I.DRAW_FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,ar.__webglTexture,Se),J!==0?I.blitFramebuffer(ot,at,De,We,Pt,It,De,We,I.COLOR_BUFFER_BIT,I.NEAREST):ti?I.copyTexSubImage3D(Vn,Se,Pt,It,wn+Sr,ot,at,De,We):I.copyTexSubImage2D(Vn,Se,Pt,It,ot,at,De,We);R.bindFramebuffer(I.READ_FRAMEBUFFER,null),R.bindFramebuffer(I.DRAW_FRAMEBUFFER,null)}else ti?D.isDataTexture||D.isData3DTexture?I.texSubImage3D(Vn,Se,Pt,It,wn,De,We,$e,Dt,Qe,cn.data):Q.isCompressedArrayTexture?I.compressedTexSubImage3D(Vn,Se,Pt,It,wn,De,We,$e,Dt,cn.data):I.texSubImage3D(Vn,Se,Pt,It,wn,De,We,$e,Dt,Qe,cn):D.isDataTexture?I.texSubImage2D(I.TEXTURE_2D,Se,Pt,It,De,We,Dt,Qe,cn.data):D.isCompressedTexture?I.compressedTexSubImage2D(I.TEXTURE_2D,Se,Pt,It,cn.width,cn.height,Dt,cn.data):I.texSubImage2D(I.TEXTURE_2D,Se,Pt,It,De,We,Dt,Qe,cn);I.pixelStorei(I.UNPACK_ROW_LENGTH,jt),I.pixelStorei(I.UNPACK_IMAGE_HEIGHT,xi),I.pixelStorei(I.UNPACK_SKIP_PIXELS,Ll),I.pixelStorei(I.UNPACK_SKIP_ROWS,Or),I.pixelStorei(I.UNPACK_SKIP_IMAGES,Du),Se===0&&Q.generateMipmaps&&I.generateMipmap(Vn),R.unbindTexture()},this.copyTextureToTexture3D=function(D,Q,ae=null,oe=null,J=0){return kp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(D,Q,ae,oe,J)},this.initRenderTarget=function(D){H.get(D).__webglFramebuffer===void 0&&N.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?N.setTextureCube(D,0):D.isData3DTexture?N.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?N.setTexture2DArray(D,0):N.setTexture2D(D,0),R.unbindTexture()},this.resetState=function(){M=0,C=0,P=null,R.reset(),$t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Us}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=kt._getDrawingBufferColorSpace(e),n.unpackColorSpace=kt._getUnpackColorSpace()}}const gT={type:"change"},bb={type:"start"},PI={type:"end"},rp=new Og,vT=new wa,YK=Math.cos(70*_9.DEG2RAD),Mn=new K,Er=2*Math.PI,Wt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Ty=1e-6;class RI extends p7{constructor(e,n=null){super(e,n),this.state=Wt.NONE,this.target=new K,this.cursor=new K,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Dc.ROTATE,MIDDLE:Dc.DOLLY,RIGHT:Dc.PAN},this.touches={ONE:yc.ROTATE,TWO:yc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new K,this._lastQuaternion=new gl,this._lastTargetPosition=new K,this._quat=new gl().setFromUnitVectors(e.up,new K(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new GM,this._sphericalDelta=new GM,this._scale=1,this._panOffset=new K,this._rotateStart=new nt,this._rotateEnd=new nt,this._rotateDelta=new nt,this._panStart=new nt,this._panEnd=new nt,this._panDelta=new nt,this._dollyStart=new nt,this._dollyEnd=new nt,this._dollyDelta=new nt,this._dollyDirection=new K,this._mouse=new nt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=JK.bind(this),this._onPointerDown=QK.bind(this),this._onPointerUp=eY.bind(this),this._onContextMenu=oY.bind(this),this._onMouseWheel=rY.bind(this),this._onKeyDown=iY.bind(this),this._onTouchStart=sY.bind(this),this._onTouchMove=aY.bind(this),this._onMouseDown=tY.bind(this),this._onMouseMove=nY.bind(this),this._interceptControlDown=lY.bind(this),this._interceptControlUp=cY.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(gT),this.update(),this.state=Wt.NONE}update(e=null){const n=this.object.position;Mn.copy(n).sub(this.target),Mn.applyQuaternion(this._quat),this._spherical.setFromVector3(Mn),this.autoRotate&&this.state===Wt.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=Er:r>Math.PI&&(r-=Er),i<-Math.PI?i+=Er:i>Math.PI&&(i-=Er),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Mn.setFromSpherical(this._spherical),Mn.applyQuaternion(this._quatInverse),n.copy(this.target).add(Mn),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Mn.length();a=this._clampDistance(o*this._scale);const c=o-a;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),s=!!c}else if(this.object.isOrthographicCamera){const o=new K(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=c!==this.object.zoom;const u=new K(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(o),this.object.updateMatrixWorld(),a=Mn.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(rp.origin.copy(this.object.position),rp.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(rp.direction))<YK?this.object.lookAt(this.target):(vT.setFromNormalAndCoplanarPoint(this.object.up,this.target),rp.intersectPlane(vT,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>Ty||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Ty||this._lastTargetPosition.distanceToSquared(this.target)>Ty?(this.dispatchEvent(gT),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Er/60*this.autoRotateSpeed*e:Er/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){Mn.setFromMatrixColumn(n,0),Mn.multiplyScalar(-e),this._panOffset.add(Mn)}_panUp(e,n){this.screenSpacePanning===!0?Mn.setFromMatrixColumn(n,1):(Mn.setFromMatrixColumn(n,0),Mn.crossVectors(this.object.up,Mn)),Mn.multiplyScalar(e),this._panOffset.add(Mn)}_pan(e,n){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Mn.copy(i).sub(this.target);let s=Mn.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*n*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=n-r.top,a=r.width,o=r.height;this._mouse.x=i/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Er*this._rotateDelta.x/n.clientHeight),this._rotateUp(Er*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Er*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Er*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Er*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Er*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Er*this._rotateDelta.x/n.clientHeight),this._rotateUp(Er*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+n.x)*.5,o=(e.pageY+n.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new nt,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function QK(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function JK(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function eY(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(PI),this.state=Wt.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function tY(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Dc.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=Wt.DOLLY;break;case Dc.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Wt.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Wt.ROTATE}break;case Dc.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Wt.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Wt.PAN}break;default:this.state=Wt.NONE}this.state!==Wt.NONE&&this.dispatchEvent(bb)}function nY(t){switch(this.state){case Wt.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case Wt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case Wt.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function rY(t){this.enabled===!1||this.enableZoom===!1||this.state!==Wt.NONE||(t.preventDefault(),this.dispatchEvent(bb),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(PI))}function iY(t){this.enabled!==!1&&this._handleKeyDown(t)}function sY(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case yc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=Wt.TOUCH_ROTATE;break;case yc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=Wt.TOUCH_PAN;break;default:this.state=Wt.NONE}break;case 2:switch(this.touches.TWO){case yc.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=Wt.TOUCH_DOLLY_PAN;break;case yc.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=Wt.TOUCH_DOLLY_ROTATE;break;default:this.state=Wt.NONE}break;default:this.state=Wt.NONE}this.state!==Wt.NONE&&this.dispatchEvent(bb)}function aY(t){switch(this._trackPointer(t),this.state){case Wt.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case Wt.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case Wt.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case Wt.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=Wt.NONE}}function oY(t){this.enabled!==!1&&t.preventDefault()}function lY(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function cY(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function yT(){const t=x.useRef(null),[e,n]=x.useState("Inicjalizacja..."),[r,i]=x.useState(0);return x.useEffect(()=>{if(!t.current){n("Kontener niedostępny");return}for(t.current&&(t.current.style.width="100%",t.current.style.height="400px",t.current.style.minHeight="400px",t.current.style.backgroundColor="#f0f0f0",t.current.style.position="relative");t.current.firstChild;)t.current.removeChild(t.current.firstChild);n("Tworzenie sceny Three.js...");try{const s=new gI;s.background=new vt(2766662);const a=t.current.clientWidth,o=t.current.clientHeight;if(console.log("Container dimensions:",{width:a,height:o}),a===0||o===0){n("Błąd: Kontener ma zerowe wymiary!");return}const c=new Wr(75,a/o,.1,1e3);c.position.set(5,5,5),c.lookAt(0,0,0);const u=new NI({antialias:!0,alpha:!0,preserveDrawingBuffer:!0});u.setPixelRatio(window.devicePixelRatio),u.setSize(a,o),t.current.appendChild(u.domElement);const d=u.domElement;d.style.display="block",d.style.width="100%",d.style.height="100%";const f=new Dl(2,2,2),h=new Ma({color:16711680}),m=new On(f,h);s.add(m);const y=new Fg(new _I(f),new kl({color:16777215}));m.add(y);const v=new h7(10,10);s.add(v);const g=new Ad(5);s.add(g);const p=new RI(c,u.domElement);p.enableDamping=!0,p.dampingFactor=.05;let _;const w=()=>{m.rotation.x+=.01,m.rotation.y+=.01,p.update(),u.render(s,c),i(S=>S+1),_=requestAnimationFrame(w)};w(),n("Render działa poprawnie");const b=()=>{if(!t.current)return;const S=t.current.clientWidth,M=t.current.clientHeight;c.aspect=S/M,c.updateProjectionMatrix(),u.setSize(S,M)};return window.addEventListener("resize",b),()=>{n("Czyszczenie zasobów..."),cancelAnimationFrame(_),window.removeEventListener("resize",b),f.dispose(),h.dispose(),u.dispose(),u.domElement.parentNode&&u.domElement.parentNode.removeChild(u.domElement),n("Zasoby wyczyszczone")}}catch(s){console.error("Error initializing Three.js:",s),n(`Błąd: ${s instanceof Error?s.message:"Nieznany błąd"}`)}},[]),l.jsx("div",{className:"w-full min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-lg overflow-hidden",children:[l.jsx("div",{className:"p-4 bg-gray-800 text-white font-medium",children:"Test renderowania Three.js"}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-gray-700 mb-2",children:"Ten komponent testuje podstawowe renderowanie Three.js. Poniżej powinna być widoczna czerwona kostka obracająca się w przestrzeni 3D."}),l.jsxs("p",{className:"text-gray-500 text-sm",children:["Status: ",e," | Liczba klatek: ",r]})]}),l.jsx("div",{ref:t,className:"w-full h-[400px] bg-gray-100 border border-gray-300 rounded-lg"}),l.jsx("div",{className:"mt-4 text-xs text-gray-500",children:l.jsx("p",{children:"Jeśli renderowanie działa prawidłowo, powinieneś widzieć czerwoną kostkę obracającą się w środku sceny, wraz z siatką pomocniczą."})})]})]})})}var Sb="Tabs",[uY,Mte]=qi(Sb,[Ng]),DI=Ng(),[dY,Eb]=uY(Sb),kI=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:c="automatic",...u}=t,d=_g(o),[f,h]=vi({prop:r,onChange:i,defaultProp:s});return l.jsx(dY,{scope:n,baseId:hi(),value:f,onValueChange:h,orientation:a,dir:d,activationMode:c,children:l.jsx(Ke.div,{dir:d,"data-orientation":a,...u,ref:e})})});kI.displayName=Sb;var LI="TabsList",II=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=Eb(LI,n),a=DI(n);return l.jsx(Q2,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:l.jsx(Ke.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});II.displayName=LI;var jI="TabsTrigger",zI=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,a=Eb(jI,n),o=DI(n),c=UI(a.baseId,r),u=BI(a.baseId,r),d=r===a.value;return l.jsx(J2,{asChild:!0,...o,focusable:!i,active:d,children:l.jsx(Ke.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:Ce(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:Ce(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:Ce(t.onFocus,()=>{const f=a.activationMode!=="manual";!d&&!i&&f&&a.onValueChange(r)})})})});zI.displayName=jI;var OI="TabsContent",FI=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=t,o=Eb(OI,n),c=UI(o.baseId,r),u=BI(o.baseId,r),d=r===o.value,f=x.useRef(d);return x.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),l.jsx(zr,{present:i||d,children:({present:h})=>l.jsx(Ke.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&s})})});FI.displayName=OI;function UI(t,e){return`${t}-trigger-${e}`}function BI(t,e){return`${t}-content-${e}`}var fY=kI,VI=II,HI=zI,GI=FI;const Bg=fY,Gf=x.forwardRef(({className:t,...e},n)=>l.jsx(VI,{ref:n,className:Re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Gf.displayName=VI.displayName;const hs=x.forwardRef(({className:t,...e},n)=>l.jsx(HI,{ref:n,className:Re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));hs.displayName=HI.displayName;const ps=x.forwardRef(({className:t,...e},n)=>l.jsx(GI,{ref:n,className:Re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ps.displayName=GI.displayName;function Ja({className:t,...e}){return l.jsx("div",{className:Re("animate-pulse rounded-md bg-muted",t),...e})}class hY extends _b{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new a7(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{n(s.parse(o))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){function n(u){const d=new DataView(u),f=32/8*3+32/8*3*3+16/8,h=d.getUint32(80,!0);if(80+32/8+h*f===d.byteLength)return!0;const y=[115,111,108,105,100];for(let v=0;v<5;v++)if(r(y,d,v))return!1;return!0}function r(u,d,f){for(let h=0,m=u.length;h<m;h++)if(u[h]!==d.getUint8(f+h))return!1;return!0}function i(u){const d=new DataView(u),f=d.getUint32(80,!0);let h,m,y,v=!1,g,p,_,w,b;for(let L=0;L<70;L++)d.getUint32(L,!1)==1129270351&&d.getUint8(L+4)==82&&d.getUint8(L+5)==61&&(v=!0,g=new Float32Array(f*3*3),p=d.getUint8(L+6)/255,_=d.getUint8(L+7)/255,w=d.getUint8(L+8)/255,b=d.getUint8(L+9)/255);const S=84,M=12*4+2,C=new En,P=new Float32Array(f*3*3),A=new Float32Array(f*3*3),E=new vt;for(let L=0;L<f;L++){const O=S+L*M,k=d.getFloat32(O,!0),j=d.getFloat32(O+4,!0),$=d.getFloat32(O+8,!0);if(v){const U=d.getUint16(O+48,!0);U&32768?(h=p,m=_,y=w):(h=(U&31)/31,m=(U>>5&31)/31,y=(U>>10&31)/31)}for(let U=1;U<=3;U++){const X=O+U*12,z=L*3*3+(U-1)*3;P[z]=d.getFloat32(X,!0),P[z+1]=d.getFloat32(X+4,!0),P[z+2]=d.getFloat32(X+8,!0),A[z]=k,A[z+1]=j,A[z+2]=$,v&&(E.setRGB(h,m,y,Hr),g[z]=E.r,g[z+1]=E.g,g[z+2]=E.b)}}return C.setAttribute("position",new Lr(P,3)),C.setAttribute("normal",new Lr(A,3)),v&&(C.setAttribute("color",new Lr(g,3)),C.hasColors=!0,C.alpha=b),C}function s(u){const d=new En,f=/solid([\s\S]*?)endsolid/g,h=/facet([\s\S]*?)endfacet/g,m=/solid\s(.+)/;let y=0;const v=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,g=new RegExp("vertex"+v+v+v,"g"),p=new RegExp("normal"+v+v+v,"g"),_=[],w=[],b=[],S=new K;let M,C=0,P=0,A=0;for(;(M=f.exec(u))!==null;){P=A;const E=M[0],L=(M=m.exec(E))!==null?M[1]:"";for(b.push(L);(M=h.exec(E))!==null;){let j=0,$=0;const U=M[0];for(;(M=p.exec(U))!==null;)S.x=parseFloat(M[1]),S.y=parseFloat(M[2]),S.z=parseFloat(M[3]),$++;for(;(M=g.exec(U))!==null;)_.push(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])),w.push(S.x,S.y,S.z),j++,A++;$!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+y),j!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+y),y++}const O=P,k=A-P;d.userData.groupNames=b,d.addGroup(O,k,C),C++}return d.setAttribute("position",new gn(_,3)),d.setAttribute("normal",new gn(w,3)),d}function a(u){return typeof u!="string"?new TextDecoder().decode(u):u}function o(u){if(typeof u=="string"){const d=new Uint8Array(u.length);for(let f=0;f<u.length;f++)d[f]=u.charCodeAt(f)&255;return d.buffer||d}else return u}const c=o(e);return n(c)?i(c):s(a(e))}}const pY=(t=3900150)=>({main:new wI({color:t,metalness:.5,roughness:.3,flatShading:!1}),edge:new kl({color:9741240,linewidth:1})});function mY(t,e){return new Promise((n,r)=>{console.log("Loading STL model from:",t);const i=new hY,s=pY(),a=new ki,o=new Ad(.5);o.position.y=-5,o.visible=!1,a.add(o),i.load(t,c=>{try{if(console.log("STL loaded successfully"),!c||c.attributes.position.count===0)throw new Error("STL geometry is empty or invalid");c.attributes.normal||c.computeVertexNormals(),c.center();const u=new On(c,s.main);u.rotation.x=-Math.PI/2;const f=new Pl().setFromObject(u).getSize(new K),h=Math.max(f.x,f.y,f.z),m=[f.x,f.y,f.z],y=m.indexOf(Math.min(...m));let v;y===0?v={width:f.z,depth:f.y,height:f.x}:y===1?v={width:f.x,depth:f.z,height:f.y}:v={width:f.x,depth:f.y,height:f.z},console.log("Wymiary oryginalne:",{x:f.x,y:f.y,z:f.z}),console.log("Przypisane wymiary:",v);let g=1;if(h<.001?(g=1e3,console.log("Bardzo mały model, stosowanie dużej skali:",g)):h>1e3?(g=5/h,console.log("Bardzo duży model, stosowanie mniejszej skali:",g)):h>100?(g=8/h,console.log("Duży model, stosowanie średniej skali:",g)):(g=10/h,console.log("Normalny model, stosowanie standardowej skali:",g)),u.scale.set(g,g,g),u.castShadow=!0,u.receiveShadow=!0,a.add(u),c.attributes.position.count<1e5)try{const p=new Fg(new _I(c,15),s.edge);p.rotation.x=-Math.PI/2,p.scale.set(g,g,g),a.add(p)}catch(p){console.warn("Nie można utworzyć wireframe - zbyt złożona geometria:",p)}else console.log("Pominięto generowanie wireframe - zbyt złożona geometria");n({model:a,scale:g,material:s.main,originalDimensions:v})}catch(u){console.error("Error processing STL geometry:",u),xT(u instanceof Error?u.message:"Unknown error",n)}},e,c=>{console.error("Error loading STL model:",c),xT(c instanceof Error?c.message:"Failed to load STL model",n)})})}function xT(t,e){const n=new ki,r=new ki,i=new kl({color:16711680}),s=new En().setFromPoints([new K(-1,-1,0),new K(1,1,0)]),a=new Cd(s,i),o=new En().setFromPoints([new K(1,-1,0),new K(-1,1,0)]),c=new Cd(o,i);r.add(a),r.add(c);const u=new En().setFromPoints(Array.from({length:64}).map((h,m)=>{const y=m/64*Math.PI*2;return new K(Math.cos(y)*1.5,Math.sin(y)*1.5,0)})),d=new Cd(u,i);r.add(d),n.add(r),n.errorMessage=t;const f=new wI({color:16711680,metalness:.5,roughness:.3,flatShading:!1});e({model:n,scale:1,material:f,originalDimensions:{width:0,depth:0,height:0}})}var gY="Toggle",WI=x.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:i,...s}=t,[a=!1,o]=vi({prop:n,onChange:i,defaultProp:r});return l.jsx(Ke.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":t.disabled?"":void 0,...s,ref:e,onClick:Ce(t.onClick,()=>{t.disabled||o(!a)})})});WI.displayName=gY;var $I=WI;const vY=Ml("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),qI=x.forwardRef(({className:t,variant:e,size:n,...r},i)=>l.jsx($I,{ref:i,className:Re(vY({variant:e,size:n,className:t})),...r}));qI.displayName=$I.displayName;function XI({modelId:t,isPublic:e,publicId:n,allowScreenshots:r=!1}){const{t:i}=on(),{toast:s}=jr(),a=x.useRef(null),o=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),h=x.useRef(null),[m,y]=x.useState(null),[v,g]=x.useState(!1),[p,_]=x.useState(null),[w,b]=x.useState(!1),[S,M]=x.useState("Initializing..."),[C,P]=x.useState(!1),[A,E]=x.useState("#4A90E2"),[L,O]=x.useState(!1),k=x.useRef(null),j=ce=>{if(E(ce),k.current){const me=new vt(ce);k.current.color=me,k.current.needsUpdate=!0}},$="stl_only",[U,X]=x.useState(null),[z,V]=x.useState(!1),[ee,de]=x.useState([]),[Ee,Ne]=x.useState(null),ne=ce=>{if(!z||!a.current||!o.current||!c.current)return;const me=a.current.getBoundingClientRect(),ve=(ce.clientX-me.left)/a.current.clientWidth*2-1,q=-((ce.clientY-me.top)/a.current.clientHeight)*2+1,I=new f7,qe=new nt(ve,q);I.setFromCamera(qe,c.current);const W=o.current.getObjectByName("StepModel");if(!W)return;const he=I.intersectObjects(W.children,!0);if(he.length>0){const R=he[0].point;if(de(B=>{var H,N;if(B.length===2){const T=(H=o.current)==null?void 0:H.getObjectByName("MeasureLine");return T&&((N=o.current)==null||N.remove(T)),[R]}return[...B,R]}),fe(R),ee.length===1){const B=ee[0].distanceTo(R);Ne(B),xe(ee[0],R,B)}}},fe=ce=>{if(!o.current)return;const me=`MeasurePoint_${ee.length}`,ve=o.current.getObjectByName(me);ve&&o.current.remove(ve);const q=new ki;q.name=me;const I=new km(.05,16,16),qe=new Ma({color:16711680}),W=new On(I,qe),he=new km(.07,16,16),R=new Ma({color:16777215,transparent:!0,opacity:.5}),B=new On(he,R);W.position.copy(ce),B.position.copy(ce),q.add(W),q.add(B);const H=`(${ce.x.toFixed(2)}, ${ce.y.toFixed(2)}, ${ce.z.toFixed(2)})`;console.log(`Dodano punkt pomiarowy: ${H}`),o.current.add(q)},xe=(ce,me,ve)=>{if(!o.current||!c.current)return;const q=o.current.getObjectByName("MeasureLine");q&&o.current.remove(q);const I=new ki;I.name="MeasureLine";const qe=new n7({color:16711680,dashSize:.1,gapSize:.05,linewidth:2}),W=new En().setFromPoints([ce,me]),he=new Cd(W,qe);he.computeLineDistances(),I.add(he);const R=new K().addVectors(ce,me).multiplyScalar(.5),B=.1,H=.04,N=new xb(H,B,8),T=new Ma({color:16711680}),F=new On(N,T);F.position.copy(ce),F.lookAt(me),F.rotateX(Math.PI/2);const te=new On(N,T);te.position.copy(me),te.lookAt(ce),te.rotateX(Math.PI/2),I.add(F),I.add(te);const le=ve>=1?`${ve.toFixed(2)} ${i("measurement.units")}`:`${ve.toFixed(3)} ${i("measurement.units")}`,se=document.createElement("canvas");se.width=256,se.height=128;const Te=se.getContext("2d");if(Te){Te.fillStyle="rgba(0, 0, 0, 0.7)",Te.fillRect(0,0,se.width,se.height),Te.strokeStyle="white",Te.lineWidth=2,Te.strokeRect(2,2,se.width-4,se.height-4),Te.font="bold 36px Arial",Te.textAlign="center",Te.textBaseline="middle",Te.fillStyle="white",Te.fillText(le,se.width/2,se.height/2);const Ae=new J9(se),Fe=new vI({map:Ae,transparent:!0}),ut=new K9(Fe);ut.position.copy(R),ut.scale.set(1,.5,1),I.add(ut)}o.current.add(I),console.log(`Narysowano linię pomiarową o długości: ${ve.toFixed(3)} jednostek`)};x.useEffect(()=>{if(!a.current)return;const ce=new gI;ce.background=new vt(15790320),o.current=ce;const me=new Wr(75,a.current.clientWidth/a.current.clientHeight,.1,1e3);me.position.set(5,5,5),c.current=me;const ve=new NI({antialias:!0});ve.setSize(a.current.clientWidth,a.current.clientHeight),ve.setPixelRatio(window.devicePixelRatio),ve.shadowMap.enabled=!0,a.current.appendChild(ve.domElement),u.current=ve;const q=new RI(me,ve.domElement);q.enableDamping=!0,q.dampingFactor=.1,d.current=q;const I=new u7(16777215,.5);ce.add(I);const qe=new c7(16777215,.8);qe.position.set(5,10,5),qe.castShadow=!0,qe.shadow.mapSize.width=1024,qe.shadow.mapSize.height=1024,ce.add(qe);const W=()=>{d.current&&d.current.update(),u.current&&o.current&&c.current&&u.current.render(o.current,c.current),f.current=requestAnimationFrame(W)};W(),console.log("Initializing Three.js scene"),M("Scene ready");const he=new Ad(3);he.position.y=-.1,he.visible=!1,he.name="AxesHelper",ce.add(he);const R=()=>{if(!a.current||!c.current||!u.current)return;const B=a.current.clientWidth,H=a.current.clientHeight;c.current.aspect=B/H,c.current.updateProjectionMatrix(),u.current.setSize(B,H)};return window.addEventListener("resize",R),()=>{var B;window.removeEventListener("resize",R),f.current!==null&&cancelAnimationFrame(f.current),u.current&&a.current&&a.current.removeChild(u.current.domElement),o.current&&o.current.traverse(H=>{H instanceof On&&(H.geometry&&H.geometry.dispose(),H.material&&(Array.isArray(H.material)?H.material.forEach(N=>N.dispose()):H.material.dispose()))}),(B=u.current)==null||B.dispose()}},[]),x.useEffect(()=>{if(!t){y(null),_(null),M("No model selected");return}(async()=>{var me;try{g(!0),M("Loading model information...");const ve=e&&n?`/api/public/models/${n}`:`/api/models/${t}`,q=await fetch(ve);if(!q.ok){const N=await q.json();throw console.error("Model info error:",N),new Error(`Cannot retrieve model information (${q.status}): ${N.message||""}`)}const I=await q.json();console.log("Model info loaded:",I),M("Loading model file...");const qe=e&&n?`/api/public/models/${n}/file`:`/api/models/${t}/file`,W=await fetch(qe);if(!W.ok)throw new Error(`Cannot download file (${W.status})`);const he=await W.blob(),R=I.filename||`model-${t}.step`,B=new File([he],R,{type:"application/step"});if(y(B),((me=I.format)==null?void 0:me.toLowerCase())==="stl")M("Direct STL file..."),_({url:qe,isDirectStl:!0});else try{if(b(!0),M("Checking STL file availability..."),e){M("Public model - using original file..."),_({url:qe,isDirectStl:!1});return}const N=await fetch(`/api/models/${t}/stl`);N.ok?(_({url:`/api/models/${t}/stl`,isDirectStl:!1}),M("STL file available")):(_(null),console.error("STL file not available:",await N.json()),M("No STL file for this model"))}catch(N){_(null),console.error("Error checking STL availability:",N),M("Error checking STL file")}finally{b(!1)}}catch(ve){console.error("Error loading model file:",ve),M(`Model loading error: ${ve instanceof Error?ve.message:"Unknown error"}`),y(null)}finally{g(!1)}})()},[t]);async function ie(ce){if(!(!o.current||!c.current||!d.current))try{const me=o.current.getObjectByName("StepModel");me&&o.current.remove(me);const ve=q=>{if(q.lengthComputable){const I=Math.round(q.loaded/q.total*100);M(`Loading: ${I}%`)}};if(p!=null&&p.url)try{M(`Loading STL model... ${p.isDirectStl?"(direct upload)":"(converted)"}`);const q=await mY(p.url,ve),I=q.model,qe=q.scale;if(console.log("STL loaded successfully"),q.originalDimensions&&(console.log("Original model dimensions:",q.originalDimensions),X({width:q.originalDimensions.width,height:q.originalDimensions.height,depth:q.originalDimensions.depth,size:Math.sqrt(Math.pow(q.originalDimensions.width,2)+Math.pow(q.originalDimensions.height,2)+Math.pow(q.originalDimensions.depth,2)),scale:qe})),M("STL model loaded successfully"),I.name="StepModel",o.current.add(I),k.current=q.material,c.current&&d.current){const W=new Pl().setFromObject(I),he=new K;W.getCenter(he),c.current.position.set(he.x+20,he.y+20,he.z+20),c.current.lookAt(he),d.current.target.copy(he),d.current.update(),console.log("Kamera ustawiona bez nadpisywania wymiarów")}M("Model loaded (format: STL)");return}catch(q){console.error("Error loading STL model:",q),M(`STL loading error: ${q instanceof Error?q.message:"Unknown error"}`)}else{M("This file format is not supported. Only STL files are supported.");const q=new ki;q.name="StepModel";const I=new Hf(10,5),qe=new Ma({color:14737632,side:as,transparent:!0,opacity:.7}),W=new On(I,qe);W.rotation.x=Math.PI/2,W.position.y=.5,q.add(W);const he=new Ad(5);q.add(he),o.current.add(q),c.current&&d.current&&(c.current.position.set(5,5,5),c.current.lookAt(0,0,0),d.current.target.set(0,0,0),d.current.update())}}catch(me){console.error("Model rendering error:",me),M(`Rendering error: ${me instanceof Error?me.message:"Unknown error"}`);try{if(!o.current)return;const ve=new ki;ve.name="StepModel";const q=new Dl(3,3,3),I=new Ma({color:16724787,wireframe:!0});ve.add(new On(q,I));const qe=new Ad(5);ve.add(qe),o.current.add(ve),c.current&&d.current&&(c.current.position.set(5,5,5),c.current.lookAt(0,0,0),d.current.target.set(0,0,0),d.current.update())}catch(ve){console.error("Even displaying the error model failed:",ve)}}}x.useEffect(()=>{if(!a.current)return;const ce=me=>{ne(me)};return z&&a.current.addEventListener("click",ce),()=>{a.current&&a.current.removeEventListener("click",ce)}},[z,ee]),x.useEffect(()=>{if(!z&&o.current){for(let me=0;me<2;me++){const ve=o.current.getObjectByName(`MeasurePoint_${me}`);ve&&o.current.remove(ve)}const ce=o.current.getObjectByName("MeasureLine");ce&&o.current.remove(ce),de([]),Ne(null)}},[z]),x.useEffect(()=>!m||!o.current?void 0:((async()=>{try{M("Processing model...");const me=new FileReader;me.onload=ve=>{if(!ve.target||!ve.target.result||!o.current){M("File reading error");return}try{const q=ve.target.result;h.current=q,ie(q)}catch(q){console.error("Error processing model:",q),M(`Processing error: ${q instanceof Error?q.message:"Unknown error"}`)}},me.onerror=()=>{M("File reading error")},me.readAsText(m)}catch(me){console.error("Error loading model:",me),M(`Error: ${me instanceof Error?me.message:"Unknown error"}`)}})(),()=>{if(o.current){const me=o.current.getObjectByName("StepModel");me&&o.current.remove(me)}h.current=null}),[m,$,p]);const Me=()=>{if(!h.current||!o.current){M("No data for re-rendering");return}M("Refreshing model..."),ie(h.current)},Ue=async()=>{if(!u.current||!t||e){s({title:i("error"),description:"Cannot capture screenshot - renderer not available or model is public",variant:"destructive"});return}P(!0);try{o.current&&c.current&&u.current.render(o.current,c.current);const ce=u.current.domElement,me=await new Promise((I,qe)=>{ce.toBlob(W=>{W?I(W):qe(new Error("Failed to create blob"))},"image/png",.9)}),ve=new FormData;if(ve.append("thumbnail",me,"screenshot.png"),!(await fetch(`/api/models/${t}/thumbnail`,{method:"POST",body:ve,credentials:"include"})).ok)throw new Error("Failed to upload screenshot");s({title:i("success"),description:i("screenshot_captured_successfully")}),window.dispatchEvent(new CustomEvent(`thumbnail-updated-${t}`)),window.dispatchEvent(new CustomEvent(`gallery-updated-${t}`))}catch(ce){console.error("Error capturing screenshot:",ce),s({title:i("error"),description:i("screenshot_capture_failed"),variant:"destructive"})}finally{P(!1)}};return l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("div",{className:"absolute top-2 left-2 z-10 bg-black/70 text-white text-xs p-1 rounded",children:S}),l.jsxs("div",{className:"absolute top-2 right-2 z-10 flex flex-col gap-2",children:[l.jsx(ye,{variant:"outline",size:"sm",onClick:Me,className:"bg-black/50 text-white hover:bg-black/70 border-none p-2",title:"Refresh model",children:l.jsx(i2,{className:"h-6 w-6"})}),l.jsx(qI,{"aria-label":"Measurement mode",pressed:z,onPressedChange:V,className:`p-2 ${z?"bg-blue-500 text-white":"bg-black/50 text-white hover:bg-black/70"} border-none`,title:"Toggle measurement mode",children:l.jsx(TE,{className:"h-6 w-6"})}),l.jsx(ye,{variant:"outline",size:"sm",onClick:()=>O(!L),className:"bg-black/50 text-white hover:bg-black/70 border-none p-2",title:"Change model color",children:l.jsx(kV,{className:"h-6 w-6"})}),r&&t&&l.jsx(ye,{variant:"outline",size:"sm",onClick:Ue,disabled:C,className:"bg-black/50 text-white hover:bg-black/70 border-none p-2",title:i("capture_screenshot"),children:l.jsx(e2,{className:"h-6 w-6"})})]}),L&&l.jsxs("div",{className:"absolute top-2 right-40 z-10 bg-white rounded-lg shadow-lg p-4 border",children:[l.jsx("h4",{className:"text-sm font-medium mb-3",children:i("change_model_color")}),l.jsx("div",{className:"grid grid-cols-6 gap-2 mb-3",children:["#4A90E2","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#82E0AA","#F8C471","#F1948A","#D7DBDD","#2C3E50","#E74C3C"].map(ce=>l.jsx("button",{onClick:()=>j(ce),className:`w-8 h-8 rounded-full border-2 hover:scale-110 transition-transform ${A===ce?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:ce},title:ce},ce))}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("label",{className:"text-xs text-gray-600",children:[i("custom_color"),":"]}),l.jsx("input",{type:"color",value:A,onChange:ce=>j(ce.target.value),className:"w-8 h-8 rounded border cursor-pointer"})]})]}),z&&l.jsxs("div",{className:"absolute top-12 left-2 z-10 bg-black/70 text-white p-2 rounded max-w-xs",children:[l.jsxs("div",{className:"font-bold mb-1 flex items-center",children:[l.jsx(TE,{className:"h-4 w-4 mr-2"}),i("measurement.mode")]}),l.jsx("div",{className:"text-xs mb-2",children:i("measurement.instructions")}),ee.length>0&&l.jsxs("div",{className:"text-xs",children:[i("measurement.points"),": ",ee.length,"/2"]}),Ee!==null&&l.jsxs("div",{className:"mt-1 p-1 bg-blue-900/50 rounded text-center",children:[l.jsxs("span",{className:"font-bold",children:[i("measurement.distance"),":"]})," ",Ee.toFixed(3)," ",i("measurement.units")]})]}),(v||w)&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 z-20",children:l.jsxs("div",{className:"bg-white p-4 rounded shadow-md",children:[l.jsx(Ja,{className:"h-4 w-32 mb-2"}),l.jsx(Ja,{className:"h-4 w-48"}),l.jsx("div",{className:"text-sm mt-2",children:"Loading model..."})]})}),l.jsx("div",{ref:a,className:"w-full h-full min-h-[500px] bg-gray-100",style:{minHeight:"500px"}}),l.jsx("div",{className:"absolute bottom-2 left-2 z-10 bg-black/70 text-white text-xs p-2 rounded flex flex-col gap-1",children:p?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:["Format:",l.jsx(tr,{variant:"outline",className:"bg-green-900/50",children:"STL"})]}),U&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600",children:[l.jsxs("div",{className:"font-bold mb-1",children:[i("dimensions.title"),":"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("span",{className:"text-gray-400",children:[i("dimensions.width")," (X):"]}),l.jsxs("span",{className:"font-mono",children:[U.width.toFixed(2)," mm"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("span",{className:"text-gray-400",children:[i("dimensions.depth")," (Y):"]}),l.jsxs("span",{className:"font-mono",children:[U.depth.toFixed(2)," mm"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("span",{className:"text-gray-400",children:[i("dimensions.height")," (Z):"]}),l.jsxs("span",{className:"font-mono",children:[U.height.toFixed(2)," mm"]})]})]})]})]}):l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("div",{className:"text-gray-300 text-xs",children:l.jsx(tr,{variant:"outline",className:"bg-red-700/50",children:"Unsupported format"})}),l.jsx("div",{className:"text-gray-300 text-xs italic",children:"Only STL files are supported"})]})})]})}const yY=Object.freeze(Object.defineProperty({__proto__:null,default:XI},Symbol.toStringTag,{value:"Module"}));function _T(){const[t,e]=x.useState([]),[n,r]=x.useState(null),[i,s]=x.useState(!1),[a,o]=x.useState(null),{upload:c,isUploading:u,uploadProgress:d,reset:f}=ef({onSuccess:b=>{g(),r(b.id)},onError:b=>{o(`Błąd podczas przesyłania pliku STEP: ${b.message}`)}}),{upload:h,isUploading:m,uploadProgress:y,reset:v}=ef({onSuccess:b=>{g(),r(b.id)},onError:b=>{o(`Błąd podczas przesyłania pliku STL: ${b.message}`)}});x.useEffect(()=>{g()},[]);const g=async()=>{s(!0),o(null);try{const b=await fetch("/api/models");if(!b.ok)throw new Error(`HTTP error! status: ${b.status}`);const S=await b.json();e(S)}catch(b){o("Nie udało się pobrać listy modeli."),console.error("Error fetching models:",b)}finally{s(!1)}},p=b=>{var M,C;const S=(M=b.target.files)==null?void 0:M[0];if(S){const P=(C=S.name.split(".").pop())==null?void 0:C.toLowerCase();if(P!=="step"&&P!=="stp"){o("Wybierz plik z rozszerzeniem .step lub .stp");return}c(S,"/api/models/upload")}},_=b=>{var M,C;const S=(M=b.target.files)==null?void 0:M[0];if(S){if(((C=S.name.split(".").pop())==null?void 0:C.toLowerCase())!=="stl"){o("Wybierz plik z rozszerzeniem .stl");return}h(S,"/api/models/upload-stl")}},w=async b=>{if(confirm("Czy na pewno chcesz usunąć ten model?"))try{const S=await fetch(`/api/models/${b}`,{method:"DELETE"});if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);n===b&&r(null),g()}catch(S){o("Nie udało się usunąć modelu."),console.error("Error deleting model:",S)}};return l.jsxs("div",{className:"container mx-auto p-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test Uploadu i Wyświetlania Plików 3D"}),a&&l.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[a,l.jsx("button",{className:"float-right font-bold",onClick:()=>o(null),children:"×"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs(fn,{children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:"Wgraj Plik 3D"}),l.jsx(vr,{children:"Wybierz plik STEP lub STL do wczytania"})]}),l.jsx(hn,{children:l.jsxs(Bg,{defaultValue:"step",children:[l.jsxs(Gf,{className:"grid grid-cols-2 w-full",children:[l.jsx(hs,{value:"step",children:"STEP (.step, .stp)"}),l.jsx(hs,{value:"stl",children:"STL (.stl)"})]}),l.jsxs(ps,{value:"step",className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"step-file",children:"Wybierz plik STEP"}),l.jsx(_t,{id:"step-file",type:"file",accept:".step,.stp",onChange:p,disabled:u}),u&&l.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:[l.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${d}%`}}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Przesyłanie: ",d,"%"]})]})]}),l.jsx("p",{className:"text-sm text-gray-500",children:"STEP to standardowy format plików CAD używany do wymiany danych między różnymi systemami CAD."})]}),l.jsxs(ps,{value:"stl",className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"stl-file",children:"Wybierz plik STL"}),l.jsx(_t,{id:"stl-file",type:"file",accept:".stl",onChange:_,disabled:m}),m&&l.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:[l.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${y}%`}}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Przesyłanie: ",y,"%"]})]})]}),l.jsx("p",{className:"text-sm text-gray-500",children:"STL to popularny format plików używany w druku 3D i szybkim prototypowaniu."})]})]})}),l.jsx(ro,{children:l.jsx(ye,{variant:"outline",onClick:g,className:"w-full",children:"Odśwież listę modeli"})})]}),l.jsx("div",{className:"mt-6",children:l.jsxs(fn,{children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:"Dostępne Modele"}),l.jsx(vr,{children:"Kliknij, aby zobaczyć podgląd"})]}),l.jsx(hn,{children:i?l.jsx("p",{className:"text-center py-4",children:"Ładowanie listy modeli..."}):t.length>0?l.jsx("ul",{className:"divide-y",children:t.map(b=>l.jsxs("li",{className:`py-2 px-3 cursor-pointer flex justify-between items-center ${n===b.id?"bg-gray-100":""}`,onClick:()=>r(b.id),children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium truncate",title:b.filename,children:b.filename}),l.jsxs("p",{className:"text-sm text-gray-500",children:[b.format," | ",_2(b.filesize)]}),l.jsx("p",{className:"text-xs text-gray-400",children:b.conversionStatus==="completed"?"✓ Konwersja zakończona":b.conversionStatus==="pending"?"⏳ Konwersja w toku":b.conversionStatus==="failed"?"❌ Konwersja nieudana":""})]}),l.jsx(ye,{variant:"ghost",size:"sm",onClick:S=>{S.stopPropagation(),w(b.id)},children:"Usuń"})]},b.id))}):l.jsx("p",{className:"text-center py-4 text-gray-500",children:"Brak dostępnych modeli"})})]})})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(fn,{className:"h-full",children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:"Podgląd 3D"}),l.jsx(vr,{children:n?`Wyświetlanie modelu ID: ${n}`:"Wybierz model z listy aby zobaczyć podgląd"})]}),l.jsx(hn,{className:"h-[500px] relative",children:n?l.jsx(XI,{modelId:n}):l.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 text-gray-400",children:l.jsx("p",{children:"Wybierz model, aby wyświetlić podgląd 3D"})})})]})})]})]})}const ZI="/assets/fastcnc-logo-D0g7pJpx.jpg";function Mb({modelType:t,modelInfo:e}){const{t:n,language:r}=on(),i=()=>{const s=(e==null?void 0:e.id)||"";["en","pl","de","cs","fr","es"].includes(r)?window.open(`/quote/${r}.html?modelId=${s}`,"_blank"):window.open(`/quote/?modelId=${s}`,"_blank")};return l.jsxs("div",{className:"flex-grow overflow-y-auto p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900",children:n("services.title","Usługi CNC")}),l.jsx("img",{src:ZI,alt:"FastCNC Logo",className:"h-8"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:t==="2d"?l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-500 p-2 rounded-full mr-4",children:l.jsx(CE,{className:"h-5 w-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-blue-800",children:n("services.laser_cutting","Cięcie laserowe")}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n("services.laser_description","Twój projekt 2D jest idealny do realizacji poprzez cięcie laserowe. Oferujemy precyzyjne cięcie laserowe blach, tworzyw sztucznych i innych materiałów.")}),l.jsx("div",{className:"mt-3",children:l.jsx(ye,{onClick:i,className:"bg-blue-600 hover:bg-blue-700",children:n("services.get_quote","Zapytaj o wycenę")})})]})]}):t==="3d"?l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-green-500 p-2 rounded-full mr-4",children:l.jsx(Rv,{className:"h-5 w-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-green-800",children:n("services.cnc_machining","Obróbka CNC")}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n("services.cnc_description","Twój model 3D jest gotowy do produkcji. Oferujemy profesjonalne usługi toczenia i frezowania CNC z najwyższą precyzją i jakością.")}),l.jsx("div",{className:"mt-3",children:l.jsx(ye,{onClick:i,className:"bg-green-600 hover:bg-green-700",children:n("services.get_quote","Zapytaj o wycenę")})})]})]}):l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-gray-500 p-2 rounded-full mr-4",children:l.jsx(MV,{className:"h-5 w-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-800",children:n("services.manufacturing","Usługi produkcyjne")}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n("services.manufacturing_description","Zrealizujemy Twój projekt produkcyjny od A do Z. Skontaktuj się z nami, aby omówić szczegóły i otrzymać indywidualną wycenę.")}),l.jsx("div",{className:"mt-3",children:l.jsx(ye,{onClick:i,className:"bg-gray-600 hover:bg-gray-700",children:n("services.get_quote","Zapytaj o wycenę")})})]})]})}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:n("services.our_services","Nasze usługi produkcyjne")}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-white hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(CE,{className:"h-5 w-5 text-blue-600 mr-2"}),l.jsx("h4",{className:"font-medium",children:n("services.laser_cutting","Cięcie laserowe")})]}),l.jsx("p",{className:"text-sm text-gray-600",children:n("services.laser_details","Precyzyjne cięcie blachy, tworzyw sztucznych i innych materiałów z dokładnością do 0,05 mm. Idealne do części 2D.")})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(Rv,{className:"h-5 w-5 text-green-600 mr-2"}),l.jsx("h4",{className:"font-medium",children:n("services.cnc_milling","Frezowanie CNC")})]}),l.jsx("p",{className:"text-sm text-gray-600",children:n("services.milling_details","Obróbka skrawaniem materiałów takich jak aluminium, stal, tworzywa sztuczne. Idealne dla złożonych kształtów 3D.")})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(OV,{className:"h-5 w-5 text-orange-600 mr-2"}),l.jsx("h4",{className:"font-medium",children:n("services.cnc_turning","Toczenie CNC")})]}),l.jsx("p",{className:"text-sm text-gray-600",children:n("services.turning_details","Precyzyjna obróbka części obrotowych z metalu. Idealne do wałków, tulei, części maszyn z dokładnością do 0,01 mm.")})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(Rv,{className:"h-5 w-5 text-purple-600 mr-2 animate-spin-slow"}),l.jsx("h4",{className:"font-medium",children:n("services.prototyping","Prototypowanie")})]}),l.jsx("p",{className:"text-sm text-gray-600",children:n("services.prototyping_details","Szybkie wykonanie prototypów i małych serii produkcyjnych. Od projektu do gotowego elementu w kilka dni.")})]})]})]})]})]})}const xY=Object.freeze(Object.defineProperty({__proto__:null,default:Mb},Symbol.toStringTag,{value:"Module"}));function ip({shareId:t,language:e,isPublicModel:n=!1}={}){var L,O;const[,r]=Cc("/shared/:shareId"),[,i]=Cc("/models/:modelId"),[,s]=Cc("/:lang(en|pl|cs|de|fr)/shared/:shareId"),a=t||(r==null?void 0:r.shareId)||(s==null?void 0:s.shareId)||(i==null?void 0:i.modelId);kn();const{toast:o}=jr(),{t:c}=on(),[u,d]=x.useState(!0),[f,h]=x.useState(null),[m,y]=x.useState(!1),[v,g]=x.useState(""),[p,_]=x.useState(null),[w,b]=x.useState(!1),[S,M]=x.useState(null),[C,P]=x.useState(!1);x.useEffect(()=>{if(!a)return;(async()=>{try{d(!0),h(null);const j=n?`/api/public/models/${a}`:`/api/shared/${a}`,U=await(await Lt("GET",j,void 0,{on401:"throw"})).json();_(U),n?(y(!1),M(U.id),b(!0)):(y(U.requiresPassword),U.requiresPassword||A())}catch(j){console.error("Błąd podczas pobierania informacji o modelu:",j),h(j instanceof Error?j.message:c("errors.model.fetch"))}finally{d(!1)}})()},[a,c,n]);const A=async()=>{if(a)try{P(!0);const j=await(await Lt("POST",`/api/shared/${a}/access`,{password:v.length>0?v:void 0},{on401:"throw"})).json();if(j.requiresPassword)throw y(!0),new Error(c("errors.password_required"));M(j.id),b(!0),y(!1)}catch(k){console.error("Błąd podczas uzyskiwania dostępu do modelu:",k),k instanceof Error&&k.message===c("errors.password_required")?y(!0):o({title:c("errors.title"),description:k instanceof Error?k.message:c("errors.model.access"),variant:"destructive",duration:5e3})}finally{P(!1)}},E=k=>{k.preventDefault(),A()};return u?l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh]",children:[l.jsx(mn,{className:"h-12 w-12 animate-spin text-primary mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:c("loadingState.shared_model")})]}):f&&!m?l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] max-w-md mx-auto text-center",children:[l.jsx(Xa,{className:"h-12 w-12 text-destructive mb-4"}),l.jsx("h2",{className:"text-xl font-bold mb-2",children:c("errors.model.display_failed")}),l.jsx("p",{className:"text-muted-foreground mb-4",children:f}),l.jsx(ye,{variant:"outline",onClick:()=>window.location.href="/",children:c("actions.back_to_home")})]}):m&&!w?l.jsx("div",{className:"container mx-auto py-8 px-4 flex justify-center",children:l.jsxs(fn,{className:"w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 mt-4",children:[l.jsx("img",{src:bm,alt:"FastCNC Logo",className:"h-16"}),l.jsx(_m,{})]}),l.jsxs(Pn,{children:[l.jsxs(Rn,{className:"flex items-center gap-2",children:[l.jsx($x,{className:"h-5 w-5"}),c("shared.protected_model.title")]}),l.jsx(vr,{children:c("shared.protected_model.description")})]}),l.jsxs("form",{onSubmit:E,children:[l.jsx(hn,{children:l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-muted-foreground",children:[l.jsx(no,{className:"h-4 w-4"}),l.jsx("span",{children:p==null?void 0:p.filename})]}),l.jsx(St,{htmlFor:"password",children:c("label.password")}),l.jsx(_t,{id:"password",type:"password",placeholder:c("shared.protected_model.password_placeholder"),value:v,onChange:k=>g(k.target.value),className:"mt-1",required:!0})]})}),l.jsx(ro,{children:l.jsx(ye,{type:"submit",disabled:C,className:"w-full",children:C?l.jsxs(l.Fragment,{children:[l.jsx(mn,{className:"h-4 w-4 animate-spin mr-2"}),c("actions.verifying")]}):c("actions.access")})})]})]})}):l.jsxs("div",{className:"container mx-auto py-2 px-2 sm:py-4 sm:px-4",children:[l.jsx("div",{className:"bg-muted/40 rounded-lg p-2 mb-2 sm:mb-4 border text-sm",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[l.jsx("img",{src:bm,alt:"FastCNC Logo",className:"h-8 sm:h-10 flex-shrink-0"}),l.jsx(no,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),l.jsx("span",{className:"font-medium truncate",children:p==null?void 0:p.filename}),l.jsxs("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:["(",c("shared.model_info.shared_status"),")"]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx(_m,{}),l.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>window.location.href="/",className:"flex items-center gap-1",children:[l.jsx(Xd,{className:"h-3.5 w-3.5"}),l.jsx("span",{className:"hidden sm:inline",children:c("actions.go_to_app")})]})]})]})}),l.jsx("div",{className:"h-[calc(100vh-200px)] sm:h-[calc(100vh-280px)] bg-background border rounded-lg overflow-hidden mb-2 sm:mb-4",children:S&&l.jsx(Lg,{modelId:S,isPublic:n,publicId:n?a:void 0})}),l.jsx(fn,{className:"mb-4",children:l.jsx(hn,{className:"p-0",children:l.jsx(Mb,{modelType:((L=p==null?void 0:p.format)==null?void 0:L.toLowerCase())==="stl"?"3d":((O=p==null?void 0:p.format)==null?void 0:O.toLowerCase())==="dxf"?"2d":"unknown",modelInfo:p})})})]})}function wT(){const{t}=on(),[e,n]=kn(),[r,i]=x.useState(!1),[s,a]=x.useState(!1),[o,c]=x.useState(null),u=e.split("/"),d=u[u.length-2],f=u[u.length-1],h=()=>{n("/")},m=async()=>{i(!0),c(null);try{const y=await fetch(`/api/shared/${d}/${f}`,{method:"DELETE"});if(y.ok)a(!0);else{const v=await y.json();c(v.message||t("deleteShare.unknownError"))}}catch(y){console.error("Error deleting share:",y),c(t("deleteShare.connectionError"))}finally{i(!1)}};return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4",children:l.jsxs(fn,{className:"w-full max-w-md",children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:t("deleteShare.title")}),l.jsx(vr,{children:t("deleteShare.description")})]}),l.jsx(hn,{children:s?l.jsxs(Em,{className:"bg-green-50 border-green-200",children:[l.jsx(ww,{className:"h-5 w-5 text-green-600"}),l.jsx(Mm,{children:t("deleteShare.successTitle")}),l.jsx(Tm,{children:t("deleteShare.successMessage")})]}):o?l.jsxs(Em,{className:"bg-red-50 border-red-200",children:[l.jsx(bV,{className:"h-5 w-5 text-red-600"}),l.jsx(Mm,{children:t("deleteShare.errorTitle")}),l.jsx(Tm,{children:o})]}):l.jsx("p",{className:"text-gray-600",children:t("deleteShare.confirmMessage")})}),l.jsxs(ro,{className:"flex justify-end gap-4",children:[!s&&l.jsxs(l.Fragment,{children:[l.jsx(ye,{variant:"outline",onClick:h,children:t("deleteShare.cancel")}),l.jsx(ye,{variant:"destructive",onClick:m,disabled:r,children:r?l.jsxs(l.Fragment,{children:[l.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),t("deleteShare.deleting")]}):t("deleteShare.confirm")})]}),s&&l.jsx(ye,{onClick:()=>n("/"),children:t("deleteShare.backToHome")})]})]})})}const ge=Symbol.for("drizzle:entityKind");function Wn(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,ge))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(ge in n&&n[ge]===e[ge])return!0;n=Object.getPrototypeOf(n)}return!1}var cC;cC=ge;class pu{constructor(e,n){Y(this,"name");Y(this,"keyAsName");Y(this,"primary");Y(this,"notNull");Y(this,"default");Y(this,"defaultFn");Y(this,"onUpdateFn");Y(this,"hasDefault");Y(this,"isUnique");Y(this,"uniqueName");Y(this,"uniqueType");Y(this,"dataType");Y(this,"columnType");Y(this,"enumValues");Y(this,"generated");Y(this,"generatedIdentity");Y(this,"config");this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}Y(pu,cC,"Column");var uC;uC=ge;class KI{constructor(e,n,r){Y(this,"config");Y(this,"$default",this.$defaultFn);Y(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}Y(KI,uC,"ColumnBuilder");const jc=Symbol.for("drizzle:Name");var dC;dC=ge;class YI{constructor(e,n){Y(this,"reference");Y(this,"_onUpdate","no action");Y(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:i,foreignColumns:s}=e();return{name:r,columns:i,foreignTable:s[0].table,foreignColumns:s}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new QI(e,this)}}Y(YI,dC,"PgForeignKeyBuilder");var fC;fC=ge;class QI{constructor(e,n){Y(this,"reference");Y(this,"onUpdate");Y(this,"onDelete");this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:e,columns:n,foreignColumns:r}=this.reference(),i=n.map(o=>o.name),s=r.map(o=>o.name),a=[this.table[jc],...i,r[0].table[jc],...s];return e??`${a.join("_")}_fk`}}Y(QI,fC,"PgForeignKey");function _Y(t,...e){return t(...e)}function wY(t,e){return`${t[jc]}_${e.join("_")}_unique`}function bT(t,e,n){for(let r=e;r<t.length;r++){const i=t[r];if(i==="\\"){r++;continue}if(i==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(i===","||i==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function JI(t,e=0){const n=[];let r=e,i=!1;for(;r<t.length;){const s=t[r];if(s===","){(i||r===e)&&n.push(""),i=!0,r++;continue}if(i=!1,s==="\\"){r+=2;continue}if(s==='"'){const[c,u]=bT(t,r+1,!0);n.push(c),r=u;continue}if(s==="}")return[n,r+1];if(s==="{"){const[c,u]=JI(t,r+1);n.push(c),r=u;continue}const[a,o]=bT(t,r,!1);n.push(a),r=o}return[n,r]}function bY(t){const[e]=JI(t,1);return e}function ej(t){return`{${t.map(e=>Array.isArray(e)?ej(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var hC,pC;class Nt extends(pC=KI,hC=ge,pC){constructor(){super(...arguments);Y(this,"foreignKeyConfigs",[])}array(n){return new nj(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:i,actions:s})=>_Y((a,o)=>{const c=new YI(()=>{const u=a();return{columns:[n],foreignColumns:[u]}});return o.onUpdate&&c.onUpdate(o.onUpdate),o.onDelete&&c.onDelete(o.onDelete),c.build(r)},i,s))}buildExtraConfigColumn(n){return new tj(n,this.config)}}Y(Nt,hC,"PgColumnBuilder");var mC,gC;class ct extends(gC=pu,mC=ge,gC){constructor(e,n){n.uniqueName||(n.uniqueName=wY(e,[n.name])),super(e,n),this.table=e}}Y(ct,mC,"PgColumn");var vC,yC;class tj extends(yC=ct,vC=ge,yC){constructor(){super(...arguments);Y(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});Y(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}Y(tj,vC,"ExtraConfigColumn");var xC,_C;class nj extends(_C=Nt,xC=ge,_C){constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){const n=this.config.baseBuilder.build(e);return new W_(e,this.config,n)}}Y(nj,xC,"PgArrayBuilder");var wC,bC;const Km=class Km extends(bC=ct,wC=ge,bC){constructor(n,r,i,s){super(n,r);Y(this,"size");this.baseColumn=i,this.range=s,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=bY(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const i=n.map(s=>s===null?null:Wn(this.baseColumn,Km)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return r?i:ej(i)}};Y(Km,wC,"PgArray");let W_=Km;const ST=Symbol.for("drizzle:isPgEnum");function SY(t){return!!t&&typeof t=="function"&&ST in t&&t[ST]===!0}var SC;SC=ge;class Tb{constructor(e,n,r,i=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:i}}}Y(Tb,SC,"Subquery");const EY={startActiveSpan(t,e){return e()}},zc=Symbol.for("drizzle:ViewBaseConfig"),Cy=Symbol.for("drizzle:Schema"),ET=Symbol.for("drizzle:Columns"),MT=Symbol.for("drizzle:ExtraConfigColumns"),Ay=Symbol.for("drizzle:OriginalName"),Ny=Symbol.for("drizzle:BaseName"),Lm=Symbol.for("drizzle:IsAlias"),TT=Symbol.for("drizzle:ExtraConfigBuilder"),rj=Symbol.for("drizzle:IsDrizzleTable");var EC,MC,TC,CC,AC,NC,PC,RC,DC,kC,lp;let $r=(kC=ge,DC=jc,RC=Ay,PC=Cy,NC=ET,AC=MT,CC=Ny,TC=Lm,MC=rj,EC=TT,lp=class{constructor(e,n,r){Y(this,DC);Y(this,RC);Y(this,PC);Y(this,NC);Y(this,AC);Y(this,CC);Y(this,TC,!1);Y(this,MC,!0);Y(this,EC);this[jc]=this[Ay]=e,this[Cy]=n,this[Ny]=r}},Y(lp,kC,"Table"),Y(lp,"Symbol",{Name:jc,Schema:Cy,OriginalName:Ay,Columns:ET,ExtraConfigColumns:MT,BaseName:Ny,IsAlias:Lm,ExtraConfigBuilder:TT}),lp);function ij(t){return typeof t=="object"&&t!==null&&rj in t}function MY(t){return t!=null&&typeof t.getSQL=="function"}function TY(t){var n;const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),(n=r.typings)!=null&&n.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var LC;LC=ge;class li{constructor(e){Y(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new Dn([this])}}Y(li,LC,"StringChunk");var IC;IC=ge;const zo=class zo{constructor(e){Y(this,"decoder",sj);Y(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return EY.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:s,escapeParam:a,prepareTyping:o,inlineParams:c,paramStartIndex:u}=r;return TY(e.map(d=>{var f;if(Wn(d,li))return{sql:d.value.join(""),params:[]};if(Wn(d,Im))return{sql:s(d.value),params:[]};if(d===void 0)return{sql:"",params:[]};if(Array.isArray(d)){const h=[new li("(")];for(const[m,y]of d.entries())h.push(y),m<d.length-1&&h.push(new li(", "));return h.push(new li(")")),this.buildQueryFromSourceParams(h,r)}if(Wn(d,zo))return this.buildQueryFromSourceParams(d.queryChunks,{...r,inlineParams:c||d.shouldInlineParams});if(Wn(d,$r)){const h=d[$r.Symbol.Schema],m=d[$r.Symbol.Name];return{sql:h===void 0||d[Lm]?s(m):s(h)+"."+s(m),params:[]}}if(Wn(d,pu)){const h=i.getColumnCasing(d);if(n.invokeSource==="indexes")return{sql:s(h),params:[]};const m=d.table[$r.Symbol.Schema];return{sql:d.table[Lm]||m===void 0?s(d.table[$r.Symbol.Name])+"."+s(h):s(m)+"."+s(d.table[$r.Symbol.Name])+"."+s(h),params:[]}}if(Wn(d,lj)){const h=d[zc].schema,m=d[zc].name;return{sql:h===void 0||d[zc].isAlias?s(m):s(h)+"."+s(m),params:[]}}if(Wn(d,Cb)){if(Wn(d.value,zm))return{sql:a(u.value++,d),params:[d],typings:["none"]};const h=d.value===null?null:d.encoder.mapToDriverValue(d.value);if(Wn(h,zo))return this.buildQueryFromSourceParams([h],r);if(c)return{sql:this.mapInlineParam(h,r),params:[]};let m=["none"];return o&&(m=[o(d.encoder)]),{sql:a(u.value++,h),params:[h],typings:m}}return Wn(d,zm)?{sql:a(u.value++,d),params:[d],typings:["none"]}:Wn(d,zo.Aliased)&&d.fieldAlias!==void 0?{sql:s(d.fieldAlias),params:[]}:Wn(d,Tb)?d._.isWith?{sql:s(d._.alias),params:[]}:this.buildQueryFromSourceParams([new li("("),d._.sql,new li(") "),new Im(d._.alias)],r):SY(d)?d.schema?{sql:s(d.schema)+"."+s(d.enumName),params:[]}:{sql:s(d.enumName),params:[]}:MY(d)?(f=d.shouldOmitSQLParens)!=null&&f.call(d)?this.buildQueryFromSourceParams([d.getSQL()],r):this.buildQueryFromSourceParams([new li("("),d.getSQL(),new li(")")],r):c?{sql:this.mapInlineParam(d,r),params:[]}:{sql:a(u.value++,d),params:[d],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new zo.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};Y(zo,IC,"SQL");let Dn=zo;var jC;jC=ge;class Im{constructor(e){Y(this,"brand");this.value=e}getSQL(){return new Dn([this])}}Y(Im,jC,"Name");const sj={mapFromDriverValue:t=>t},aj={mapToDriverValue:t=>t};({...sj,...aj});var zC;zC=ge;class Cb{constructor(e,n=aj){Y(this,"brand");this.value=e,this.encoder=n}getSQL(){return new Dn([this])}}Y(Cb,zC,"Param");function jm(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new li(t[0]));for(const[r,i]of e.entries())n.push(i,new li(t[r+1]));return new Dn(n)}(t=>{function e(){return new Dn([])}t.empty=e;function n(c){return new Dn(c)}t.fromList=n;function r(c){return new Dn([new li(c)])}t.raw=r;function i(c,u){const d=[];for(const[f,h]of c.entries())f>0&&u!==void 0&&d.push(u),d.push(h);return new Dn(d)}t.join=i;function s(c){return new Im(c)}t.identifier=s;function a(c){return new zm(c)}t.placeholder=a;function o(c,u){return new Cb(c,u)}t.param=o})(jm||(jm={}));(t=>{var n;n=ge;const r=class r{constructor(s,a){Y(this,"isSelectionField",!1);this.sql=s,this.fieldAlias=a}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};Y(r,n,"SQL.Aliased");let e=r;t.Aliased=e})(Dn||(Dn={}));var OC;OC=ge;class zm{constructor(e){this.name=e}getSQL(){return new Dn([this])}}Y(zm,OC,"Placeholder");const oj=Symbol.for("drizzle:IsDrizzleView");var FC,UC,BC;BC=ge,UC=zc,FC=oj;class lj{constructor({name:e,schema:n,selectedFields:r,query:i}){Y(this,UC);Y(this,FC,!0);this[zc]={name:e,originalName:e,schema:n,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new Dn([this])}}Y(lj,BC,"View");function CY(t){return typeof t=="object"&&t!==null&&oj in t}pu.prototype.getSQL=function(){return new Dn([this])};$r.prototype.getSQL=function(){return new Dn([this])};Tb.prototype.getSQL=function(){return new Dn([this])};function AY(t){return t[$r.Symbol.Columns]}function NY(t){return t[zc].selectedFields}function Bn(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var VC,HC;class Wf extends(HC=Nt,VC=ge,HC){generatedAlwaysAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}Y(Wf,VC,"PgIntColumnBaseBuilder");var GC,WC;class cj extends(WC=Wf,GC=ge,WC){constructor(e){super(e,"number","PgBigInt53")}build(e){return new uj(e,this.config)}}Y(cj,GC,"PgBigInt53Builder");var $C,qC;class uj extends(qC=ct,$C=ge,qC){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}Y(uj,$C,"PgBigInt53");var XC,ZC;class dj extends(ZC=Wf,XC=ge,ZC){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new fj(e,this.config)}}Y(dj,XC,"PgBigInt64Builder");var KC,YC;class fj extends(YC=ct,KC=ge,YC){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}Y(fj,KC,"PgBigInt64");function PY(t,e){const{name:n,config:r}=Bn(t,e);return r.mode==="number"?new cj(n):new dj(n)}var QC,JC;class hj extends(JC=Nt,QC=ge,JC){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new pj(e,this.config)}}Y(hj,QC,"PgBigSerial53Builder");var e1,t1;class pj extends(t1=ct,e1=ge,t1){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}Y(pj,e1,"PgBigSerial53");var n1,r1;class mj extends(r1=Nt,n1=ge,r1){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new gj(e,this.config)}}Y(mj,n1,"PgBigSerial64Builder");var i1,s1;class gj extends(s1=ct,i1=ge,s1){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}Y(gj,i1,"PgBigSerial64");function RY(t,e){const{name:n,config:r}=Bn(t,e);return r.mode==="number"?new hj(n):new mj(n)}var a1,o1;class vj extends(o1=Nt,a1=ge,o1){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new yj(e,this.config)}}Y(vj,a1,"PgBooleanBuilder");var l1,c1;class yj extends(c1=ct,l1=ge,c1){getSQLType(){return"boolean"}}Y(yj,l1,"PgBoolean");function ms(t){return new vj(t??"")}var u1,d1;class xj extends(d1=Nt,u1=ge,d1){constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new _j(e,this.config)}}Y(xj,u1,"PgCharBuilder");var f1,h1;class _j extends(h1=ct,f1=ge,h1){constructor(){super(...arguments);Y(this,"length",this.config.length);Y(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}Y(_j,f1,"PgChar");function DY(t,e={}){const{name:n,config:r}=Bn(t,e);return new xj(n,r)}var p1,m1;class wj extends(m1=Nt,p1=ge,m1){constructor(e){super(e,"string","PgCidr")}build(e){return new bj(e,this.config)}}Y(wj,p1,"PgCidrBuilder");var g1,v1;class bj extends(v1=ct,g1=ge,v1){getSQLType(){return"cidr"}}Y(bj,g1,"PgCidr");function kY(t){return new wj(t??"")}var y1,x1;class Sj extends(x1=Nt,y1=ge,x1){constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new Ej(e,this.config)}}Y(Sj,y1,"PgCustomColumnBuilder");var _1,w1;class Ej extends(w1=ct,_1=ge,w1){constructor(n,r){super(n,r);Y(this,"sqlName");Y(this,"mapTo");Y(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}Y(Ej,_1,"PgCustomColumn");function LY(t){return(e,n)=>{const{name:r,config:i}=Bn(e,n);return new Sj(r,i,t)}}var b1,S1;class Pu extends(S1=Nt,b1=ge,S1){defaultNow(){return this.default(jm`now()`)}}Y(Pu,b1,"PgDateColumnBaseBuilder");var E1,M1;class Mj extends(M1=Pu,E1=ge,M1){constructor(e){super(e,"date","PgDate")}build(e){return new Tj(e,this.config)}}Y(Mj,E1,"PgDateBuilder");var T1,C1;class Tj extends(C1=ct,T1=ge,C1){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}Y(Tj,T1,"PgDate");var A1,N1;class Cj extends(N1=Pu,A1=ge,N1){constructor(e){super(e,"string","PgDateString")}build(e){return new Aj(e,this.config)}}Y(Cj,A1,"PgDateStringBuilder");var P1,R1;class Aj extends(R1=ct,P1=ge,R1){getSQLType(){return"date"}}Y(Aj,P1,"PgDateString");function IY(t,e){const{name:n,config:r}=Bn(t,e);return(r==null?void 0:r.mode)==="date"?new Mj(n):new Cj(n)}var D1,k1;class Nj extends(k1=Nt,D1=ge,k1){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Pj(e,this.config)}}Y(Nj,D1,"PgDoublePrecisionBuilder");var L1,I1;class Pj extends(I1=ct,L1=ge,I1){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}Y(Pj,L1,"PgDoublePrecision");function jY(t){return new Nj(t??"")}var j1,z1;class Rj extends(z1=Nt,j1=ge,z1){constructor(e){super(e,"string","PgInet")}build(e){return new Dj(e,this.config)}}Y(Rj,j1,"PgInetBuilder");var O1,F1;class Dj extends(F1=ct,O1=ge,F1){getSQLType(){return"inet"}}Y(Dj,O1,"PgInet");function zY(t){return new Rj(t??"")}var U1,B1;class kj extends(B1=Wf,U1=ge,B1){constructor(e){super(e,"number","PgInteger")}build(e){return new Lj(e,this.config)}}Y(kj,U1,"PgIntegerBuilder");var V1,H1;class Lj extends(H1=ct,V1=ge,H1){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}Y(Lj,V1,"PgInteger");function Ir(t){return new kj(t??"")}var G1,W1;class Ij extends(W1=Nt,G1=ge,W1){constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new jj(e,this.config)}}Y(Ij,G1,"PgIntervalBuilder");var $1,q1;class jj extends(q1=ct,$1=ge,q1){constructor(){super(...arguments);Y(this,"fields",this.config.intervalConfig.fields);Y(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}Y(jj,$1,"PgInterval");function OY(t,e={}){const{name:n,config:r}=Bn(t,e);return new Ij(n,r)}var X1,Z1;class zj extends(Z1=Nt,X1=ge,Z1){constructor(e){super(e,"json","PgJson")}build(e){return new Oj(e,this.config)}}Y(zj,X1,"PgJsonBuilder");var K1,Y1;class Oj extends(Y1=ct,K1=ge,Y1){constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}Y(Oj,K1,"PgJson");function FY(t){return new zj(t??"")}var Q1,J1;class Fj extends(J1=Nt,Q1=ge,J1){constructor(e){super(e,"json","PgJsonb")}build(e){return new Uj(e,this.config)}}Y(Fj,Q1,"PgJsonbBuilder");var eA,tA;class Uj extends(tA=ct,eA=ge,tA){constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}Y(Uj,eA,"PgJsonb");function Bj(t){return new Fj(t??"")}var nA,rA;class Vj extends(rA=Nt,nA=ge,rA){constructor(e){super(e,"array","PgLine")}build(e){return new Hj(e,this.config)}}Y(Vj,nA,"PgLineBuilder");var iA,sA;class Hj extends(sA=ct,iA=ge,sA){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}Y(Hj,iA,"PgLine");var aA,oA;class Gj extends(oA=Nt,aA=ge,oA){constructor(e){super(e,"json","PgLineABC")}build(e){return new Wj(e,this.config)}}Y(Gj,aA,"PgLineABCBuilder");var lA,cA;class Wj extends(cA=ct,lA=ge,cA){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}Y(Wj,lA,"PgLineABC");function UY(t,e){const{name:n,config:r}=Bn(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Vj(n):new Gj(n)}var uA,dA;class $j extends(dA=Nt,uA=ge,dA){constructor(e){super(e,"string","PgMacaddr")}build(e){return new qj(e,this.config)}}Y($j,uA,"PgMacaddrBuilder");var fA,hA;class qj extends(hA=ct,fA=ge,hA){getSQLType(){return"macaddr"}}Y(qj,fA,"PgMacaddr");function BY(t){return new $j(t??"")}var pA,mA;class Xj extends(mA=Nt,pA=ge,mA){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Zj(e,this.config)}}Y(Xj,pA,"PgMacaddr8Builder");var gA,vA;class Zj extends(vA=ct,gA=ge,vA){getSQLType(){return"macaddr8"}}Y(Zj,gA,"PgMacaddr8");function VY(t){return new Xj(t??"")}var yA,xA;class Kj extends(xA=Nt,yA=ge,xA){constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new Yj(e,this.config)}}Y(Kj,yA,"PgNumericBuilder");var _A,wA;class Yj extends(wA=ct,_A=ge,wA){constructor(n,r){super(n,r);Y(this,"precision");Y(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}Y(Yj,_A,"PgNumeric");function HY(t,e){const{name:n,config:r}=Bn(t,e);return new Kj(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}var bA,SA;class Qj extends(SA=Nt,bA=ge,SA){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Jj(e,this.config)}}Y(Qj,bA,"PgPointTupleBuilder");var EA,MA;class Jj extends(MA=ct,EA=ge,MA){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}Y(Jj,EA,"PgPointTuple");var TA,CA;class ez extends(CA=Nt,TA=ge,CA){constructor(e){super(e,"json","PgPointObject")}build(e){return new tz(e,this.config)}}Y(ez,TA,"PgPointObjectBuilder");var AA,NA;class tz extends(NA=ct,AA=ge,NA){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}Y(tz,AA,"PgPointObject");function GY(t,e){const{name:n,config:r}=Bn(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Qj(n):new ez(n)}function WY(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function CT(t,e){const n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,t[e+i]);return r.getFloat64(0,!0)}function nz(t){const e=WY(t);let n=0;const r=e[n];n+=1;const i=new DataView(e.buffer),s=i.getUint32(n,r===1);if(n+=4,s&536870912&&(i.getUint32(n,r===1),n+=4),(s&65535)===1){const a=CT(e,n);n+=8;const o=CT(e,n);return n+=8,[a,o]}throw new Error("Unsupported geometry type")}var PA,RA;class rz extends(RA=Nt,PA=ge,RA){constructor(e){super(e,"array","PgGeometry")}build(e){return new iz(e,this.config)}}Y(rz,PA,"PgGeometryBuilder");var DA,kA;class iz extends(kA=ct,DA=ge,kA){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return nz(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}Y(iz,DA,"PgGeometry");var LA,IA;class sz extends(IA=Nt,LA=ge,IA){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new az(e,this.config)}}Y(sz,LA,"PgGeometryObjectBuilder");var jA,zA;class az extends(zA=ct,jA=ge,zA){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=nz(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}Y(az,jA,"PgGeometryObject");function $Y(t,e){const{name:n,config:r}=Bn(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new rz(n):new sz(n)}var OA,FA;class oz extends(FA=Nt,OA=ge,FA){constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new lz(e,this.config)}}Y(oz,OA,"PgRealBuilder");var UA,BA;class lz extends(BA=ct,UA=ge,BA){constructor(n,r){super(n,r);Y(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}Y(lz,UA,"PgReal");function qY(t){return new oz(t??"")}var VA,HA;class cz extends(HA=Nt,VA=ge,HA){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new uz(e,this.config)}}Y(cz,VA,"PgSerialBuilder");var GA,WA;class uz extends(WA=ct,GA=ge,WA){getSQLType(){return"serial"}}Y(uz,GA,"PgSerial");function sa(t){return new cz(t??"")}var $A,qA;class dz extends(qA=Wf,$A=ge,qA){constructor(e){super(e,"number","PgSmallInt")}build(e){return new fz(e,this.config)}}Y(dz,$A,"PgSmallIntBuilder");var XA,ZA;class fz extends(ZA=ct,XA=ge,ZA){constructor(){super(...arguments);Y(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}Y(fz,XA,"PgSmallInt");function XY(t){return new dz(t??"")}var KA,YA;class hz extends(YA=Nt,KA=ge,YA){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new pz(e,this.config)}}Y(hz,KA,"PgSmallSerialBuilder");var QA,JA;class pz extends(JA=ct,QA=ge,JA){getSQLType(){return"smallserial"}}Y(pz,QA,"PgSmallSerial");function ZY(t){return new hz(t??"")}var eN,tN;class mz extends(tN=Nt,eN=ge,tN){constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new gz(e,this.config)}}Y(mz,eN,"PgTextBuilder");var nN,rN;class gz extends(rN=ct,nN=ge,rN){constructor(){super(...arguments);Y(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}Y(gz,nN,"PgText");function et(t,e={}){const{name:n,config:r}=Bn(t,e);return new mz(n,r)}var iN,sN;class vz extends(sN=Pu,iN=ge,sN){constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(e){return new yz(e,this.config)}}Y(vz,iN,"PgTimeBuilder");var aN,oN;class yz extends(oN=ct,aN=ge,oN){constructor(n,r){super(n,r);Y(this,"withTimezone");Y(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}Y(yz,aN,"PgTime");function KY(t,e={}){const{name:n,config:r}=Bn(t,e);return new vz(n,r.withTimezone??!1,r.precision)}var lN,cN;class xz extends(cN=Pu,lN=ge,cN){constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new _z(e,this.config)}}Y(xz,lN,"PgTimestampBuilder");var uN,dN;class _z extends(dN=ct,uN=ge,dN){constructor(n,r){super(n,r);Y(this,"withTimezone");Y(this,"precision");Y(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));Y(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}Y(_z,uN,"PgTimestamp");var fN,hN;class wz extends(hN=Pu,fN=ge,hN){constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new bz(e,this.config)}}Y(wz,fN,"PgTimestampStringBuilder");var pN,mN;class bz extends(mN=ct,pN=ge,mN){constructor(n,r){super(n,r);Y(this,"withTimezone");Y(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}Y(bz,pN,"PgTimestampString");function Bi(t,e={}){const{name:n,config:r}=Bn(t,e);return(r==null?void 0:r.mode)==="string"?new wz(n,r.withTimezone??!1,r.precision):new xz(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var gN,vN;class Sz extends(vN=Nt,gN=ge,vN){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(jm`gen_random_uuid()`)}build(e){return new Ez(e,this.config)}}Y(Sz,gN,"PgUUIDBuilder");var yN,xN;class Ez extends(xN=ct,yN=ge,xN){getSQLType(){return"uuid"}}Y(Ez,yN,"PgUUID");function YY(t){return new Sz(t??"")}var _N,wN;class Mz extends(wN=Nt,_N=ge,wN){constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Tz(e,this.config)}}Y(Mz,_N,"PgVarcharBuilder");var bN,SN;class Tz extends(SN=ct,bN=ge,SN){constructor(){super(...arguments);Y(this,"length",this.config.length);Y(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}Y(Tz,bN,"PgVarchar");function cd(t,e={}){const{name:n,config:r}=Bn(t,e);return new Mz(n,r)}var EN,MN;class Cz extends(MN=Nt,EN=ge,MN){constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Az(e,this.config)}}Y(Cz,EN,"PgBinaryVectorBuilder");var TN,CN;class Az extends(CN=ct,TN=ge,CN){constructor(){super(...arguments);Y(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}Y(Az,TN,"PgBinaryVector");function QY(t,e){const{name:n,config:r}=Bn(t,e);return new Cz(n,r)}var AN,NN;class Nz extends(NN=Nt,AN=ge,NN){constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Pz(e,this.config)}}Y(Nz,AN,"PgHalfVectorBuilder");var PN,RN;class Pz extends(RN=ct,PN=ge,RN){constructor(){super(...arguments);Y(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}Y(Pz,PN,"PgHalfVector");function JY(t,e){const{name:n,config:r}=Bn(t,e);return new Nz(n,r)}var DN,kN;class Rz extends(kN=Nt,DN=ge,kN){constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new Dz(e,this.config)}}Y(Rz,DN,"PgSparseVectorBuilder");var LN,IN;class Dz extends(IN=ct,LN=ge,IN){constructor(){super(...arguments);Y(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}Y(Dz,LN,"PgSparseVector");function eQ(t,e){const{name:n,config:r}=Bn(t,e);return new Rz(n,r)}var jN,zN;class kz extends(zN=Nt,jN=ge,zN){constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new Lz(e,this.config)}}Y(kz,jN,"PgVectorBuilder");var ON,FN;class Lz extends(FN=ct,ON=ge,FN){constructor(){super(...arguments);Y(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}Y(Lz,ON,"PgVector");function tQ(t,e){const{name:n,config:r}=Bn(t,e);return new kz(n,r)}function nQ(){return{bigint:PY,bigserial:RY,boolean:ms,char:DY,cidr:kY,customType:LY,date:IY,doublePrecision:jY,inet:zY,integer:Ir,interval:OY,json:FY,jsonb:Bj,line:UY,macaddr:BY,macaddr8:VY,numeric:HY,point:GY,geometry:$Y,real:qY,serial:sa,smallint:XY,smallserial:ZY,text:et,time:KY,timestamp:Bi,uuid:YY,varchar:cd,bit:QY,halfvec:JY,sparsevec:eQ,vector:tQ}}const $_=Symbol.for("drizzle:PgInlineForeignKeys"),AT=Symbol.for("drizzle:EnableRLS");var UN,BN,VN,HN,GN;class Om extends(GN=$r,HN=ge,VN=$_,BN=AT,UN=$r.Symbol.ExtraConfigBuilder,GN){constructor(){super(...arguments);Y(this,VN,[]);Y(this,BN,!1);Y(this,UN)}}Y(Om,HN,"PgTable"),Y(Om,"Symbol",Object.assign({},$r.Symbol,{InlineForeignKeys:$_,EnableRLS:AT}));function rQ(t,e,n,r,i=t){const s=new Om(t,r,i),a=typeof e=="function"?e(nQ()):e,o=Object.fromEntries(Object.entries(a).map(([d,f])=>{const h=f;h.setName(d);const m=h.build(s);return s[$_].push(...h.buildForeignKeys(m,s)),[d,m]})),c=Object.fromEntries(Object.entries(a).map(([d,f])=>{const h=f;h.setName(d);const m=h.buildExtraConfigColumn(s);return[d,m]})),u=Object.assign(s,o);return u[$r.Symbol.Columns]=o,u[$r.Symbol.ExtraConfigColumns]=c,Object.assign(u,{enableRLS:()=>(u[Om.Symbol.EnableRLS]=!0,u)})}const yo=(t,e,n)=>rQ(t,e,n,void 0);var At;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(At||(At={}));var q_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(q_||(q_={}));const Oe=At.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ta=t=>{switch(typeof t){case"undefined":return Oe.undefined;case"string":return Oe.string;case"number":return isNaN(t)?Oe.nan:Oe.number;case"boolean":return Oe.boolean;case"function":return Oe.function;case"bigint":return Oe.bigint;case"symbol":return Oe.symbol;case"object":return Array.isArray(t)?Oe.array:t===null?Oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Oe.promise:typeof Map<"u"&&t instanceof Map?Oe.map:typeof Set<"u"&&t instanceof Set?Oe.set:typeof Date<"u"&&t instanceof Date?Oe.date:Oe.object;default:return Oe.unknown}},we=At.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),iQ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Yr extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(a))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return i(this),r}static assert(e){if(!(e instanceof Yr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,At.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Yr.create=t=>new Yr(t);const mu=(t,e)=>{let n;switch(t.code){case we.invalid_type:t.received===Oe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case we.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,At.jsonStringifyReplacer)}`;break;case we.unrecognized_keys:n=`Unrecognized key(s) in object: ${At.joinValues(t.keys,", ")}`;break;case we.invalid_union:n="Invalid input";break;case we.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${At.joinValues(t.options)}`;break;case we.invalid_enum_value:n=`Invalid enum value. Expected ${At.joinValues(t.options)}, received '${t.received}'`;break;case we.invalid_arguments:n="Invalid function arguments";break;case we.invalid_return_type:n="Invalid function return type";break;case we.invalid_date:n="Invalid date";break;case we.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:At.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case we.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case we.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case we.custom:n="Invalid input";break;case we.invalid_intersection_types:n="Intersection results could not be merged";break;case we.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case we.not_finite:n="Number must be finite";break;default:n=e.defaultError,At.assertNever(t)}return{message:n}};let Iz=mu;function sQ(t){Iz=t}function Fm(){return Iz}const Um=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)o=u(a,{data:e,defaultError:o}).message;return{...i,path:s,message:o}},aQ=[];function ke(t,e){const n=Fm(),r=Um({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===mu?void 0:mu].filter(i=>!!i)});t.common.issues.push(r)}class sr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return it;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return sr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return it;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}}const it=Object.freeze({status:"aborted"}),_c=t=>({status:"dirty",value:t}),xr=t=>({status:"valid",value:t}),X_=t=>t.status==="aborted",Z_=t=>t.status==="dirty",of=t=>t.status==="valid",lf=t=>typeof Promise<"u"&&t instanceof Promise;function Bm(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function jz(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Xe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Xe||(Xe={}));var ud,dd;class xs{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const NT=(t,e)=>{if(of(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Yr(t.common.issues);return this._error=n,this._error}}};function lt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var c,u;const{message:d}=t;return a.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}},description:i}}class yt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ta(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new sr,ctx:{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(lf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},s=this._parseSync({data:e,path:i.path,parent:i});return NT(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(lf(i)?i:Promise.resolve(i));return NT(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:we.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new $i({schema:this,typeName:rt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return gs.create(this,this._def)}nullable(){return ho.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vi.create(this,this._def)}promise(){return vu.create(this,this._def)}or(e){return ff.create([this,e],this._def)}and(e){return hf.create(this,e,this._def)}transform(e){return new $i({...lt(this._def),schema:this,typeName:rt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new yf({...lt(this._def),innerType:this,defaultValue:n,typeName:rt.ZodDefault})}brand(){return new Ab({typeName:rt.ZodBranded,type:this,...lt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new xf({...lt(this._def),innerType:this,catchValue:n,typeName:rt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return $f.create(this,e)}readonly(){return _f.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oQ=/^c[^\s-]{8,}$/i,lQ=/^[0-9a-z]+$/,cQ=/^[0-9A-HJKMNP-TV-Z]{26}$/,uQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,dQ=/^[a-z0-9_-]{21}$/i,fQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,pQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Py;const mQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gQ=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,vQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zz="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",yQ=new RegExp(`^${zz}$`);function Oz(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function xQ(t){return new RegExp(`^${Oz(t)}$`)}function Fz(t){let e=`${zz}T${Oz(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function _Q(t,e){return!!((e==="v4"||!e)&&mQ.test(t)||(e==="v6"||!e)&&gQ.test(t))}class Li extends yt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Oe.string){const s=this._getOrReturnCtx(e);return ke(s,{code:we.invalid_type,expected:Oe.string,received:s.parsedType}),it}const r=new sr;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:we.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:we.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?ke(i,{code:we.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&ke(i,{code:we.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")hQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"email",code:we.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Py||(Py=new RegExp(pQ,"u")),Py.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"emoji",code:we.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")uQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"uuid",code:we.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")dQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"nanoid",code:we.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")oQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"cuid",code:we.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")lQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"cuid2",code:we.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")cQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"ulid",code:we.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ke(i,{validation:"url",code:we.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"regex",code:we.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ke(i,{code:we.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ke(i,{code:we.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ke(i,{code:we.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Fz(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{code:we.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?yQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{code:we.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?xQ(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{code:we.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?fQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"duration",code:we.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?_Q(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"ip",code:we.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?vQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"base64",code:we.invalid_string,message:s.message}),r.dirty()):At.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:we.invalid_string,...Xe.errToObj(r)})}_addCheck(e){return new Li({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Xe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Xe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Xe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Xe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Xe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Xe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Xe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Xe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Xe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Xe.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Xe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Xe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Xe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Xe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Xe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Xe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Xe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Xe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Xe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Xe.errToObj(n)})}nonempty(e){return this.min(1,Xe.errToObj(e))}trim(){return new Li({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Li.create=t=>{var e;return new Li({checks:[],typeName:rt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...lt(t)})};function wQ(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class co extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Oe.number){const s=this._getOrReturnCtx(e);return ke(s,{code:we.invalid_type,expected:Oe.number,received:s.parsedType}),it}let r;const i=new sr;for(const s of this._def.checks)s.kind==="int"?At.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{code:we.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:we.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:we.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?wQ(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),ke(r,{code:we.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{code:we.not_finite,message:s.message}),i.dirty()):At.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Xe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Xe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Xe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Xe.toString(n))}setLimit(e,n,r,i){return new co({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Xe.toString(i)}]})}_addCheck(e){return new co({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Xe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Xe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Xe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Xe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Xe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Xe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&At.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}co.create=t=>new co({checks:[],typeName:rt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...lt(t)});class uo extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Oe.bigint){const s=this._getOrReturnCtx(e);return ke(s,{code:we.invalid_type,expected:Oe.bigint,received:s.parsedType}),it}let r;const i=new sr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:we.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:we.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:we.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):At.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Xe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Xe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Xe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Xe.toString(n))}setLimit(e,n,r,i){return new uo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Xe.toString(i)}]})}_addCheck(e){return new uo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Xe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Xe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}uo.create=t=>{var e;return new uo({checks:[],typeName:rt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...lt(t)})};class cf extends yt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Oe.boolean){const r=this._getOrReturnCtx(e);return ke(r,{code:we.invalid_type,expected:Oe.boolean,received:r.parsedType}),it}return xr(e.data)}}cf.create=t=>new cf({typeName:rt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...lt(t)});class vl extends yt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Oe.date){const s=this._getOrReturnCtx(e);return ke(s,{code:we.invalid_type,expected:Oe.date,received:s.parsedType}),it}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ke(s,{code:we.invalid_date}),it}const r=new sr;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:we.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:we.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):At.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Xe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Xe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}vl.create=t=>new vl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:rt.ZodDate,...lt(t)});class Vm extends yt{_parse(e){if(this._getType(e)!==Oe.symbol){const r=this._getOrReturnCtx(e);return ke(r,{code:we.invalid_type,expected:Oe.symbol,received:r.parsedType}),it}return xr(e.data)}}Vm.create=t=>new Vm({typeName:rt.ZodSymbol,...lt(t)});class uf extends yt{_parse(e){if(this._getType(e)!==Oe.undefined){const r=this._getOrReturnCtx(e);return ke(r,{code:we.invalid_type,expected:Oe.undefined,received:r.parsedType}),it}return xr(e.data)}}uf.create=t=>new uf({typeName:rt.ZodUndefined,...lt(t)});class df extends yt{_parse(e){if(this._getType(e)!==Oe.null){const r=this._getOrReturnCtx(e);return ke(r,{code:we.invalid_type,expected:Oe.null,received:r.parsedType}),it}return xr(e.data)}}df.create=t=>new df({typeName:rt.ZodNull,...lt(t)});class gu extends yt{constructor(){super(...arguments),this._any=!0}_parse(e){return xr(e.data)}}gu.create=t=>new gu({typeName:rt.ZodAny,...lt(t)});class Jo extends yt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xr(e.data)}}Jo.create=t=>new Jo({typeName:rt.ZodUnknown,...lt(t)});class ra extends yt{_parse(e){const n=this._getOrReturnCtx(e);return ke(n,{code:we.invalid_type,expected:Oe.never,received:n.parsedType}),it}}ra.create=t=>new ra({typeName:rt.ZodNever,...lt(t)});class Hm extends yt{_parse(e){if(this._getType(e)!==Oe.undefined){const r=this._getOrReturnCtx(e);return ke(r,{code:we.invalid_type,expected:Oe.void,received:r.parsedType}),it}return xr(e.data)}}Hm.create=t=>new Hm({typeName:rt.ZodVoid,...lt(t)});class Vi extends yt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Oe.array)return ke(n,{code:we.invalid_type,expected:Oe.array,received:n.parsedType}),it;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(ke(n,{code:a?we.too_big:we.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ke(n,{code:we.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ke(n,{code:we.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new xs(n,a,n.path,o)))).then(a=>sr.mergeArray(r,a));const s=[...n.data].map((a,o)=>i.type._parseSync(new xs(n,a,n.path,o)));return sr.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Vi({...this._def,minLength:{value:e,message:Xe.toString(n)}})}max(e,n){return new Vi({...this._def,maxLength:{value:e,message:Xe.toString(n)}})}length(e,n){return new Vi({...this._def,exactLength:{value:e,message:Xe.toString(n)}})}nonempty(e){return this.min(1,e)}}Vi.create=(t,e)=>new Vi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:rt.ZodArray,...lt(e)});function sc(t){if(t instanceof nn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=gs.create(sc(r))}return new nn({...t._def,shape:()=>e})}else return t instanceof Vi?new Vi({...t._def,type:sc(t.element)}):t instanceof gs?gs.create(sc(t.unwrap())):t instanceof ho?ho.create(sc(t.unwrap())):t instanceof _s?_s.create(t.items.map(e=>sc(e))):t}class nn extends yt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=At.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Oe.object){const u=this._getOrReturnCtx(e);return ke(u,{code:we.invalid_type,expected:Oe.object,received:u.parsedType}),it}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ra&&this._def.unknownKeys==="strip"))for(const u in i.data)a.includes(u)||o.push(u);const c=[];for(const u of a){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new xs(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof ra){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")o.length>0&&(ke(i,{code:we.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new xs(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>sr.mergeObjectSync(r,u)):sr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Xe.errToObj,new nn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,a,o;const c=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=Xe.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new nn({...this._def,unknownKeys:"strip"})}passthrough(){return new nn({...this._def,unknownKeys:"passthrough"})}extend(e){return new nn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:rt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nn({...this._def,catchall:e})}pick(e){const n={};return At.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new nn({...this._def,shape:()=>n})}omit(e){const n={};return At.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new nn({...this._def,shape:()=>n})}deepPartial(){return sc(this)}partial(e){const n={};return At.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new nn({...this._def,shape:()=>n})}required(e){const n={};return At.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof gs;)s=s._def.innerType;n[r]=s}}),new nn({...this._def,shape:()=>n})}keyof(){return Uz(At.objectKeys(this.shape))}}nn.create=(t,e)=>new nn({shape:()=>t,unknownKeys:"strip",catchall:ra.create(),typeName:rt.ZodObject,...lt(e)});nn.strictCreate=(t,e)=>new nn({shape:()=>t,unknownKeys:"strict",catchall:ra.create(),typeName:rt.ZodObject,...lt(e)});nn.lazycreate=(t,e)=>new nn({shape:t,unknownKeys:"strip",catchall:ra.create(),typeName:rt.ZodObject,...lt(e)});class ff extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new Yr(o.ctx.common.issues));return ke(n,{code:we.invalid_union,unionErrors:a}),it}if(n.common.async)return Promise.all(r.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(c=>new Yr(c));return ke(n,{code:we.invalid_union,unionErrors:o}),it}}get options(){return this._def.options}}ff.create=(t,e)=>new ff({options:t,typeName:rt.ZodUnion,...lt(e)});const ks=t=>t instanceof mf?ks(t.schema):t instanceof $i?ks(t.innerType()):t instanceof gf?[t.value]:t instanceof fo?t.options:t instanceof vf?At.objectValues(t.enum):t instanceof yf?ks(t._def.innerType):t instanceof uf?[void 0]:t instanceof df?[null]:t instanceof gs?[void 0,...ks(t.unwrap())]:t instanceof ho?[null,...ks(t.unwrap())]:t instanceof Ab||t instanceof _f?ks(t.unwrap()):t instanceof xf?ks(t._def.innerType):[];class Vg extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Oe.object)return ke(n,{code:we.invalid_type,expected:Oe.object,received:n.parsedType}),it;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ke(n,{code:we.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),it)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const a=ks(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new Vg({typeName:rt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...lt(r)})}}function K_(t,e){const n=Ta(t),r=Ta(e);if(t===e)return{valid:!0,data:t};if(n===Oe.object&&r===Oe.object){const i=At.objectKeys(e),s=At.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const c=K_(t[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(n===Oe.array&&r===Oe.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],c=K_(a,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===Oe.date&&r===Oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class hf extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,a)=>{if(X_(s)||X_(a))return it;const o=K_(s.value,a.value);return o.valid?((Z_(s)||Z_(a))&&n.dirty(),{status:n.value,value:o.data}):(ke(r,{code:we.invalid_intersection_types}),it)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}hf.create=(t,e,n)=>new hf({left:t,right:e,typeName:rt.ZodIntersection,...lt(n)});class _s extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.array)return ke(r,{code:we.invalid_type,expected:Oe.array,received:r.parsedType}),it;if(r.data.length<this._def.items.length)return ke(r,{code:we.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),it;!this._def.rest&&r.data.length>this._def.items.length&&(ke(r,{code:we.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new xs(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>sr.mergeArray(n,a)):sr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new _s({...this._def,rest:e})}}_s.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _s({items:t,typeName:rt.ZodTuple,rest:null,...lt(e)})};class pf extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.object)return ke(r,{code:we.invalid_type,expected:Oe.object,received:r.parsedType}),it;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in r.data)i.push({key:s._parse(new xs(r,o,r.path,o)),value:a._parse(new xs(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?sr.mergeObjectAsync(n,i):sr.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof yt?new pf({keyType:e,valueType:n,typeName:rt.ZodRecord,...lt(r)}):new pf({keyType:Li.create(),valueType:e,typeName:rt.ZodRecord,...lt(n)})}}class Gm extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.map)return ke(r,{code:we.invalid_type,expected:Oe.map,received:r.parsedType}),it;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,c],u)=>({key:i._parse(new xs(r,o,r.path,[u,"key"])),value:s._parse(new xs(r,c,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return it;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return it;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}Gm.create=(t,e,n)=>new Gm({valueType:e,keyType:t,typeName:rt.ZodMap,...lt(n)});class yl extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.set)return ke(r,{code:we.invalid_type,expected:Oe.set,received:r.parsedType}),it;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ke(r,{code:we.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ke(r,{code:we.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return it;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((c,u)=>s._parse(new xs(r,c,r.path,u)));return r.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,n){return new yl({...this._def,minSize:{value:e,message:Xe.toString(n)}})}max(e,n){return new yl({...this._def,maxSize:{value:e,message:Xe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}yl.create=(t,e)=>new yl({valueType:t,minSize:null,maxSize:null,typeName:rt.ZodSet,...lt(e)});class Oc extends yt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Oe.function)return ke(n,{code:we.invalid_type,expected:Oe.function,received:n.parsedType}),it;function r(o,c){return Um({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fm(),mu].filter(u=>!!u),issueData:{code:we.invalid_arguments,argumentsError:c}})}function i(o,c){return Um({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fm(),mu].filter(u=>!!u),issueData:{code:we.invalid_return_type,returnTypeError:c}})}const s={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof vu){const o=this;return xr(async function(...c){const u=new Yr([]),d=await o._def.args.parseAsync(c,s).catch(m=>{throw u.addIssue(r(c,m)),u}),f=await Reflect.apply(a,this,d);return await o._def.returns._def.type.parseAsync(f,s).catch(m=>{throw u.addIssue(i(f,m)),u})})}else{const o=this;return xr(function(...c){const u=o._def.args.safeParse(c,s);if(!u.success)throw new Yr([r(c,u.error)]);const d=Reflect.apply(a,this,u.data),f=o._def.returns.safeParse(d,s);if(!f.success)throw new Yr([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Oc({...this._def,args:_s.create(e).rest(Jo.create())})}returns(e){return new Oc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Oc({args:e||_s.create([]).rest(Jo.create()),returns:n||Jo.create(),typeName:rt.ZodFunction,...lt(r)})}}class mf extends yt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}mf.create=(t,e)=>new mf({getter:t,typeName:rt.ZodLazy,...lt(e)});class gf extends yt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ke(n,{received:n.data,code:we.invalid_literal,expected:this._def.value}),it}return{status:"valid",value:e.data}}get value(){return this._def.value}}gf.create=(t,e)=>new gf({value:t,typeName:rt.ZodLiteral,...lt(e)});function Uz(t,e){return new fo({values:t,typeName:rt.ZodEnum,...lt(e)})}class fo extends yt{constructor(){super(...arguments),ud.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ke(n,{expected:At.joinValues(r),received:n.parsedType,code:we.invalid_type}),it}if(Bm(this,ud)||jz(this,ud,new Set(this._def.values)),!Bm(this,ud).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ke(n,{received:n.data,code:we.invalid_enum_value,options:r}),it}return xr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return fo.create(e,{...this._def,...n})}exclude(e,n=this._def){return fo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ud=new WeakMap;fo.create=Uz;class vf extends yt{constructor(){super(...arguments),dd.set(this,void 0)}_parse(e){const n=At.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Oe.string&&r.parsedType!==Oe.number){const i=At.objectValues(n);return ke(r,{expected:At.joinValues(i),received:r.parsedType,code:we.invalid_type}),it}if(Bm(this,dd)||jz(this,dd,new Set(At.getValidEnumValues(this._def.values))),!Bm(this,dd).has(e.data)){const i=At.objectValues(n);return ke(r,{received:r.data,code:we.invalid_enum_value,options:i}),it}return xr(e.data)}get enum(){return this._def.values}}dd=new WeakMap;vf.create=(t,e)=>new vf({values:t,typeName:rt.ZodNativeEnum,...lt(e)});class vu extends yt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Oe.promise&&n.common.async===!1)return ke(n,{code:we.invalid_type,expected:Oe.promise,received:n.parsedType}),it;const r=n.parsedType===Oe.promise?n.data:Promise.resolve(n.data);return xr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}vu.create=(t,e)=>new vu({type:t,typeName:rt.ZodPromise,...lt(e)});class $i extends yt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{ke(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return it;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?it:c.status==="dirty"||n.value==="dirty"?_c(c.value):c});{if(n.value==="aborted")return it;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?it:o.status==="dirty"||n.value==="dirty"?_c(o.value):o}}if(i.type==="refinement"){const a=o=>{const c=i.refinement(o,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?it:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?it:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!of(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>of(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:n.value,value:o})):a);At.assertNever(i)}}$i.create=(t,e,n)=>new $i({schema:t,typeName:rt.ZodEffects,effect:e,...lt(n)});$i.createWithPreprocess=(t,e,n)=>new $i({schema:e,effect:{type:"preprocess",transform:t},typeName:rt.ZodEffects,...lt(n)});class gs extends yt{_parse(e){return this._getType(e)===Oe.undefined?xr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gs.create=(t,e)=>new gs({innerType:t,typeName:rt.ZodOptional,...lt(e)});class ho extends yt{_parse(e){return this._getType(e)===Oe.null?xr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ho.create=(t,e)=>new ho({innerType:t,typeName:rt.ZodNullable,...lt(e)});class yf extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Oe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}yf.create=(t,e)=>new yf({innerType:t,typeName:rt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...lt(e)});class xf extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return lf(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Yr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Yr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xf.create=(t,e)=>new xf({innerType:t,typeName:rt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...lt(e)});class Wm extends yt{_parse(e){if(this._getType(e)!==Oe.nan){const r=this._getOrReturnCtx(e);return ke(r,{code:we.invalid_type,expected:Oe.nan,received:r.parsedType}),it}return{status:"valid",value:e.data}}}Wm.create=t=>new Wm({typeName:rt.ZodNaN,...lt(t)});const bQ=Symbol("zod_brand");class Ab extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class $f extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?it:s.status==="dirty"?(n.dirty(),_c(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?it:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new $f({in:e,out:n,typeName:rt.ZodPipeline})}}class _f extends yt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(of(i)&&(i.value=Object.freeze(i.value)),i);return lf(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}_f.create=(t,e)=>new _f({innerType:t,typeName:rt.ZodReadonly,...lt(e)});function Bz(t,e={},n){return t?gu.create().superRefine((r,i)=>{var s,a;if(!t(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(a=(s=o.fatal)!==null&&s!==void 0?s:n)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...u,fatal:c})}}):gu.create()}const SQ={object:nn.lazycreate};var rt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(rt||(rt={}));const EQ=(t,e={message:`Input not instance of ${t.name}`})=>Bz(n=>n instanceof t,e),Vz=Li.create,Hz=co.create,MQ=Wm.create,TQ=uo.create,Gz=cf.create,CQ=vl.create,AQ=Vm.create,NQ=uf.create,PQ=df.create,RQ=gu.create,DQ=Jo.create,kQ=ra.create,LQ=Hm.create,IQ=Vi.create,jQ=nn.create,zQ=nn.strictCreate,OQ=ff.create,FQ=Vg.create,UQ=hf.create,BQ=_s.create,VQ=pf.create,HQ=Gm.create,GQ=yl.create,WQ=Oc.create,$Q=mf.create,qQ=gf.create,XQ=fo.create,ZQ=vf.create,KQ=vu.create,PT=$i.create,YQ=gs.create,QQ=ho.create,JQ=$i.createWithPreprocess,eJ=$f.create,tJ=()=>Vz().optional(),nJ=()=>Hz().optional(),rJ=()=>Gz().optional(),iJ={string:t=>Li.create({...t,coerce:!0}),number:t=>co.create({...t,coerce:!0}),boolean:t=>cf.create({...t,coerce:!0}),bigint:t=>uo.create({...t,coerce:!0}),date:t=>vl.create({...t,coerce:!0})},sJ=it;var re=Object.freeze({__proto__:null,defaultErrorMap:mu,setErrorMap:sQ,getErrorMap:Fm,makeIssue:Um,EMPTY_PATH:aQ,addIssueToContext:ke,ParseStatus:sr,INVALID:it,DIRTY:_c,OK:xr,isAborted:X_,isDirty:Z_,isValid:of,isAsync:lf,get util(){return At},get objectUtil(){return q_},ZodParsedType:Oe,getParsedType:Ta,ZodType:yt,datetimeRegex:Fz,ZodString:Li,ZodNumber:co,ZodBigInt:uo,ZodBoolean:cf,ZodDate:vl,ZodSymbol:Vm,ZodUndefined:uf,ZodNull:df,ZodAny:gu,ZodUnknown:Jo,ZodNever:ra,ZodVoid:Hm,ZodArray:Vi,ZodObject:nn,ZodUnion:ff,ZodDiscriminatedUnion:Vg,ZodIntersection:hf,ZodTuple:_s,ZodRecord:pf,ZodMap:Gm,ZodSet:yl,ZodFunction:Oc,ZodLazy:mf,ZodLiteral:gf,ZodEnum:fo,ZodNativeEnum:vf,ZodPromise:vu,ZodEffects:$i,ZodTransformer:$i,ZodOptional:gs,ZodNullable:ho,ZodDefault:yf,ZodCatch:xf,ZodNaN:Wm,BRAND:bQ,ZodBranded:Ab,ZodPipeline:$f,ZodReadonly:_f,custom:Bz,Schema:yt,ZodSchema:yt,late:SQ,get ZodFirstPartyTypeKind(){return rt},coerce:iJ,any:RQ,array:IQ,bigint:TQ,boolean:Gz,date:CQ,discriminatedUnion:FQ,effect:PT,enum:XQ,function:WQ,instanceof:EQ,intersection:UQ,lazy:$Q,literal:qQ,map:HQ,nan:MQ,nativeEnum:ZQ,never:kQ,null:PQ,nullable:QQ,number:Hz,object:jQ,oboolean:rJ,onumber:nJ,optional:YQ,ostring:tJ,pipeline:eJ,preprocess:JQ,promise:KQ,record:VQ,set:GQ,strictObject:zQ,string:Vz,symbol:AQ,transformer:PT,tuple:BQ,undefined:NQ,union:OQ,unknown:DQ,void:LQ,NEVER:sJ,ZodIssueCode:we,quotelessJson:iQ,ZodError:Yr});const en={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function vn(t,e){return e.includes(t.columnType)}function aJ(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const oJ=re.union([re.string(),re.number(),re.boolean(),re.null()]),lJ=re.union([oJ,re.record(re.any()),re.array(re.any())]),cJ=re.custom(t=>t instanceof Buffer);function Wz(t,e){const n=(e==null?void 0:e.zodInstance)??re,r=(e==null?void 0:e.coerce)??{};let i;return aJ(t)&&(i=t.enumValues.length?n.enum(t.enumValues):n.string()),i||(vn(t,["PgGeometry","PgPointTuple"])?i=n.tuple([n.number(),n.number()]):vn(t,["PgGeometryObject","PgPointObject"])?i=n.object({x:n.number(),y:n.number()}):vn(t,["PgHalfVector","PgVector"])?(i=n.array(n.number()),i=t.dimensions?i.length(t.dimensions):i):vn(t,["PgLine"])?i=n.tuple([n.number(),n.number(),n.number()]):vn(t,["PgLineABC"])?i=n.object({a:n.number(),b:n.number(),c:n.number()}):vn(t,["PgArray"])?(i=n.array(Wz(t.baseColumn,n)),i=t.size?i.length(t.size):i):t.dataType==="array"?i=n.array(n.any()):t.dataType==="number"?i=uJ(t,n,r):t.dataType==="bigint"?i=dJ(t,n,r):t.dataType==="boolean"?i=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?i=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?i=fJ(t,n,r):t.dataType==="json"?i=lJ:t.dataType==="custom"?i=n.any():t.dataType==="buffer"&&(i=cJ)),i||(i=n.any()),i}function uJ(t,e,n){let r=t.getSQLType().includes("unsigned"),i,s,a=!1;vn(t,["MySqlTinyInt","SingleStoreTinyInt"])?(i=r?0:en.INT8_MIN,s=r?en.INT8_UNSIGNED_MAX:en.INT8_MAX,a=!0):vn(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=r?0:en.INT16_MIN,s=r?en.INT16_UNSIGNED_MAX:en.INT16_MAX,a=!0):vn(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=r?0:en.INT24_MIN,s=r?en.INT24_UNSIGNED_MAX:en.INT24_MAX,a=vn(t,["MySqlMediumInt","SingleStoreMediumInt"])):vn(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=r?0:en.INT32_MIN,s=r?en.INT32_UNSIGNED_MAX:en.INT32_MAX,a=!0):vn(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=r?0:en.INT48_MIN,s=r?en.INT48_UNSIGNED_MAX:en.INT48_MAX):vn(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||vn(t,["MySqlSerial","SingleStoreSerial"]),i=r?0:Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,a=!0):vn(t,["MySqlYear","SingleStoreYear"])?(i=1901,s=2155,a=!0):(i=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER);let o=n===!0||n!=null&&n.number?e.coerce.number():e.number();return o=o.min(i).max(s),a?o.int():o}function dJ(t,e,n){const r=t.getSQLType().includes("unsigned"),i=r?0n:en.INT64_MIN,s=r?en.INT64_UNSIGNED_MAX:en.INT64_MAX;return(n===!0||n!=null&&n.bigint?e.coerce.bigint():e.bigint()).min(i).max(s)}function fJ(t,e,n){if(vn(t,["PgUUID"]))return e.string().uuid();let r,i,s=!1;vn(t,["PgVarchar","SQLiteText"])?r=t.length:vn(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??en.INT16_UNSIGNED_MAX:vn(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=en.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=en.INT24_UNSIGNED_MAX:t.textType==="text"?r=en.INT16_UNSIGNED_MAX:r=en.INT8_UNSIGNED_MAX),vn(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,s=!0),vn(t,["PgBinaryVector"])&&(i=/^[01]+$/,r=t.dimensions);let a=n===!0||n!=null&&n.string?e.coerce.string():e.string();return a=i?a.regex(i):a,r&&s?a.length(r):r?a.max(r):a}function $z(t){return ij(t)?AY(t):NY(t)}function qz(t,e,n,r){const i={};for(const[s,a]of Object.entries(t)){if(!Wn(a,pu)&&!Wn(a,Dn)&&!Wn(a,Dn.Aliased)&&typeof a=="object"){const f=ij(a)||CY(a)?$z(a):a;i[s]=qz(f,e[s]??{},n,r);continue}const o=e[s];if(o!==void 0&&typeof o!="function"){i[s]=o;continue}const c=Wn(a,pu)?a:void 0,u=c?Wz(c,r):re.any(),d=typeof o=="function"?o(u):u;n.never(c)||(i[s]=d,c&&(n.nullable(c)&&(i[s]=i[s].nullable()),n.optional(c)&&(i[s]=i[s].optional())))}return re.object(i)}const hJ={never:t=>{var e,n;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((n=t==null?void 0:t.generatedIdentity)==null?void 0:n.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},xo=(t,e)=>{const n=$z(t);return qz(n,{},hJ)},Xz=yo("users",{id:sa("id").primaryKey(),email:et("email").notNull().unique(),username:et("username").unique(),password:et("password").notNull(),fullName:et("full_name"),company:et("company"),isAdmin:ms("is_admin").default(!1),isClient:ms("is_client").default(!1),createdAt:Bi("created_at").defaultNow().notNull(),lastLogin:Bi("last_login"),resetToken:et("reset_token"),resetTokenExpiry:Bi("reset_token_expiry")});xo(Xz).pick({username:!0,password:!0,email:!0,fullName:!0,company:!0,isAdmin:!0,isClient:!0});re.object({email:re.string().email("Nieprawidłowy adres email"),password:re.string().min(6,"Hasło musi mieć co najmniej 6 znaków"),fullName:re.string().min(1,"Imię i nazwisko są wymagane"),company:re.string().optional(),username:re.string().min(3,"Nazwa użytkownika musi mieć co najmniej 3 znaki").optional()});re.object({email:re.string().email("Nieprawidłowy adres email"),password:re.string().min(1,"Hasło jest wymagane")});const Nb=yo("categories",{id:sa("id").primaryKey(),nameEn:et("name_en").notNull(),namePl:et("name_pl").notNull(),nameDe:et("name_de").notNull(),nameFr:et("name_fr").notNull(),nameCs:et("name_cs").notNull(),slug:et("slug").notNull().unique(),descriptionEn:et("description_en"),descriptionPl:et("description_pl"),descriptionDe:et("description_de"),descriptionFr:et("description_fr"),descriptionCs:et("description_cs"),icon:et("icon"),color:et("color").default("#3B82F6"),sortOrder:Ir("sort_order").default(0),isActive:ms("is_active").default(!0),createdAt:Bi("created_at").defaultNow().notNull()});xo(Nb).omit({id:!0,createdAt:!0});const Zz=yo("tags",{id:sa("id").primaryKey(),nameEn:et("name_en").notNull(),namePl:et("name_pl").notNull(),nameDe:et("name_de").notNull(),nameFr:et("name_fr").notNull(),nameCs:et("name_cs").notNull(),nameEs:et("name_es").notNull(),slug:et("slug").notNull().unique(),categoryId:Ir("category_id").references(()=>Nb.id),color:et("color").default("#6B7280"),usageCount:Ir("usage_count").default(0),isActive:ms("is_active").default(!0),createdAt:Bi("created_at").defaultNow().notNull()});xo(Zz).omit({id:!0,usageCount:!0,createdAt:!0});yo("model_tags",{id:sa("id").primaryKey(),modelId:Ir("model_id").references(()=>qf.id,{onDelete:"cascade"}).notNull(),tagId:Ir("tag_id").references(()=>Zz.id,{onDelete:"cascade"}).notNull(),createdAt:Bi("created_at").defaultNow().notNull()});const qf=yo("models",{id:sa("id").primaryKey(),publicId:et("public_id").unique(),userId:Ir("user_id").references(()=>Xz.id),filename:et("filename").notNull(),filesize:Ir("filesize").notNull(),format:et("format"),created:et("created").notNull(),sourceSystem:et("source_system"),metadata:Bj("metadata"),shareId:et("share_id").unique(),shareEnabled:ms("share_enabled").default(!1),sharePassword:et("share_password"),shareExpiryDate:et("share_expiry_date"),shareDeleteToken:et("share_delete_token"),shareEmail:et("share_email"),shareNotificationSent:ms("share_notification_sent").default(!1),shareLastAccessed:et("share_last_accessed"),tags:et("tags").array(),categoryId:Ir("category_id").references(()=>Nb.id),isPublic:ms("is_public").default(!1)}),pJ=yo("model_descriptions",{id:sa("id").primaryKey(),modelId:Ir("model_id").references(()=>qf.id,{onDelete:"cascade"}).notNull(),descriptionEn:et("description_en"),descriptionPl:et("description_pl"),descriptionCs:et("description_cs"),descriptionDe:et("description_de"),descriptionFr:et("description_fr"),descriptionEs:et("description_es"),originalLanguage:et("original_language").notNull(),originalDescription:et("original_description").notNull(),createdAt:Bi("created_at").defaultNow().notNull(),updatedAt:Bi("updated_at").defaultNow().notNull()});xo(qf).omit({id:!0});xo(pJ).omit({id:!0,createdAt:!0,updatedAt:!0});re.object({id:re.string(),name:re.string(),type:re.enum(["model","assembly","part","feature"]),children:re.array(re.any()).optional(),selected:re.boolean().optional()});re.object({filename:re.string(),filesize:re.number(),format:re.string().optional(),created:re.string(),sourceSystem:re.string().optional(),parts:re.number().optional(),assemblies:re.number().optional(),surfaces:re.number().optional(),solids:re.number().optional(),properties:re.record(re.string(),re.string()).optional(),shareEnabled:re.boolean().optional(),shareId:re.string().optional(),hasPassword:re.boolean().optional(),shareEmail:re.string().optional(),shareExpiryDate:re.string().optional(),shareLastAccessed:re.string().optional(),shareDeleteToken:re.string().optional(),tags:re.array(re.string()).optional()});const Kz=yo("model_gallery",{id:sa("id").primaryKey(),modelId:Ir("model_id").references(()=>qf.id,{onDelete:"cascade"}).notNull(),filename:cd("filename",{length:255}).notNull(),originalName:cd("original_name",{length:255}).notNull(),filesize:Ir("filesize").notNull(),mimeType:cd("mime_type",{length:100}).notNull(),displayOrder:Ir("display_order").default(0).notNull(),isThumbnail:ms("is_thumbnail").default(!1).notNull(),uploadedAt:Bi("uploaded_at").defaultNow().notNull(),s3Key:cd("s3_key",{length:500})});xo(Kz);xo(Kz);const mJ=re.object({username:re.string().optional(),password:re.string().optional(),fullName:re.string().optional(),company:re.string().optional(),email:re.string().email("Nieprawidłowy adres email").optional()});re.object({modelId:re.number(),enableSharing:re.boolean(),password:re.string().optional(),expiryDate:re.string().optional(),email:re.string().email("Nieprawidłowy adres email").optional(),language:re.string().optional(),createAccount:re.boolean().optional(),userData:mJ.optional()});re.object({shareId:re.string(),password:re.string().optional()});const gJ=re.object({username:re.string().min(1,"Nazwa użytkownika jest wymagana"),password:re.string().min(1,"Hasło jest wymagane")}),vJ=yo("model_views",{id:sa("id").primaryKey(),modelId:Ir("model_id").references(()=>qf.id).notNull(),shareId:et("share_id"),ipAddress:et("ip_address").notNull(),userAgent:et("user_agent"),viewedAt:Bi("viewed_at").defaultNow().notNull(),authenticated:ms("authenticated").default(!1)});xo(vJ).omit({id:!0});re.object({totalViews:re.union([re.number(),re.string()]).transform(t=>Number(t)),uniqueIPs:re.union([re.number(),re.string()]).transform(t=>Number(t)),firstView:re.string().optional(),lastView:re.string().optional(),viewDetails:re.array(re.object({ipAddress:re.string(),userAgent:re.string().optional(),viewedAt:re.string(),authenticated:re.boolean().optional()})),ipAddresses:re.array(re.object({address:re.string(),count:re.union([re.number(),re.string()]).transform(t=>Number(t)),lastView:re.string().optional()})).optional(),browserStats:re.array(re.object({name:re.string(),count:re.union([re.number(),re.string()]).transform(t=>Number(t))})).optional()});re.object({oldPassword:re.string().min(1,"Aktualne hasło jest wymagane"),newPassword:re.string().min(6,"Nowe hasło musi mieć co najmniej 6 znaków")});re.object({email:re.string().email("Nieprawidłowy adres email")});re.object({token:re.string(),newPassword:re.string().min(6,"Nowe hasło musi mieć co najmniej 6 znaków")});re.object({modelId:re.number(),password:re.string().optional(),expiryDate:re.string().optional()});re.object({modelId:re.number(),tags:re.array(re.string())});re.object({query:re.string().optional(),tags:re.array(re.string()).optional(),page:re.number().optional().default(1),limit:re.number().optional().default(20)});re.object({filePath:re.string(),stlFilePath:re.string(),s3Key:re.string().nullable(),isDirectStl:re.boolean().default(!1),stlFormat:re.string().default("unknown"),parts:re.number(),assemblies:re.number(),surfaces:re.number(),solids:re.number(),userEmail:re.string().nullable(),properties:re.object({author:re.string(),organization:re.string(),partNumber:re.string(),revision:re.string()}),viewToken:re.string().optional()});re.object({filePath:re.string(),fileType:re.string(),cadFormat:re.string(),entities:re.number(),layers:re.number(),userEmail:re.string().nullable(),properties:re.object({author:re.string(),organization:re.string(),drawingNumber:re.string(),revision:re.string()}),viewToken:re.string().optional()});var Xf=t=>t.type==="checkbox",Ho=t=>t instanceof Date,fr=t=>t==null;const Yz=t=>typeof t=="object";var _n=t=>!fr(t)&&!Array.isArray(t)&&Yz(t)&&!Ho(t),yJ=t=>_n(t)&&t.target?Xf(t.target)?t.target.checked:t.target.value:t,xJ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,_J=(t,e)=>t.has(xJ(e)),wJ=t=>{const e=t.constructor&&t.constructor.prototype;return _n(e)&&e.hasOwnProperty("isPrototypeOf")},Pb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ii(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Pb&&(t instanceof Blob||t instanceof FileList))&&(n||_n(t)))if(e=n?[]:{},!n&&!wJ(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=ii(t[r]));else return t;return e}var Hg=t=>Array.isArray(t)?t.filter(Boolean):[],yn=t=>t===void 0,Be=(t,e,n)=>{if(!e||!_n(t))return n;const r=Hg(e.split(/[,[\].]+?/)).reduce((i,s)=>fr(i)?i:i[s],t);return yn(r)||r===t?yn(t[e])?n:t[e]:r},Qi=t=>typeof t=="boolean",Rb=t=>/^\w*$/.test(t),Qz=t=>Hg(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ht=(t,e,n)=>{let r=-1;const i=Rb(e)?[e]:Qz(e),s=i.length,a=s-1;for(;++r<s;){const o=i[r];let c=n;if(r!==a){const u=t[o];c=_n(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(o==="__proto__")return;t[o]=c,t=t[o]}return t};const RT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ri={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ps={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};tn.createContext(null);var bJ=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const a=s;return e._proxyFormState[a]!==Ri.all&&(e._proxyFormState[a]=!r||Ri.all),t[a]}});return i},Cr=t=>_n(t)&&!Object.keys(t).length,SJ=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Cr(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(a=>e[a]===Ri.all)},Ip=t=>Array.isArray(t)?t:[t];function EJ(t){const e=tn.useRef(t);e.current=t,tn.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var ls=t=>typeof t=="string",MJ=(t,e,n,r,i)=>ls(t)?(r&&e.watch.add(t),Be(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Be(n,s))):(r&&(e.watchAll=!0),n),Jz=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},DT=t=>({isOnSubmit:!t||t===Ri.onSubmit,isOnBlur:t===Ri.onBlur,isOnChange:t===Ri.onChange,isOnAll:t===Ri.all,isOnTouch:t===Ri.onTouched}),kT=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Nd=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Be(t,i);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(Nd(o,e))break}else if(_n(o)&&Nd(o,e))break}}};var TJ=(t,e,n)=>{const r=Ip(Be(t,n));return Ht(r,"root",e[n]),Ht(t,n,r),t},Db=t=>t.type==="file",Bs=t=>typeof t=="function",$m=t=>{if(!Pb)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},jp=t=>ls(t),kb=t=>t.type==="radio",qm=t=>t instanceof RegExp;const LT={value:!1,isValid:!1},IT={value:!0,isValid:!0};var eO=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!yn(t[0].attributes.value)?yn(t[0].value)||t[0].value===""?IT:{value:t[0].value,isValid:!0}:IT:LT}return LT};const jT={isValid:!1,value:null};var tO=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,jT):jT;function zT(t,e,n="validate"){if(jp(t)||Array.isArray(t)&&t.every(jp)||Qi(t)&&!t)return{type:n,message:jp(t)?t:"",ref:e}}var ic=t=>_n(t)&&!qm(t)?t:{value:t,message:""},OT=async(t,e,n,r,i)=>{const{ref:s,refs:a,required:o,maxLength:c,minLength:u,min:d,max:f,pattern:h,validate:m,name:y,valueAsNumber:v,mount:g,disabled:p}=t._f,_=Be(e,y);if(!g||p)return{};const w=a?a[0]:s,b=O=>{r&&w.reportValidity&&(w.setCustomValidity(Qi(O)?"":O||""),w.reportValidity())},S={},M=kb(s),C=Xf(s),P=M||C,A=(v||Db(s))&&yn(s.value)&&yn(_)||$m(s)&&s.value===""||_===""||Array.isArray(_)&&!_.length,E=Jz.bind(null,y,n,S),L=(O,k,j,$=Ps.maxLength,U=Ps.minLength)=>{const X=O?k:j;S[y]={type:O?$:U,message:X,ref:s,...E(O?$:U,X)}};if(i?!Array.isArray(_)||!_.length:o&&(!P&&(A||fr(_))||Qi(_)&&!_||C&&!eO(a).isValid||M&&!tO(a).isValid)){const{value:O,message:k}=jp(o)?{value:!!o,message:o}:ic(o);if(O&&(S[y]={type:Ps.required,message:k,ref:w,...E(Ps.required,k)},!n))return b(k),S}if(!A&&(!fr(d)||!fr(f))){let O,k;const j=ic(f),$=ic(d);if(!fr(_)&&!isNaN(_)){const U=s.valueAsNumber||_&&+_;fr(j.value)||(O=U>j.value),fr($.value)||(k=U<$.value)}else{const U=s.valueAsDate||new Date(_),X=ee=>new Date(new Date().toDateString()+" "+ee),z=s.type=="time",V=s.type=="week";ls(j.value)&&_&&(O=z?X(_)>X(j.value):V?_>j.value:U>new Date(j.value)),ls($.value)&&_&&(k=z?X(_)<X($.value):V?_<$.value:U<new Date($.value))}if((O||k)&&(L(!!O,j.message,$.message,Ps.max,Ps.min),!n))return b(S[y].message),S}if((c||u)&&!A&&(ls(_)||i&&Array.isArray(_))){const O=ic(c),k=ic(u),j=!fr(O.value)&&_.length>+O.value,$=!fr(k.value)&&_.length<+k.value;if((j||$)&&(L(j,O.message,k.message),!n))return b(S[y].message),S}if(h&&!A&&ls(_)){const{value:O,message:k}=ic(h);if(qm(O)&&!_.match(O)&&(S[y]={type:Ps.pattern,message:k,ref:s,...E(Ps.pattern,k)},!n))return b(k),S}if(m){if(Bs(m)){const O=await m(_,e),k=zT(O,w);if(k&&(S[y]={...k,...E(Ps.validate,k.message)},!n))return b(k.message),S}else if(_n(m)){let O={};for(const k in m){if(!Cr(O)&&!n)break;const j=zT(await m[k](_,e),w,k);j&&(O={...j,...E(k,j.message)},b(j.message),n&&(S[y]=O))}if(!Cr(O)&&(S[y]={ref:w,...O},!n))return S}}return b(!0),S};function CJ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=yn(t)?r++:t[e[r++]];return t}function AJ(t){for(const e in t)if(t.hasOwnProperty(e)&&!yn(t[e]))return!1;return!0}function Tn(t,e){const n=Array.isArray(e)?e:Rb(e)?[e]:Qz(e),r=n.length===1?t:CJ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(_n(r)&&Cr(r)||Array.isArray(r)&&AJ(r))&&Tn(t,n.slice(0,-1)),t}var Ry=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},Y_=t=>fr(t)||!Yz(t);function Ca(t,e){if(Y_(t)||Y_(e))return t===e;if(Ho(t)&&Ho(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const a=e[i];if(Ho(s)&&Ho(a)||_n(s)&&_n(a)||Array.isArray(s)&&Array.isArray(a)?!Ca(s,a):s!==a)return!1}}return!0}var nO=t=>t.type==="select-multiple",NJ=t=>kb(t)||Xf(t),Dy=t=>$m(t)&&t.isConnected,rO=t=>{for(const e in t)if(Bs(t[e]))return!0;return!1};function Xm(t,e={}){const n=Array.isArray(t);if(_n(t)||n)for(const r in t)Array.isArray(t[r])||_n(t[r])&&!rO(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Xm(t[r],e[r])):fr(t[r])||(e[r]=!0);return e}function iO(t,e,n){const r=Array.isArray(t);if(_n(t)||r)for(const i in t)Array.isArray(t[i])||_n(t[i])&&!rO(t[i])?yn(e)||Y_(n[i])?n[i]=Array.isArray(t[i])?Xm(t[i],[]):{...Xm(t[i])}:iO(t[i],fr(e)?{}:e[i],n[i]):n[i]=!Ca(t[i],e[i]);return n}var ed=(t,e)=>iO(t,e,Xm(e)),sO=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>yn(t)?t:e?t===""?NaN:t&&+t:n&&ls(t)?new Date(t):r?r(t):t;function ky(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return Db(e)?e.files:kb(e)?tO(t.refs).value:nO(e)?[...e.selectedOptions].map(({value:n})=>n):Xf(e)?eO(t.refs).value:sO(yn(e.value)?t.ref.value:e.value,t)}var PJ=(t,e,n,r)=>{const i={};for(const s of t){const a=Be(e,s);a&&Ht(i,s,a._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},td=t=>yn(t)?t:qm(t)?t.source:_n(t)?qm(t.value)?t.value.source:t.value:t;const FT="AsyncFunction";var RJ=t=>(!t||!t.validate)&&!!(Bs(t.validate)&&t.validate.constructor.name===FT||_n(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===FT)),DJ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function UT(t,e,n){const r=Be(t,n);if(r||Rb(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),a=Be(e,s),o=Be(t,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:n}}var kJ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,LJ=(t,e)=>!Hg(Be(t,e)).length&&Tn(t,e);const IJ={mode:Ri.onSubmit,reValidateMode:Ri.onChange,shouldFocusError:!0};function jJ(t={}){let e={...IJ,...t},n={submitCount:0,isDirty:!1,isLoading:Bs(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=_n(e.defaultValues)||_n(e.values)?ii(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:ii(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:Ry(),array:Ry(),state:Ry()},h=DT(e.mode),m=DT(e.reValidateMode),y=e.criteriaMode===Ri.all,v=R=>B=>{clearTimeout(u),u=setTimeout(R,B)},g=async R=>{if(!t.disabled&&(d.isValid||R)){const B=e.resolver?Cr((await P()).errors):await E(r,!0);B!==n.isValid&&f.state.next({isValid:B})}},p=(R,B)=>{!t.disabled&&(d.isValidating||d.validatingFields)&&((R||Array.from(o.mount)).forEach(H=>{H&&(B?Ht(n.validatingFields,H,B):Tn(n.validatingFields,H))}),f.state.next({validatingFields:n.validatingFields,isValidating:!Cr(n.validatingFields)}))},_=(R,B=[],H,N,T=!0,F=!0)=>{if(N&&H&&!t.disabled){if(a.action=!0,F&&Array.isArray(Be(r,R))){const te=H(Be(r,R),N.argA,N.argB);T&&Ht(r,R,te)}if(F&&Array.isArray(Be(n.errors,R))){const te=H(Be(n.errors,R),N.argA,N.argB);T&&Ht(n.errors,R,te),LJ(n.errors,R)}if(d.touchedFields&&F&&Array.isArray(Be(n.touchedFields,R))){const te=H(Be(n.touchedFields,R),N.argA,N.argB);T&&Ht(n.touchedFields,R,te)}d.dirtyFields&&(n.dirtyFields=ed(i,s)),f.state.next({name:R,isDirty:O(R,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ht(s,R,B)},w=(R,B)=>{Ht(n.errors,R,B),f.state.next({errors:n.errors})},b=R=>{n.errors=R,f.state.next({errors:n.errors,isValid:!1})},S=(R,B,H,N)=>{const T=Be(r,R);if(T){const F=Be(s,R,yn(H)?Be(i,R):H);yn(F)||N&&N.defaultChecked||B?Ht(s,R,B?F:ky(T._f)):$(R,F),a.mount&&g()}},M=(R,B,H,N,T)=>{let F=!1,te=!1;const le={name:R};if(!t.disabled){const se=!!(Be(r,R)&&Be(r,R)._f&&Be(r,R)._f.disabled);if(!H||N){d.isDirty&&(te=n.isDirty,n.isDirty=le.isDirty=O(),F=te!==le.isDirty);const Te=se||Ca(Be(i,R),B);te=!!(!se&&Be(n.dirtyFields,R)),Te||se?Tn(n.dirtyFields,R):Ht(n.dirtyFields,R,!0),le.dirtyFields=n.dirtyFields,F=F||d.dirtyFields&&te!==!Te}if(H){const Te=Be(n.touchedFields,R);Te||(Ht(n.touchedFields,R,H),le.touchedFields=n.touchedFields,F=F||d.touchedFields&&Te!==H)}F&&T&&f.state.next(le)}return F?le:{}},C=(R,B,H,N)=>{const T=Be(n.errors,R),F=d.isValid&&Qi(B)&&n.isValid!==B;if(t.delayError&&H?(c=v(()=>w(R,H)),c(t.delayError)):(clearTimeout(u),c=null,H?Ht(n.errors,R,H):Tn(n.errors,R)),(H?!Ca(T,H):T)||!Cr(N)||F){const te={...N,...F&&Qi(B)?{isValid:B}:{},errors:n.errors,name:R};n={...n,...te},f.state.next(te)}},P=async R=>{p(R,!0);const B=await e.resolver(s,e.context,PJ(R||o.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return p(R),B},A=async R=>{const{errors:B}=await P(R);if(R)for(const H of R){const N=Be(B,H);N?Ht(n.errors,H,N):Tn(n.errors,H)}else n.errors=B;return B},E=async(R,B,H={valid:!0})=>{for(const N in R){const T=R[N];if(T){const{_f:F,...te}=T;if(F){const le=o.array.has(F.name),se=T._f&&RJ(T._f);se&&d.validatingFields&&p([N],!0);const Te=await OT(T,s,y,e.shouldUseNativeValidation&&!B,le);if(se&&d.validatingFields&&p([N]),Te[F.name]&&(H.valid=!1,B))break;!B&&(Be(Te,F.name)?le?TJ(n.errors,Te,F.name):Ht(n.errors,F.name,Te[F.name]):Tn(n.errors,F.name))}!Cr(te)&&await E(te,B,H)}}return H.valid},L=()=>{for(const R of o.unMount){const B=Be(r,R);B&&(B._f.refs?B._f.refs.every(H=>!Dy(H)):!Dy(B._f.ref))&&xe(R)}o.unMount=new Set},O=(R,B)=>!t.disabled&&(R&&B&&Ht(s,R,B),!Ca(de(),i)),k=(R,B,H)=>MJ(R,o,{...a.mount?s:yn(B)?i:ls(R)?{[R]:B}:B},H,B),j=R=>Hg(Be(a.mount?s:i,R,t.shouldUnregister?Be(i,R,[]):[])),$=(R,B,H={})=>{const N=Be(r,R);let T=B;if(N){const F=N._f;F&&(!F.disabled&&Ht(s,R,sO(B,F)),T=$m(F.ref)&&fr(B)?"":B,nO(F.ref)?[...F.ref.options].forEach(te=>te.selected=T.includes(te.value)):F.refs?Xf(F.ref)?F.refs.length>1?F.refs.forEach(te=>(!te.defaultChecked||!te.disabled)&&(te.checked=Array.isArray(T)?!!T.find(le=>le===te.value):T===te.value)):F.refs[0]&&(F.refs[0].checked=!!T):F.refs.forEach(te=>te.checked=te.value===T):Db(F.ref)?F.ref.value="":(F.ref.value=T,F.ref.type||f.values.next({name:R,values:{...s}})))}(H.shouldDirty||H.shouldTouch)&&M(R,T,H.shouldTouch,H.shouldDirty,!0),H.shouldValidate&&ee(R)},U=(R,B,H)=>{for(const N in B){const T=B[N],F=`${R}.${N}`,te=Be(r,F);(o.array.has(R)||_n(T)||te&&!te._f)&&!Ho(T)?U(F,T,H):$(F,T,H)}},X=(R,B,H={})=>{const N=Be(r,R),T=o.array.has(R),F=ii(B);Ht(s,R,F),T?(f.array.next({name:R,values:{...s}}),(d.isDirty||d.dirtyFields)&&H.shouldDirty&&f.state.next({name:R,dirtyFields:ed(i,s),isDirty:O(R,F)})):N&&!N._f&&!fr(F)?U(R,F,H):$(R,F,H),kT(R,o)&&f.state.next({...n}),f.values.next({name:a.mount?R:void 0,values:{...s}})},z=async R=>{a.mount=!0;const B=R.target;let H=B.name,N=!0;const T=Be(r,H),F=()=>B.type?ky(T._f):yJ(R),te=le=>{N=Number.isNaN(le)||Ho(le)&&isNaN(le.getTime())||Ca(le,Be(s,H,le))};if(T){let le,se;const Te=F(),Ae=R.type===RT.BLUR||R.type===RT.FOCUS_OUT,Fe=!DJ(T._f)&&!e.resolver&&!Be(n.errors,H)&&!T._f.deps||kJ(Ae,Be(n.touchedFields,H),n.isSubmitted,m,h),ut=kT(H,o,Ae);Ht(s,H,Te),Ae?(T._f.onBlur&&T._f.onBlur(R),c&&c(0)):T._f.onChange&&T._f.onChange(R);const be=M(H,Te,Ae,!1),Ge=!Cr(be)||ut;if(!Ae&&f.values.next({name:H,type:R.type,values:{...s}}),Fe)return d.isValid&&(t.mode==="onBlur"?Ae&&g():g()),Ge&&f.state.next({name:H,...ut?{}:be});if(!Ae&&ut&&f.state.next({...n}),e.resolver){const{errors:tt}=await P([H]);if(te(Te),N){const st=UT(n.errors,r,H),Ve=UT(tt,r,st.name||H);le=Ve.error,H=Ve.name,se=Cr(tt)}}else p([H],!0),le=(await OT(T,s,y,e.shouldUseNativeValidation))[H],p([H]),te(Te),N&&(le?se=!1:d.isValid&&(se=await E(r,!0)));N&&(T._f.deps&&ee(T._f.deps),C(H,se,le,be))}},V=(R,B)=>{if(Be(n.errors,B)&&R.focus)return R.focus(),1},ee=async(R,B={})=>{let H,N;const T=Ip(R);if(e.resolver){const F=await A(yn(R)?R:T);H=Cr(F),N=R?!T.some(te=>Be(F,te)):H}else R?(N=(await Promise.all(T.map(async F=>{const te=Be(r,F);return await E(te&&te._f?{[F]:te}:te)}))).every(Boolean),!(!N&&!n.isValid)&&g()):N=H=await E(r);return f.state.next({...!ls(R)||d.isValid&&H!==n.isValid?{}:{name:R},...e.resolver||!R?{isValid:H}:{},errors:n.errors}),B.shouldFocus&&!N&&Nd(r,V,R?T:o.mount),N},de=R=>{const B={...a.mount?s:i};return yn(R)?B:ls(R)?Be(B,R):R.map(H=>Be(B,H))},Ee=(R,B)=>({invalid:!!Be((B||n).errors,R),isDirty:!!Be((B||n).dirtyFields,R),error:Be((B||n).errors,R),isValidating:!!Be(n.validatingFields,R),isTouched:!!Be((B||n).touchedFields,R)}),Ne=R=>{R&&Ip(R).forEach(B=>Tn(n.errors,B)),f.state.next({errors:R?n.errors:{}})},ne=(R,B,H)=>{const N=(Be(r,R,{_f:{}})._f||{}).ref,T=Be(n.errors,R)||{},{ref:F,message:te,type:le,...se}=T;Ht(n.errors,R,{...se,...B,ref:N}),f.state.next({name:R,errors:n.errors,isValid:!1}),H&&H.shouldFocus&&N&&N.focus&&N.focus()},fe=(R,B)=>Bs(R)?f.values.subscribe({next:H=>R(k(void 0,B),H)}):k(R,B,!0),xe=(R,B={})=>{for(const H of R?Ip(R):o.mount)o.mount.delete(H),o.array.delete(H),B.keepValue||(Tn(r,H),Tn(s,H)),!B.keepError&&Tn(n.errors,H),!B.keepDirty&&Tn(n.dirtyFields,H),!B.keepTouched&&Tn(n.touchedFields,H),!B.keepIsValidating&&Tn(n.validatingFields,H),!e.shouldUnregister&&!B.keepDefaultValue&&Tn(i,H);f.values.next({values:{...s}}),f.state.next({...n,...B.keepDirty?{isDirty:O()}:{}}),!B.keepIsValid&&g()},ie=({disabled:R,name:B,field:H,fields:N,value:T})=>{if(Qi(R)&&a.mount||R){const F=R?void 0:yn(T)?ky(H?H._f:Be(N,B)._f):T;Ht(s,B,F),M(B,F,!1,!1,!0)}},Me=(R,B={})=>{let H=Be(r,R);const N=Qi(B.disabled)||Qi(t.disabled);return Ht(r,R,{...H||{},_f:{...H&&H._f?H._f:{ref:{name:R}},name:R,mount:!0,...B}}),o.mount.add(R),H?ie({field:H,disabled:Qi(B.disabled)?B.disabled:t.disabled,name:R,value:B.value}):S(R,!0,B.value),{...N?{disabled:B.disabled||t.disabled}:{},...e.progressive?{required:!!B.required,min:td(B.min),max:td(B.max),minLength:td(B.minLength),maxLength:td(B.maxLength),pattern:td(B.pattern)}:{},name:R,onChange:z,onBlur:z,ref:T=>{if(T){Me(R,B),H=Be(r,R);const F=yn(T.value)&&T.querySelectorAll&&T.querySelectorAll("input,select,textarea")[0]||T,te=NJ(F),le=H._f.refs||[];if(te?le.find(se=>se===F):F===H._f.ref)return;Ht(r,R,{_f:{...H._f,...te?{refs:[...le.filter(Dy),F,...Array.isArray(Be(i,R))?[{}]:[]],ref:{type:F.type,name:R}}:{ref:F}}}),S(R,!1,void 0,F)}else H=Be(r,R,{}),H._f&&(H._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(_J(o.array,R)&&a.action)&&o.unMount.add(R)}}},Ue=()=>e.shouldFocusError&&Nd(r,V,o.mount),ce=R=>{Qi(R)&&(f.state.next({disabled:R}),Nd(r,(B,H)=>{const N=Be(r,H);N&&(B.disabled=N._f.disabled||R,Array.isArray(N._f.refs)&&N._f.refs.forEach(T=>{T.disabled=N._f.disabled||R}))},0,!1))},me=(R,B)=>async H=>{let N;H&&(H.preventDefault&&H.preventDefault(),H.persist&&H.persist());let T=ii(s);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:F,values:te}=await P();n.errors=F,T=te}else await E(r);if(Tn(n.errors,"root"),Cr(n.errors)){f.state.next({errors:{}});try{await R(T,H)}catch(F){N=F}}else B&&await B({...n.errors},H),Ue(),setTimeout(Ue);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cr(n.errors)&&!N,submitCount:n.submitCount+1,errors:n.errors}),N)throw N},ve=(R,B={})=>{Be(r,R)&&(yn(B.defaultValue)?X(R,ii(Be(i,R))):(X(R,B.defaultValue),Ht(i,R,ii(B.defaultValue))),B.keepTouched||Tn(n.touchedFields,R),B.keepDirty||(Tn(n.dirtyFields,R),n.isDirty=B.defaultValue?O(R,ii(Be(i,R))):O()),B.keepError||(Tn(n.errors,R),d.isValid&&g()),f.state.next({...n}))},q=(R,B={})=>{const H=R?ii(R):i,N=ii(H),T=Cr(R),F=T?i:N;if(B.keepDefaultValues||(i=H),!B.keepValues){if(B.keepDirtyValues){const te=new Set([...o.mount,...Object.keys(ed(i,s))]);for(const le of Array.from(te))Be(n.dirtyFields,le)?Ht(F,le,Be(s,le)):X(le,Be(F,le))}else{if(Pb&&yn(R))for(const te of o.mount){const le=Be(r,te);if(le&&le._f){const se=Array.isArray(le._f.refs)?le._f.refs[0]:le._f.ref;if($m(se)){const Te=se.closest("form");if(Te){Te.reset();break}}}}r={}}s=t.shouldUnregister?B.keepDefaultValues?ii(i):{}:ii(F),f.array.next({values:{...F}}),f.values.next({values:{...F}})}o={mount:B.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,a.watch=!!t.shouldUnregister,f.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:T?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Ca(R,i)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:T?{}:B.keepDirtyValues?B.keepDefaultValues&&s?ed(i,s):n.dirtyFields:B.keepDefaultValues&&R?ed(i,R):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},I=(R,B)=>q(Bs(R)?R(s):R,B);return{control:{register:Me,unregister:xe,getFieldState:Ee,handleSubmit:me,setError:ne,_executeSchema:P,_getWatch:k,_getDirty:O,_updateValid:g,_removeUnmounted:L,_updateFieldArray:_,_updateDisabledField:ie,_getFieldArray:j,_reset:q,_resetDefaultValues:()=>Bs(e.defaultValues)&&e.defaultValues().then(R=>{I(R,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:R=>{n={...n,...R}},_disableForm:ce,_subjects:f,_proxyFormState:d,_setErrors:b,get _fields(){return r},get _formValues(){return s},get _state(){return a},set _state(R){a=R},get _defaultValues(){return i},get _names(){return o},set _names(R){o=R},get _formState(){return n},set _formState(R){n=R},get _options(){return e},set _options(R){e={...e,...R}}},trigger:ee,register:Me,handleSubmit:me,watch:fe,setValue:X,getValues:de,reset:I,resetField:ve,clearErrors:Ne,unregister:xe,setError:ne,setFocus:(R,B={})=>{const H=Be(r,R),N=H&&H._f;if(N){const T=N.refs?N.refs[0]:N.ref;T.focus&&(T.focus(),B.shouldSelect&&T.select())}},getFieldState:Ee}}function zJ(t={}){const e=tn.useRef(),n=tn.useRef(),[r,i]=tn.useState({isDirty:!1,isValidating:!1,isLoading:Bs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Bs(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...jJ(t),formState:r});const s=e.current.control;return s._options=t,EJ({subject:s._subjects.state,next:a=>{SJ(a,s._proxyFormState,s._updateFormState)&&i({...s._formState})}}),tn.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),tn.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==r.isDirty&&s._subjects.state.next({isDirty:a})}},[s,r.isDirty]),tn.useEffect(()=>{t.values&&!Ca(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[t.values,s]),tn.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),tn.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),tn.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),tn.useEffect(()=>{e.current&&(e.current.watch=e.current.watch.bind({}))},[r]),e.current.formState=bJ(r,s),e.current}const BT=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Be(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},aO=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?BT(r.ref,n,t):r.refs&&r.refs.forEach(i=>BT(i,n,t))}},OJ=(t,e)=>{e.shouldUseNativeValidation&&aO(t,e);const n={};for(const r in t){const i=Be(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(FJ(e.names||Object.keys(t),r)){const a=Object.assign({},Be(n,r));Ht(a,"root",s),Ht(n,r,a)}else Ht(n,r,s)}return n},FJ=(t,e)=>t.some(n=>n.startsWith(e+"."));var UJ=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[a]={message:o.message,type:o.code}}else n[a]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=n[a].types,u=c&&c[r.code];n[a]=Jz(a,e,n,i,u?[].concat(u,r.message):r.message)}t.shift()}return n},BJ=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(a,o){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return s.shouldUseNativeValidation&&aO({},s),{errors:{},values:n.raw?r:u}})}catch(u){return o(u)}return c&&c.then?c.then(void 0,o):c}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:OJ(UJ(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}}};function VT(){on();const[,t]=kn(),{toast:e}=jr(),[n,r]=x.useState(!1),i=zJ({resolver:BJ(gJ),defaultValues:{username:"",password:""}}),s=async a=>{r(!0);try{const o=await Lt("POST","/api/admin/login",a);if(!o.ok){const u=await o.json();throw new Error(u.message||"Login failed")}const c=await o.json();localStorage.setItem("adminToken",c.token),localStorage.setItem("adminUser",JSON.stringify({id:c.id,username:c.username,isAdmin:c.isAdmin})),e({title:"Login Successful",description:"Redirecting to admin dashboard"}),t("/admin/dashboard")}catch(o){console.error("Login error:",o),e({variant:"destructive",title:"Login Error",description:o instanceof Error?o.message:"An unknown error occurred"})}finally{r(!1)}};return l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-slate-50 p-4",children:l.jsxs(fn,{className:"w-full max-w-md shadow-lg",children:[l.jsxs(Pn,{className:"space-y-1 text-center",children:[l.jsx(Rn,{className:"text-2xl font-bold",children:"Admin Login"}),l.jsx(vr,{children:"Enter your credentials to access the admin dashboard"})]}),l.jsxs("form",{onSubmit:i.handleSubmit(s),children:[l.jsxs(hn,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"username",children:"Username"}),l.jsx(_t,{id:"username",placeholder:"Enter your username",...i.register("username")}),i.formState.errors.username&&l.jsx("p",{className:"text-sm text-red-500",children:i.formState.errors.username.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"password",children:"Password"}),l.jsx(_t,{id:"password",type:"password",placeholder:"••••••••",...i.register("password")}),i.formState.errors.password&&l.jsx("p",{className:"text-sm text-red-500",children:i.formState.errors.password.message})]})]}),l.jsx(ro,{children:l.jsx(ye,{type:"submit",className:"w-full",disabled:n,children:n?l.jsxs(l.Fragment,{children:[l.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Log in"})})]})]})})}const el=x.forwardRef(({className:t,...e},n)=>l.jsx("div",{className:"relative w-full overflow-auto",children:l.jsx("table",{ref:n,className:Re("w-full caption-bottom text-sm",t),...e})}));el.displayName="Table";const tl=x.forwardRef(({className:t,...e},n)=>l.jsx("thead",{ref:n,className:Re("[&_tr]:border-b",t),...e}));tl.displayName="TableHeader";const nl=x.forwardRef(({className:t,...e},n)=>l.jsx("tbody",{ref:n,className:Re("[&_tr:last-child]:border-0",t),...e}));nl.displayName="TableBody";const VJ=x.forwardRef(({className:t,...e},n)=>l.jsx("tfoot",{ref:n,className:Re("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));VJ.displayName="TableFooter";const pr=x.forwardRef(({className:t,...e},n)=>l.jsx("tr",{ref:n,className:Re("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));pr.displayName="TableRow";const Ct=x.forwardRef(({className:t,...e},n)=>l.jsx("th",{ref:n,className:Re("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Ct.displayName="TableHead";const Et=x.forwardRef(({className:t,...e},n)=>l.jsx("td",{ref:n,className:Re("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Et.displayName="TableCell";const oO=x.forwardRef(({className:t,...e},n)=>l.jsx("caption",{ref:n,className:Re("mt-4 text-sm text-muted-foreground",t),...e}));oO.displayName="TableCaption";var Lb="Popover",[lO,Cte]=qi(Lb,[vo]),Zf=vo(),[HJ,_o]=lO(Lb),cO=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!1}=t,o=Zf(e),c=x.useRef(null),[u,d]=x.useState(!1),[f=!1,h]=vi({prop:r,defaultProp:i,onChange:s});return l.jsx(Mg,{...o,children:l.jsx(HJ,{scope:e,contentId:hi(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:a,children:n})})};cO.displayName=Lb;var uO="PopoverAnchor",GJ=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=_o(uO,n),s=Zf(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=i;return x.useEffect(()=>(a(),()=>o()),[a,o]),l.jsx(kf,{...s,...r,ref:e})});GJ.displayName=uO;var dO="PopoverTrigger",fO=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=_o(dO,n),s=Zf(n),a=wt(e,i.triggerRef),o=l.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":vO(i.open),...r,ref:a,onClick:Ce(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:l.jsx(kf,{asChild:!0,...s,children:o})});fO.displayName=dO;var Ib="PopoverPortal",[WJ,$J]=lO(Ib,{forceMount:void 0}),hO=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=_o(Ib,e);return l.jsx(WJ,{scope:e,forceMount:n,children:l.jsx(zr,{present:n||s.open,children:l.jsx(Mu,{asChild:!0,container:i,children:r})})})};hO.displayName=Ib;var yu="PopoverContent",pO=x.forwardRef((t,e)=>{const n=$J(yu,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=_o(yu,t.__scopePopover);return l.jsx(zr,{present:r||s.open,children:s.modal?l.jsx(qJ,{...i,ref:e}):l.jsx(XJ,{...i,ref:e})})});pO.displayName=yu;var qJ=x.forwardRef((t,e)=>{const n=_o(yu,t.__scopePopover),r=x.useRef(null),i=wt(e,r),s=x.useRef(!1);return x.useEffect(()=>{const a=r.current;if(a)return Pg(a)},[]),l.jsx(Lf,{as:Js,allowPinchZoom:!0,children:l.jsx(mO,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),s.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,u=o.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ce(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),XJ=x.forwardRef((t,e)=>{const n=_o(yu,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return l.jsx(mO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),mO=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,h=_o(yu,n),m=Zf(n);return wg(),l.jsx(Rf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:l.jsx(El,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:l.jsx(Tg,{"data-state":vO(h.open),role:"dialog",id:h.contentId,...m,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gO="PopoverClose",ZJ=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=_o(gO,n);return l.jsx(Ke.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,()=>i.onOpenChange(!1))})});ZJ.displayName=gO;var KJ="PopoverArrow",YJ=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Zf(n);return l.jsx(Cg,{...i,...r,ref:e})});YJ.displayName=KJ;function vO(t){return t?"open":"closed"}var QJ=cO,JJ=fO,eee=hO,yO=pO;const tee=QJ,nee=JJ,xO=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>l.jsx(eee,{children:l.jsx(yO,{ref:i,align:e,sideOffset:n,className:Re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));xO.displayName=yO.displayName;var _O="AlertDialog",[ree,Ate]=qi(_O,[aL]),aa=aL(),wO=t=>{const{__scopeAlertDialog:e,...n}=t,r=aa(e);return l.jsx(Qw,{...r,...n,modal:!0})};wO.displayName=_O;var iee="AlertDialogTrigger",bO=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=aa(n);return l.jsx(bL,{...i,...r,ref:e})});bO.displayName=iee;var see="AlertDialogPortal",SO=t=>{const{__scopeAlertDialog:e,...n}=t,r=aa(e);return l.jsx(Jw,{...r,...n})};SO.displayName=see;var aee="AlertDialogOverlay",EO=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=aa(n);return l.jsx(zf,{...i,...r,ref:e})});EO.displayName=aee;var Fc="AlertDialogContent",[oee,lee]=ree(Fc),MO=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=aa(n),a=x.useRef(null),o=wt(e,a),c=x.useRef(null);return l.jsx(D8,{contentName:Fc,titleName:TO,docsSlug:"alert-dialog",children:l.jsx(oee,{scope:n,cancelRef:c,children:l.jsxs(Of,{role:"alertdialog",...s,...i,ref:o,onOpenAutoFocus:Ce(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(pw,{children:r}),l.jsx(uee,{contentRef:a})]})})})});MO.displayName=Fc;var TO="AlertDialogTitle",CO=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=aa(n);return l.jsx(Ff,{...i,...r,ref:e})});CO.displayName=TO;var AO="AlertDialogDescription",NO=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=aa(n);return l.jsx(Uf,{...i,...r,ref:e})});NO.displayName=AO;var cee="AlertDialogAction",PO=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=aa(n);return l.jsx(Bf,{...i,...r,ref:e})});PO.displayName=cee;var RO="AlertDialogCancel",DO=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=lee(RO,n),s=aa(n),a=wt(e,i);return l.jsx(Bf,{...s,...r,ref:a})});DO.displayName=RO;var uee=({contentRef:t})=>{const e=`\`${Fc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Fc}\` by passing a \`${AO}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Fc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},dee=wO,fee=bO,hee=SO,kO=EO,LO=MO,IO=PO,jO=DO,zO=CO,OO=NO;const HT=dee,GT=fee,pee=hee,FO=x.forwardRef(({className:t,...e},n)=>l.jsx(kO,{className:Re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));FO.displayName=kO.displayName;const Q_=x.forwardRef(({className:t,...e},n)=>l.jsxs(pee,{children:[l.jsx(FO,{}),l.jsx(LO,{ref:n,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Q_.displayName=LO.displayName;const J_=({className:t,...e})=>l.jsx("div",{className:Re("flex flex-col space-y-2 text-center sm:text-left",t),...e});J_.displayName="AlertDialogHeader";const e0=({className:t,...e})=>l.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});e0.displayName="AlertDialogFooter";const t0=x.forwardRef(({className:t,...e},n)=>l.jsx(zO,{ref:n,className:Re("text-lg font-semibold",t),...e}));t0.displayName=zO.displayName;const n0=x.forwardRef(({className:t,...e},n)=>l.jsx(OO,{ref:n,className:Re("text-sm text-muted-foreground",t),...e}));n0.displayName=OO.displayName;const r0=x.forwardRef(({className:t,...e},n)=>l.jsx(IO,{ref:n,className:Re(Aw(),t),...e}));r0.displayName=IO.displayName;const i0=x.forwardRef(({className:t,...e},n)=>l.jsx(jO,{ref:n,className:Re(Aw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));i0.displayName=jO.displayName;var[Gg,Nte]=qi("Tooltip",[vo]),Wg=vo(),UO="TooltipProvider",mee=700,s0="tooltip.open",[gee,jb]=Gg(UO),BO=t=>{const{__scopeTooltip:e,delayDuration:n=mee,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,[a,o]=x.useState(!0),c=x.useRef(!1),u=x.useRef(0);return x.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),l.jsx(gee,{scope:e,isOpenDelayed:a,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(u.current),o(!1)},[]),onClose:x.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:x.useCallback(d=>{c.current=d},[]),disableHoverableContent:i,children:s})};BO.displayName=UO;var $g="Tooltip",[vee,qg]=Gg($g),VO=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=t,c=jb($g,t.__scopeTooltip),u=Wg(e),[d,f]=x.useState(null),h=hi(),m=x.useRef(0),y=a??c.disableHoverableContent,v=o??c.delayDuration,g=x.useRef(!1),[p=!1,_]=vi({prop:r,defaultProp:i,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(s0))):c.onClose(),s==null||s(C)}}),w=x.useMemo(()=>p?g.current?"delayed-open":"instant-open":"closed",[p]),b=x.useCallback(()=>{window.clearTimeout(m.current),g.current=!1,_(!0)},[_]),S=x.useCallback(()=>{window.clearTimeout(m.current),_(!1)},[_]),M=x.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{g.current=!0,_(!0)},v)},[v,_]);return x.useEffect(()=>()=>window.clearTimeout(m.current),[]),l.jsx(Mg,{...u,children:l.jsx(vee,{scope:e,contentId:h,open:p,stateAttribute:w,trigger:d,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayed?M():b()},[c.isOpenDelayed,M,b]),onTriggerLeave:x.useCallback(()=>{y?S():window.clearTimeout(m.current)},[S,y]),onOpen:b,onClose:S,disableHoverableContent:y,children:n})})};VO.displayName=$g;var a0="TooltipTrigger",HO=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=qg(a0,n),s=jb(a0,n),a=Wg(n),o=x.useRef(null),c=wt(e,o,i.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),l.jsx(kf,{asChild:!0,...a,children:l.jsx(Ke.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:Ce(t.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ce(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:Ce(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ce(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:Ce(t.onBlur,i.onClose),onClick:Ce(t.onClick,i.onClose)})})});HO.displayName=a0;var yee="TooltipPortal",[Pte,xee]=Gg(yee,{forceMount:void 0}),xu="TooltipContent",GO=x.forwardRef((t,e)=>{const n=xee(xu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,a=qg(xu,t.__scopeTooltip);return l.jsx(zr,{present:r||a.open,children:a.disableHoverableContent?l.jsx(WO,{side:i,...s,ref:e}):l.jsx(_ee,{side:i,...s,ref:e})})}),_ee=x.forwardRef((t,e)=>{const n=qg(xu,t.__scopeTooltip),r=jb(xu,t.__scopeTooltip),i=x.useRef(null),s=wt(e,i),[a,o]=x.useState(null),{trigger:c,onClose:u}=n,d=i.current,{onPointerInTransitChange:f}=r,h=x.useCallback(()=>{o(null),f(!1)},[f]),m=x.useCallback((y,v)=>{const g=y.currentTarget,p={x:y.clientX,y:y.clientY},_=Eee(p,g.getBoundingClientRect()),w=Mee(p,_),b=Tee(v.getBoundingClientRect()),S=Aee([...w,...b]);o(S),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(c&&d){const y=g=>m(g,d),v=g=>m(g,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",v)}}},[c,d,m,h]),x.useEffect(()=>{if(a){const y=v=>{const g=v.target,p={x:v.clientX,y:v.clientY},_=(c==null?void 0:c.contains(g))||(d==null?void 0:d.contains(g)),w=!Cee(p,a);_?h():w&&(h(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,a,u,h]),l.jsx(WO,{...t,ref:s})}),[wee,bee]=Gg($g,{isInside:!1}),WO=x.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=t,c=qg(xu,n),u=Wg(n),{onClose:d}=c;return x.useEffect(()=>(document.addEventListener(s0,d),()=>document.removeEventListener(s0,d)),[d]),x.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),l.jsx(El,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:l.jsxs(Tg,{"data-state":c.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(pw,{children:r}),l.jsx(wee,{scope:n,isInside:!0,children:l.jsx(ZB,{id:c.contentId,role:"tooltip",children:i||r})})]})})});GO.displayName=xu;var $O="TooltipArrow",See=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Wg(n);return bee($O,n).isInside?null:l.jsx(Cg,{...i,...r,ref:e})});See.displayName=$O;function Eee(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Mee(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Tee(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Cee(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,c=e[s].y,u=e[a].x,d=e[a].y;c>r!=d>r&&n<(u-o)*(r-c)/(d-c)+o&&(i=!i)}return i}function Aee(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Nee(e)}function Nee(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Pee=BO,Ree=VO,Dee=HO,qO=GO;const kee=Pee,Lee=Ree,Iee=Dee,XO=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(qO,{ref:r,sideOffset:e,className:Re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));XO.displayName=qO.displayName;function jee({modelId:t,isOpen:e,onClose:n}){const[r,i]=x.useState("overview"),{data:s,isLoading:a,error:o}=mr({queryKey:["/api/admin/shared-models",t,"stats"],queryFn:async({queryKey:u})=>{const d=u[1];if(!d)return null;const f=await fetch(`/api/admin/shared-models/${d}/stats`);if(!f.ok)throw new Error("Failed to fetch statistics");return f.json()},enabled:e&&t!==null}),c=u=>{try{return Cw(new Date(u),"yyyy-MM-dd HH:mm:ss")}catch{return u}};return l.jsx(fs,{open:e,onOpenChange:u=>!u&&n(),children:l.jsxs(zi,{className:"sm:max-w-[700px]",children:[l.jsxs(Oi,{children:[l.jsx(Fi,{children:"View Statistics"}),l.jsx(Za,{children:"View detailed statistics about model views"})]}),a?l.jsx("div",{className:"flex justify-center items-center p-8",children:l.jsx(mn,{className:"h-8 w-8 animate-spin text-primary"})}):o?l.jsx("div",{className:"text-center p-4 text-destructive",children:"Error loading statistics. Please try again."}):s?l.jsx("div",{className:"mt-4",children:l.jsxs(Bg,{defaultValue:"overview",value:r,onValueChange:i,children:[l.jsxs(Gf,{className:"grid w-full grid-cols-3",children:[l.jsx(hs,{value:"overview",children:"Overview"}),l.jsx(hs,{value:"visitors",children:"Visitors"}),l.jsx(hs,{value:"details",children:"Detailed Views"})]}),l.jsxs(ps,{value:"overview",className:"p-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"border rounded-lg p-4 flex flex-col items-center",children:[l.jsx(n2,{className:"w-8 h-8 text-primary mb-2"}),l.jsx("div",{className:"text-2xl font-bold",children:s.totalViews}),l.jsx("div",{className:"text-muted-foreground",children:"Total Views"})]}),l.jsxs("div",{className:"border rounded-lg p-4 flex flex-col items-center",children:[l.jsx(zV,{className:"w-8 h-8 text-primary mb-2"}),l.jsx("div",{className:"text-2xl font-bold",children:s.uniqueIPs}),l.jsx("div",{className:"text-muted-foreground",children:"Unique Visitors"})]}),s.firstView&&l.jsxs("div",{className:"border rounded-lg p-4 flex flex-col items-center",children:[l.jsx(xw,{className:"w-8 h-8 text-primary mb-2"}),l.jsx("div",{className:"text-lg font-medium",children:c(s.firstView)}),l.jsx("div",{className:"text-muted-foreground",children:"First View"})]}),s.lastView&&l.jsxs("div",{className:"border rounded-lg p-4 flex flex-col items-center",children:[l.jsx(t2,{className:"w-8 h-8 text-primary mb-2"}),l.jsx("div",{className:"text-lg font-medium",children:c(s.lastView)}),l.jsx("div",{className:"text-muted-foreground",children:"Last View"})]})]}),s.browserStats&&s.browserStats.length>0&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Browser Statistics"}),l.jsxs(el,{children:[l.jsx(tl,{children:l.jsxs(pr,{children:[l.jsx(Ct,{children:"Browser"}),l.jsx(Ct,{className:"text-right",children:"Count"}),l.jsx(Ct,{className:"text-right",children:"Percentage"})]})}),l.jsx(nl,{children:s.browserStats.map((u,d)=>l.jsxs(pr,{children:[l.jsx(Et,{children:u.name}),l.jsx(Et,{className:"text-right",children:u.count}),l.jsxs(Et,{className:"text-right",children:[(u.count/s.totalViews*100).toFixed(1),"%"]})]},d))})]})]})]}),l.jsxs(ps,{value:"visitors",className:"p-4",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Unique Visitors"}),s.ipAddresses&&s.ipAddresses.length>0?l.jsxs(el,{children:[l.jsx(tl,{children:l.jsxs(pr,{children:[l.jsx(Ct,{children:"IP Address"}),l.jsx(Ct,{className:"text-right",children:"Views"}),l.jsx(Ct,{className:"text-right",children:"Last Visit"})]})}),l.jsx(nl,{children:s.ipAddresses.map((u,d)=>l.jsxs(pr,{children:[l.jsx(Et,{children:u.address}),l.jsx(Et,{className:"text-right",children:u.count}),l.jsx(Et,{className:"text-right",children:u.lastView?c(u.lastView):"Unknown"})]},d))})]}):l.jsx("div",{className:"text-center p-4 text-muted-foreground",children:"No visitor data available."})]}),l.jsxs(ps,{value:"details",className:"p-4",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Detailed View Log"}),s.viewDetails&&s.viewDetails.length>0?l.jsxs(el,{children:[l.jsx(tl,{children:l.jsxs(pr,{children:[l.jsx(Ct,{children:"Date & Time"}),l.jsx(Ct,{children:"IP Address"}),l.jsx(Ct,{children:"Browser"})]})}),l.jsx(nl,{children:s.viewDetails.map((u,d)=>l.jsxs(pr,{children:[l.jsx(Et,{children:c(u.viewedAt)}),l.jsx(Et,{children:u.ipAddress}),l.jsx(Et,{children:l.jsx("div",{className:"truncate max-w-[250px]",title:u.userAgent||"",children:u.userAgent})})]},d))})]}):l.jsx("div",{className:"text-center p-4 text-muted-foreground",children:"No detailed view data available."})]})]})}):l.jsx("div",{className:"text-center p-4",children:"No statistics available for this model."}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx(ye,{onClick:n,children:"Close"})})]})})}function zee(){const{toast:t}=jr(),e=Sl(),[n,r]=x.useState(""),[i,s]=x.useState(null),[a,o]=x.useState(""),[c,u]=x.useState(!1),{data:d,isLoading:f,error:h}=mr({queryKey:["/api/admin/temporary-models"],refetchInterval:3e4}),m=hr({mutationFn:async({modelId:p,email:_})=>await(await Lt("POST",`/api/admin/temporary-models/${p}/assign`,{email:_})).json(),onSuccess:()=>{t({title:"Assignment Successful",description:"The model has been successfully assigned to the user."}),u(!1),o(""),e.invalidateQueries({queryKey:["/api/admin/temporary-models"]})},onError:p=>{t({title:"Assignment Failed",description:p.message||"Failed to assign the model to the user.",variant:"destructive"})}}),y=d?d.filter(p=>p.filename.toLowerCase().includes(n.toLowerCase())||p.userEmail&&p.userEmail.toLowerCase().includes(n.toLowerCase())||p.format.toLowerCase().includes(n.toLowerCase())||p.id.toString().includes(n.toLowerCase())):[],v=p=>{s(p),u(!0)},g=()=>{if(!i||!a){t({title:"Validation Error",description:"Email address is required",variant:"destructive"});return}m.mutate({modelId:i,email:a})};return l.jsxs(fn,{children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:"Temporary Files"}),l.jsx(vr,{children:"Manage temporary files uploaded by anonymous users"}),l.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[l.jsx(Sw,{className:"w-4 h-4 text-muted-foreground"}),l.jsx(_t,{placeholder:"Search by ID, filename, email, or type...",value:n,onChange:p=>r(p.target.value),className:"max-w-sm"})]})]}),l.jsxs(hn,{children:[f?l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ja,{className:"h-10 w-full"}),l.jsx(Ja,{className:"h-10 w-full"}),l.jsx(Ja,{className:"h-10 w-full"})]}):h?l.jsx("div",{className:"text-red-500 p-4 text-center",children:"Error loading temporary files"}):l.jsx("div",{className:"overflow-x-auto w-full",children:l.jsxs(el,{className:"w-full",children:[l.jsx(oO,{children:"List of files uploaded by anonymous users"}),l.jsx(tl,{children:l.jsxs(pr,{children:[l.jsx(Ct,{children:"ID"}),l.jsx(Ct,{children:"Filename"}),l.jsx(Ct,{children:"Type"}),l.jsx(Ct,{children:"Size"}),l.jsx(Ct,{children:"Created"}),l.jsx(Ct,{children:"User Email"}),l.jsx(Ct,{children:"Token"}),l.jsx(Ct,{children:"Actions"})]})}),l.jsx(nl,{children:y.length===0?l.jsx(pr,{children:l.jsx(Et,{colSpan:8,className:"text-center py-4",children:n?"No files match your search criteria":"No temporary files found"})}):y.map(p=>l.jsxs(pr,{children:[l.jsx(Et,{children:p.id}),l.jsx(Et,{className:"font-medium",children:p.filename}),l.jsx(Et,{children:p.modelType||p.format}),l.jsx(Et,{children:_2(p.filesize)}),l.jsx(Et,{children:OH(p.created)}),l.jsx(Et,{children:p.userEmail||"-"}),l.jsx(Et,{children:p.viewTokenFragment||"-"}),l.jsx(Et,{children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(ye,{variant:"outline",size:"sm",onClick:()=>window.open(`/?modelId=${p.id}`,"_blank"),title:"View model in viewer",children:l.jsx(Xd,{className:"h-4 w-4"})}),l.jsx(ye,{variant:"outline",size:"sm",onClick:()=>v(p.id),title:"Assign to user",children:l.jsx(s2,{className:"h-4 w-4"})})]})})]},p.id))})]})}),l.jsx(fs,{open:c,onOpenChange:u,children:l.jsxs(zi,{children:[l.jsxs(Oi,{children:[l.jsx(Fi,{children:"Assign File to User"}),l.jsx(Za,{children:"Enter an email address to assign this file to a specific user"})]}),l.jsx("div",{className:"py-4",children:l.jsx(_t,{placeholder:"user@example.com",value:a,onChange:p=>o(p.target.value)})}),l.jsxs(Gs,{children:[l.jsx(W8,{asChild:!0,children:l.jsx(ye,{variant:"outline",children:"Cancel"})}),l.jsx(ye,{variant:"default",onClick:g,disabled:m.isPending,children:m.isPending?"Processing...":"Assign"})]})]})})]})]})}function WT(){on();const[,t]=kn(),{toast:e}=jr(),[n,r]=x.useState(!0),[i,s]=x.useState([]),[a,o]=x.useState(null),[c,u]=x.useState(!1),[d,f]=x.useState(null),[h,m]=x.useState(null),[y,v]=x.useState(!1),[g,p]=x.useState(""),[_,w]=x.useState(null),[b,S]=x.useState("desc"),[M,C]=x.useState(!1),[P,A]=x.useState(null),[E,L]=x.useState(""),[O,k]=x.useState(""),[j,$]=x.useState(""),[U,X]=x.useState(!1),[z,V]=x.useState(!1);x.useEffect(()=>{if(!localStorage.getItem("adminToken")){e({variant:"destructive",title:"Not Authenticated",description:"Please log in to access the admin panel"}),t("/admin/login");return}ee()},[]);const ee=async()=>{r(!0);try{const q=await Lt("GET","/api/admin/shared-models");if(!q.ok)throw new Error("Failed to fetch user models");const I=await q.json();s(I)}catch(q){console.error("Error loading user models:",q),e({variant:"destructive",title:"Error Loading Data",description:q instanceof Error?q.message:"An unknown error occurred"})}finally{r(!1)}},de=q=>{const I=`${window.location.origin}/shared/${q}`;navigator.clipboard.writeText(I),e({title:"Link Copied",description:"Link has been copied to clipboard"})},Ee=q=>{q&&(navigator.clipboard.writeText(q),e({title:"Password Copied",description:"Password has been copied to clipboard"}))},Ne=async q=>{u(!0);try{const I=await Lt("DELETE",`/api/admin/shared-models/${q}`);if(!I.ok){const qe=await I.json();throw new Error(qe.message||"Failed to revoke sharing")}e({title:"Sharing Revoked",description:"The model sharing has been successfully disabled"}),await ee()}catch(I){console.error("Error revoking sharing:",I),e({variant:"destructive",title:"Error Revoking Sharing",description:I instanceof Error?I.message:"An unknown error occurred"})}finally{u(!1),o(null)}},ne=async q=>{v(!0);try{const I=await Lt("DELETE",`/api/admin/models/${q}`);if(!I.ok){const qe=await I.json();throw new Error(qe.message||"Failed to delete model")}e({title:"Model Deleted",description:"The model has been completely deleted"}),await ee()}catch(I){console.error("Error deleting model:",I),e({variant:"destructive",title:"Error Deleting Model",description:I instanceof Error?I.message:"An unknown error occurred"})}finally{v(!1),m(null)}},fe=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t("/admin/login"),e({title:"Logged Out",description:"You have been successfully logged out"})},xe=q=>q<1024?q+" B":q<1024*1024?(q/1024).toFixed(1)+" KB":(q/(1024*1024)).toFixed(1)+" MB",ie=q=>{if(!q)return"—";try{return Cw(new Date(q),"dd.MM.yyyy HH:mm")}catch{return q}},Me=q=>{_===q?S(b==="asc"?"desc":"asc"):(w(q),S("desc"))},Ue=async q=>{if(q){X(!0);try{const I=await Lt("GET",`/api/admin/shared-models/${q}/password`);if(!I.ok)throw new Error("Failed to fetch password");return(await I.json()).plainPassword||""}catch(I){return console.error("Error fetching password:",I),e({variant:"destructive",title:"Error Fetching Password",description:I instanceof Error?I.message:"An unknown error occurred"}),""}finally{X(!1)}}},ce=async q=>{if(A(q.id),L(q.filename),k(""),C(!0),q.hasPassword){const I=await Ue(q.id);$(I)}else $("")},me=async()=>{if(!(!P||!O.trim())){V(!0);try{const q=await Lt("POST",`/api/admin/shared-models/${P}/reset-password`,{newPassword:O.trim()});if(!q.ok){const I=await q.json();throw new Error(I.message||"Failed to reset password")}s(i.map(I=>I.id===P?{...I,hasPassword:!0}:I)),e({title:"Password Updated",description:`Password has been updated for ${E}`}),C(!1)}catch(q){console.error("Error resetting password:",q),e({variant:"destructive",title:"Error Setting Password",description:q instanceof Error?q.message:"An unknown error occurred"})}finally{V(!1)}}},ve=x.useMemo(()=>{let q=[...i];if(g.trim()!==""){const I=g.toLowerCase();q=q.filter(qe=>qe.filename&&qe.filename.toLowerCase().includes(I)||qe.shareEmail&&qe.shareEmail.toLowerCase().includes(I)||qe.id&&qe.id.toString().includes(I))}return _&&q.sort((I,qe)=>{const W=I[_],he=qe[_];if(W===null&&he===null)return 0;if(W===null)return 1;if(he===null)return-1;const R=new Date(W).getTime(),B=new Date(he).getTime();return b==="asc"?R-B:B-R}),q},[i,g,_,b]);return l.jsxs("div",{className:"container p-4 mx-auto max-w-[1700px]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ye,{onClick:ee,variant:"outline",size:"sm",children:[l.jsx(i2,{className:"h-4 w-4 mr-2"}),"Refresh"]}),l.jsx(ye,{onClick:fe,variant:"outline",size:"sm",children:"Log Out"})]})]}),l.jsx(jee,{modelId:d,isOpen:d!==null,onClose:()=>f(null)}),l.jsxs(Bg,{defaultValue:"user",className:"space-y-4",children:[l.jsxs(Gf,{children:[l.jsx(hs,{value:"user",children:"User Models"}),l.jsx(hs,{value:"temporary",children:"Temporary Files"})]}),l.jsx(ps,{value:"user",className:"space-y-4",children:l.jsxs(fn,{className:"shadow-md",children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:"User Models"}),l.jsx(vr,{children:"Manage all models assigned to registered users"}),l.jsx("div",{className:"mt-4",children:l.jsxs("div",{className:"relative",children:[l.jsx(Sw,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),l.jsx(_t,{placeholder:"Search by ID, filename, or email...",value:g,onChange:q=>p(q.target.value),className:"pl-8"})]})})]}),l.jsx(hn,{children:n?l.jsx("div",{className:"flex justify-center p-8",children:l.jsx(mn,{className:"h-8 w-8 animate-spin text-primary"})}):i.length===0?l.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No user models found"}):ve.length===0?l.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No models match your search"}):l.jsx("div",{className:"overflow-x-auto w-full",children:l.jsxs(el,{className:"w-full",children:[l.jsx(tl,{children:l.jsxs(pr,{children:[l.jsx(Ct,{className:"whitespace-nowrap",children:"Filename"}),l.jsx(Ct,{className:"whitespace-nowrap",children:"Format"}),l.jsx(Ct,{className:"whitespace-nowrap",children:"Owner Email"}),l.jsx(Ct,{className:"whitespace-nowrap",children:"Sharing Status"}),l.jsx(Ct,{className:"cursor-pointer hover:text-primary whitespace-nowrap",onClick:()=>Me("created"),children:l.jsxs("div",{className:"flex items-center",children:["Created",_==="created"&&(b==="asc"?l.jsx(SE,{className:"ml-1 h-4 w-4"}):l.jsx(bE,{className:"ml-1 h-4 w-4"}))]})}),l.jsx(Ct,{className:"cursor-pointer hover:text-primary whitespace-nowrap",onClick:()=>Me("shareLastAccessed"),children:l.jsxs("div",{className:"flex items-center",children:["Last Accessed",_==="shareLastAccessed"&&(b==="asc"?l.jsx(SE,{className:"ml-1 h-4 w-4"}):l.jsx(bE,{className:"ml-1 h-4 w-4"}))]})}),l.jsx(Ct,{className:"whitespace-nowrap",children:"Expiry Date"}),l.jsx(Ct,{className:"whitespace-nowrap",children:"Password"}),l.jsx(Ct,{className:"text-right whitespace-nowrap",children:"Actions"})]})}),l.jsx(nl,{children:ve.map(q=>l.jsxs(pr,{children:[l.jsxs(Et,{className:"font-medium",children:[q.filename,l.jsx("div",{className:"text-xs text-muted-foreground",children:xe(q.filesize)})]}),l.jsx(Et,{children:q.format||"Unknown"}),l.jsx(Et,{children:q.shareEmail||"—"}),l.jsx(Et,{children:q.shareEnabled?l.jsxs(tr,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[l.jsx(ul,{className:"h-3 w-3 mr-1"})," Shared"]}):l.jsxs(tr,{variant:"outline",className:"bg-slate-50 text-slate-700 border-slate-200",children:[l.jsx(ou,{className:"h-3 w-3 mr-1"})," Not Shared"]})}),l.jsx(Et,{children:ie(q.created)}),l.jsx(Et,{children:q.shareLastAccessed?l.jsxs("span",{className:"flex items-center",children:[l.jsx(t2,{className:"h-3 w-3 mr-1"}),ie(q.shareLastAccessed)]}):"—"}),l.jsx(Et,{children:q.shareExpiryDate?ie(q.shareExpiryDate):"—"}),l.jsx(Et,{children:l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[q.hasPassword?l.jsxs(tr,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[l.jsx(ul,{className:"h-3 w-3 mr-1"})," Protected"]}):l.jsxs(tr,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:[l.jsx(ou,{className:"h-3 w-3 mr-1"})," Not Protected"]}),l.jsx(ye,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full",onClick:()=>ce(q),children:l.jsx(EE,{className:"h-3 w-3"})})]})}),l.jsx(Et,{className:"text-right",children:l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>f(q.id),children:[l.jsx(xV,{className:"h-4 w-4 mr-2"}),"Stats"]}),l.jsxs(tee,{children:[l.jsx(nee,{asChild:!0,children:l.jsxs(ye,{variant:"outline",size:"sm",children:[l.jsx(NV,{className:"h-4 w-4 mr-2"}),"Link"]})}),l.jsx(xO,{className:"w-80",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium",children:"Share Link"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(_t,{readOnly:!0,value:`${window.location.origin}/shared/${q.shareId}`,className:"flex-1"}),l.jsx(ye,{size:"icon",onClick:()=>de(q.shareId),children:l.jsx(fm,{className:"h-4 w-4"})})]}),l.jsxs(ye,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(`/shared/${q.shareId}`,"_blank"),children:[l.jsx(Xd,{className:"h-4 w-4 mr-2"}),"Open Link"]})]})})]}),l.jsxs(HT,{children:[l.jsx(GT,{asChild:!0,children:l.jsx(ye,{variant:"destructive",size:"sm",onClick:()=>o(q.id),children:"Revoke"})}),l.jsxs(Q_,{children:[l.jsxs(J_,{children:[l.jsx(t0,{children:"Confirm Revocation"}),l.jsx(n0,{children:"Are you sure you want to revoke sharing for this model? This action cannot be undone."})]}),l.jsxs(e0,{children:[l.jsx(i0,{children:"Cancel"}),l.jsxs(r0,{onClick:()=>Ne(q.id),disabled:c,children:[c&&a===q.id?l.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Yes, Revoke"]})]})]})]}),l.jsx(kee,{children:l.jsxs(Lee,{children:[l.jsx(Iee,{asChild:!0,children:l.jsxs(HT,{children:[l.jsx(GT,{asChild:!0,children:l.jsx(ye,{variant:"destructive",size:"icon",onClick:()=>m(q.id),children:l.jsx(Ew,{className:"h-4 w-4"})})}),l.jsxs(Q_,{children:[l.jsxs(J_,{children:[l.jsx(t0,{children:"Delete Model Permanently"}),l.jsx(n0,{children:"Are you sure you want to permanently delete this model? This will remove the model from the database and delete all associated files from the server. This action cannot be undone."})]}),l.jsxs(e0,{children:[l.jsx(i0,{children:"Cancel"}),l.jsxs(r0,{onClick:()=>ne(q.id),disabled:y,className:"bg-red-600 hover:bg-red-700",children:[y&&h===q.id?l.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Yes, Delete Permanently"]})]})]})]})}),l.jsx(XO,{children:l.jsx("p",{children:"Delete model permanently"})})]})})]})})]},q.id))})]})})})]})}),l.jsx(ps,{value:"temporary",className:"space-y-4",children:l.jsx(zee,{})})]}),l.jsx(fs,{open:M,onOpenChange:C,children:l.jsxs(zi,{className:"sm:max-w-md",children:[l.jsxs(Oi,{children:[l.jsx(Fi,{children:E?l.jsxs(l.Fragment,{children:[j?"Manage Password for:":"Set Password for:",l.jsx("span",{className:"font-normal ml-1",children:E})]}):"Password Management"}),l.jsx(Za,{children:j?"View the current password or set a new one to replace it.":"Enter a password to protect this shared file."})]}),l.jsxs("div",{className:"space-y-4 py-4",children:[j&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{children:"Current Password"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_t,{readOnly:!0,value:j,className:"flex-1 font-mono text-xs"}),l.jsx(ye,{size:"icon",variant:"outline",onClick:()=>Ee(j),children:l.jsx(fm,{className:"h-4 w-4"})})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This is the current plaintext password that users need to enter to access the file."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"password",children:j?"New Password":"Password"}),l.jsx(_t,{id:"password",type:"text",placeholder:j?"Enter new password to change":"Enter password to protect file",value:O,onChange:q=>k(q.target.value)})]})]}),l.jsxs(Gs,{className:"sm:justify-between",children:[l.jsx(ye,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),l.jsxs(ye,{type:"submit",onClick:me,disabled:z||!O.trim(),children:[z?l.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):l.jsx(EE,{className:"h-4 w-4 mr-2"}),"Set Password"]})]})]})})]})}function $T(){const{t}=on(),{user:e,isLoading:n,loginMutation:r,registerMutation:i}=Al(),[s,a]=x.useState("login"),[o,c]=x.useState({email:"",password:""}),[u,d]=x.useState({username:"",password:"",email:"",fullName:"",company:""}),f=S=>{const{name:M,value:C}=S.target;c(P=>({...P,[M]:C}))},h=S=>{const{name:M,value:C}=S.target;d(P=>({...P,[M]:C}))},m=S=>{S.preventDefault(),r.mutate({email:o.email,password:o.password})},y=S=>{S.preventDefault(),i.mutate({username:u.username,email:u.email,password:u.password,fullName:u.fullName,company:u.company||""})},{language:v}=on(),[g]=kn(),p=g.match(/^\/([a-z]{2})\//),_=p?p[1]:v;if(e)return l.jsx(om,{to:`/${_}`});const w=!o.email||!o.password||r.isPending,b=!u.password||!u.email||!u.fullName||i.isPending;return l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>{}}),l.jsxs("main",{className:"flex-grow flex flex-col",children:[l.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center",children:[l.jsx(ye,{variant:"ghost",asChild:!0,className:"mr-4",children:l.jsxs(ai,{href:`/${v}`,children:[l.jsx(um,{className:"h-4 w-4 mr-2"}),t("back_to_home","Back to home")]})}),l.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:t("login")})]})}),l.jsxs("div",{className:"flex flex-1 bg-gray-50 dark:bg-gray-900 overflow-auto",children:[l.jsx("div",{className:"flex flex-col justify-center flex-1 px-4 py-8 sm:px-6 lg:flex-none lg:px-20 xl:px-24",children:l.jsx("div",{className:"w-full max-w-sm mx-auto lg:w-96",children:l.jsx("div",{className:"mt-8",children:l.jsxs(Bg,{defaultValue:s,onValueChange:a,className:"w-full",children:[l.jsxs(Gf,{className:"grid w-full grid-cols-2",children:[l.jsx(hs,{value:"login",children:t("login")}),l.jsx(hs,{value:"register",children:t("register")})]}),l.jsx(ps,{value:"login",children:l.jsxs(fn,{children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:t("login")}),l.jsx(vr,{children:t("enter_credentials")})]}),l.jsxs("form",{onSubmit:m,children:[l.jsxs(hn,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"email",children:t("email")}),l.jsx(_t,{id:"email",name:"email",type:"email",value:o.email,onChange:f,required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"password",children:t("password")}),l.jsx(_t,{id:"password",name:"password",type:"password",value:o.password,onChange:f,required:!0})]})]}),l.jsx(ro,{children:l.jsxs(ye,{type:"submit",className:"w-full",disabled:w,children:[r.isPending?l.jsx(mn,{className:"h-4 w-4 animate-spin mr-2"}):null,t("login")]})})]})]})}),l.jsx(ps,{value:"register",children:l.jsxs(fn,{children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:t("register")}),l.jsx(vr,{children:t("create_account")})]}),l.jsxs("form",{onSubmit:y,children:[l.jsxs(hn,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"reg-username",children:t("username")}),l.jsx(_t,{id:"reg-username",name:"username",value:u.username,onChange:h}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("username_optional")})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(St,{htmlFor:"reg-email",children:[t("email")," *"]}),l.jsx(_t,{id:"reg-email",name:"email",type:"email",value:u.email,onChange:h,required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(St,{htmlFor:"reg-fullName",children:[t("full_name")," *"]}),l.jsx(_t,{id:"reg-fullName",name:"fullName",value:u.fullName,onChange:h,required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"reg-company",children:t("company")}),l.jsx(_t,{id:"reg-company",name:"company",value:u.company,onChange:h})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(St,{htmlFor:"reg-password",children:[t("password")," *"]}),l.jsx(_t,{id:"reg-password",name:"password",type:"password",value:u.password,onChange:h,required:!0})]})]}),l.jsx(ro,{children:l.jsxs(ye,{type:"submit",className:"w-full",disabled:b,children:[i.isPending?l.jsx(mn,{className:"h-4 w-4 animate-spin mr-2"}):null,t("register")]})})]})]})})]})})})}),l.jsx("div",{className:"relative flex-1 hidden w-0 lg:block",children:l.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-primary/90 to-primary/40 p-8",children:l.jsxs("div",{className:"max-w-2xl text-center text-white",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight sm:text-5xl",children:t("cad_viewer")}),l.jsx("p",{className:"mt-6 text-xl",children:t("app_description")}),l.jsxs("div",{className:"mt-8 flex flex-col space-y-4",children:[l.jsxs("div",{className:"flex items-center bg-white/10 p-4 rounded-lg",children:[l.jsx("div",{className:"rounded-full bg-white/20 p-2 mr-4",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:t("feature_1_title")}),l.jsx("p",{className:"text-white/80 text-sm",children:t("feature_1_desc")})]})]}),l.jsxs("div",{className:"flex items-center bg-white/10 p-4 rounded-lg",children:[l.jsx("div",{className:"rounded-full bg-white/20 p-2 mr-4",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:t("feature_2_title")}),l.jsx("p",{className:"text-white/80 text-sm",children:t("feature_2_desc")})]})]}),l.jsxs("div",{className:"flex items-center bg-white/10 p-4 rounded-lg",children:[l.jsx("div",{className:"rounded-full bg-white/20 p-2 mr-4",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:t("feature_3_title")}),l.jsx("p",{className:"text-white/80 text-sm",children:t("feature_3_desc")})]})]})]})]})})})]})]}),l.jsx(Ws,{})]})}function qT(t,[e,n]){return Math.min(n,Math.max(e,t))}var Oee=[" ","Enter","ArrowUp","ArrowDown"],Fee=[" ","Enter"],Kf="Select",[Xg,Zg,Uee]=mg(Kf),[Ru,Rte]=qi(Kf,[Uee,vo]),Kg=vo(),[Bee,wo]=Ru(Kf),[Vee,Hee]=Ru(Kf),ZO=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:y}=t,v=Kg(e),[g,p]=x.useState(null),[_,w]=x.useState(null),[b,S]=x.useState(!1),M=_g(u),[C=!1,P]=vi({prop:r,defaultProp:i,onChange:s}),[A,E]=vi({prop:a,defaultProp:o,onChange:c}),L=x.useRef(null),O=g?y||!!g.closest("form"):!0,[k,j]=x.useState(new Set),$=Array.from(k).map(U=>U.props.value).join(";");return l.jsx(Mg,{...v,children:l.jsxs(Bee,{required:m,scope:e,trigger:g,onTriggerChange:p,valueNode:_,onValueNodeChange:w,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:hi(),value:A,onValueChange:E,open:C,onOpenChange:P,dir:M,triggerPointerDownPosRef:L,disabled:h,children:[l.jsx(Xg.Provider,{scope:e,children:l.jsx(Vee,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(U=>{j(X=>new Set(X).add(U))},[]),onNativeOptionRemove:x.useCallback(U=>{j(X=>{const z=new Set(X);return z.delete(U),z})},[]),children:n})}),O?l.jsxs(_F,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:U=>E(U.target.value),disabled:h,form:y,children:[A===void 0?l.jsx("option",{value:""}):null,Array.from(k)]},$):null]})})};ZO.displayName=Kf;var KO="SelectTrigger",YO=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Kg(n),a=wo(KO,n),o=a.disabled||r,c=wt(e,a.onTriggerChange),u=Zg(n),d=x.useRef("touch"),[f,h,m]=wF(v=>{const g=u().filter(w=>!w.disabled),p=g.find(w=>w.value===a.value),_=bF(g,v,p);_!==void 0&&a.onValueChange(_.value)}),y=v=>{o||(a.onOpenChange(!0),m()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return l.jsx(kf,{asChild:!0,...s,children:l.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":xF(a.value)?"":void 0,...i,ref:c,onClick:Ce(i.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&y(v)}),onPointerDown:Ce(i.onPointerDown,v=>{d.current=v.pointerType;const g=v.target;g.hasPointerCapture(v.pointerId)&&g.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Ce(i.onKeyDown,v=>{const g=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(g&&v.key===" ")&&Oee.includes(v.key)&&(y(),v.preventDefault())})})})});YO.displayName=KO;var QO="SelectValue",JO=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=t,c=wo(QO,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=wt(e,c.onValueNodeChange);return ir(()=>{u(d)},[u,d]),l.jsx(Ke.span,{...o,ref:f,style:{pointerEvents:"none"},children:xF(c.value)?l.jsx(l.Fragment,{children:a}):s})});JO.displayName=QO;var Gee="SelectIcon",eF=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return l.jsx(Ke.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});eF.displayName=Gee;var Wee="SelectPortal",tF=t=>l.jsx(Mu,{asChild:!0,...t});tF.displayName=Wee;var xl="SelectContent",nF=x.forwardRef((t,e)=>{const n=wo(xl,t.__scopeSelect),[r,i]=x.useState();if(ir(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?bl.createPortal(l.jsx(rF,{scope:t.__scopeSelect,children:l.jsx(Xg.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),s):null}return l.jsx(iF,{...t,ref:e})});nF.displayName=xl;var Ei=10,[rF,bo]=Ru(xl),$ee="SelectContentImpl",iF=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:v,avoidCollisions:g,...p}=t,_=wo(xl,n),[w,b]=x.useState(null),[S,M]=x.useState(null),C=wt(e,ie=>b(ie)),[P,A]=x.useState(null),[E,L]=x.useState(null),O=Zg(n),[k,j]=x.useState(!1),$=x.useRef(!1);x.useEffect(()=>{if(w)return Pg(w)},[w]),wg();const U=x.useCallback(ie=>{const[Me,...Ue]=O().map(ve=>ve.ref.current),[ce]=Ue.slice(-1),me=document.activeElement;for(const ve of ie)if(ve===me||(ve==null||ve.scrollIntoView({block:"nearest"}),ve===Me&&S&&(S.scrollTop=0),ve===ce&&S&&(S.scrollTop=S.scrollHeight),ve==null||ve.focus(),document.activeElement!==me))return},[O,S]),X=x.useCallback(()=>U([P,w]),[U,P,w]);x.useEffect(()=>{k&&X()},[k,X]);const{onOpenChange:z,triggerPointerDownPosRef:V}=_;x.useEffect(()=>{if(w){let ie={x:0,y:0};const Me=ce=>{var me,ve;ie={x:Math.abs(Math.round(ce.pageX)-(((me=V.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((ve=V.current)==null?void 0:ve.y)??0))}},Ue=ce=>{ie.x<=10&&ie.y<=10?ce.preventDefault():w.contains(ce.target)||z(!1),document.removeEventListener("pointermove",Me),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",Ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",Ue,{capture:!0})}}},[w,z,V]),x.useEffect(()=>{const ie=()=>z(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[z]);const[ee,de]=wF(ie=>{const Me=O().filter(me=>!me.disabled),Ue=Me.find(me=>me.ref.current===document.activeElement),ce=bF(Me,ie,Ue);ce&&setTimeout(()=>ce.ref.current.focus())}),Ee=x.useCallback((ie,Me,Ue)=>{const ce=!$.current&&!Ue;(_.value!==void 0&&_.value===Me||ce)&&(A(ie),ce&&($.current=!0))},[_.value]),Ne=x.useCallback(()=>w==null?void 0:w.focus(),[w]),ne=x.useCallback((ie,Me,Ue)=>{const ce=!$.current&&!Ue;(_.value!==void 0&&_.value===Me||ce)&&L(ie)},[_.value]),fe=r==="popper"?o0:sF,xe=fe===o0?{side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:v,avoidCollisions:g}:{};return l.jsx(rF,{scope:n,content:w,viewport:S,onViewportChange:M,itemRefCallback:Ee,selectedItem:P,onItemLeave:Ne,itemTextRefCallback:ne,focusSelectedItem:X,selectedItemText:E,position:r,isPositioned:k,searchRef:ee,children:l.jsx(Lf,{as:Js,allowPinchZoom:!0,children:l.jsx(Rf,{asChild:!0,trapped:_.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:Ce(i,ie=>{var Me;(Me=_.trigger)==null||Me.focus({preventScroll:!0}),ie.preventDefault()}),children:l.jsx(El,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:l.jsx(fe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ie=>ie.preventDefault(),...p,...xe,onPlaced:()=>j(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...p.style},onKeyDown:Ce(p.onKeyDown,ie=>{const Me=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!Me&&ie.key.length===1&&de(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let ce=O().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const me=ie.target,ve=ce.indexOf(me);ce=ce.slice(ve+1)}setTimeout(()=>U(ce)),ie.preventDefault()}})})})})})})});iF.displayName=$ee;var qee="SelectItemAlignedPosition",sF=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=wo(xl,n),a=bo(xl,n),[o,c]=x.useState(null),[u,d]=x.useState(null),f=wt(e,C=>d(C)),h=Zg(n),m=x.useRef(!1),y=x.useRef(!0),{viewport:v,selectedItem:g,selectedItemText:p,focusSelectedItem:_}=a,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&u&&v&&g&&p){const C=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),A=s.valueNode.getBoundingClientRect(),E=p.getBoundingClientRect();if(s.dir!=="rtl"){const me=E.left-P.left,ve=A.left-me,q=C.left-ve,I=C.width+q,qe=Math.max(I,P.width),W=window.innerWidth-Ei,he=qT(ve,[Ei,Math.max(Ei,W-qe)]);o.style.minWidth=I+"px",o.style.left=he+"px"}else{const me=P.right-E.right,ve=window.innerWidth-A.right-me,q=window.innerWidth-C.right-ve,I=C.width+q,qe=Math.max(I,P.width),W=window.innerWidth-Ei,he=qT(ve,[Ei,Math.max(Ei,W-qe)]);o.style.minWidth=I+"px",o.style.right=he+"px"}const L=h(),O=window.innerHeight-Ei*2,k=v.scrollHeight,j=window.getComputedStyle(u),$=parseInt(j.borderTopWidth,10),U=parseInt(j.paddingTop,10),X=parseInt(j.borderBottomWidth,10),z=parseInt(j.paddingBottom,10),V=$+U+k+z+X,ee=Math.min(g.offsetHeight*5,V),de=window.getComputedStyle(v),Ee=parseInt(de.paddingTop,10),Ne=parseInt(de.paddingBottom,10),ne=C.top+C.height/2-Ei,fe=O-ne,xe=g.offsetHeight/2,ie=g.offsetTop+xe,Me=$+U+ie,Ue=V-Me;if(Me<=ne){const me=L.length>0&&g===L[L.length-1].ref.current;o.style.bottom="0px";const ve=u.clientHeight-v.offsetTop-v.offsetHeight,q=Math.max(fe,xe+(me?Ne:0)+ve+X),I=Me+q;o.style.height=I+"px"}else{const me=L.length>0&&g===L[0].ref.current;o.style.top="0px";const q=Math.max(ne,$+v.offsetTop+(me?Ee:0)+xe)+Ue;o.style.height=q+"px",v.scrollTop=Me-ne+v.offsetTop}o.style.margin=`${Ei}px 0`,o.style.minHeight=ee+"px",o.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,o,u,v,g,p,s.dir,r]);ir(()=>w(),[w]);const[b,S]=x.useState();ir(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const M=x.useCallback(C=>{C&&y.current===!0&&(w(),_==null||_(),y.current=!1)},[w,_]);return l.jsx(Zee,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:M,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:l.jsx(Ke.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});sF.displayName=qee;var Xee="SelectPopperPosition",o0=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Ei,...s}=t,a=Kg(n);return l.jsx(Tg,{...a,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});o0.displayName=Xee;var[Zee,zb]=Ru(xl,{}),l0="SelectViewport",aF=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=bo(l0,n),a=zb(l0,n),o=wt(e,s.onViewportChange),c=x.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Xg.Slot,{scope:n,children:l.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ce(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const y=window.innerHeight-Ei*2,v=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),p=Math.max(v,g);if(p<y){const _=p+m,w=Math.min(y,_),b=_-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});aF.displayName=l0;var oF="SelectGroup",[Kee,Yee]=Ru(oF),Qee=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=hi();return l.jsx(Kee,{scope:n,id:i,children:l.jsx(Ke.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Qee.displayName=oF;var lF="SelectLabel",cF=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Yee(lF,n);return l.jsx(Ke.div,{id:i.id,...r,ref:e})});cF.displayName=lF;var Zm="SelectItem",[Jee,uF]=Ru(Zm),dF=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=t,o=wo(Zm,n),c=bo(Zm,n),u=o.value===r,[d,f]=x.useState(s??""),[h,m]=x.useState(!1),y=wt(e,_=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,_,r,i)}),v=hi(),g=x.useRef("touch"),p=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(Jee,{scope:n,value:r,disabled:i,textId:v,isSelected:u,onItemTextChange:x.useCallback(_=>{f(w=>w||((_==null?void 0:_.textContent)??"").trim())},[]),children:l.jsx(Xg.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:l.jsx(Ke.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:y,onFocus:Ce(a.onFocus,()=>m(!0)),onBlur:Ce(a.onBlur,()=>m(!1)),onClick:Ce(a.onClick,()=>{g.current!=="mouse"&&p()}),onPointerUp:Ce(a.onPointerUp,()=>{g.current==="mouse"&&p()}),onPointerDown:Ce(a.onPointerDown,_=>{g.current=_.pointerType}),onPointerMove:Ce(a.onPointerMove,_=>{var w;g.current=_.pointerType,i?(w=c.onItemLeave)==null||w.call(c):g.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ce(a.onPointerLeave,_=>{var w;_.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Ce(a.onKeyDown,_=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&_.key===" "||(Fee.includes(_.key)&&p(),_.key===" "&&_.preventDefault())})})})})});dF.displayName=Zm;var fd="SelectItemText",fF=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,a=wo(fd,n),o=bo(fd,n),c=uF(fd,n),u=Hee(fd,n),[d,f]=x.useState(null),h=wt(e,p=>f(p),c.onItemTextChange,p=>{var _;return(_=o.itemTextRefCallback)==null?void 0:_.call(o,p,c.value,c.disabled)}),m=d==null?void 0:d.textContent,y=x.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:g}=u;return ir(()=>(v(y),()=>g(y)),[v,g,y]),l.jsxs(l.Fragment,{children:[l.jsx(Ke.span,{id:c.textId,...s,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?bl.createPortal(s.children,a.valueNode):null]})});fF.displayName=fd;var hF="SelectItemIndicator",pF=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return uF(hF,n).isSelected?l.jsx(Ke.span,{"aria-hidden":!0,...r,ref:e}):null});pF.displayName=hF;var c0="SelectScrollUpButton",mF=x.forwardRef((t,e)=>{const n=bo(c0,t.__scopeSelect),r=zb(c0,t.__scopeSelect),[i,s]=x.useState(!1),a=wt(e,r.onScrollButtonChange);return ir(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?l.jsx(vF,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});mF.displayName=c0;var u0="SelectScrollDownButton",gF=x.forwardRef((t,e)=>{const n=bo(u0,t.__scopeSelect),r=zb(u0,t.__scopeSelect),[i,s]=x.useState(!1),a=wt(e,r.onScrollButtonChange);return ir(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?l.jsx(vF,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});gF.displayName=u0;var vF=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=bo("SelectScrollButton",n),a=x.useRef(null),o=Zg(n),c=x.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),ir(()=>{var d;const u=o().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),l.jsx(Ke.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ce(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Ce(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Ce(i.onPointerLeave,()=>{c()})})}),ete="SelectSeparator",yF=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(Ke.div,{"aria-hidden":!0,...r,ref:e})});yF.displayName=ete;var d0="SelectArrow",tte=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Kg(n),s=wo(d0,n),a=bo(d0,n);return s.open&&a.position==="popper"?l.jsx(Cg,{...i,...r,ref:e}):null});tte.displayName=d0;function xF(t){return t===""||t===void 0}var _F=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=x.useRef(null),s=wt(e,i),a=tb(n);return x.useEffect(()=>{const o=i.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&d){const f=new Event("change",{bubbles:!0});d.call(o,n),o.dispatchEvent(f)}},[a,n]),l.jsx(Pf,{asChild:!0,children:l.jsx("select",{...r,ref:s,defaultValue:n})})});_F.displayName="BubbleSelect";function wF(t){const e=rr(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(a=>{const o=n.current+a;e(o),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function bF(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let a=nte(t,Math.max(s,0));i.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function nte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var rte=ZO,SF=YO,ite=JO,ste=eF,ate=tF,EF=nF,ote=aF,MF=cF,TF=dF,lte=fF,cte=pF,CF=mF,AF=gF,NF=yF;const sp=rte,ap=ite,hd=x.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(SF,{ref:r,className:Re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(ste,{asChild:!0,children:l.jsx(_w,{className:"h-4 w-4 opacity-50"})})]}));hd.displayName=SF.displayName;const PF=x.forwardRef(({className:t,...e},n)=>l.jsx(CF,{ref:n,className:Re("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(wV,{className:"h-4 w-4"})}));PF.displayName=CF.displayName;const RF=x.forwardRef(({className:t,...e},n)=>l.jsx(AF,{ref:n,className:Re("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(_w,{className:"h-4 w-4"})}));RF.displayName=AF.displayName;const pd=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>l.jsx(ate,{children:l.jsxs(EF,{ref:i,className:Re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(PF,{}),l.jsx(ote,{className:Re("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(RF,{})]})}));pd.displayName=EF.displayName;const ute=x.forwardRef(({className:t,...e},n)=>l.jsx(MF,{ref:n,className:Re("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));ute.displayName=MF.displayName;const Hn=x.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(TF,{ref:r,className:Re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(cte,{children:l.jsx(ul,{className:"h-4 w-4"})})}),l.jsx(lte,{children:e})]}));Hn.displayName=TF.displayName;const dte=x.forwardRef(({className:t,...e},n)=>l.jsx(NF,{ref:n,className:Re("-mx-1 my-1 h-px bg-muted",t),...e}));dte.displayName=NF.displayName;function fte({isOpen:t,onClose:e,onSuccess:n}){const{t:r}=on(),{user:i}=Al(),{toast:s}=jr(),a=x.useRef(null),[o,c]=x.useState([]),[u,d]=x.useState(!1),[f,h]=x.useState(0),[m,y]=x.useState(0),{isUploading:v,uploadProgress:g,upload:p}=ef({onSuccess:E=>{h(L=>L+1),s({title:r("upload_success")||"File uploaded successfully",description:E.filename}),f+1===o.length&&setTimeout(()=>{n&&n(),A()},1e3)},onError:E=>{y(L=>L+1),s({title:r("upload_failed")||"Upload failed",description:E.message,variant:"destructive"})}}),_=f+m===o.length&&o.length>0,w=E=>{if(E.target.files&&E.target.files.length>0){const L=Array.from(E.target.files);c(L)}},b=()=>{a.current&&a.current.click()},S=E=>{E.preventDefault(),d(!0)},M=()=>{d(!1)},C=E=>{if(E.preventDefault(),d(!1),E.dataTransfer.files&&E.dataTransfer.files.length>0){const L=Array.from(E.dataTransfer.files).filter(O=>{var j;const k=(j=O.name.split(".").pop())==null?void 0:j.toLowerCase();return k==="stp"||k==="step"||k==="stl"||k==="dxf"||k==="dwg"});L.length>0&&c(L)}},P=()=>{o.length!==0&&(h(0),y(0),o.forEach(E=>{var k;const L=(k=E.name.split(".").pop())==null?void 0:k.toLowerCase();let O="/api/models/upload";L==="stl"?O="/api/models/upload-stl":(L==="dxf"||L==="dwg")&&(O="/api/models/upload-cad"),i&&i.email?O+=`?email=${encodeURIComponent(i.email)}&autoShare=false`:O+="?autoShare=false",p(E,O)}))},A=()=>{c([]),h(0),y(0),e()};return l.jsx(fs,{open:t,onOpenChange:A,children:l.jsxs(zi,{className:"sm:max-w-md",children:[l.jsx(Oi,{children:l.jsx(Fi,{className:"text-xl",children:"Upload CAD Files"})}),v&&!_?l.jsxs("div",{className:"py-6",children:[l.jsx("div",{className:"flex items-center justify-center mb-4",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),l.jsx("h3",{className:"text-center font-medium text-lg mb-2",children:"Uploading Files"}),l.jsxs("p",{className:"text-center text-gray-500 mb-4",children:["Uploaded: ",f,"/",o.length]}),l.jsx(Ig,{value:g,className:"h-2"})]}):_?l.jsx("div",{className:"py-6",children:l.jsxs("div",{className:"flex flex-col items-center justify-center mb-4",children:[m===0?l.jsx(ww,{className:"h-12 w-12 text-green-500 mb-2"}):l.jsx(Mw,{className:"h-12 w-12 text-amber-500 mb-2"}),l.jsx("h3",{className:"text-center font-medium text-lg",children:m===0?"Upload Complete":"Upload Partially Complete"}),l.jsxs("p",{className:"text-center text-gray-500 mt-2",children:["Uploaded: ",f,"/",o.length,m>0&&l.jsxs("span",{className:"text-red-500 ml-2",children:["(",m," failed)"]})]})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`border-2 border-dashed ${u?"border-primary":"border-gray-300"} rounded-md p-6 flex flex-col items-center justify-center transition-colors`,onDragOver:S,onDragLeave:M,onDrop:C,children:[l.jsx(r2,{className:"h-10 w-10 text-gray-400 mb-4"}),o.length>0?l.jsxs("div",{className:"text-sm text-gray-700 max-h-40 overflow-y-auto w-full",children:[l.jsxs("p",{className:"font-medium mb-2",children:["Selected Files: ",o.length]}),l.jsx("ul",{className:"list-disc pl-5",children:o.map((E,L)=>l.jsxs("li",{className:"truncate",children:[E.name," (",(E.size/1024/1024).toFixed(2)," MB)"]},L))})]}):l.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:"Upload CAD files to your library without sharing them"}),l.jsx("input",{type:"file",ref:a,className:"hidden",accept:".stp,.step,.stl,.dxf,.dwg",onChange:w,multiple:!0}),l.jsx(ye,{onClick:b,className:"bg-primary hover:bg-blue-700 mt-2",children:r("selectFile")})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Supported formats: STEP (AP203, AP214), STL, DXF, DWG"}),l.jsxs(Gs,{className:"mt-4",children:[l.jsx(ye,{variant:"outline",onClick:A,children:"Cancel"}),l.jsx(ye,{disabled:o.length===0||v,onClick:P,className:"bg-primary hover:bg-blue-700",children:v?l.jsxs(l.Fragment,{children:[l.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload"})]})]})]})})}function DF({modelId:t,filename:e,format:n,className:r="w-16 h-16"}){const[i,s]=x.useState(!1),[a,o]=x.useState(!0),[c,u]=x.useState(Date.now());Sl();const d=`/api/models/${t}/thumbnail?t=${c}`,f=()=>{u(Date.now()),s(!1),o(!0)};x.useEffect(()=>{const v=()=>{f()};return window.addEventListener(`thumbnail-updated-${t}`,v),()=>{window.removeEventListener(`thumbnail-updated-${t}`,v)}},[t]),x.useEffect(()=>{s(!1),o(!0)},[t]);const h=()=>{s(!0),o(!1)},m=()=>{o(!1)},y=()=>{if(!n)return l.jsx(no,{className:"w-8 h-8 text-muted-foreground"});const v=n.toLowerCase();return v==="step"||v==="stp"?l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:l.jsx("span",{className:"text-xs font-semibold text-blue-700",children:"3D"})}):v==="stl"?l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded flex items-center justify-center",children:l.jsx("span",{className:"text-xs font-semibold text-green-700",children:"STL"})}):v==="dxf"||v==="dwg"?l.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded flex items-center justify-center",children:l.jsx("span",{className:"text-xs font-semibold text-orange-700",children:"2D"})}):l.jsx(no,{className:"w-8 h-8 text-muted-foreground"})};return i?l.jsx("div",{className:`${r} bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300`,children:y()}):l.jsxs("div",{className:`${r} relative bg-gray-100 rounded-lg overflow-hidden border`,children:[a&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(yg,{className:"w-8 h-8 text-muted-foreground animate-pulse"})}),l.jsx("img",{src:d,alt:`Thumbnail for ${e}`,className:"w-full h-full object-cover",onError:h,onLoad:m,style:{display:a?"none":"block"}})]})}const Ob=x.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:Re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Ob.displayName="Textarea";function hte({modelId:t,modelName:e,onThumbnailUpdate:n}){const[r,i]=x.useState(!1),[s,a]=x.useState(null),[o,c]=x.useState(0),[u,d]=x.useState(0),f=x.useRef(null),{toast:h}=jr(),{t:m}=on();Sl();const{data:y=[],isLoading:v,refetch:g}=mr({queryKey:["/api/models",t,"gallery"],queryFn:async()=>{const S=await Lt("GET",`/api/models/${t}/gallery`);if(!S.ok)throw new Error("Failed to fetch gallery images");return await S.json()}});tn.useEffect(()=>{const S=y.find(M=>M.isThumbnail);a(S?`/api/models/${t}/gallery/${S.id}`:null)},[y,t]),tn.useEffect(()=>{const S=()=>{g()};return window.addEventListener(`gallery-updated-${t}`,S),()=>{window.removeEventListener(`gallery-updated-${t}`,S)}},[t,g]);const p=hr({mutationFn:async S=>{const M=new FormData;for(let P=0;P<S.length;P++)M.append("images",S[P]);const C=await fetch(`/api/models/${t}/gallery`,{method:"POST",body:M});if(!C.ok)throw new Error("Failed to upload images");return C.json()},onSuccess:()=>{g(),n==null||n(),d(0),h({title:m("gallery_uploaded_successfully"),description:m("images_uploaded_to_gallery")})},onError:S=>{d(0),h({title:m("gallery_upload_failed"),description:S.message,variant:"destructive"})}}),_=hr({mutationFn:async S=>{const M=await Lt("PUT",`/api/models/${t}/gallery/${S}/thumbnail`);if(!M.ok)throw new Error("Failed to set thumbnail");return M.json()},onSuccess:()=>{g(),n==null||n(),c(S=>S+1),h({title:m("thumbnail_updated_successfully"),description:m("new_thumbnail_set")})},onError:S=>{h({title:m("error"),description:S.message,variant:"destructive"})}}),w=hr({mutationFn:async S=>{const M=await Lt("DELETE",`/api/models/${t}/gallery/${S}`);if(!M.ok)throw new Error("Failed to delete image");return M.json()},onSuccess:()=>{g(),n==null||n(),h({title:m("image_deleted_successfully"),description:m("image_removed_from_gallery")})},onError:S=>{h({title:m("image_delete_failed"),description:S.message,variant:"destructive"})}}),b=S=>{const M=S.target.files;M&&M.length>0&&(d(10),p.mutate(M))};return l.jsxs("div",{className:"space-y-6 border-t pt-6 mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h5",{className:"text-lg font-medium",children:m("gallery_management")}),l.jsx("p",{className:"text-sm text-muted-foreground",children:m("manage_model_gallery",{modelName:e})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("h6",{className:"font-medium text-sm",children:m("current_thumbnail")}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"w-full h-32 bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300 relative overflow-hidden",children:[s?l.jsx("img",{src:`${s}?v=${o}`,alt:"Current thumbnail",className:"w-full h-full object-cover rounded-lg"},o):l.jsx(yg,{className:"h-8 w-8 text-gray-400"}),s&&l.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-1 rounded",children:m("active")})]}),l.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:m(s?"thumbnail_active":"no_thumbnail_set")}),l.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"mt-2 w-full",children:[l.jsx(e2,{className:"h-4 w-4 mr-2"}),m("capture_screenshot")]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h6",{className:"font-medium text-sm",children:m("upload_new_images")}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:`gallery-upload-${t}`,className:"text-sm",children:m("select_image_files")}),l.jsx(_t,{id:`gallery-upload-${t}`,ref:f,type:"file",accept:"image/*",multiple:!0,onChange:b,disabled:p.isPending,className:"w-full"}),u>0&&l.jsx(Ig,{value:u,className:"w-full"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:m("click_set_thumbnail_note")})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h6",{className:"font-medium text-sm",children:m("gallery_images")}),l.jsx("div",{className:"text-2xl font-bold text-primary",children:y.length}),l.jsx("p",{className:"text-sm text-muted-foreground",children:y.length===0?m("no_gallery_images"):m("images_in_gallery")})]})]}),y.length>0&&l.jsxs("div",{className:"space-y-3",children:[l.jsx("h6",{className:"font-medium text-sm",children:m("uploaded_images")}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:y.map(S=>l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:[l.jsx("img",{src:`/api/models/${t}/gallery/${S.id}`,alt:S.originalName,className:"w-full h-full object-cover"}),S.isThumbnail&&l.jsx("div",{className:"absolute top-1 right-1 bg-green-500 text-white text-xs px-1 rounded",children:m("thumbnail")})]}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs(ye,{size:"sm",variant:"secondary",onClick:()=>_.mutate(S.id),disabled:_.isPending||S.isThumbnail,className:"text-xs px-2 py-1",children:[l.jsx(IV,{className:"h-3 w-3 mr-1"}),m("set_as_thumbnail")]}),l.jsx(ye,{size:"sm",variant:"destructive",onClick:()=>w.mutate(S.id),disabled:w.isPending,className:"text-xs px-2 py-1",children:l.jsx(Ew,{className:"h-3 w-3"})})]})}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:S.originalName})]},S.id))})]}),r&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white rounded-lg w-[90vw] h-[90vh] max-w-6xl max-h-[800px] relative",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:[m("capture_screenshot")," - ",e]}),l.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-8 w-8 p-0",children:l.jsx(ou,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"p-4 h-[calc(100%-120px)]",children:l.jsx(Lg,{modelId:t,isPublic:!1,allowScreenshots:!0})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gray-50 border-t rounded-b-lg",children:l.jsx("p",{className:"text-sm text-gray-600",children:m("screenshot_instructions")})})]})})]})}function XT(){const{t,language:e}=on(),{user:n}=Al(),{toast:r}=jr(),[i,s]=kn(),[a,o]=x.useState(null),[c,u]=x.useState(""),[d,f]=x.useState(!1),[h,m]=x.useState(!1),[y,v]=x.useState(!1),[g,p]=x.useState(""),[_,w]=x.useState(!1),[b,S]=x.useState(!1),[M,C]=x.useState(null),[P,A]=x.useState({}),[E,L]=x.useState({}),[O,k]=x.useState({});x.useState(!1),x.useState(null);const{isUploading:j,uploadProgress:$,upload:U}=ef({onSuccess:W=>{w(!1),r({title:t("upload_success"),description:W.filename}),V()},onError:W=>{r({title:t("upload_failed"),description:W.message,variant:"destructive"})}}),{data:X,isLoading:z,refetch:V}=mr({queryKey:["/api/client/models"],queryFn:async()=>{const W=await Lt("GET","/api/client/models");if(!W.ok)throw new Error("Błąd pobierania modeli");return await W.json()}}),{data:ee=[]}=mr({queryKey:["/api/categories"],enabled:!!n}),{data:de={}}=mr({queryKey:["/api/models/tags-descriptions"],queryFn:async()=>{if(!X||X.length===0)return{};const W={};for(const he of X)try{const R=await Lt("GET",`/api/models/${he.id}/tags`),B=R.ok?await R.json():[],H=await Lt("GET",`/api/models/${he.id}/description`),N=H.ok?await H.json():null;W[he.id]={tags:B,description:N}}catch(R){console.error(`Error fetching data for model ${he.id}:`,R)}return W},enabled:!!X&&X.length>0});x.useEffect(()=>{if(de&&Object.keys(de).length>0){const W={},he={};Object.entries(de).forEach(([R,B])=>{if(B.description&&(B.description.descriptionEn&&(W[`${R}_en`]=B.description.descriptionEn),B.description.descriptionPl&&(W[`${R}_pl`]=B.description.descriptionPl),B.description.descriptionCs&&(W[`${R}_cs`]=B.description.descriptionCs),B.description.descriptionDe&&(W[`${R}_de`]=B.description.descriptionDe),B.description.descriptionFr&&(W[`${R}_fr`]=B.description.descriptionFr),B.description.descriptionEs&&(W[`${R}_es`]=B.description.descriptionEs)),B.tags&&B.tags.length>0){const H={en:B.tags.map(N=>N.nameEn).filter(Boolean).join(", "),pl:B.tags.map(N=>N.namePl).filter(Boolean).join(", "),cs:B.tags.map(N=>N.nameCs).filter(Boolean).join(", "),de:B.tags.map(N=>N.nameDe).filter(Boolean).join(", "),fr:B.tags.map(N=>N.nameFr).filter(Boolean).join(", "),es:B.tags.map(N=>N.nameEs).filter(Boolean).join(", ")};Object.entries(H).forEach(([N,T])=>{T&&(he[`${R}_${N}`]=T)})}}),A(R=>({...R,...W})),L(R=>({...R,...he}))}},[de]);const Ee=hr({mutationFn:async({modelId:W,password:he})=>{const R=await Lt("POST",`/api/client/shared-models/${W}/password`,{password:he});if(!R.ok){const B=await R.json();throw new Error(B.error||"Błąd zmiany hasła")}return await R.json()},onSuccess:()=>{r({title:t("password_updated"),description:t("password_update_success")}),f(!1),u(""),V()},onError:W=>{r({title:t("password_update_error"),description:W.message,variant:"destructive"})}}),Ne=hr({mutationFn:async W=>{const he=await Lt("DELETE",`/api/client/models/${W}`);if(!he.ok){const R=await he.json();throw new Error(R.error||"Błąd usuwania modelu")}return await he.json()},onSuccess:()=>{r({title:t("model_deleted"),description:t("model_delete_success")}),m(!1),V()},onError:W=>{r({title:t("model_delete_error"),description:W.message,variant:"destructive"})}}),ne=hr({mutationFn:async W=>{const he=await Lt("POST",`/api/models/${W}/share`,{modelId:W,enableSharing:!0,email:n==null?void 0:n.email});if(!he.ok){const R=await he.json();throw new Error(R.error||"Błąd podczas włączania udostępniania")}return await he.json()},onSuccess:W=>{r({title:t("sharing_enabled"),description:t("sharing_enabled_success")}),V()},onError:W=>{r({title:t("sharing_error"),description:W.message,variant:"destructive"})}}),fe=hr({mutationFn:async W=>{const he=await Lt("POST",`/api/models/${W}/share`,{modelId:W,enableSharing:!1});if(!he.ok){const R=await he.json();throw new Error(R.error||"Błąd podczas wyłączania udostępniania")}return await he.json()},onSuccess:()=>{r({title:t("sharing_disabled"),description:t("sharing_disabled_success")}),V()},onError:W=>{r({title:t("sharing_error"),description:W.message,variant:"destructive"})}}),xe=hr({mutationFn:async({modelId:W,categoryId:he})=>{const R=await Lt("PUT",`/api/models/${W}/category`,{categoryId:he});if(!R.ok)throw new Error("Błąd podczas aktualizacji kategorii");return await R.json()},onSuccess:()=>{r({title:t("success"),description:"Kategoria została zaktualizowana"}),V()},onError:W=>{r({title:t("error"),description:W.message,variant:"destructive"})}}),ie=hr({mutationFn:async({modelId:W,isPublic:he})=>{const R=await Lt("POST",`/api/client/models/${W}/public-library`,{isPublic:he});if(!R.ok){const B=await R.json();throw new Error(B.error||"Błąd podczas aktualizacji statusu publicznej biblioteki")}return await R.json()},onSuccess:(W,he)=>{r({title:he.isPublic?t("public_library_added"):t("public_library_removed"),description:he.isPublic?t("public_library_added_message"):t("public_library_removed_message")}),V()},onError:(W,he)=>{W.message.includes("chronionego hasłem")||W.message.includes("password-protected")||W.message.includes("chráněný heslem")||W.message.includes("Passwort-geschützt")||W.message.includes("protégé par mot de passe")?r({title:t("error"),description:t("password_protected_public_error"),variant:"destructive"}):r({title:t("error"),description:W.message,variant:"destructive"})}}),Me=W=>{W.preventDefault(),a&&Ee.mutate({modelId:a.id,password:c})},Ue=()=>{a&&Ne.mutate(a.id)},ce=W=>{if(W.shareId&&W.shareEnabled){const R=`${window.location.origin}/shared/${W.shareId}`;p(R),o(W),v(!0)}else r({title:t("link_error"),description:t("model_not_shared"),variant:"destructive"})},me=()=>{navigator.clipboard.writeText(g).then(()=>{r({title:t("link_copied"),description:t("link_copied_to_clipboard")})})},ve=()=>{window.open(g,"_blank")},q=W=>{const he=i.split("/")[1],B=["en","pl","cs","de","fr"].includes(he)?`/${he}?id=${W}`:`/?id=${W}`;s(B)};if(z)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(mn,{className:"h-8 w-8 animate-spin text-border"})});const I=(W,he)=>{var N;const R=(N=W.name.split(".").pop())==null?void 0:N.toLowerCase();let B="/api/models/upload";R==="stl"?B="/api/models/upload-stl":(R==="dxf"||R==="dwg")&&(B="/api/models/upload-cad"),console.log("[CLIENT] Przygotowanie do przesłania pliku:",{filename:W.name,email:he||(n==null?void 0:n.email)||"brak",fileSize:W.size,isLoggedIn:!!n});const H=[];he?(H.push(`email=${encodeURIComponent(he)}`),console.log("[CLIENT] Dodano email otrzymany z UploadModal")):n!=null&&n.email&&(H.push(`email=${encodeURIComponent(n.email)}`),console.log("[CLIENT] Dodano email zalogowanego użytkownika")),H.push("autoShare=true"),console.log("[CLIENT] Dodano parametr autoShare=true"),H.length>0&&(B+=`?${H.join("&")}`),console.log("[CLIENT] Finalny URL uploadu:",B),U(W,B)},qe=W=>{const he=`/api/models/${W.id}/file`,R=document.createElement("a");R.href=he,R.download=W.filename,document.body.appendChild(R),R.click(),document.body.removeChild(R)};return l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>w(!0)}),l.jsxs("main",{className:"flex-grow flex flex-col",children:[l.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:l.jsxs("div",{className:"max-w-[1700px] mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center",children:[l.jsx(ye,{variant:"ghost",asChild:!0,className:"mr-4",children:l.jsxs(ai,{href:"/",children:[l.jsx(um,{className:"h-4 w-4 mr-2"}),t("back_to_home")]})}),l.jsx("h1",{className:"text-xl font-medium text-gray-800",children:t("client_dashboard")}),l.jsxs("p",{className:"ml-4 text-muted-foreground",children:[t("welcome"),", ",(n==null?void 0:n.fullName)||(n==null?void 0:n.email)||(n==null?void 0:n.username)]})]})}),l.jsxs("div",{className:"max-w-[1700px] mx-auto px-4 sm:px-6 lg:px-8 py-6 w-full",children:[l.jsxs(fn,{className:"mb-6",children:[l.jsxs(Pn,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(Rn,{children:t("your_cad_library")}),l.jsx(vr,{children:t("models_uploaded_to_account")})]}),l.jsxs("div",{className:"flex flex-row space-x-2",children:[l.jsxs(ye,{onClick:()=>S(!0),variant:"outline",children:[l.jsx(Ep,{className:"mr-2 h-4 w-4"}),"Upload to library"]}),l.jsxs(ye,{onClick:()=>w(!0),children:[l.jsx(AE,{className:"mr-2 h-4 w-4"}),"Upload and share"]}),l.jsx(ye,{variant:"outline",asChild:!0,children:l.jsxs(ai,{href:"/cad-library",children:[l.jsx(dm,{className:"mr-2 h-4 w-4"}),t("library.title")]})})]})]}),l.jsx(hn,{children:X&&X.length>0?l.jsx("div",{className:"text-muted-foreground",children:t("models_count_in_library",{count:X.length})}):l.jsx("div",{className:"text-muted-foreground",children:t("no_models_in_library")})})]}),l.jsxs(fn,{className:"mb-6",children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:t("shared_models")}),l.jsx(vr,{children:t("shared_models_description")})]}),l.jsx(hn,{children:X&&X.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs(el,{className:"w-full",children:[l.jsx(tl,{children:l.jsxs(pr,{children:[l.jsx(Ct,{children:t("filename")}),l.jsx(Ct,{children:t("upload_thumbnail")}),l.jsx(Ct,{children:t("category")}),l.jsx(Ct,{children:t("shared_status")}),l.jsx(Ct,{children:t("last_accessed")}),l.jsx(Ct,{children:t("add_to_cad_library")}),l.jsx(Ct,{className:"text-right",children:t("actions")})]})}),l.jsx(nl,{children:X.flatMap(W=>{var B,H;const he=l.jsxs(pr,{children:[l.jsx(Et,{className:"font-medium",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(DF,{modelId:W.id,filename:W.filename,className:"w-12 h-12 flex-shrink-0"}),l.jsx("span",{className:"truncate",children:W.filename})]})}),l.jsx(Et,{children:l.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>{C(M===W.id?null:W.id),O[W.id]||k(N=>({...N,[W.id]:e}))},className:"w-full",children:[l.jsx(yg,{className:"h-4 w-4 mr-2"}),t("model_details")]})}),l.jsx(Et,{children:l.jsxs(sp,{value:((B=W.categoryId)==null?void 0:B.toString())||"none",onValueChange:N=>{const T=N==="none"?null:parseInt(N);xe.mutate({modelId:W.id,categoryId:T})},disabled:xe.isPending,children:[l.jsx(hd,{className:"w-32",children:l.jsx(ap,{placeholder:t("select_category")})}),l.jsxs(pd,{children:[l.jsx(Hn,{value:"none",children:t("no_category")}),ee.map(N=>l.jsx(Hn,{value:N.id.toString(),children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:N.color}}),l.jsx("span",{className:"truncate",children:t(N.slug)||N.nameEn})]})},N.id))]})]})}),l.jsx(Et,{children:l.jsxs("div",{className:"flex items-center",children:[W.shareEnabled?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100",children:t("active")}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100",children:t("inactive")}),W.hasPassword&&l.jsx($x,{className:"ml-2 h-4 w-4 text-muted-foreground"})]})}),l.jsx(Et,{children:W.shareLastAccessed?new Date(W.shareLastAccessed).toLocaleDateString():"-"}),l.jsx(Et,{children:l.jsx(rb,{checked:W.isPublic||!1,onCheckedChange:async N=>{if(N){if(!W.categoryId){r({title:t("error"),description:t("category_required_for_public"),variant:"destructive"});return}try{if(!(await fetch(`/api/models/${W.id}/thumbnail`,{method:"HEAD"})).ok){r({title:t("error"),description:t("thumbnail_required_for_public"),variant:"destructive"});return}}catch{r({title:t("error"),description:t("thumbnail_required_for_public"),variant:"destructive"});return}}ie.mutate({modelId:W.id,isPublic:N})},className:W.isPublic&&W.hasPassword?"data-[state=checked]:bg-red-500":""})}),l.jsx(Et,{className:"text-right",children:l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsxs(ye,{variant:"outline",size:"icon",onClick:()=>qe(W),title:t("common.download")||"Download",className:"border-green-500 text-green-600 hover:bg-green-50 hover:text-green-700",children:[l.jsx(bw,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:t("common.download")||"Download"})]}),l.jsxs(ye,{variant:"outline",size:"icon",onClick:()=>q(W.id),title:t("view_model"),children:[l.jsx(Ep,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:t("view_model")})]}),W.shareEnabled&&W.shareId?l.jsxs(ye,{variant:"outline",size:"icon",onClick:()=>ce(W),title:t("view_share_link"),children:[l.jsx(Xd,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:t("view_share_link")})]}):l.jsxs(ye,{variant:"outline",size:"icon",onClick:()=>ne.mutate(W.id),disabled:ne.isPending,title:t("enable_sharing"),children:[l.jsx(AE,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:t("enable_sharing")})]}),l.jsxs(ye,{variant:"outline",size:"icon",onClick:()=>{o(W),f(!0)},title:t("change_password"),children:[l.jsx(jV,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:t("change_password")})]}),W.shareEnabled&&l.jsxs(ye,{variant:"outline",size:"icon",onClick:()=>fe.mutate(W.id),disabled:fe.isPending,title:t("disable_sharing"),children:[l.jsx(PV,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:t("disable_sharing")})]}),l.jsxs(ye,{variant:"destructive",size:"icon",onClick:()=>{o(W),m(!0)},title:t("delete"),children:[l.jsx(Ew,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:t("delete")})]})]})})]},W.id),R=M===W.id?l.jsx(pr,{children:l.jsx(Et,{colSpan:7,className:"bg-gray-50 p-0",children:l.jsxs("div",{className:"p-6 space-y-4 border-t",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h4",{className:"font-medium text-lg",children:[t("model_details")," - ",W.filename]}),l.jsx(ye,{variant:"outline",size:"sm",onClick:()=>C(null),children:t("close")})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(St,{className:"text-sm font-medium",children:t("category")}),l.jsxs(sp,{value:((H=W.categoryId)==null?void 0:H.toString())||"none",onValueChange:N=>{const T=N==="none"?null:parseInt(N);xe.mutate({modelId:W.id,categoryId:T})},disabled:xe.isPending,children:[l.jsx(hd,{className:"w-full",children:l.jsx(ap,{placeholder:t("select_category")})}),l.jsxs(pd,{children:[l.jsx(Hn,{value:"none",children:t("no_category")}),Array.isArray(ee)&&ee.map(N=>l.jsx(Hn,{value:N.id.toString(),children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:N.color}}),l.jsx("span",{className:"truncate",children:t(N.slug)||N.nameEn})]})},N.id))]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(St,{className:"text-sm font-medium",children:t("common.tags")}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(sp,{value:O[W.id]||e,onValueChange:N=>{k(T=>({...T,[W.id]:N}))},children:[l.jsx(hd,{className:"w-full",children:l.jsx(ap,{placeholder:t("select_language")})}),l.jsxs(pd,{children:[l.jsx(Hn,{value:"en",children:"English"}),l.jsx(Hn,{value:"pl",children:"Polski"}),l.jsx(Hn,{value:"cs",children:"Čeština"}),l.jsx(Hn,{value:"de",children:"Deutsch"}),l.jsx(Hn,{value:"fr",children:"Français"}),l.jsx(Hn,{value:"es",children:"Español"})]})]}),l.jsx(_t,{placeholder:t("enter_tags_placeholder"),value:E[`${W.id}_${O[W.id]||e}`]||"",onChange:N=>{const T=`${W.id}_${O[W.id]||e}`;L(F=>({...F,[T]:N.target.value}))},className:"w-full"}),l.jsx(ye,{size:"sm",onClick:async()=>{const N=O[W.id]||e,T=E[`${W.id}_${N}`];if(T!=null&&T.trim())try{if((await Lt("POST",`/api/models/${W.id}/tags-translate`,{tags:T.trim(),language:N})).ok)r({title:t("success"),description:t("tags_saved_successfully")}),Fa.invalidateQueries({queryKey:["/api/models/tags-descriptions"]}),Fa.invalidateQueries({queryKey:[`/api/models/${W.id}/tags`]});else throw new Error("Failed to save tags")}catch{r({title:t("error"),description:t("tags_save_failed"),variant:"destructive"})}},children:t("save_tags")}),l.jsx("p",{className:"text-xs text-muted-foreground",children:t("tags_help_text")})]})]})]}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx(St,{className:"text-sm font-medium",children:t("model_description")}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(sp,{value:O[W.id]||e,onValueChange:N=>{k(T=>({...T,[W.id]:N}))},children:[l.jsx(hd,{className:"w-full",children:l.jsx(ap,{placeholder:t("select_language")})}),l.jsxs(pd,{children:[l.jsx(Hn,{value:"en",children:"English"}),l.jsx(Hn,{value:"pl",children:"Polski"}),l.jsx(Hn,{value:"cs",children:"Čeština"}),l.jsx(Hn,{value:"de",children:"Deutsch"}),l.jsx(Hn,{value:"fr",children:"Français"}),l.jsx(Hn,{value:"es",children:"Español"})]})]}),l.jsx(Ob,{placeholder:t("enter_model_description_placeholder"),value:P[`${W.id}_${O[W.id]||e}`]||"",onChange:N=>{const T=`${W.id}_${O[W.id]||e}`;A(F=>({...F,[T]:N.target.value}))},rows:3,className:"w-full"}),l.jsx(ye,{size:"sm",onClick:async()=>{const N=O[W.id]||e,T=P[`${W.id}_${N}`];if(T!=null&&T.trim())try{if((await Lt("POST",`/api/models/${W.id}/description`,{description:T.trim(),language:N})).ok)r({title:t("success"),description:t("description_saved_successfully")}),Fa.invalidateQueries({queryKey:["/api/models/tags-descriptions"]}),Fa.invalidateQueries({queryKey:[`/api/models/${W.id}/description`]});else throw new Error("Failed to save description")}catch{r({title:t("error"),description:t("description_save_failed"),variant:"destructive"})}},children:t("save_description")})]})]})}),l.jsx("p",{className:"text-sm text-muted-foreground",children:t("auto_translation_note")}),l.jsx(hte,{modelId:W.id,modelName:W.filename})]})})},`${W.id}-expanded`):null;return[he,R].filter(Boolean)})})]})}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Ep,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),l.jsx("h3",{className:"text-lg font-medium",children:t("no_models")}),l.jsx("p",{className:"text-muted-foreground mt-2",children:t("no_models_description")})]})})]})]})]}),l.jsx(Ws,{modelName:t("client_dashboard"),partCount:(X==null?void 0:X.length)||0,entityCount:0}),l.jsx(fs,{open:d,onOpenChange:f,children:l.jsxs(zi,{children:[l.jsxs(Oi,{children:[l.jsx(Fi,{children:t("change_password")}),l.jsx(Za,{children:a==null?void 0:a.filename})]}),l.jsxs("form",{onSubmit:Me,children:[l.jsx("div",{className:"space-y-4 py-2",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"password",children:t("new_password")}),l.jsx(_t,{id:"password",type:"password",value:c,onChange:W=>u(W.target.value),placeholder:t("leave_empty_to_remove")})]})}),l.jsxs(Gs,{children:[l.jsx(ye,{type:"button",variant:"secondary",onClick:()=>f(!1),children:t("cancel")}),l.jsxs(ye,{type:"submit",disabled:Ee.isPending,children:[Ee.isPending?l.jsx(mn,{className:"h-4 w-4 animate-spin mr-2"}):null,t("save")]})]})]})]})}),l.jsx(fs,{open:h,onOpenChange:m,children:l.jsxs(zi,{children:[l.jsxs(Oi,{children:[l.jsx(Fi,{children:t("delete_model")}),l.jsx(Za,{children:t("delete_model_confirmation")})]}),l.jsx("div",{className:"py-2",children:l.jsx("p",{className:"font-medium",children:a==null?void 0:a.filename})}),l.jsxs(Gs,{children:[l.jsx(ye,{type:"button",variant:"secondary",onClick:()=>m(!1),children:t("cancel")}),l.jsxs(ye,{type:"button",variant:"destructive",onClick:Ue,disabled:Ne.isPending,children:[Ne.isPending?l.jsx(mn,{className:"h-4 w-4 animate-spin mr-2"}):null,t("delete")]})]})]})}),l.jsx(fs,{open:y,onOpenChange:v,children:l.jsxs(zi,{children:[l.jsxs(Oi,{children:[l.jsx(Fi,{children:t("shareLink")}),l.jsx(Za,{children:a==null?void 0:a.filename})]}),l.jsxs("div",{className:"py-4",children:[l.jsxs("div",{className:"flex space-x-2 items-center",children:[l.jsx(_t,{value:g,readOnly:!0,className:"flex-1"}),l.jsx(ye,{variant:"outline",size:"icon",onClick:me,children:l.jsx(fm,{className:"h-4 w-4"})})]}),(a==null?void 0:a.hasPassword)&&l.jsxs("div",{className:"mt-2 flex items-center text-sm text-muted-foreground",children:[l.jsx($x,{className:"mr-2 h-4 w-4"}),t("model_is_password_protected")]})]}),l.jsxs(Gs,{children:[l.jsx(ye,{variant:"secondary",onClick:()=>v(!1),children:t("close")}),l.jsxs(ye,{onClick:ve,children:[l.jsx(Xd,{className:"mr-2 h-4 w-4"}),t("open_in_browser")]})]})]})}),l.jsx($L,{isOpen:_,onClose:()=>w(!1),isUploading:j,uploadProgress:$,onUpload:I}),l.jsx(fte,{isOpen:b,onClose:()=>S(!1),onSuccess:()=>V()})]})}function op(){const{t,setLanguage:e}=on();kn();const{toast:n}=jr(),[r,i]=x.useState(null),[s,a]=x.useState("general");x.useEffect(()=>{const b=new URLSearchParams(window.location.search),S=b.get("modelId"),M=b.get("subject"),C=b.get("message");S&&i(S),M&&M.toLowerCase().includes("abuse")?(a("abuse"),e("en")):a(S?"quote":"general"),(M||C)&&d(P=>({...P,message:C||P.message}))},[]);const{data:o,isLoading:c}=mr({queryKey:["/api/models",r,"info"],enabled:!!r}),[u,d]=x.useState({name:"",email:"",phone:"",company:"",message:""}),[f,h]=x.useState(!1),[m,y]=x.useState(!1),[v,g]=x.useState(""),p=b=>{const{name:S,value:M}=b.target;d(C=>({...C,[S]:M}))},_=()=>s==="abuse"?u.message.trim()?null:t("abuse.details_required","Report details are required"):u.name.trim()?u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email.trim())?null:t("contact.error.email_invalid","Adres email jest nieprawidłowy"):t("contact.error.email_required","Adres email jest wymagany"):t("contact.error.name_required","Imię i nazwisko jest wymagane"),w=async b=>{b.preventDefault();const S=_();if(S){n({title:t("contact.error.validation","Błąd walidacji"),description:S,variant:"destructive"});return}h(!0),g("");try{const C=new URLSearchParams(window.location.search).get("subject")||"",P={name:s==="abuse"?"":u.name,email:s==="abuse"?"":u.email,phone:s==="abuse"?"":u.phone,company:s==="abuse"?"":u.company,message:u.message,modelId:r,subject:C},A=await fetch("/api/contact-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),E=await A.json();if(A.ok&&E.success)y(!0),n({title:s==="abuse"?t("abuse.report_sent","Your abuse report has been submitted. Thank you for helping us maintain a safe community."):t("contact.success.title","Wiadomość wysłana"),description:s==="abuse"?t("abuse.report_sent","Your abuse report has been submitted. Thank you for helping us maintain a safe community."):t("contact.success.description","Dziękujemy za wiadomość. Skontaktujemy się z Tobą najszybciej jak to możliwe."),variant:"default"}),d({name:"",email:"",phone:"",company:"",message:""});else throw new Error(E.message||"Failed to send message")}catch(M){const C=M instanceof Error?M.message:"Unknown error occurred";g(s==="abuse"?"Failed to submit abuse report. Please try again later.":t("contact.error.submit","Wystąpił błąd podczas wysyłania wiadomości. Spróbuj ponownie później.")),n({title:s==="abuse"?"Report Submission Failed":t("contact.error.title","Błąd wysyłania"),description:C,variant:"destructive"})}finally{h(!1)}};return l.jsx("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8 bg-gray-50",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("img",{src:ZI,alt:"FastCNC Logo",className:"h-12 mx-auto mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s==="abuse"?t("common.reportAbuse","Report Abuse"):t("contact.title","Formularz kontaktowy")}),l.jsx("p",{className:"text-lg text-gray-600",children:s==="abuse"?t("abuse.subtitle","Report inappropriate or offensive content"):t("contact.subtitle","Skontaktuj się z nami w sprawie realizacji Twojego projektu")})]}),l.jsxs(fn,{className:"bg-white shadow-md",children:[l.jsxs(Pn,{children:[l.jsx(Rn,{children:s==="abuse"?l.jsxs("div",{className:"flex items-center text-red-600",children:[l.jsx(Xa,{className:"w-5 h-5 mr-2"}),o?l.jsxs("div",{children:[l.jsxs("span",{children:[t("abuse.report_for_model","Report inappropriate content for model"),":"]}),l.jsx("span",{className:"ml-2 font-semibold",children:o.filename})]}):t("abuse.report_title","Report Inappropriate Content")]}):o?l.jsxs("div",{className:"flex items-center",children:[l.jsxs("span",{children:[t("contact.inquiry_about","Zapytanie o realizację modelu"),":"]}),l.jsx("span",{className:"ml-2 font-semibold text-blue-600",children:o.filename})]}):t("contact.general_inquiry","Zapytanie ogólne")}),l.jsx(vr,{children:s==="abuse"?t("abuse.form_instruction","Please provide details about the inappropriate content you wish to report. We take all reports seriously and will investigate promptly."):t("contact.form_instruction","Wypełnij poniższy formularz, aby wysłać zapytanie o wycenę lub realizację.")})]}),l.jsxs("form",{onSubmit:w,children:[l.jsxs(hn,{className:"space-y-4",children:[s!=="abuse"&&l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(St,{htmlFor:"name",children:[t("contact.name","Imię i nazwisko")," *"]}),l.jsx(_t,{id:"name",name:"name",value:u.name,onChange:p,placeholder:t("contact.name_placeholder","Wpisz swoje imię i nazwisko"),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(St,{htmlFor:"email",children:[t("contact.email","Adres email")," *"]}),l.jsx(_t,{id:"email",name:"email",type:"email",value:u.email,onChange:p,placeholder:t("contact.email_placeholder","twoj@email.com"),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"phone",children:t("contact.phone","Numer telefonu")}),l.jsx(_t,{id:"phone",name:"phone",value:u.phone,onChange:p,placeholder:t("contact.phone_placeholder","+48 123 456 789")})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(St,{htmlFor:"company",children:t("contact.company","Firma")}),l.jsx(_t,{id:"company",name:"company",value:u.company,onChange:p,placeholder:t("contact.company_placeholder","Nazwa firmy (opcjonalnie)")})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(St,{htmlFor:"message",children:[s==="abuse"?t("abuse.details_label","Report Details"):t("contact.message","Treść wiadomości")," *"]}),l.jsx(Ob,{id:"message",name:"message",value:u.message,onChange:p,placeholder:s==="abuse"?t("abuse.details_placeholder","Please describe the inappropriate content. Include specific details about what type of content violates our community guidelines (e.g., offensive imagery, inappropriate descriptions, copyright infringement, etc.)."):t("contact.message_placeholder","Opisz szczegóły swojego projektu, potrzebną ilość części, materiał, termin realizacji, itp."),rows:s==="abuse"?6:5,required:!0})]}),s==="abuse"&&l.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-md",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Xa,{className:"w-5 h-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-amber-800",children:[l.jsx("p",{className:"font-medium mb-1",children:t("abuse.guidelines_title","Community Guidelines")}),l.jsx("p",{children:t("abuse.guidelines_text","We do not tolerate inappropriate, offensive, or copyrighted content. All reports are reviewed by our moderation team and appropriate action will be taken.")})]})]})}),v&&l.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-sm text-red-600",children:[l.jsx(Xa,{className:"w-4 h-4 inline-block mr-2"}),v]}),m&&l.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md text-sm text-green-600",children:[l.jsx(ww,{className:"w-4 h-4 inline-block mr-2"}),s==="abuse"?t("abuse.report_sent","Your abuse report has been submitted. Thank you for helping us maintain a safe community."):t("contact.message_sent","Twoja wiadomość została wysłana. Dziękujemy za kontakt.")]})]}),l.jsxs(ro,{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[l.jsx("p",{className:"text-sm text-gray-500",children:t("contact.required_fields","Pola oznaczone * są wymagane.")}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsx(ye,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:t("contact.back","Powrót")}),l.jsx(ye,{type:"submit",className:s==="abuse"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700",disabled:f,children:f?l.jsxs(l.Fragment,{children:[l.jsx(mn,{className:"w-4 h-4 mr-2 animate-spin"}),s==="abuse"?t("abuse.submitting","Submitting Report..."):t("contact.sending","Wysyłanie...")]}):s==="abuse"?t("abuse.submit_report","Submit Report"):t("contact.send","Wyślij wiadomość")})]})]})]})]})]})})}function ZT(){const{t,language:e}=on(),[,n]=kn(),[r,i]=x.useState(""),[s,a]=x.useState(null),[o,c]=x.useState(null),{data:u,isLoading:d,error:f}=mr({queryKey:["/api/library"],queryFn:async()=>{const w=await fetch("/api/library");if(!w.ok)throw new Error("Błąd podczas pobierania biblioteki");return w.json()}}),{data:h}=mr({queryKey:["/api/categories"],queryFn:async()=>{const w=await fetch("/api/categories");if(!w.ok)throw new Error("Błąd podczas pobierania kategorii");return w.json()}}),m=(u==null?void 0:u.filter(w=>{var C;const b=((C=w.filename)==null?void 0:C.toLowerCase().includes(r.toLowerCase()))||w.tags&&Array.isArray(w.tags)&&w.tags.some(P=>P==null?void 0:P.toLowerCase().includes(r.toLowerCase())),S=!s||w.tags&&Array.isArray(w.tags)&&w.tags.includes(s),M=!o||w.categoryId===o;return b&&S&&M}))||[],y=Array.from(new Set((u==null?void 0:u.flatMap(w=>w.tags&&Array.isArray(w.tags)?w.tags:[]))||[])),v=w=>{if(!w)return"N/A";const b=["B","KB","MB","GB"],S=Math.floor(Math.log(w)/Math.log(1024));return Math.round(w/Math.pow(1024,S)*100)/100+" "+b[S]},g=w=>new Date(w).toLocaleDateString(),p=w=>{const b=w.publicId||w.id,S=e&&e!=="en"?`/${e}/library/model/${b}`:`/library/model/${b}`;n(S)},_=w=>{const b=w.publicId||w.id,S=document.createElement("a");S.href=`/api/public/models/${b}/file`,S.download=w.filename,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return d?l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>{}}),l.jsx("main",{className:"flex-grow",children:l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:l.jsx(mn,{className:"h-8 w-8 animate-spin text-blue-600"})})})}),l.jsx(Ws,{})]}):f?l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>{}}),l.jsx("main",{className:"flex-grow",children:l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:t("error")}),l.jsx("p",{className:"text-gray-600",children:t("failed_to_load_library")})]})})}),l.jsx(Ws,{})]}):l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>{}}),l.jsx("main",{className:"flex-grow",children:l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:t("public_cad_library")}),l.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:t("public_library_description")})]}),l.jsxs("div",{className:"mb-8 space-y-4",children:[l.jsxs("div",{className:"relative max-w-md mx-auto",children:[l.jsx(Sw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),l.jsx(_t,{type:"text",placeholder:t("search_models_tags"),value:r,onChange:w=>i(w.target.value),className:"pl-10"})]}),h&&h.length>0&&l.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[l.jsx(tr,{variant:o===null?"default":"outline",className:"cursor-pointer",onClick:()=>c(null),children:t("all_categories")}),h.map(w=>l.jsx(tr,{variant:o===w.id?"default":"outline",className:"cursor-pointer",onClick:()=>c(o===w.id?null:w.id),children:t(w.slug)},w.id))]}),y.length>0&&l.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[l.jsxs("span",{className:"text-sm text-gray-600 mr-2",children:[t("tags"),":"]}),l.jsx(tr,{variant:s===null?"secondary":"outline",className:"cursor-pointer",onClick:()=>a(null),children:t("all_tags")}),y.map(w=>l.jsx(tr,{variant:s===w?"secondary":"outline",className:"cursor-pointer",onClick:()=>a(s===w?null:w),children:w},w))]})]}),l.jsx("div",{className:"text-center mb-6",children:l.jsx("p",{className:"text-gray-600",children:t("showing_models").replace("{count}",m.length.toString()).replace("{total}",((u==null?void 0:u.length)||0).toString())})}),m.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx(no,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t("no_models_found")}),l.jsx("p",{className:"text-gray-600",children:t(r?"try_different_search":"no_public_models_yet")})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(w=>{var b;return l.jsxs(fn,{className:"hover:shadow-lg transition-shadow",children:[l.jsx(Pn,{className:"pb-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(DF,{modelId:w.id,filename:w.filename,format:w.fileType,className:"w-16 h-16 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx(Rn,{className:"text-lg font-semibold text-gray-900 truncate",children:w.filename}),l.jsx(vr,{className:"text-sm text-gray-600",children:((b=w.fileType)==null?void 0:b.toUpperCase())||"Unknown"})]})]})}),l.jsxs(hn,{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xw,{className:"h-4 w-4"}),g(w.uploadDate)]}),w.fileSize&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(no,{className:"h-4 w-4"}),v(w.fileSize)]})]}),w.description&&l.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:w.description}),w.dimensions&&l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsxs("strong",{children:[t("cad_library_dimensions"),":"]}),l.jsxs("span",{className:"ml-1",children:[w.dimensions.width,"×",w.dimensions.height,w.dimensions.depth&&`×${w.dimensions.depth}`," mm"]})]}),w.tags&&Array.isArray(w.tags)&&w.tags.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-1",children:[w.tags.slice(0,3).map((S,M)=>l.jsx(tr,{variant:"secondary",className:"text-xs",children:S},M)),w.tags.length>3&&l.jsxs(tr,{variant:"outline",className:"text-xs",children:["+",w.tags.length-3]})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsxs(ye,{size:"sm",variant:"default",onClick:()=>p(w),className:"flex-1",children:[l.jsx(n2,{className:"h-4 w-4 mr-1"}),t("cad_library_view")]}),l.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>_(w),className:"flex-1",children:[l.jsx(bw,{className:"h-4 w-4 mr-1"}),t("cad_library_download")]})]})]})]},w.id)})})]})}),l.jsx(Ws,{})]})}function KT(){var L,O;const{t,language:e}=on(),[,n]=Cc("/library/model/:publicId"),[,r]=Cc("/:lang/library/model/:publicId"),[,i]=kn();jr();const[s,a]=x.useState(null),o=(n==null?void 0:n.publicId)||(r==null?void 0:r.publicId);console.log("PublicModelPage rendered with params:",n),console.log("PublicId:",o);const{data:c,isLoading:u,error:d}=mr({queryKey:[`/api/public/models/${o}`],enabled:!!o}),{data:f,isLoading:h}=mr({queryKey:[`/api/public/models/${o}/description`],enabled:!!o}),{data:m,isLoading:y,error:v}=mr({queryKey:["public-model-gallery",o],queryFn:async()=>{console.log("Fetching gallery for publicId:",o);const k=await fetch(`/api/public/models/${o}/gallery`);if(!k.ok)throw new Error("Failed to fetch gallery");const j=await k.json();return console.log("Gallery data:",j),j},enabled:!!o}),{data:g}=mr({queryKey:["public-model-tags",c==null?void 0:c.id],queryFn:async()=>{if(!(c!=null&&c.id))return[];const k=await fetch(`/api/models/${c.id}/tags`);return k.ok?k.json():[]},enabled:!!(c!=null&&c.id)}),{data:p}=mr({queryKey:["categories"],queryFn:async()=>{const k=await fetch("/api/categories");if(!k.ok)throw new Error("Failed to fetch categories");return k.json()}});console.log("Gallery state:",{galleryImages:m,isLoadingGallery:y,galleryError:v});const _=k=>k<1024?`${k} B`:k<1024*1024?`${(k/1024).toFixed(1)} KB`:`${(k/(1024*1024)).toFixed(1)} MB`,w=k=>{var $;const j=($=k.format)==null?void 0:$.toLowerCase();return j==="stl"?l.jsx(no,{className:"h-4 w-4 text-blue-500"}):j==="dxf"||j==="dwg"?l.jsx(Ep,{className:"h-4 w-4 text-green-500"}):l.jsx(no,{className:"h-4 w-4 text-gray-500"})},b=()=>{if(!c||!o)return;const k=`/api/public/models/${o}/file`,j=document.createElement("a");j.href=k,j.download=c.filename,document.body.appendChild(j),j.click(),document.body.removeChild(j)},S=k=>{a(k)},M=()=>{if(!f)return null;const k=`description${e.charAt(0).toUpperCase()+e.slice(1)}`;return f[k]||f.descriptionEn||null},C=()=>{if(!(c!=null&&c.categoryId)||!p)return null;const k=p.find($=>$.id===c.categoryId);if(!k)return null;const j=`name${e.charAt(0).toUpperCase()+e.slice(1)}`;return k[j]||k.nameEn},P=k=>{const j=`name${e.charAt(0).toUpperCase()+e.slice(1)}`;return k[j]||k.nameEn},A=k=>`/api/models/${c==null?void 0:c.id}/gallery/${k.id}`,E=()=>{if(!c||!o)return;const k=`Report Abuse - Model: ${c.filename}`,j=`${window.location.origin}/library/model/${o}`,$=`I would like to report inappropriate content for the following model:
    
Model: ${c.filename}
URL: ${j}
Model ID: ${c.id}

Reason for report:
[Please describe the issue]`,U="/en/contact",X=new URLSearchParams({subject:k,message:$,modelId:c.id.toString()});i(`${U}?${X.toString()}`)};return u?l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>{}}),l.jsx("main",{className:"flex-grow",children:l.jsx("div",{className:"container mx-auto py-6",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsx(Ja,{className:"h-96 w-full"})}),l.jsx("div",{children:l.jsx(Ja,{className:"h-64 w-full"})})]})})}),l.jsx(Ws,{})]}):d||!c?l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>{}}),l.jsx("main",{className:"flex-grow",children:l.jsx("div",{className:"container mx-auto py-6",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-destructive/10 rounded-lg",children:[l.jsx(Mw,{className:"h-12 w-12 text-destructive mb-4"}),l.jsx("h2",{className:"text-2xl font-bold mb-2",children:t("common.error")||"Error"}),l.jsx("p",{className:"text-center mb-4",children:t("library.modelNotFound")||"Model not found"}),l.jsxs(ye,{onClick:()=>window.history.back(),children:[l.jsx(um,{className:"h-4 w-4 mr-2"}),t("common.goBack")||"Go Back"]})]})})}),l.jsx(Ws,{})]}):l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Hs,{onUploadClick:()=>{}}),l.jsx("main",{className:"flex-grow",children:l.jsxs("div",{className:"container mx-auto py-6",children:[l.jsxs(ye,{variant:"ghost",className:"mb-4",onClick:()=>{const k=e&&e!=="en"?`/${e}/cad-library`:"/cad-library";i(k)},children:[l.jsx(um,{className:"h-4 w-4 mr-2"}),t("common.backToLibrary")||"Back to Library"]}),l.jsxs(fn,{className:"mb-6",children:[l.jsx(Pn,{children:l.jsxs(Rn,{className:"flex items-center gap-2",children:[w(c),c.filename]})}),l.jsxs(hn,{children:[l.jsx("div",{className:"aspect-video bg-muted/30 rounded-lg overflow-hidden",children:l.jsx(Lg,{modelId:c.id,isPublic:!0,publicId:o})}),l.jsxs("div",{className:"flex items-center justify-between mt-4",children:[l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.jsx("span",{className:"uppercase font-medium",children:c.format}),l.jsx("span",{children:"•"}),l.jsx("span",{children:_(c.filesize)})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ye,{onClick:b,children:[l.jsx(bw,{className:"h-4 w-4 mr-2"}),t("common.download")||"Download"]}),l.jsxs(ye,{variant:"outline",onClick:E,children:[l.jsx(TV,{className:"h-4 w-4 mr-2"}),t("common.reportAbuse")||"Report Abuse"]})]})]})]})]}),l.jsx(fn,{className:"mb-6",children:l.jsx(hn,{className:"p-0",children:l.jsx(Mb,{modelType:((L=c.format)==null?void 0:L.toLowerCase())==="stl"?"3d":((O=c.format)==null?void 0:O.toLowerCase())==="dxf"?"2d":"unknown",modelInfo:c})})}),(M()||C()||g&&g.length>0)&&l.jsxs(fn,{className:"mb-6",children:[l.jsx(Pn,{children:l.jsx(Rn,{children:t("common.description")||"Description"})}),l.jsxs(hn,{className:"space-y-4",children:[C()&&l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium",children:[t("common.category")||"Category",":"]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:C()})]}),g&&g.length>0&&l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium",children:[t("common.tags")||"Tags",":"]}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:g.map(k=>l.jsx(tr,{variant:"secondary",className:"text-xs",style:{backgroundColor:k.color+"20",color:k.color,borderColor:k.color},children:P(k)},k.id))})]}),M()&&l.jsx("div",{children:l.jsx("div",{className:"prose prose-sm max-w-none",children:l.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:M()})})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(fn,{children:[l.jsx(Pn,{children:l.jsx(Rn,{children:t("common.modelInfo")||"Model Information"})}),l.jsxs(hn,{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium",children:[t("common.filename")||"Filename",":"]}),l.jsx("p",{className:"text-sm text-muted-foreground break-all",children:c.filename})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium",children:[t("common.format")||"Format",":"]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:c.format})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium",children:[t("common.filesize")||"File Size",":"]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:_(c.filesize)})]}),c.tags&&c.tags.length>0&&l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium",children:[t("common.tags")||"Tags",":"]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.tags.map(k=>l.jsx(tr,{variant:"secondary",className:"text-xs",children:k},k))})]})]})]}),m&&m.length>0&&l.jsxs(fn,{children:[l.jsx(Pn,{children:l.jsxs(Rn,{className:"flex items-center gap-2",children:[l.jsx(yg,{className:"h-5 w-5"}),t("common.gallery")||"Gallery"," (",m.length,")"]})}),l.jsx(hn,{children:y?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:Array.from({length:4}).map((k,j)=>l.jsx(Ja,{className:"aspect-square"},j))}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:m.map(k=>l.jsx("div",{className:"aspect-square bg-muted/30 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>S(k),children:l.jsx("img",{src:A(k),alt:k.originalName,className:"w-full h-full object-cover",loading:"lazy"})},k.id))})})]})]})]})}),l.jsx(fs,{open:!!s,onOpenChange:()=>a(null),children:l.jsxs(zi,{className:"max-w-4xl max-h-[90vh]",children:[l.jsx(Oi,{children:l.jsx(Fi,{children:s==null?void 0:s.originalName})}),s&&l.jsx("div",{className:"flex justify-center",children:l.jsx("img",{src:A(s),alt:s.originalName,className:"max-w-full max-h-[70vh] object-contain"})})]})}),l.jsx(Ws,{})]})}function YT({children:t,allowClient:e=!0,allowAdmin:n=!0,redirectTo:r="/auth"}){const{user:i,isLoading:s}=Al();return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(mn,{className:"h-8 w-8 animate-spin text-border"})}):i?e&&i.isClient||n&&i.isAdmin?l.jsx(l.Fragment,{children:t}):l.jsx(om,{to:r}):l.jsx(om,{to:r})}function QT({children:t}){kn();const[e,n]=x.useState(!0),[r,i]=x.useState(!1);return x.useEffect(()=>{(()=>{const a=localStorage.getItem("adminToken"),o=localStorage.getItem("adminUser");if(!a||!o){i(!1),n(!1);return}try{const c=JSON.parse(o);c&&c.isAdmin?i(!0):i(!1)}catch(c){console.error("Error parsing admin user data:",c),i(!1)}n(!1)})()},[]),e?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(mn,{className:"h-8 w-8 animate-spin text-primary"})}):r?l.jsx(l.Fragment,{children:t}):l.jsx(om,{to:"/admin/login"})}function pte(){return l.jsx(lB,{client:Fa,children:l.jsx(YH,{children:l.jsxs(M8,{children:[l.jsx(mte,{}),l.jsx(VH,{})]})})})}function mte(){return l.jsx(gte,{})}function gte(){on();const[t]=kn();return console.log("Current location:",t),l.jsx("div",{className:"flex flex-col min-h-screen",children:l.jsx("main",{className:"flex-grow",children:l.jsxs(V4,{children:[l.jsx(Ft,{path:"/auth",children:()=>l.jsx($T,{})}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/auth",children:()=>l.jsx($T,{})}),l.jsx(Ft,{path:"/",component:lM}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)",component:lM}),l.jsx(Ft,{path:"/shared/:shareId",children:e=>l.jsx(ip,{shareId:e.shareId})}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/shared/:shareId",children:e=>{const n=e.lang;return l.jsx(ip,{shareId:e.shareId,language:n})}}),l.jsx(Ft,{path:"/models/:modelId",children:e=>l.jsx(ip,{shareId:e.modelId,isPublicModel:!0})}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/models/:modelId",children:e=>{const n=e.lang;return l.jsx(ip,{shareId:e.modelId,language:n,isPublicModel:!0})}}),l.jsx(Ft,{path:"/client/dashboard",children:()=>l.jsx(YT,{allowClient:!0,allowAdmin:!1,children:l.jsx(XT,{})})}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/client/dashboard",children:()=>l.jsx(YT,{allowClient:!0,allowAdmin:!1,children:l.jsx(XT,{})})}),l.jsx(Ft,{path:"/upload",component:_T}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/upload",component:_T}),l.jsx(Ft,{path:"/test3d",component:yT}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/test3d",component:yT}),l.jsx(Ft,{path:"/delete-share/:shareId/:token",component:wT}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/delete-share/:shareId/:token",component:wT}),l.jsx(Ft,{path:"/cad-library",component:ZT}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/cad-library",component:ZT}),l.jsx(Ft,{path:"/library/model/:publicId",component:KT}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/library/model/:publicId",component:KT}),l.jsx(Ft,{path:"/contact",component:op}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/contact",component:op}),l.jsx(Ft,{path:"/quote",component:op}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/quote",component:op}),l.jsx(Ft,{path:"/admin/login",component:VT}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/admin/login",component:VT}),l.jsx(Ft,{path:"/admin/dashboard",children:()=>l.jsx(QT,{children:l.jsx(WT,{})})}),l.jsx(Ft,{path:"/:lang(en|pl|cs|de|fr)/admin/dashboard",children:()=>l.jsx(QT,{children:l.jsx(WT,{})})}),l.jsx(Ft,{component:QH})]})})})}sD(document.getElementById("root")).render(l.jsx(pte,{}));export{tr as B,fn as C,Ja as S,Bg as T,Gf as a,hs as b,ps as c,hn as d,l as j,x as r,on as u};
